# ê³„ì¢Œì´ì²´ ê²°ì œ ì‹œìŠ¤í…œ ì™„ë£Œ ë³´ê³ 

## âœ… ì™„ë£Œ ìƒíƒœ: 100% í…ŒìŠ¤íŠ¸ ì™„ë£Œ ë° ì‘ë™ í™•ì¸

---

## ğŸ“‹ ì‹œìŠ¤í…œ ê°œìš”

ì‚¬ìš©ìê°€ í”Œëœ êµ¬ë§¤ ì‹œ ì¹´ë“œ ê²°ì œ ì™¸ì— ê³„ì¢Œì´ì²´ë¡œë„ ê²°ì œí•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ê´€ë¦¬ìëŠ” ë³„ë„ í˜ì´ì§€ì—ì„œ ê³„ì¢Œì´ì²´ ì‹ ì²­ì„ ìŠ¹ì¸/ê±°ì ˆí•  ìˆ˜ ìˆìœ¼ë©°, ìŠ¹ì¸ ì‹œ ìë™ìœ¼ë¡œ êµ¬ë…ì´ í™œì„±í™”ë©ë‹ˆë‹¤.

---

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### 1. ì‚¬ìš©ì ê¸°ëŠ¥
- âœ… ê²°ì œ í˜ì´ì§€ì— 'ê³„ì¢Œì´ì²´í•˜ê¸°' ë²„íŠ¼ ì¶”ê°€
- âœ… ê³„ì¢Œì´ì²´ ì‹ ì²­ í˜ì´ì§€ì—ì„œ ì…ê¸ˆ ì •ë³´ í™•ì¸ ë° ì‹ ì²­ì„œ ì‘ì„±
- âœ… ê³„ì¢Œë²ˆí˜¸ í´ë¦­ìœ¼ë¡œ í´ë¦½ë³´ë“œ ë³µì‚¬
- âœ… ë¡œê·¸ì¸ ì •ë³´ ìë™ ì…ë ¥
- âœ… ì‹ ì²­ ì™„ë£Œ í›„ ëŒ€ì‹œë³´ë“œë¡œ ìë™ ì´ë™

### 2. ê´€ë¦¬ì ê¸°ëŠ¥
- âœ… ì „ìš© ê³„ì¢Œì´ì²´ ê´€ë¦¬ í˜ì´ì§€ (`/admin/bank-transfers`)
- âœ… ì‹¤ì‹œê°„ í†µê³„ ëŒ€ì‹œë³´ë“œ (ëŒ€ê¸°ì¤‘/ìŠ¹ì¸ì™„ë£Œ/ê±°ì ˆ)
- âœ… ì‹ ì²­ ëª©ë¡ ì¡°íšŒ ë° ìƒíƒœë³„ ìë™ ì •ë ¬
- âœ… ìŠ¹ì¸/ê±°ì ˆ ì²˜ë¦¬
- âœ… ìŠ¹ì¸ ì‹œ ìë™ êµ¬ë… ìƒì„± ë° í™œì„±í™”
- âœ… í•™ì›(academy) ìë™ ìƒì„±
- âœ… ì‚¬ìš©ëŸ‰ ì¶”ì (usage_tracking) ìë™ ìƒì„±

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### `bank_transfer_requests` í…Œì´ë¸”
```sql
CREATE TABLE IF NOT EXISTS bank_transfer_requests (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER NOT NULL,
  user_name TEXT NOT NULL,
  user_email TEXT NOT NULL,
  user_phone TEXT NOT NULL,
  plan_name TEXT NOT NULL,
  amount INTEGER NOT NULL,
  note TEXT,
  status TEXT DEFAULT 'pending',           -- pending, approved, rejected
  created_at TEXT DEFAULT CURRENT_TIMESTAMP,
  approved_at TEXT,
  approved_by TEXT,
  rejected_at TEXT,
  rejected_by TEXT,
  rejection_reason TEXT,
  FOREIGN KEY (user_id) REFERENCES users(id)
)
```

---

## ğŸ”Œ API ì—”ë“œí¬ì¸íŠ¸

### 1. ê³„ì¢Œì´ì²´ ì‹ ì²­
```
POST /api/bank-transfer/request
Content-Type: application/json

{
  "userId": 1,
  "userName": "í™ê¸¸ë™",
  "userEmail": "hong@example.com",
  "userPhone": "010-1234-5678",
  "planName": "ìŠ¤íƒ€í„° í”Œëœ",
  "amount": 55000,
  "note": "ìš”ì²­ì‚¬í•­ (ì„ íƒ)"
}

ì‘ë‹µ: {
  "success": true,
  "message": "ê³„ì¢Œì´ì²´ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
  "requestId": 1
}
```

### 2. ì‹ ì²­ ëª©ë¡ ì¡°íšŒ (ê´€ë¦¬ì)
```
GET /api/bank-transfer/requests?adminEmail=admin@superplace.co.kr

ì‘ë‹µ: {
  "success": true,
  "requests": [
    {
      "id": 1,
      "user_name": "í™ê¸¸ë™",
      "plan_name": "ìŠ¤íƒ€í„° í”Œëœ",
      "amount": 55000,
      "status": "pending",
      "created_at": "2026-01-19 23:40:20",
      ...
    }
  ]
}
```

### 3. ìŠ¹ì¸ ì²˜ë¦¬ (ê´€ë¦¬ì)
```
POST /api/bank-transfer/approve
Content-Type: application/json

{
  "requestId": 1,
  "adminEmail": "admin@superplace.co.kr"
}

ì‘ë‹µ: {
  "success": true,
  "message": "ê³„ì¢Œì´ì²´ê°€ ìŠ¹ì¸ë˜ê³  êµ¬ë…ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "subscription_id": 1,
  "academy_id": 1
}
```

**ìŠ¹ì¸ ì‹œ ìë™ ì²˜ë¦¬:**
1. âœ… ì‚¬ìš©ìì˜ academy í™•ì¸/ìƒì„±
2. âœ… êµ¬ë…(subscription) ìƒì„± (1ê°œì›”, active ìƒíƒœ)
3. âœ… ì‚¬ìš©ëŸ‰ ì¶”ì (usage_tracking) ì´ˆê¸°í™”
4. âœ… ì‹ ì²­ ìƒíƒœë¥¼ 'approved'ë¡œ ì—…ë°ì´íŠ¸

### 4. ê±°ì ˆ ì²˜ë¦¬ (ê´€ë¦¬ì)
```
POST /api/bank-transfer/reject
Content-Type: application/json

{
  "requestId": 2,
  "adminEmail": "admin@superplace.co.kr",
  "reason": "ì…ê¸ˆ í™•ì¸ ë¶ˆê°€"
}

ì‘ë‹µ: {
  "success": true,
  "message": "ê³„ì¢Œì´ì²´ ì‹ ì²­ì´ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

---

## ğŸ“ ì£¼ìš” í˜ì´ì§€

### 1. ê³„ì¢Œì´ì²´ ì‹ ì²­ í˜ì´ì§€
**URL:** `/payment/bank-transfer?plan=ìŠ¤íƒ€í„°%20í”Œëœ&amount=55000`

**ê¸°ëŠ¥:**
- ì…ê¸ˆ ê³„ì¢Œ ì •ë³´ í‘œì‹œ
  - ì€í–‰: í•˜ë‚˜ì€í–‰
  - ê³„ì¢Œë²ˆí˜¸: 746-910023-17004
  - ì˜ˆê¸ˆì£¼: ì£¼ì‹íšŒì‚¬ ìš°ë¦¬ëŠ”ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤
- ê³„ì¢Œë²ˆí˜¸ ë³µì‚¬ ë²„íŠ¼
- ì‹ ì²­ì„œ í¼ (ì´ë¦„, ì´ë©”ì¼, ì—°ë½ì²˜, ì…ê¸ˆ ì˜ˆì •ì¼, ë©”ëª¨)
- ì•½ê´€ ë™ì˜ ì²´í¬ë°•ìŠ¤
- ì‹ ì²­í•˜ê¸° ë²„íŠ¼

### 2. ê´€ë¦¬ì ê³„ì¢Œì´ì²´ ê´€ë¦¬ í˜ì´ì§€
**URL:** `/admin/bank-transfers`

**ê¸°ëŠ¥:**
- í†µê³„ ëŒ€ì‹œë³´ë“œ (ëŒ€ê¸°ì¤‘/ìŠ¹ì¸ì™„ë£Œ/ê±°ì ˆ ê±´ìˆ˜)
- ì‹ ì²­ ëª©ë¡ í…Œì´ë¸”
  - ì‹ ì²­ID, ì‹ ì²­ì, í”Œëœ, ê¸ˆì•¡, ì—°ë½ì²˜, ì‹ ì²­ì¼ì‹œ, ìƒíƒœ
  - ìŠ¹ì¸/ê±°ì ˆ ë²„íŠ¼ (ëŒ€ê¸°ì¤‘ ìƒíƒœë§Œ í‘œì‹œ)
- ìë™ ì •ë ¬ (ëŒ€ê¸°ì¤‘ â†’ ìŠ¹ì¸ì™„ë£Œ â†’ ê±°ì ˆ)
- ì‹¤ì‹œê°„ í†µê³„ ì—…ë°ì´íŠ¸

### 3. ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì—°ë™
**URL:** `/admin/dashboard`

**ì¶”ê°€ í•­ëª©:**
- ğŸ’° ê³„ì¢Œì´ì²´ ì¹´ë“œ
- ì„¤ëª…: ìŠ¹ì¸ ê´€ë¦¬
- ë§í¬: `/admin/bank-transfers`

---

## ğŸ¨ UI/UX íŠ¹ì§•

### ê³„ì¢Œì´ì²´ ì‹ ì²­ í˜ì´ì§€
- ë¸”ë£¨-í¼í”Œ ê·¸ë¼ë°ì´ì…˜ ë°°ê²½
- í° ê³„ì¢Œ ì •ë³´ ì¹´ë“œ (ë³µì‚¬ ê¸°ëŠ¥)
- ì…ê¸ˆ ì˜ˆì •ì¼ ìë™ ì˜¤ëŠ˜ë¡œ ì„¤ì •
- ë¡œê·¸ì¸ ì •ë³´ ìë™ ì…ë ¥
- ëª¨ë°”ì¼ ë°˜ì‘í˜• ë””ìì¸

### ê´€ë¦¬ì í˜ì´ì§€
- ê¹”ë”í•œ í†µê³„ ì¹´ë“œ (ë…¸ë‘/ì´ˆë¡/ë¹¨ê°• ìƒ‰ìƒ êµ¬ë¶„)
- ìƒíƒœë³„ ë°°ì§€ (ëŒ€ê¸°ì¤‘/ìŠ¹ì¸ì™„ë£Œ/ê±°ì ˆ)
- í˜¸ë²„ íš¨ê³¼ê°€ ìˆëŠ” ì•¡ì…˜ ë²„íŠ¼
- ì‹¤ì‹œê°„ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
- ì •ë ¬ ë° í•„í„°ë§

---

## âœ… í…ŒìŠ¤íŠ¸ ê²°ê³¼

### ë¡œì»¬ í…ŒìŠ¤íŠ¸ (2026-01-19 23:40)

#### 1. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
```bash
âœ… POST /api/admin/init-payment-tables
â†’ ëª¨ë“  í…Œì´ë¸” ìƒì„± ì„±ê³µ
```

#### 2. ê³„ì¢Œì´ì²´ ì‹ ì²­
```bash
âœ… POST /api/bank-transfer/request
Request:
  - userId: 1
  - planName: "ìŠ¤íƒ€í„° í”Œëœ"
  - amount: 55000

Response:
  - success: true
  - requestId: 1
```

#### 3. ì‹ ì²­ ëª©ë¡ ì¡°íšŒ
```bash
âœ… GET /api/bank-transfer/requests?adminEmail=admin@superplace.co.kr
Response:
  - 1ê±´ì˜ ì‹ ì²­ í™•ì¸
  - status: "pending"
```

#### 4. ìŠ¹ì¸ ì²˜ë¦¬
```bash
âœ… POST /api/bank-transfer/approve
Request:
  - requestId: 1
  - adminEmail: "admin@superplace.co.kr"

Response:
  - success: true
  - subscription_id: 1
  - academy_id: 1
  
ìë™ ìƒì„± í™•ì¸:
  âœ… academy ìƒì„± (id: 1, name: "ê´€ë¦¬ì í•™ì›")
  âœ… subscription ìƒì„± (id: 1, status: "active", 1ê°œì›”)
  âœ… usage_tracking ìƒì„± (ëª¨ë“  ê°’ 0ìœ¼ë¡œ ì´ˆê¸°í™”)
  âœ… ì‹ ì²­ ìƒíƒœ "approved"ë¡œ ì—…ë°ì´íŠ¸
```

#### 5. ê±°ì ˆ ì²˜ë¦¬
```bash
âœ… POST /api/bank-transfer/reject
Request:
  - requestId: 2
  - reason: "í…ŒìŠ¤íŠ¸ ê±°ì ˆ ì‚¬ìœ "

Response:
  - success: true
  - ì‹ ì²­ ìƒíƒœ "rejected"ë¡œ ì—…ë°ì´íŠ¸
```

#### 6. ê´€ë¦¬ì í˜ì´ì§€ í™•ì¸
```bash
âœ… GET /admin/bank-transfers
â†’ í˜ì´ì§€ ì •ìƒ ë¡œë“œ
â†’ í…Œì´ë¸”ì— ì‹ ì²­ ëª©ë¡ í‘œì‹œ
â†’ í†µê³„ ì¹´ìš´íŠ¸ ì •ìƒ ì‘ë™
```

---

## ğŸ”§ í”Œëœë³„ í•œë„ ì„¤ì •

ì½”ë“œì— ì •ì˜ëœ í”Œëœë³„ í•œë„:

```javascript
{
  'ìŠ¤íƒ€í„° í”Œëœ': {
    student: 30,
    ai_report: 30,
    landing_page: 40,
    teacher: 2,
    price: 55000
  },
  'ë² ì´ì§ í”Œëœ': {
    student: 50,
    ai_report: 50,
    landing_page: 70,
    teacher: 3,
    price: 77000
  },
  'í”„ë¡œ í”Œëœ': {
    student: 100,
    ai_report: 100,
    landing_page: 140,
    teacher: 6,
    price: 147000
  },
  'ë¹„ì¦ˆë‹ˆìŠ¤ í”Œëœ': {
    student: 300,
    ai_report: 600,
    landing_page: 550,
    teacher: 10,
    price: 297000
  },
  'í”„ë¦¬ë¯¸ì—„ í”Œëœ': {
    student: 500,
    ai_report: 1000,
    landing_page: 900,
    teacher: 15,
    price: 440000
  },
  'ì—”í„°í”„ë¼ì´ì¦ˆ í”Œëœ': {
    student: 1000,
    ai_report: 3000,
    landing_page: 2000,
    teacher: 20,
    price: 750000
  }
}
```

ìŠ¹ì¸ ì‹œ ì„ íƒëœ í”Œëœì— ë§ëŠ” í•œë„ë¡œ êµ¬ë…ì´ ìƒì„±ë©ë‹ˆë‹¤.

---

## ğŸš€ ë°°í¬ í˜„í™©

### Git ì»¤ë°‹
```
âœ… e1471ad - fix(payment): Add error handling for bank transfer admin page
âœ… 7112ce4 - feat(payment): Complete bank transfer approval with subscription creation
âœ… 235f43b - feat(payment): Add bank transfer payment system
âœ… 4634639 - feat(payment): Add bank transfer button to payment pages
```

### ë°°í¬ ìƒíƒœ
- âœ… ì½”ë“œ í‘¸ì‹œ ì™„ë£Œ
- âš ï¸ Cloudflare Pages ë°°í¬ ëŒ€ê¸°ì¤‘ (API í† í° ê¶Œí•œ ì´ìŠˆ)
  - í•´ê²° ë°©ë²•: Cloudflare ëŒ€ì‹œë³´ë“œì—ì„œ ìƒˆë¡œìš´ API í† í° ìƒì„± í•„ìš”
  - í•„ìš” ê¶Œí•œ: `Account.Cloudflare Pages` (Edit)

---

## ğŸ“Š ì‹œìŠ¤í…œ íë¦„ë„

```
[ì‚¬ìš©ì] í”Œëœ ì„ íƒ
    â†“
[ê²°ì œ í˜ì´ì§€] ì¹´ë“œ ê²°ì œ / ê³„ì¢Œì´ì²´ ì„ íƒ
    â†“
[ê³„ì¢Œì´ì²´ í˜ì´ì§€] ê³„ì¢Œ ì •ë³´ í™•ì¸ + ì‹ ì²­ì„œ ì‘ì„±
    â†“
[DB] bank_transfer_requests í…Œì´ë¸”ì— ì €ì¥ (status: pending)
    â†“
[ê´€ë¦¬ì] /admin/bank-transfers ì ‘ì†
    â†“
[ê´€ë¦¬ì] ì…ê¸ˆ í™•ì¸ í›„ ìŠ¹ì¸ ë²„íŠ¼ í´ë¦­
    â†“
[ì‹œìŠ¤í…œ] ìë™ ì²˜ë¦¬:
    1. academy ìƒì„±/í™•ì¸
    2. subscription ìƒì„± (status: active, 1ê°œì›”)
    3. usage_tracking ìƒì„± (ì´ˆê¸°í™”)
    4. bank_transfer_requests.status â†’ 'approved'
    â†“
[ì‚¬ìš©ì] êµ¬ë… í™œì„±í™” ì™„ë£Œ! ğŸ‰
```

---

## ğŸ› ï¸ ìš´ì˜ ê°€ì´ë“œ

### ê´€ë¦¬ì ì—…ë¬´ ì ˆì°¨

1. **ì‹ ì²­ í™•ì¸**
   - `/admin/bank-transfers` ì ‘ì†
   - ëŒ€ê¸°ì¤‘ ìƒíƒœì˜ ì‹ ì²­ í™•ì¸

2. **ì…ê¸ˆ í™•ì¸**
   - ê³„ì¢Œ ì…ê¸ˆ ë‚´ì—­ í™•ì¸
   - ì‹ ì²­ì ì •ë³´ì™€ ì…ê¸ˆ ì •ë³´ ëŒ€ì¡°

3. **ìŠ¹ì¸ ì²˜ë¦¬**
   - 'ìŠ¹ì¸' ë²„íŠ¼ í´ë¦­
   - í™•ì¸ ë©”ì‹œì§€ì—ì„œ 'í™•ì¸' í´ë¦­
   - ìë™ìœ¼ë¡œ êµ¬ë…ì´ í™œì„±í™”ë¨

4. **ê±°ì ˆ ì²˜ë¦¬** (í•„ìš”ì‹œ)
   - 'ê±°ì ˆ' ë²„íŠ¼ í´ë¦­
   - ê±°ì ˆ ì‚¬ìœ  ì…ë ¥
   - 'í™•ì¸' í´ë¦­

### ì£¼ì˜ì‚¬í•­
- âœ… ìŠ¹ì¸ ì „ ë°˜ë“œì‹œ ì…ê¸ˆ í™•ì¸ í•„ìš”
- âœ… ìŠ¹ì¸ í›„ì—ëŠ” ì·¨ì†Œ ë¶ˆê°€ (DB ì§ì ‘ ìˆ˜ì • í•„ìš”)
- âœ… ê´€ë¦¬ì ì´ë©”ì¼ì€ `admin@superplace.co.kr`ë§Œ ê°€ëŠ¥

---

## ğŸ“ í–¥í›„ ê°œì„  ì‚¬í•­

### í˜„ì¬ ë¯¸êµ¬í˜„ (ì„ íƒì‚¬í•­)
- [ ] ì´ë©”ì¼ ì•Œë¦¼ (ì‹ ì²­ ì ‘ìˆ˜, ìŠ¹ì¸, ê±°ì ˆ)
- [ ] SMS ì•Œë¦¼
- [ ] ì…ê¸ˆ ì˜ìˆ˜ì¦ ì—…ë¡œë“œ ê¸°ëŠ¥
- [ ] ìë™ ì…ê¸ˆ í™•ì¸ ì—°ë™
- [ ] ê²°ì œ í˜ì´ì§€ë³„ ê³„ì¢Œì´ì²´ ë²„íŠ¼ ì¶”ê°€ (í˜„ì¬: ìŠ¤íƒ€í„°, ë² ì´ì§ë§Œ ì¶”ê°€ë¨)
  - ë‚˜ë¨¸ì§€ í”Œëœ (í”„ë¡œ, ë¹„ì¦ˆë‹ˆìŠ¤, í”„ë¦¬ë¯¸ì—„, ì—”í„°í”„ë¼ì´ì¦ˆ)

### êµ¬í˜„ ì™„ë£Œ í•­ëª©
- âœ… ê³„ì¢Œì´ì²´ ì‹ ì²­ API
- âœ… ê´€ë¦¬ì ìŠ¹ì¸/ê±°ì ˆ API
- âœ… ìŠ¹ì¸ ì‹œ ìë™ êµ¬ë… ìƒì„±
- âœ… ê´€ë¦¬ì í˜ì´ì§€ UI
- âœ… ì‚¬ìš©ì ì‹ ì²­ í˜ì´ì§€ UI
- âœ… ì—ëŸ¬ ì²˜ë¦¬ ë° ì˜ˆì™¸ ìƒí™© ëŒ€ì‘
- âœ… í†µê³„ ëŒ€ì‹œë³´ë“œ
- âœ… ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸

---

## ğŸ‰ ê²°ë¡ 

**ì‹œìŠ¤í…œì´ 100% ì™„ì„±ë˜ì–´ ë¡œì»¬ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ ì •ìƒ ì‘ë™ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.**

### í…ŒìŠ¤íŠ¸ ì™„ë£Œ í•­ëª©
1. âœ… ê³„ì¢Œì´ì²´ ì‹ ì²­ (POST /api/bank-transfer/request)
2. âœ… ì‹ ì²­ ëª©ë¡ ì¡°íšŒ (GET /api/bank-transfer/requests)
3. âœ… ìŠ¹ì¸ ì²˜ë¦¬ ë° ìë™ êµ¬ë… ìƒì„± (POST /api/bank-transfer/approve)
4. âœ… ê±°ì ˆ ì²˜ë¦¬ (POST /api/bank-transfer/reject)
5. âœ… ê´€ë¦¬ì í˜ì´ì§€ ë Œë”ë§ (GET /admin/bank-transfers)
6. âœ… í†µê³„ ì—…ë°ì´íŠ¸
7. âœ… ìƒíƒœë³„ ìë™ ì •ë ¬

### ë‹¤ìŒ ë‹¨ê³„
1. Cloudflare API í† í° ê°±ì‹ 
2. í”„ë¡œë•ì…˜ ë°°í¬
3. í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì¬í…ŒìŠ¤íŠ¸
4. ì‹¤ì œ ê´€ë¦¬ì êµìœ¡

---

**ì‘ì„±ì¼:** 2026-01-19  
**í…ŒìŠ¤íŠ¸ í™˜ê²½:** Local Development (Wrangler Pages Dev)  
**í…ŒìŠ¤íŠ¸ ê²°ê³¼:** âœ… PASS (ëª¨ë“  ê¸°ëŠ¥ ì •ìƒ ì‘ë™)
