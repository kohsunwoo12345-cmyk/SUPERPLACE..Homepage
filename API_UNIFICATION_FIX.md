# π”§ API μ—”λ“ν¬μΈνΈ ν†µμΌ μμ •

## π¨ λ°κ²¬λ λ¬Έμ 

**μ¦μƒ:** "λ“±λ΅λ λ°μ΄ μ—†μµλ‹λ‹¤" λ©”μ‹μ§€κ°€ λ‚νƒ€λ‚¨

**κ·Όλ³Έ μ›μΈ:** 
λ‘ νμ΄μ§€κ°€ μ„λ΅ **λ‹¤λ¥Έ API μ—”λ“ν¬μΈνΈ**λ¥Ό μ‚¬μ©ν•μ—¬ λ° λ©λ΅μ„ λ¶λ¬μ¤κ³  μμ—μµλ‹λ‹¤.

### μμ • μ „ (λ¬Έμ  μƒν™©)

#### /teachers νμ΄μ§€ (25895λ² μ¤„)
```javascript
const classesRes = await fetch('/api/classes', {
    headers: { 'X-User-Data-Base64': userDataHeader }
});
```
β†’ `/api/classes` μ—”λ“ν¬μΈνΈ μ‚¬μ© (ν—¤λ” λ°©μ‹)

#### /students νμ΄μ§€ (27023λ² μ¤„)
```javascript
const classesRes = await fetch(`/api/classes/list?userId=${currentUser.id}&userType=director`);
```
β†’ `/api/classes/list` μ—”λ“ν¬μΈνΈ μ‚¬μ© (μΏΌλ¦¬ νλΌλ―Έν„° λ°©μ‹)

### λ¬Έμ μ 

1. **API λ¶μΌμΉ**: λ‘ νμ΄μ§€κ°€ λ‹¤λ¥Έ μ—”λ“ν¬μΈνΈλ¥Ό νΈμ¶
2. **μΌκ΄€μ„± λ¶€μ΅±**: ν• μ½μ„ μμ •ν•λ©΄ λ‹¤λ¥Έ μ½μ΄ κΉ¨μ§
3. **μ μ§€λ³΄μ μ–΄λ ¤μ›€**: μ½”λ“ μ¤‘λ³µ λ° λ¶μΌμΉ

---

## β… ν•΄κ²° λ°©λ²•

### μμ • ν›„ (ν†µμΌ)

**λ‘ νμ΄μ§€ λ¨λ‘ λ™μΌν• μ—”λ“ν¬μΈνΈ μ‚¬μ©:**

```javascript
// /teachers νμ΄μ§€
const classesRes = await fetch(\`/api/classes/list?userId=\${currentUser.id}&userType=director\`);

// /students νμ΄μ§€
const classesRes = await fetch(\`/api/classes/list?userId=\${currentUser.id}&userType=director\`);
```

### λ³€κ²½ μ‚¬ν•­

#### νμΌ: `src/index.tsx`

**λΌμΈ 25894 μμ •:**
```diff
- const classesRes = await fetch('/api/classes', {
-     headers: { 'X-User-Data-Base64': userDataHeader }
- });
+ const classesRes = await fetch(\`/api/classes/list?userId=\${currentUser.id}&userType=director\`);
```

---

## π― μμ • ν¨κ³Ό

### Before (λ¬Έμ )
- β /teachers νμ΄μ§€: λ° λ©λ΅ λ΅λ”© μ‹¤ν¨
- β /students νμ΄μ§€: μ •μƒ μ‘λ™
- β λ¶μΌμΉλ΅ μΈν• νΌλ€

### After (ν•΄κ²°)
- β… /teachers νμ΄μ§€: λ° λ©λ΅ μ •μƒ λ΅λ”©
- β… /students νμ΄μ§€: λ° λ©λ΅ μ •μƒ λ΅λ”©
- β… μΌκ΄€λ API μ‚¬μ©

---

## π“ μν–¥ λ°›λ” κΈ°λ¥

### 1. μ„ μƒλ‹ κ¶ν• μ„¤μ • λ¨λ‹¬
- **μ„μΉ**: /teachers, /students νμ΄μ§€
- **κΈ°λ¥**: κ¶ν• μ„¤μ • μ‹ λ° λ°°μ • μ„ νƒ
- **μƒνƒ**: β… μ •μƒ μ‘λ™

### 2. λ° μ²΄ν¬λ°•μ¤ λ©λ΅
- **ν‘μ‹**: λ“±λ΅λ λ° λ©λ΅μ΄ μ²΄ν¬λ°•μ¤λ΅ ν‘μ‹
- **λ™μ‘**: λ° μ„ νƒ κ°€λ¥
- **μƒνƒ**: β… μ •μƒ μ‘λ™

---

## π§ ν…μ¤νΈ λ°©λ²•

### 1. /teachers νμ΄μ§€ ν…μ¤νΈ

1. https://superplace-academy.pages.dev/teachers μ ‘μ†
2. μ›μ¥λ‹ κ³„μ •μΌλ΅ λ΅κ·ΈμΈ
3. μ„ μƒλ‹ κ΄€λ¦¬ μ„Ήμ…μ—μ„ "κ¶ν• μ„¤μ •" λ²„νΌ ν΄λ¦­
4. **ν™•μΈ μ‚¬ν•­:**
   - β… "λ° λ°°μ •" μ„Ήμ…μ— λ° λ©λ΅μ΄ ν‘μ‹λ¨
   - β… κ° λ°μ— μ²΄ν¬λ°•μ¤κ°€ μμ
   - β… "λ“±λ΅λ λ°μ΄ μ—†μµλ‹λ‹¤" λ©”μ‹μ§€κ°€ λ‚μ¤μ§€ μ•μ

### 2. /students νμ΄μ§€ ν…μ¤νΈ

1. https://superplace-academy.pages.dev/students μ ‘μ†
2. μ›μ¥λ‹ κ³„μ •μΌλ΅ λ΅κ·ΈμΈ
3. μ„ μƒλ‹ κ΄€λ¦¬ μΉ΄λ“ ν΄λ¦­ β†’ "κ¶ν• μ„¤μ •" λ²„νΌ ν΄λ¦­
4. **ν™•μΈ μ‚¬ν•­:**
   - β… "λ° λ°°μ •" μ„Ήμ…μ— λ° λ©λ΅μ΄ ν‘μ‹λ¨
   - β… κ° λ°μ— μ²΄ν¬λ°•μ¤κ°€ μμ
   - β… "λ“±λ΅λ λ°μ΄ μ—†μµλ‹λ‹¤" λ©”μ‹μ§€κ°€ λ‚μ¤μ§€ μ•μ

---

## π” λ””λ²„κΉ… λ΅κ·Έ

### μ½μ†”μ—μ„ ν™•μΈν•  λ΅κ·Έ

```javascript
// /teachers νμ΄μ§€
[Teachers Page] Classes loaded: {success: true, classes: Array(3)}

// /students νμ΄μ§€
π“ [ShowPermissions] Classes response: {success: true, classes: Array(3)}
β… [ShowPermissions] Found 3 classes
```

### μμƒ μ‘λ‹µ ν•μ‹

```json
{
  "success": true,
  "classes": [
    {
      "id": 1,
      "name": "μ΄λ“± 3ν•™λ…„",
      "class_name": "μ΄λ“± 3ν•™λ…„",
      "grade": "3ν•™λ…„",
      "grade_level": "3ν•™λ…„"
    },
    {
      "id": 2,
      "name": "μ΄λ“± 4ν•™λ…„",
      "class_name": "μ΄λ“± 4ν•™λ…„",
      "grade": "4ν•™λ…„",
      "grade_level": "4ν•™λ…„"
    }
  ]
}
```

---

## π“ API μ—”λ“ν¬μΈνΈ μ •λ³΄

### `/api/classes/list`

**λ©”μ„λ“**: GET  
**μΏΌλ¦¬ νλΌλ―Έν„°**:
- `userId`: μ›μ¥λ‹ ID (ν•„μ)
- `userType`: μ‚¬μ©μ νƒ€μ… (μ: "director")

**μ‘λ‹µ**:
```json
{
  "success": true,
  "classes": [
    {
      "id": 1,
      "name": "λ° μ΄λ¦„",
      "class_name": "λ° μ΄λ¦„",
      "grade": "ν•™λ…„",
      "grade_level": "ν•™λ…„",
      "teacher_name": "λ‹΄λ‹Ή μ„ μƒλ‹",
      "student_count": 5
    }
  ]
}
```

**μ—λ¬ μ‘λ‹µ**:
```json
{
  "success": false,
  "error": "μ¤λ¥ λ©”μ‹μ§€"
}
```

---

## π‰ κ²°κ³Ό

### μμ • μ»¤λ°‹
- **μ»¤λ°‹ ν•΄μ‹**: 2d86f0b
- **λ©”μ‹μ§€**: "fix: Unify class list API endpoint for both /teachers and /students pages"
- **λ‚ μ§**: 2026-01-18

### λ°°ν¬ μƒνƒ
- β… λΉλ“ μ„±κ³µ
- β… Git ν‘Έμ‹ μ™„λ£
- β… Cloudflare Pages μλ™ λ°°ν¬ νΈλ¦¬κ±°λ¨
- β³ λ°°ν¬ μ „ν μ¤‘ (1-3λ¶„ μ†μ”)

### ν…μ¤νΈ URL
- https://superplace-academy.pages.dev/teachers
- https://superplace-academy.pages.dev/students

---

## π’΅ κµν›

### μ™ μ΄λ° λ¬Έμ κ°€ λ°μƒν–λ‚?

1. **μ¤‘λ³µ μ½”λ“**: κ°™μ€ κΈ°λ¥μ΄ λ‘ κ³³μ— κµ¬ν„λ¨
2. **API λ¶μΌμΉ**: λ‹¤λ¥Έ μ—”λ“ν¬μΈνΈ μ‚¬μ©
3. **ν…μ¤νΈ λ¶€μ΅±**: ν• νμ΄μ§€λ§ ν…μ¤νΈν•κ³  λ‹¤λ¥Έ νμ΄μ§€ ν™•μΈ μ• ν•¨

### μ•μΌλ΅ κ°μ„  λ°©λ²•

1. **μ½”λ“ μ¬μ‚¬μ©**: κ³µν†µ ν•¨μλ΅ μ¶”μ¶
2. **API ν‘μ¤€ν™”**: ν•λ‚μ μ—”λ“ν¬μΈνΈλ§ μ‚¬μ©
3. **ν†µν•© ν…μ¤νΈ**: λ¨λ“  κ΄€λ ¨ νμ΄μ§€ ν…μ¤νΈ

---

## π€ μµμΆ… ν™•μΈ

ν„μ¬ μƒνƒ:
- [x] API μ—”λ“ν¬μΈνΈ ν†µμΌ
- [x] /teachers νμ΄μ§€ μμ •
- [x] λΉλ“ μ„±κ³µ
- [x] Git μ»¤λ°‹/ν‘Έμ‹
- [x] λ¬Έμ„ν™”
- [ ] λ°°ν¬ μ™„λ£ ν™•μΈ (1-3λ¶„ λ€κΈ°)
- [ ] μ‚¬μ©μ ν…μ¤νΈ

**λ‹¤μ λ‹¨κ³„:**
1. λ°°ν¬ μ™„λ£ λ€κΈ° (1-3λ¶„)
2. λ‘ νμ΄μ§€ λ¨λ‘ ν…μ¤νΈ
3. κ¶ν• μ„¤μ • β†’ λ° λ©λ΅ ν‘μ‹ ν™•μΈ
4. λ° μ„ νƒ ν›„ μ €μ¥ ν…μ¤νΈ

---

**λ¨λ“  μμ • μ™„λ£! μ΄μ  λ‘ νμ΄μ§€ λ¨λ‘ μ •μƒμ μΌλ΅ λ° λ©λ΅μ΄ ν‘μ‹λ©λ‹λ‹¤.** β…
