# 로그인 기능 및 관리자 ID 설정 가이드 (비전문가용)

## 🤔 로그인 기능이 실제로 어떻게 동작하나요?

### 1. 회원가입 과정
원장님이 웹사이트에서 **"회원가입"** 버튼을 클릭하면:

1. **정보 입력**: 이메일, 비밀번호, 이름, 연락처, 학원명을 입력합니다
2. **데이터베이스 저장**: 입력한 정보가 Cloudflare D1 데이터베이스에 안전하게 저장됩니다
3. **자동 역할 부여**: 기본적으로 `member` (일반 회원) 역할이 자동으로 부여됩니다
4. **완료 메시지**: "회원가입이 완료되었습니다" 메시지가 표시됩니다

**쉬운 비유**: 마치 병원에 처음 가서 접수할 때 이름, 주소, 전화번호를 쓰는 것과 같습니다. 
그 정보가 병원 시스템에 저장되어 다음번 방문 때 다시 쓸 필요가 없는 것처럼, 
웹사이트도 여러분의 정보를 저장해서 다음에 로그인만 하면 바로 사용할 수 있게 합니다.

---

### 2. 로그인 과정
기존 회원이 **"로그인"** 버튼을 클릭하면:

1. **정보 입력**: 이메일과 비밀번호를 입력합니다
2. **정보 확인**: 시스템이 데이터베이스에서 일치하는 정보를 찾습니다
3. **성공/실패**:
   - ✅ 정보가 맞으면: 로그인 성공, 해당 사용자의 이름과 역할 정보를 받습니다
   - ❌ 정보가 틀리면: "이메일 또는 비밀번호가 일치하지 않습니다" 메시지가 표시됩니다
4. **페이지 이동**: 로그인 성공 시 대시보드 또는 메인 페이지로 이동합니다

**쉬운 비유**: 아파트 출입문에서 비밀번호를 누르는 것과 같습니다. 
비밀번호가 맞으면 문이 열리고 (로그인 성공), 틀리면 삐삐 소리가 나며 열리지 않죠 (로그인 실패).

---

## 👑 관리자 ID는 어떻게 설정하나요?

### 현재 시스템의 구조
데이터베이스에는 `users` 테이블이 있고, 각 사용자는 `role` (역할) 필드를 가지고 있습니다:
- `member`: 일반 회원 (기본값)
- `admin`: 관리자

### 방법 1: 데이터베이스에서 직접 수정 (가장 간단)

**로컬 개발 환경에서:**
```bash
# 1. 데이터베이스 콘솔 열기
cd /home/user/webapp
npx wrangler d1 execute webapp-production --local

# 2. SQL 명령어 실행 (이메일을 실제 관리자 이메일로 변경)
UPDATE users SET role = 'admin' WHERE email = 'admin@superplace.kr';

# 3. 확인
SELECT email, name, role FROM users;
```

**프로덕션 환경에서 (실제 배포 후):**
```bash
# --local 제거하면 실제 운영 서버의 데이터베이스 수정
cd /home/user/webapp
npx wrangler d1 execute webapp-production

# SQL 명령어 실행
UPDATE users SET role = 'admin' WHERE email = 'admin@superplace.kr';
```

**쉬운 비유**: 엑셀 파일에서 특정 사람의 "직급" 칸을 "사원"에서 "관리자"로 바꾸는 것과 같습니다.

---

### 방법 2: 웹 인터페이스 추가 (더 편리하지만 개발 필요)

만약 나중에 더 편리하게 하고 싶다면, **관리자 전용 페이지**를 만들 수 있습니다:

**예시 화면:**
```
┌──────────────────────────────────┐
│  회원 관리                        │
├──────────────────────────────────┤
│                                  │
│  이메일: kim@example.com         │
│  이름: 김원장                     │
│  현재 역할: member               │
│  [ admin으로 변경 ] 버튼         │
│                                  │
│  이메일: lee@example.com         │
│  이름: 이원장                     │
│  현재 역할: admin                │
│  [ member로 변경 ] 버튼          │
│                                  │
└──────────────────────────────────┘
```

이렇게 하면 버튼 클릭만으로 역할을 변경할 수 있습니다!

**쉬운 비유**: 카카오톡 오픈채팅방에서 방장이 다른 사람을 "관리자"로 임명하는 것과 같습니다. 
클릭 몇 번으로 권한을 줄 수 있죠.

---

## 🔐 실제 사용 시나리오

### 시나리오 1: 원장님이 첫 관리자가 되는 과정

1. **회원가입**: 웹사이트에서 `admin@superplace.kr` 이메일로 회원가입
2. **역할 변경**: 개발자에게 요청하거나, 직접 데이터베이스 명령어 실행:
   ```
   UPDATE users SET role = 'admin' WHERE email = 'admin@superplace.kr';
   ```
3. **로그인**: 이제 로그인하면 관리자 권한으로 접속됩니다
4. **대시보드 접근**: `/dashboard` 페이지에 접속하면 문의 목록, 회원 목록 등을 볼 수 있습니다

---

### 시나리오 2: 다른 학원장에게 권한 주기

만약 "이원장님"에게도 관리자 권한을 주고 싶다면:

```bash
# 데이터베이스에서 실행
UPDATE users SET role = 'admin' WHERE email = 'lee@example.com';
```

이제 이원장님도 로그인하면 모든 관리 기능을 사용할 수 있습니다!

---

## 📊 데이터베이스 구조 (참고용)

```
users 테이블
┌────┬──────────────────┬───────────┬─────────┬──────────┬─────────────┬──────────┐
│ id │ email           │ password  │ name    │ phone    │ academy_name│ role     │
├────┼──────────────────┼───────────┼─────────┼──────────┼─────────────┼──────────┤
│ 1  │ kim@example.com │ ********* │ 김원장  │ 010-1234 │ 꾸메땅학원   │ admin    │
│ 2  │ lee@example.com │ ********* │ 이원장  │ 010-5678 │ 행복학원     │ member   │
│ 3  │ park@example.com│ ********* │ 박원장  │ 010-9012 │ 미래학원     │ member   │
└────┴──────────────────┴───────────┴─────────┴──────────┴─────────────┴──────────┘
```

**쉬운 비유**: 명단표에서 각 사람의 정보와 직급이 표시되어 있는 것과 같습니다.

---

## 🚀 실전 단계별 가이드

### Step 1: 첫 관리자 계정 만들기
1. 웹사이트 접속 → 회원가입
2. 이메일: `admin@superplace.kr` (또는 원장님 이메일)
3. 비밀번호, 이름, 연락처 입력
4. 회원가입 완료

### Step 2: 관리자 권한 부여
```bash
# 터미널에서 실행
cd /home/user/webapp
npx wrangler d1 execute webapp-production --local

# 다음 명령어 입력 (이메일은 실제 이메일로 변경)
UPDATE users SET role = 'admin' WHERE email = 'admin@superplace.kr';
```

### Step 3: 관리자로 로그인
1. 로그인 페이지 접속
2. 이메일과 비밀번호 입력
3. 대시보드 접근 가능!

---

## ❓ 자주 묻는 질문

### Q1: 관리자와 일반 회원의 차이는 무엇인가요?
**A:** 
- **일반 회원 (member)**: 교육 프로그램 보기, 문의하기 등 기본 기능만 사용
- **관리자 (admin)**: 모든 문의 내역 보기, 회원 관리, 통계 확인 등 모든 기능 사용

### Q2: 비밀번호는 안전하게 저장되나요?
**A:** 현재는 기본적으로 저장되지만, 실제 운영 시에는 **비밀번호 해싱**(암호화)을 추가해야 합니다. 
이는 개발자가 추가 작업으로 구현할 수 있습니다.

**쉬운 비유**: 비밀번호를 "1234"로 저장하는 대신, "a1b2c3d4" 같은 암호문으로 변환해서 저장하는 것입니다. 
이렇게 하면 누가 데이터베이스를 봐도 실제 비밀번호를 알 수 없습니다.

### Q3: 관리자를 여러 명 만들 수 있나요?
**A:** 네! 원하는 만큼 관리자를 지정할 수 있습니다. 
각 사용자의 `role`을 `admin`으로 변경하면 됩니다.

### Q4: 실수로 잘못된 사람을 관리자로 만들었어요!
**A:** 걱정 마세요! 다시 명령어를 실행해서 `member`로 변경하면 됩니다:
```bash
UPDATE users SET role = 'member' WHERE email = '실수한사용자@example.com';
```

---

## 📞 추가 도움이 필요하신가요?

이 가이드를 읽고도 궁금한 점이 있으시면:
- 개발자에게 직접 요청
- 화면 공유로 단계별 설명 요청
- 원격으로 설정 대행 요청

로그인과 권한 관리는 생각보다 간단합니다! 💪
