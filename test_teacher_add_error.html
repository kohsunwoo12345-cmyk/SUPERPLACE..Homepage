<!DOCTYPE html>
<html>
<head>
    <title>선생님 추가 에러 테스트</title>
    <meta charset="UTF-8">
</head>
<body>
    <h1>선생님 추가 에러 디버깅</h1>
    <div id="result"></div>
    
    <script>
    async function testAddTeacher() {
        const resultDiv = document.getElementById('result');
        
        // 테스트 데이터
        const testData = {
            name: "디버그테스트",
            email: "debug-test@test.com",
            phone: "010-9999-9999",
            password: "test1234!",
            directorId: 1
        };
        
        resultDiv.innerHTML = `
            <h2>테스트 시작...</h2>
            <p>요청 데이터:</p>
            <pre>${JSON.stringify(testData, null, 2)}</pre>
        `;
        
        try {
            const response = await fetch('https://superplace-academy.pages.dev/api/teachers/add', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(testData)
            });
            
            const data = await response.json();
            
            resultDiv.innerHTML += `
                <h3>응답 상태: ${response.status}</h3>
                <p>응답 데이터:</p>
                <pre>${JSON.stringify(data, null, 2)}</pre>
            `;
            
            if (!response.ok) {
                resultDiv.innerHTML += `
                    <h3 style="color: red;">에러 발생!</h3>
                    <p><strong>에러 메시지:</strong> ${data.error || '알 수 없는 에러'}</p>
                    <p><strong>상세:</strong> ${data.details || 'N/A'}</p>
                    ${data.stack ? `<pre style="background: #f5f5f5; padding: 10px; overflow: auto;">${data.stack}</pre>` : ''}
                `;
            } else {
                resultDiv.innerHTML += `
                    <h3 style="color: green;">✅ 성공!</h3>
                    <p>선생님 ID: ${data.teacherId}</p>
                    <p>메시지: ${data.message}</p>
                `;
            }
        } catch (error) {
            resultDiv.innerHTML += `
                <h3 style="color: red;">네트워크 에러!</h3>
                <pre>${error.message}</pre>
                <pre>${error.stack}</pre>
            `;
        }
    }
    
    // 페이지 로드 후 3초 뒤 자동 실행
    setTimeout(testAddTeacher, 3000);
    </script>
</body>
</html>
