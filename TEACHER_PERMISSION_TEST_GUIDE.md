# ì„ ìƒë‹˜ ê¶Œí•œ ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## âœ… ë°°í¬ ì™„ë£Œ
- **ë°°í¬ URL**: https://superplace-academy.pages.dev
- **ìµœì‹  ë°°í¬**: https://aab68860.superplace-academy.pages.dev
- **ë°°í¬ ì¼ì‹œ**: 2026-01-18

---

## ğŸ¯ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤: ì›ì¥ë‹˜ì´ ì„ ìƒë‹˜ì—ê²Œ ë°˜ ë°°ì • ë° ì¼ì¼ ì„±ê³¼ ì‘ì„± ê¶Œí•œ ë¶€ì—¬

**ëª©í‘œ**: aì„ ìƒë‹˜ì´ ë°°ì •ëœ ë°˜ì˜ í•™ìƒë§Œ ì¡°íšŒí•˜ê³  ì¼ì¼ ì„±ê³¼ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìœ¼ë©°, ë‹¤ë¥¸ ë°˜ì˜ í•™ìƒì€ ì „í˜€ ë³¼ ìˆ˜ ì—†ë„ë¡ í•¨

---

## ğŸ“‹ ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸ ì ˆì°¨

### 1ë‹¨ê³„: ì›ì¥ë‹˜ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
```
URL: https://superplace-academy.pages.dev/login
ì›ì¥ë‹˜ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
```

### 2ë‹¨ê³„: ë°˜ ìƒì„±
1. ì›ì¥ë‹˜ ëŒ€ì‹œë³´ë“œ ì ‘ì†: `/director-dashboard`
2. "ë°˜ ê´€ë¦¬" ì„¹ì…˜ì—ì„œ "ë°˜ ìƒì„±" ë²„íŠ¼ í´ë¦­
3. ë°˜ ì •ë³´ ì…ë ¥:
   - ë°˜ ì´ë¦„: ì˜ˆ) "ì´ˆë“± 5í•™ë…„ ìˆ˜í•™ë°˜"
   - í•™ë…„: ì˜ˆ) "5í•™ë…„"
   - ì„¤ëª…: ì˜ˆ) "ì´ˆë“±í•™êµ 5í•™ë…„ ìˆ˜í•™ ì‹¬í™”ë°˜"
4. "ìƒì„±" ë²„íŠ¼ í´ë¦­
5. **í™•ì¸**: ë°˜ì´ ìƒì„±ë˜ì—ˆë‹¤ëŠ” ë©”ì‹œì§€ í™•ì¸

### 3ë‹¨ê³„: í•™ìƒ ì¶”ê°€ (í…ŒìŠ¤íŠ¸ìš©)
1. "í•™ìƒ ê´€ë¦¬" í˜ì´ì§€ ì ‘ì†
2. "í•™ìƒ ì¶”ê°€" ë²„íŠ¼ í´ë¦­
3. í•™ìƒ ì •ë³´ ì…ë ¥:
   - ì´ë¦„: í…ŒìŠ¤íŠ¸í•™ìƒ1
   - í•™ë…„: 5í•™ë…„
   - ë°˜: ë°©ê¸ˆ ìƒì„±í•œ ë°˜ ì„ íƒ
   - í•™ë¶€ëª¨ ì •ë³´ ì…ë ¥
4. í•™ìƒ ì €ì¥
5. **ë‹¤ë¥¸ ë°˜ì—ë„ í•™ìƒ ì¶”ê°€** (ê¶Œí•œ í…ŒìŠ¤íŠ¸ìš©):
   - ë‹¤ë¥¸ ë°˜ ìƒì„±
   - í•´ë‹¹ ë°˜ì— "í…ŒìŠ¤íŠ¸í•™ìƒ2" ì¶”ê°€

### 4ë‹¨ê³„: ì„ ìƒë‹˜ ê³„ì • ìƒì„±
1. ì›ì¥ë‹˜ ëŒ€ì‹œë³´ë“œì—ì„œ "ì„ ìƒë‹˜ ì¶”ê°€" ë²„íŠ¼ í´ë¦­
2. ì„ ìƒë‹˜ ì •ë³´ ì…ë ¥:
   - ì´ë¦„: aì„ ìƒë‹˜
   - ì´ë©”ì¼: teacher_a@test.com
   - ì „í™”ë²ˆí˜¸: 010-1234-5678
   - ë¹„ë°€ë²ˆí˜¸: (ìë™ ìƒì„± ë˜ëŠ” ì„¤ì •)
3. "ì¶”ê°€" ë²„íŠ¼ í´ë¦­
4. **í™•ì¸**: ì„ ìƒë‹˜ì´ ì¶”ê°€ë˜ì—ˆë‹¤ëŠ” ë©”ì‹œì§€ í™•ì¸

### 5ë‹¨ê³„: ì„ ìƒë‹˜ì—ê²Œ ê¶Œí•œ ë¶€ì—¬ ğŸ”‘
1. ì„ ìƒë‹˜ ëª©ë¡ì—ì„œ "aì„ ìƒë‹˜" ì°¾ê¸°
2. "ê¶Œí•œ ì„¤ì •" ë²„íŠ¼ í´ë¦­
3. ê¶Œí•œ ì„¤ì • ëª¨ë‹¬ì—ì„œ:
   - âœ… **ë°˜ ë°°ì •**: "ì´ˆë“± 5í•™ë…„ ìˆ˜í•™ë°˜" ì²´í¬
   - âœ… **ì¼ì¼ ì„±ê³¼ ì‘ì„± ê¶Œí•œ**: ì²´í¬
   - âŒ **ì „ì²´ í•™ìƒ ì¡°íšŒ ê¶Œí•œ**: ì²´í¬ í•´ì œ (ì¤‘ìš”!)
4. "ì €ì¥" ë²„íŠ¼ í´ë¦­
5. **í™•ì¸**: "ê¶Œí•œì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!" ë©”ì‹œì§€ í™•ì¸

### 6ë‹¨ê³„: ì„ ìƒë‹˜ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸ âœ¨
1. ë¡œê·¸ì•„ì›ƒ
2. aì„ ìƒë‹˜ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸:
   - ì´ë©”ì¼: teacher_a@test.com
   - ë¹„ë°€ë²ˆí˜¸: (ì„¤ì •í•œ ë¹„ë°€ë²ˆí˜¸)
3. ì„ ìƒë‹˜ ëŒ€ì‹œë³´ë“œ ì ‘ì†

### 7ë‹¨ê³„: í•™ìƒ ì¡°íšŒ í…ŒìŠ¤íŠ¸ (ì¤‘ìš”!)
**ì˜ˆìƒ ê²°ê³¼**:
- âœ… **ë³´ì—¬ì•¼ í•¨**: "ì´ˆë“± 5í•™ë…„ ìˆ˜í•™ë°˜"ì˜ "í…ŒìŠ¤íŠ¸í•™ìƒ1"ë§Œ ì¡°íšŒë¨
- âŒ **ì•ˆ ë³´ì—¬ì•¼ í•¨**: ë‹¤ë¥¸ ë°˜ì˜ "í…ŒìŠ¤íŠ¸í•™ìƒ2"ëŠ” ì ˆëŒ€ ì¡°íšŒë˜ì§€ ì•ŠìŒ

**í…ŒìŠ¤íŠ¸ ë°©ë²•**:
1. í•™ìƒ ëª©ë¡ í˜ì´ì§€ ì ‘ì†
2. í•™ìƒ ìˆ˜ í™•ì¸: ë°°ì •ëœ ë°˜ì˜ í•™ìƒë§Œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
3. **ê²€ì¦**: ë‹¤ë¥¸ ë°˜ì˜ í•™ìƒì´ ë³´ì´ë©´ FAIL âŒ

### 8ë‹¨ê³„: ì¼ì¼ ì„±ê³¼ ì‘ì„± í…ŒìŠ¤íŠ¸
1. "í…ŒìŠ¤íŠ¸í•™ìƒ1" ì„ íƒ
2. "ì¼ì¼ ì„±ê³¼ ì‘ì„±" ë²„íŠ¼ í´ë¦­
3. ì¼ì¼ ì„±ê³¼ ì •ë³´ ì…ë ¥:
   - ë‚ ì§œ: ì˜¤ëŠ˜
   - ì¶œì„: ì¶œì„
   - ìˆ™ì œ: ì™„ë£Œ
   - ì´í•´ë„: 80%
   - ë©”ëª¨: í…ŒìŠ¤íŠ¸ ê¸°ë¡
4. "ì €ì¥" ë²„íŠ¼ í´ë¦­
5. **í™•ì¸**: "ì¼ì¼ ì„±ê³¼ê°€ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤." ë©”ì‹œì§€ í™•ì¸

### 9ë‹¨ê³„: ê¶Œí•œ ì—†ëŠ” í•™ìƒ ì ‘ê·¼ í…ŒìŠ¤íŠ¸ (ë³´ì•ˆ í…ŒìŠ¤íŠ¸)
**ì¤‘ìš”**: ì´ í…ŒìŠ¤íŠ¸ë¡œ ê¶Œí•œ ì‹œìŠ¤í…œì´ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

**í…ŒìŠ¤íŠ¸ ë°©ë²•**:
1. ê°œë°œì ë„êµ¬ ì—´ê¸° (F12)
2. ì½˜ì†”ì—ì„œ API ì§ì ‘ í˜¸ì¶œ ì‹œë„:
```javascript
// ë‹¤ë¥¸ ë°˜ í•™ìƒ IDë¡œ ì¼ì¼ ì„±ê³¼ ì‘ì„± ì‹œë„
fetch('/api/daily-records', {
  method: 'POST',
  headers: {'Content-Type': 'application/json'},
  body: JSON.stringify({
    studentId: 2,  // í…ŒìŠ¤íŠ¸í•™ìƒ2ì˜ ID (ë°°ì •ë˜ì§€ ì•Šì€ ë°˜)
    recordDate: '2026-01-18',
    attendance: 'ì¶œì„'
  })
}).then(r => r.json()).then(console.log)
```

**ì˜ˆìƒ ê²°ê³¼**:
```json
{
  "success": false,
  "error": "ì´ í•™ìƒì˜ ì„±ê³¼ë¥¼ ì‘ì„±í•  ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."
}
```
- âœ… 403 ì—ëŸ¬ì™€ í•¨ê»˜ ê¶Œí•œ ì—†ìŒ ë©”ì‹œì§€ê°€ ë‚˜ì™€ì•¼ í•¨
- âŒ ì„±ê³µí•˜ë©´ FAIL (ë³´ì•ˆ ë¬¸ì œ!)

---

## ğŸ” ì£¼ìš” í™•ì¸ ì‚¬í•­

### âœ… ì„±ê³µ ì¡°ê±´
1. **ë°˜ ìƒì„± ì„±ê³µ**: ì›ì¥ë‹˜ì´ ë°˜ì„ ìƒì„±í•  ìˆ˜ ìˆìŒ
2. **ê¶Œí•œ ì €ì¥ ì„±ê³µ**: "ê¶Œí•œì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!" ë©”ì‹œì§€ í‘œì‹œ
3. **í•™ìƒ í•„í„°ë§ ì„±ê³µ**: ì„ ìƒë‹˜ì´ ë°°ì •ëœ ë°˜ì˜ í•™ìƒë§Œ ì¡°íšŒ
4. **ì¼ì¼ ì„±ê³¼ ì‘ì„± ì„±ê³µ**: ë°°ì •ëœ ë°˜ì˜ í•™ìƒì— ëŒ€í•´ ì¼ì¼ ì„±ê³¼ ì‘ì„± ê°€ëŠ¥
5. **ë³´ì•ˆ ê²€ì¦ ì„±ê³µ**: ë°°ì •ë˜ì§€ ì•Šì€ ë°˜ì˜ í•™ìƒ ì ‘ê·¼ ì‹œ 403 ì—ëŸ¬

### âŒ ì‹¤íŒ¨ ì¡°ê±´
1. "ë“±ë¡ëœ ë°˜ì´ ì—†ìŠµë‹ˆë‹¤" ë©”ì‹œì§€ê°€ í‘œì‹œë¨
2. "ê¶Œí•œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤" ë°˜ë³µ í‘œì‹œ
3. ì„ ìƒë‹˜ì´ ëª¨ë“  í•™ìƒì„ ì¡°íšŒí•  ìˆ˜ ìˆìŒ (ê¶Œí•œ ë¬´ì‹œ)
4. ë°°ì •ë˜ì§€ ì•Šì€ ë°˜ì˜ í•™ìƒì—ê²Œ ì¼ì¼ ì„±ê³¼ ì‘ì„± ê°€ëŠ¥ (ë³´ì•ˆ ë¬¸ì œ)

---

## ğŸ› ë¬¸ì œ ë°œìƒ ì‹œ ë””ë²„ê¹…

### 1. ë°˜ ëª©ë¡ì´ ì•ˆ ë³´ì´ëŠ” ê²½ìš°
**ì›ì¸**: API ì—”ë“œí¬ì¸íŠ¸ ë¬¸ì œ
**í™•ì¸ ë°©ë²•**:
1. ê°œë°œì ë„êµ¬ > ë„¤íŠ¸ì›Œí¬ íƒ­
2. `/api/classes/list` ìš”ì²­ í™•ì¸
3. ì‘ë‹µ ìƒíƒœ ì½”ë“œ ë° ë‚´ìš© í™•ì¸

**ì˜ˆìƒ ì‘ë‹µ**:
```json
{
  "success": true,
  "classes": [
    {
      "id": 1,
      "name": "ì´ˆë“± 5í•™ë…„ ìˆ˜í•™ë°˜",
      "grade_level": "5í•™ë…„",
      ...
    }
  ]
}
```

### 2. ê¶Œí•œ ì €ì¥ì´ ì•ˆ ë˜ëŠ” ê²½ìš°
**ì›ì¸**: teacher_permissions í…Œì´ë¸” ë¬¸ì œ
**í™•ì¸ ë°©ë²•**:
1. ê°œë°œì ë„êµ¬ > ì½˜ì†” íƒ­
2. ë¡œê·¸ ë©”ì‹œì§€ í™•ì¸:
   - `ğŸ”’ [SavePermissions] Form submitted`
   - `ğŸ”’ [SavePermissions] permissions: {...}`
3. ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ `/api/teachers/:id/permissions` POST ìš”ì²­ í™•ì¸

**ì˜ˆìƒ ìš”ì²­**:
```json
{
  "directorId": 1,
  "permissions": {
    "canViewAllStudents": false,
    "canWriteDailyReports": true,
    "assignedClasses": [1]
  }
}
```

### 3. ì„ ìƒë‹˜ì´ ëª¨ë“  í•™ìƒì„ ë³¼ ìˆ˜ ìˆëŠ” ê²½ìš°
**ì›ì¸**: ê¶Œí•œ ì²´í¬ ë¡œì§ ë¯¸ì‘ë™
**í™•ì¸ ë°©ë²•**:
1. ê°œë°œì ë„êµ¬ > ì½˜ì†” íƒ­
2. `/api/students` ìš”ì²­ ì‹œ ë¡œê·¸ í™•ì¸:
   - `ğŸ‘¥ [GetStudents] Teacher detected, checking permissions...`
   - `ğŸ‘¥ [GetStudents] Parsed permissions: {...}`
   - `ğŸ‘¥ [GetStudents] Assigned classes: [...]`

**ì •ìƒ ë¡œê·¸ ì˜ˆì‹œ**:
```
ğŸ‘¥ [GetStudents] User: 2
ğŸ‘¥ [GetStudents] UserInfo: {id: 2, user_type: 'teacher', ...}
ğŸ‘¥ [GetStudents] Teacher detected, checking permissions...
ğŸ‘¥ [GetStudents] Permission rows: 3
ğŸ‘¥ [GetStudents] Parsed permissions: {canViewAllStudents: false, assignedClasses: [1]}
ğŸ‘¥ [GetStudents] Assigned classes: [1]
ğŸ‘¥ [GetStudents] Query: SELECT * FROM students WHERE status = 'active' AND id NOT IN (4) AND class_id IN (?) ORDER BY name
ğŸ‘¥ [GetStudents] Params: [1]
ğŸ‘¥ [GetStudents] Found students: 1
```

---

## ğŸ”§ ê¸°ìˆ  êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

### ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

#### classes í…Œì´ë¸”
```sql
CREATE TABLE classes (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  description TEXT,
  user_id INTEGER NOT NULL,          -- ì›ì¥ë‹˜ ID
  teacher_id INTEGER,                 -- ë‹´ë‹¹ ì„ ìƒë‹˜ ID
  grade_level TEXT,
  subject TEXT,
  max_students INTEGER DEFAULT 20,
  status TEXT DEFAULT 'active',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (teacher_id) REFERENCES users(id)
);
```

#### teacher_permissions í…Œì´ë¸”
```sql
CREATE TABLE teacher_permissions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  teacher_id INTEGER NOT NULL,
  permission_key TEXT NOT NULL,       -- ê¶Œí•œ í‚¤
  permission_value TEXT,              -- ê¶Œí•œ ê°’ (JSON ê°€ëŠ¥)
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (teacher_id) REFERENCES users(id),
  UNIQUE(teacher_id, permission_key)
);
```

#### ê¶Œí•œ ì €ì¥ ì˜ˆì‹œ
```
teacher_id | permission_key        | permission_value
-----------|----------------------|------------------
2          | canViewAllStudents   | 0
2          | canWriteDailyReports | 1
2          | assignedClasses      | [1,2,3]  -- JSON ë°°ì—´
```

### API ì—”ë“œí¬ì¸íŠ¸

#### 1. ë°˜ ì¡°íšŒ
```
GET /api/classes/list?userId={userId}&userType=director
```

#### 2. ê¶Œí•œ ì €ì¥
```
POST /api/teachers/:id/permissions
Body: {
  "directorId": 1,
  "permissions": {
    "canViewAllStudents": false,
    "canWriteDailyReports": true,
    "assignedClasses": [1, 2]
  }
}
```

#### 3. í•™ìƒ ì¡°íšŒ (ê¶Œí•œ í•„í„°ë§)
```
GET /api/students
Header: X-User-Data-Base64: {base64 encoded user data}
```

#### 4. ì¼ì¼ ì„±ê³¼ ì‘ì„±
```
POST /api/daily-records
Header: X-User-Data-Base64: {base64 encoded user data}
Body: {
  "studentId": 1,
  "recordDate": "2026-01-18",
  "attendance": "ì¶œì„",
  ...
}
```

---

## ğŸ“ ë¬¸ì œ ì‹ ê³ 

í…ŒìŠ¤íŠ¸ ì¤‘ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•˜ì—¬ ì‹ ê³ í•´ì£¼ì„¸ìš”:

1. **ë¬¸ì œ ë°œìƒ ë‹¨ê³„**: ìœ„ ë‹¨ê³„ ì¤‘ ëª‡ ë²ˆì§¸ì—ì„œ ë°œìƒí–ˆëŠ”ì§€
2. **ì—ëŸ¬ ë©”ì‹œì§€**: í™”ë©´ì— í‘œì‹œëœ ì—ëŸ¬ ë©”ì‹œì§€
3. **ì½˜ì†” ë¡œê·¸**: ê°œë°œì ë„êµ¬ ì½˜ì†”ì˜ ë¡œê·¸ ë©”ì‹œì§€
4. **ë„¤íŠ¸ì›Œí¬ ìš”ì²­**: ì‹¤íŒ¨í•œ API ìš”ì²­ì˜ ìƒíƒœ ì½”ë“œ ë° ì‘ë‹µ
5. **ìŠ¤í¬ë¦°ìƒ·**: ë¬¸ì œê°€ ë°œìƒí•œ í™”ë©´ ìº¡ì²˜

---

## âœ¨ ì—…ë°ì´íŠ¸ ë‚´ì—­

### 2026-01-18
- âœ… ë°˜ ìƒì„± API ìˆ˜ì •: user_id ê¸°ë°˜ìœ¼ë¡œ ì €ì¥
- âœ… ë°˜ ì¡°íšŒ API ìˆ˜ì •: user_id ê¸°ë°˜ìœ¼ë¡œ ì¡°íšŒ
- âœ… ê¶Œí•œ ì‹œìŠ¤í…œ ì™„ì „ ìˆ˜ì •: teacher_permissions í…Œì´ë¸” ì‚¬ìš©
- âœ… í•™ìƒ ì¡°íšŒ API: ê¶Œí•œ ê¸°ë°˜ í•„í„°ë§ êµ¬í˜„
- âœ… ì¼ì¼ ì„±ê³¼ API: ê¶Œí•œ ì²´í¬ ì¶”ê°€
- âœ… ìƒì„¸ ë¡œê¹… ì¶”ê°€: ëª¨ë“  ì£¼ìš” APIì— ë””ë²„ê¹… ë¡œê·¸
- âœ… ë°°í¬ ì™„ë£Œ: https://aab68860.superplace-academy.pages.dev

---

**í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•˜ì„¸ìš”!** ğŸš€
