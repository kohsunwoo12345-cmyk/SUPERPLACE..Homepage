<!DOCTYPE html>
<html>
<head>
    <title>ì„ ìƒë‹˜ ê´€ë¦¬ ë””ë²„ê·¸ í…ŒìŠ¤íŠ¸</title>
    <meta charset="UTF-8">
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .test-section { margin: 20px 0; padding: 15px; border: 2px solid #ddd; border-radius: 8px; }
        .test-section h3 { margin-top: 0; color: #6366f1; }
        button { background: #6366f1; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background: #4f46e5; }
        .result { margin-top: 10px; padding: 10px; border-radius: 4px; background: #f3f4f6; }
        .success { background: #d1fae5; border: 2px solid #10b981; }
        .error { background: #fee2e2; border: 2px solid #ef4444; }
        pre { background: #1f2937; color: #f9fafb; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ğŸ” ì„ ìƒë‹˜ ê´€ë¦¬ ì‹œìŠ¤í…œ ë””ë²„ê·¸</h1>
    
    <div class="test-section">
        <h3>1. API í…ŒìŠ¤íŠ¸ - ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡</h3>
        <button onclick="testApplicationsAPI()">ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡ ì¡°íšŒ</button>
        <div id="apiResult" class="result"></div>
    </div>

    <div class="test-section">
        <h3>2. API í…ŒìŠ¤íŠ¸ - ì„ ìƒë‹˜ ì¶”ê°€</h3>
        <input type="email" id="testEmail" placeholder="ì´ë©”ì¼" value="newteacher@test.com" style="padding: 8px; margin: 5px;">
        <button onclick="testAddTeacherAPI()">ì„ ìƒë‹˜ ì¶”ê°€ API í…ŒìŠ¤íŠ¸</button>
        <div id="addResult" class="result"></div>
    </div>

    <div class="test-section">
        <h3>3. í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸</h3>
        <p>ì‹¤ì œ í˜ì´ì§€ì—ì„œ F12ë¥¼ ëˆ„ë¥´ê³  Consoleì— ì•„ë˜ ì½”ë“œë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”:</p>
        <pre>
// 1. ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
const user = JSON.parse(localStorage.getItem('user'));
console.log('í˜„ì¬ ì‚¬ìš©ì:', user);

// 2. ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡ ë¡œë“œ í•¨ìˆ˜ ì‹¤í–‰
async function testLoad() {
    const res = await fetch('/api/teachers/applications?directorId=' + user.id);
    const data = await res.json();
    console.log('ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡:', data);
    return data;
}
testLoad();

// 3. ì„ ìƒë‹˜ ê´€ë¦¬ ì„¹ì…˜ í† ê¸€
if (typeof toggleTeacherSection === 'function') {
    console.log('âœ… toggleTeacherSection í•¨ìˆ˜ ì¡´ì¬');
    toggleTeacherSection();
} else {
    console.log('âŒ toggleTeacherSection í•¨ìˆ˜ ì—†ìŒ');
}

// 4. ì„ ìƒë‹˜ ì¶”ê°€ ë²„íŠ¼ í…ŒìŠ¤íŠ¸
if (typeof openAddTeacherModal === 'function') {
    console.log('âœ… openAddTeacherModal í•¨ìˆ˜ ì¡´ì¬');
    openAddTeacherModal();
} else {
    console.log('âŒ openAddTeacherModal í•¨ìˆ˜ ì—†ìŒ');
}
        </pre>
    </div>

    <div class="test-section">
        <h3>4. ì‹¤ì œ í˜ì´ì§€ë¡œ ì´ë™</h3>
        <p>í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì‹¤ì œ í˜ì´ì§€ë¡œ ì´ë™í•˜ì„¸ìš”:</p>
        <a href="https://superplace-academy.pages.dev/login" target="_blank" style="display: inline-block; padding: 10px 20px; background: #10b981; color: white; text-decoration: none; border-radius: 4px; margin: 5px;">
            ë¡œê·¸ì¸ í˜ì´ì§€
        </a>
        <a href="https://superplace-academy.pages.dev/students" target="_blank" style="display: inline-block; padding: 10px 20px; background: #6366f1; color: white; text-decoration: none; border-radius: 4px; margin: 5px;">
            í•™ìƒ ê´€ë¦¬ í˜ì´ì§€
        </a>
    </div>

    <script>
        async function testApplicationsAPI() {
            const resultDiv = document.getElementById('apiResult');
            resultDiv.innerHTML = 'ë¡œë”© ì¤‘...';
            
            try {
                const response = await fetch('https://superplace-academy.pages.dev/api/teachers/applications?directorId=1');
                const data = await response.json();
                
                resultDiv.className = 'result success';
                resultDiv.innerHTML = `
                    <h4>âœ… API ì‘ë‹µ ì„±ê³µ</h4>
                    <p><strong>ìŠ¹ì¸ ëŒ€ê¸° ìˆ˜:</strong> ${data.applications ? data.applications.length : 0}</p>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.innerHTML = `
                    <h4>âŒ API ì—ëŸ¬</h4>
                    <p>${error.message}</p>
                `;
            }
        }

        async function testAddTeacherAPI() {
            const resultDiv = document.getElementById('addResult');
            const email = document.getElementById('testEmail').value;
            
            resultDiv.innerHTML = 'ë¡œë”© ì¤‘...';
            
            const testData = {
                name: 'í…ŒìŠ¤íŠ¸ì„ ìƒë‹˜',
                email: email,
                phone: '010-1234-5678',
                password: 'test1234!',
                directorId: 1
            };
            
            try {
                const response = await fetch('https://superplace-academy.pages.dev/api/teachers/add', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(testData)
                });
                const data = await response.json();
                
                if (data.success) {
                    resultDiv.className = 'result success';
                    resultDiv.innerHTML = `
                        <h4>âœ… ì„ ìƒë‹˜ ì¶”ê°€ ì„±ê³µ</h4>
                        <p><strong>ë©”ì‹œì§€:</strong> ${data.message}</p>
                        <p><strong>ì„ ìƒë‹˜ ID:</strong> ${data.teacherId}</p>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                } else {
                    resultDiv.className = 'result error';
                    resultDiv.innerHTML = `
                        <h4>âŒ ì„ ìƒë‹˜ ì¶”ê°€ ì‹¤íŒ¨</h4>
                        <p><strong>ì—ëŸ¬:</strong> ${data.error}</p>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    `;
                }
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.innerHTML = `
                    <h4>âŒ API ì—ëŸ¬</h4>
                    <p>${error.message}</p>
                `;
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ API í…ŒìŠ¤íŠ¸
        window.addEventListener('load', () => {
            console.log('í˜ì´ì§€ ë¡œë“œë¨. API í…ŒìŠ¤íŠ¸ ì¤€ë¹„ ì™„ë£Œ.');
        });
    </script>
</body>
</html>
