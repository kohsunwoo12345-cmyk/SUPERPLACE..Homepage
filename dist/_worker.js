var Et=Object.defineProperty;var We=e=>{throw TypeError(e)};var kt=(e,t,s)=>t in e?Et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var f=(e,t,s)=>kt(e,typeof t!="symbol"?t+"":t,s),$e=(e,t,s)=>t.has(e)||We("Cannot "+s);var u=(e,t,s)=>($e(e,t,"read from private field"),s?s.call(e):t.get(e)),y=(e,t,s)=>t.has(e)?We("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),h=(e,t,s,r)=>($e(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),k=(e,t,s)=>($e(e,t,"access private method"),s);var Ye=(e,t,s,r)=>({set _(a){h(e,t,a,s)},get _(){return u(e,t,r)}});var Ve=(e,t,s)=>(r,a)=>{let n=-1;return l(0);async function l(o){if(o<=n)throw new Error("next() called multiple times");n=o;let i,c=!1,p;if(e[o]?(p=e[o][0][0],r.req.routeIndex=o):p=o===e.length&&a||void 0,p)try{i=await p(r,()=>l(o+1))}catch(m){if(m instanceof Error&&t)r.error=m,i=await t(m,r),c=!0;else throw m}else r.finalized===!1&&s&&(i=await s(r));return i&&(r.finalized===!1||c)&&(r.res=i),r}},It=Symbol(),_t=async(e,t=Object.create(null))=>{const{all:s=!1,dot:r=!1}=t,n=(e instanceof dt?e.raw.headers:e.headers).get("Content-Type");return n!=null&&n.startsWith("multipart/form-data")||n!=null&&n.startsWith("application/x-www-form-urlencoded")?Tt(e,{all:s,dot:r}):{}};async function Tt(e,t){const s=await e.formData();return s?St(s,t):{}}function St(e,t){const s=Object.create(null);return e.forEach((r,a)=>{t.all||a.endsWith("[]")?jt(s,a,r):s[a]=r}),t.dot&&Object.entries(s).forEach(([r,a])=>{r.includes(".")&&(Ct(s,r,a),delete s[r])}),s}var jt=(e,t,s)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(s):e[t]=[e[t],s]:t.endsWith("[]")?e[t]=[s]:e[t]=s},Ct=(e,t,s)=>{let r=e;const a=t.split(".");a.forEach((n,l)=>{l===a.length-1?r[n]=s:((!r[n]||typeof r[n]!="object"||Array.isArray(r[n])||r[n]instanceof File)&&(r[n]=Object.create(null)),r=r[n])})},at=e=>{const t=e.split("/");return t[0]===""&&t.shift(),t},Dt=e=>{const{groups:t,path:s}=Bt(e),r=at(s);return Rt(r,t)},Bt=e=>{const t=[];return e=e.replace(/\{[^}]+\}/g,(s,r)=>{const a=`@${r}`;return t.push([a,s]),a}),{groups:t,path:e}},Rt=(e,t)=>{for(let s=t.length-1;s>=0;s--){const[r]=t[s];for(let a=e.length-1;a>=0;a--)if(e[a].includes(r)){e[a]=e[a].replace(r,t[s][1]);break}}return e},Ce={},Mt=(e,t)=>{if(e==="*")return"*";const s=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(s){const r=`${e}#${t}`;return Ce[r]||(s[2]?Ce[r]=t&&t[0]!==":"&&t[0]!=="*"?[r,s[1],new RegExp(`^${s[2]}(?=/${t})`)]:[e,s[1],new RegExp(`^${s[2]}$`)]:Ce[r]=[e,s[1],!0]),Ce[r]}return null},He=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,s=>{try{return t(s)}catch{return s}})}},Lt=e=>He(e,decodeURI),nt=e=>{const t=e.url,s=t.indexOf("/",t.indexOf(":")+4);let r=s;for(;r<t.length;r++){const a=t.charCodeAt(r);if(a===37){const n=t.indexOf("?",r),l=t.slice(s,n===-1?void 0:n);return Lt(l.includes("%25")?l.replace(/%25/g,"%2525"):l)}else if(a===63)break}return t.slice(s,r)},Nt=e=>{const t=nt(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},de=(e,t,...s)=>(s.length&&(t=de(t,...s)),`${(e==null?void 0:e[0])==="/"?"":"/"}${e}${t==="/"?"":`${(e==null?void 0:e.at(-1))==="/"?"":"/"}${(t==null?void 0:t[0])==="/"?t.slice(1):t}`}`),lt=e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;const t=e.split("/"),s=[];let r="";return t.forEach(a=>{if(a!==""&&!/\:/.test(a))r+="/"+a;else if(/\:/.test(a))if(/\?/.test(a)){s.length===0&&r===""?s.push("/"):s.push(r);const n=a.replace("?","");r+="/"+n,s.push(r)}else r+="/"+a}),s.filter((a,n,l)=>l.indexOf(a)===n)},Ae=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?He(e,it):e):e,ot=(e,t,s)=>{let r;if(!s&&t&&!/[%+]/.test(t)){let l=e.indexOf("?",8);if(l===-1)return;for(e.startsWith(t,l+1)||(l=e.indexOf(`&${t}`,l+1));l!==-1;){const o=e.charCodeAt(l+t.length+1);if(o===61){const i=l+t.length+2,c=e.indexOf("&",i);return Ae(e.slice(i,c===-1?void 0:c))}else if(o==38||isNaN(o))return"";l=e.indexOf(`&${t}`,l+1)}if(r=/[%+]/.test(e),!r)return}const a={};r??(r=/[%+]/.test(e));let n=e.indexOf("?",8);for(;n!==-1;){const l=e.indexOf("&",n+1);let o=e.indexOf("=",n);o>l&&l!==-1&&(o=-1);let i=e.slice(n+1,o===-1?l===-1?void 0:l:o);if(r&&(i=Ae(i)),n=l,i==="")continue;let c;o===-1?c="":(c=e.slice(o+1,l===-1?void 0:l),r&&(c=Ae(c))),s?(a[i]&&Array.isArray(a[i])||(a[i]=[]),a[i].push(c)):a[i]??(a[i]=c)}return t?a[t]:a},Ot=ot,$t=(e,t)=>ot(e,t,!0),it=decodeURIComponent,Ge=e=>He(e,it),ue,O,Y,ct,pt,qe,G,Ze,dt=(Ze=class{constructor(e,t="/",s=[[]]){y(this,Y);f(this,"raw");y(this,ue);y(this,O);f(this,"routeIndex",0);f(this,"path");f(this,"bodyCache",{});y(this,G,e=>{const{bodyCache:t,raw:s}=this,r=t[e];if(r)return r;const a=Object.keys(t)[0];return a?t[a].then(n=>(a==="json"&&(n=JSON.stringify(n)),new Response(n)[e]())):t[e]=s[e]()});this.raw=e,this.path=t,h(this,O,s),h(this,ue,{})}param(e){return e?k(this,Y,ct).call(this,e):k(this,Y,pt).call(this)}query(e){return Ot(this.url,e)}queries(e){return $t(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;const t={};return this.raw.headers.forEach((s,r)=>{t[r]=s}),t}async parseBody(e){var t;return(t=this.bodyCache).parsedBody??(t.parsedBody=await _t(this,e))}json(){return u(this,G).call(this,"text").then(e=>JSON.parse(e))}text(){return u(this,G).call(this,"text")}arrayBuffer(){return u(this,G).call(this,"arrayBuffer")}blob(){return u(this,G).call(this,"blob")}formData(){return u(this,G).call(this,"formData")}addValidatedData(e,t){u(this,ue)[e]=t}valid(e){return u(this,ue)[e]}get url(){return this.raw.url}get method(){return this.raw.method}get[It](){return u(this,O)}get matchedRoutes(){return u(this,O)[0].map(([[,e]])=>e)}get routePath(){return u(this,O)[0].map(([[,e]])=>e)[this.routeIndex].path}},ue=new WeakMap,O=new WeakMap,Y=new WeakSet,ct=function(e){const t=u(this,O)[0][this.routeIndex][1][e],s=k(this,Y,qe).call(this,t);return s&&/\%/.test(s)?Ge(s):s},pt=function(){const e={},t=Object.keys(u(this,O)[0][this.routeIndex][1]);for(const s of t){const r=k(this,Y,qe).call(this,u(this,O)[0][this.routeIndex][1][s]);r!==void 0&&(e[s]=/\%/.test(r)?Ge(r):r)}return e},qe=function(e){return u(this,O)[1]?u(this,O)[1][e]:e},G=new WeakMap,Ze),At={Stringify:1},ut=async(e,t,s,r,a)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));const n=e.callbacks;return n!=null&&n.length?(a?a[0]+=e:a=[e],Promise.all(n.map(o=>o({phase:t,buffer:a,context:r}))).then(o=>Promise.all(o.filter(Boolean).map(i=>ut(i,t,!1,r,a))).then(()=>a[0]))):Promise.resolve(e)},Pt="text/plain; charset=UTF-8",Pe=(e,t)=>({"Content-Type":e,...t}),Ee,ke,q,me,H,N,Ie,ge,xe,se,_e,Te,J,ce,Qe,Ft=(Qe=class{constructor(e,t){y(this,J);y(this,Ee);y(this,ke);f(this,"env",{});y(this,q);f(this,"finalized",!1);f(this,"error");y(this,me);y(this,H);y(this,N);y(this,Ie);y(this,ge);y(this,xe);y(this,se);y(this,_e);y(this,Te);f(this,"render",(...e)=>(u(this,ge)??h(this,ge,t=>this.html(t)),u(this,ge).call(this,...e)));f(this,"setLayout",e=>h(this,Ie,e));f(this,"getLayout",()=>u(this,Ie));f(this,"setRenderer",e=>{h(this,ge,e)});f(this,"header",(e,t,s)=>{this.finalized&&h(this,N,new Response(u(this,N).body,u(this,N)));const r=u(this,N)?u(this,N).headers:u(this,se)??h(this,se,new Headers);t===void 0?r.delete(e):s!=null&&s.append?r.append(e,t):r.set(e,t)});f(this,"status",e=>{h(this,me,e)});f(this,"set",(e,t)=>{u(this,q)??h(this,q,new Map),u(this,q).set(e,t)});f(this,"get",e=>u(this,q)?u(this,q).get(e):void 0);f(this,"newResponse",(...e)=>k(this,J,ce).call(this,...e));f(this,"body",(e,t,s)=>k(this,J,ce).call(this,e,t,s));f(this,"text",(e,t,s)=>!u(this,se)&&!u(this,me)&&!t&&!s&&!this.finalized?new Response(e):k(this,J,ce).call(this,e,t,Pe(Pt,s)));f(this,"json",(e,t,s)=>k(this,J,ce).call(this,JSON.stringify(e),t,Pe("application/json",s)));f(this,"html",(e,t,s)=>{const r=a=>k(this,J,ce).call(this,a,t,Pe("text/html; charset=UTF-8",s));return typeof e=="object"?ut(e,At.Stringify,!1,{}).then(r):r(e)});f(this,"redirect",(e,t)=>{const s=String(e);return this.header("Location",/[^\x00-\xFF]/.test(s)?encodeURI(s):s),this.newResponse(null,t??302)});f(this,"notFound",()=>(u(this,xe)??h(this,xe,()=>new Response),u(this,xe).call(this,this)));h(this,Ee,e),t&&(h(this,H,t.executionCtx),this.env=t.env,h(this,xe,t.notFoundHandler),h(this,Te,t.path),h(this,_e,t.matchResult))}get req(){return u(this,ke)??h(this,ke,new dt(u(this,Ee),u(this,Te),u(this,_e))),u(this,ke)}get event(){if(u(this,H)&&"respondWith"in u(this,H))return u(this,H);throw Error("This context has no FetchEvent")}get executionCtx(){if(u(this,H))return u(this,H);throw Error("This context has no ExecutionContext")}get res(){return u(this,N)||h(this,N,new Response(null,{headers:u(this,se)??h(this,se,new Headers)}))}set res(e){if(u(this,N)&&e){e=new Response(e.body,e);for(const[t,s]of u(this,N).headers.entries())if(t!=="content-type")if(t==="set-cookie"){const r=u(this,N).headers.getSetCookie();e.headers.delete("set-cookie");for(const a of r)e.headers.append("set-cookie",a)}else e.headers.set(t,s)}h(this,N,e),this.finalized=!0}get var(){return u(this,q)?Object.fromEntries(u(this,q)):{}}},Ee=new WeakMap,ke=new WeakMap,q=new WeakMap,me=new WeakMap,H=new WeakMap,N=new WeakMap,Ie=new WeakMap,ge=new WeakMap,xe=new WeakMap,se=new WeakMap,_e=new WeakMap,Te=new WeakMap,J=new WeakSet,ce=function(e,t,s){const r=u(this,N)?new Headers(u(this,N).headers):u(this,se)??new Headers;if(typeof t=="object"&&"headers"in t){const n=t.headers instanceof Headers?t.headers:new Headers(t.headers);for(const[l,o]of n)l.toLowerCase()==="set-cookie"?r.append(l,o):r.set(l,o)}if(s)for(const[n,l]of Object.entries(s))if(typeof l=="string")r.set(n,l);else{r.delete(n);for(const o of l)r.append(n,o)}const a=typeof t=="number"?t:(t==null?void 0:t.status)??u(this,me);return new Response(e,{status:a,headers:r})},Qe),C="ALL",Ut="all",qt=["get","post","put","delete","options","patch"],mt="Can not add a route since the matcher is already built.",gt=class extends Error{},Ht="__COMPOSED_HANDLER",zt=e=>e.text("404 Not Found",404),Je=(e,t)=>{if("getResponse"in e){const s=e.getResponse();return t.newResponse(s.body,s)}return console.error(e),t.text("Internal Server Error",500)},A,D,xt,P,ee,De,Be,ve,Wt=(ve=class{constructor(t={}){y(this,D);f(this,"get");f(this,"post");f(this,"put");f(this,"delete");f(this,"options");f(this,"patch");f(this,"all");f(this,"on");f(this,"use");f(this,"router");f(this,"getPath");f(this,"_basePath","/");y(this,A,"/");f(this,"routes",[]);y(this,P,zt);f(this,"errorHandler",Je);f(this,"onError",t=>(this.errorHandler=t,this));f(this,"notFound",t=>(h(this,P,t),this));f(this,"fetch",(t,...s)=>k(this,D,Be).call(this,t,s[1],s[0],t.method));f(this,"request",(t,s,r,a)=>t instanceof Request?this.fetch(s?new Request(t,s):t,r,a):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${de("/",t)}`,s),r,a)));f(this,"fire",()=>{addEventListener("fetch",t=>{t.respondWith(k(this,D,Be).call(this,t.request,t,void 0,t.request.method))})});[...qt,Ut].forEach(n=>{this[n]=(l,...o)=>(typeof l=="string"?h(this,A,l):k(this,D,ee).call(this,n,u(this,A),l),o.forEach(i=>{k(this,D,ee).call(this,n,u(this,A),i)}),this)}),this.on=(n,l,...o)=>{for(const i of[l].flat()){h(this,A,i);for(const c of[n].flat())o.map(p=>{k(this,D,ee).call(this,c.toUpperCase(),u(this,A),p)})}return this},this.use=(n,...l)=>(typeof n=="string"?h(this,A,n):(h(this,A,"*"),l.unshift(n)),l.forEach(o=>{k(this,D,ee).call(this,C,u(this,A),o)}),this);const{strict:r,...a}=t;Object.assign(this,a),this.getPath=r??!0?t.getPath??nt:Nt}route(t,s){const r=this.basePath(t);return s.routes.map(a=>{var l;let n;s.errorHandler===Je?n=a.handler:(n=async(o,i)=>(await Ve([],s.errorHandler)(o,()=>a.handler(o,i))).res,n[Ht]=a.handler),k(l=r,D,ee).call(l,a.method,a.path,n)}),this}basePath(t){const s=k(this,D,xt).call(this);return s._basePath=de(this._basePath,t),s}mount(t,s,r){let a,n;r&&(typeof r=="function"?n=r:(n=r.optionHandler,r.replaceRequest===!1?a=i=>i:a=r.replaceRequest));const l=n?i=>{const c=n(i);return Array.isArray(c)?c:[c]}:i=>{let c;try{c=i.executionCtx}catch{}return[i.env,c]};a||(a=(()=>{const i=de(this._basePath,t),c=i==="/"?0:i.length;return p=>{const m=new URL(p.url);return m.pathname=m.pathname.slice(c)||"/",new Request(m,p)}})());const o=async(i,c)=>{const p=await s(a(i.req.raw),...l(i));if(p)return p;await c()};return k(this,D,ee).call(this,C,de(t,"*"),o),this}},A=new WeakMap,D=new WeakSet,xt=function(){const t=new ve({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,h(t,P,u(this,P)),t.routes=this.routes,t},P=new WeakMap,ee=function(t,s,r){t=t.toUpperCase(),s=de(this._basePath,s);const a={basePath:this._basePath,path:s,method:t,handler:r};this.router.add(t,s,[r,a]),this.routes.push(a)},De=function(t,s){if(t instanceof Error)return this.errorHandler(t,s);throw t},Be=function(t,s,r,a){if(a==="HEAD")return(async()=>new Response(null,await k(this,D,Be).call(this,t,s,r,"GET")))();const n=this.getPath(t,{env:r}),l=this.router.match(a,n),o=new Ft(t,{path:n,matchResult:l,env:r,executionCtx:s,notFoundHandler:u(this,P)});if(l[0].length===1){let c;try{c=l[0][0][0][0](o,async()=>{o.res=await u(this,P).call(this,o)})}catch(p){return k(this,D,De).call(this,p,o)}return c instanceof Promise?c.then(p=>p||(o.finalized?o.res:u(this,P).call(this,o))).catch(p=>k(this,D,De).call(this,p,o)):c??u(this,P).call(this,o)}const i=Ve(l[0],this.errorHandler,u(this,P));return(async()=>{try{const c=await i(o);if(!c.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return c.res}catch(c){return k(this,D,De).call(this,c,o)}})()},ve),vt=[];function Yt(e,t){const s=this.buildAllMatchers(),r=((a,n)=>{const l=s[a]||s[C],o=l[2][n];if(o)return o;const i=n.match(l[0]);if(!i)return[[],vt];const c=i.indexOf("",1);return[l[1][c],i]});return this.match=r,r(e,t)}var Me="[^/]+",ye=".*",we="(?:|/.*)",pe=Symbol(),Vt=new Set(".\\+*[^]$()");function Gt(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===ye||e===we?1:t===ye||t===we?-1:e===Me?1:t===Me?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var re,ae,F,oe,Jt=(oe=class{constructor(){y(this,re);y(this,ae);y(this,F,Object.create(null))}insert(t,s,r,a,n){if(t.length===0){if(u(this,re)!==void 0)throw pe;if(n)return;h(this,re,s);return}const[l,...o]=t,i=l==="*"?o.length===0?["","",ye]:["","",Me]:l==="/*"?["","",we]:l.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let c;if(i){const p=i[1];let m=i[2]||Me;if(p&&i[2]&&(m===".*"||(m=m.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(m))))throw pe;if(c=u(this,F)[m],!c){if(Object.keys(u(this,F)).some(g=>g!==ye&&g!==we))throw pe;if(n)return;c=u(this,F)[m]=new oe,p!==""&&h(c,ae,a.varIndex++)}!n&&p!==""&&r.push([p,u(c,ae)])}else if(c=u(this,F)[l],!c){if(Object.keys(u(this,F)).some(p=>p.length>1&&p!==ye&&p!==we))throw pe;if(n)return;c=u(this,F)[l]=new oe}c.insert(o,s,r,a,n)}buildRegExpStr(){const s=Object.keys(u(this,F)).sort(Gt).map(r=>{const a=u(this,F)[r];return(typeof u(a,ae)=="number"?`(${r})@${u(a,ae)}`:Vt.has(r)?`\\${r}`:r)+a.buildRegExpStr()});return typeof u(this,re)=="number"&&s.unshift(`#${u(this,re)}`),s.length===0?"":s.length===1?s[0]:"(?:"+s.join("|")+")"}},re=new WeakMap,ae=new WeakMap,F=new WeakMap,oe),Le,Se,et,Xt=(et=class{constructor(){y(this,Le,{varIndex:0});y(this,Se,new Jt)}insert(e,t,s){const r=[],a=[];for(let l=0;;){let o=!1;if(e=e.replace(/\{[^}]+\}/g,i=>{const c=`@\\${l}`;return a[l]=[c,i],l++,o=!0,c}),!o)break}const n=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let l=a.length-1;l>=0;l--){const[o]=a[l];for(let i=n.length-1;i>=0;i--)if(n[i].indexOf(o)!==-1){n[i]=n[i].replace(o,a[l][1]);break}}return u(this,Se).insert(n,t,r,u(this,Le),s),r}buildRegExp(){let e=u(this,Se).buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0;const s=[],r=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(a,n,l)=>n!==void 0?(s[++t]=Number(n),"$()"):(l!==void 0&&(r[Number(l)]=++t),"")),[new RegExp(`^${e}`),s,r]}},Le=new WeakMap,Se=new WeakMap,et),Kt=[/^$/,[],Object.create(null)],Re=Object.create(null);function bt(e){return Re[e]??(Re[e]=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,s)=>s?`\\${s}`:"(?:|/.*)")}$`))}function Zt(){Re=Object.create(null)}function Qt(e){var c;const t=new Xt,s=[];if(e.length===0)return Kt;const r=e.map(p=>[!/\*|\/:/.test(p[0]),...p]).sort(([p,m],[g,x])=>p?1:g?-1:m.length-x.length),a=Object.create(null);for(let p=0,m=-1,g=r.length;p<g;p++){const[x,v,w]=r[p];x?a[v]=[w.map(([E])=>[E,Object.create(null)]),vt]:m++;let b;try{b=t.insert(v,m,x)}catch(E){throw E===pe?new gt(v):E}x||(s[m]=w.map(([E,_])=>{const U=Object.create(null);for(_-=1;_>=0;_--){const[I,j]=b[_];U[I]=j}return[E,U]}))}const[n,l,o]=t.buildRegExp();for(let p=0,m=s.length;p<m;p++)for(let g=0,x=s[p].length;g<x;g++){const v=(c=s[p][g])==null?void 0:c[1];if(!v)continue;const w=Object.keys(v);for(let b=0,E=w.length;b<E;b++)v[w[b]]=o[v[w[b]]]}const i=[];for(const p in l)i[p]=s[l[p]];return[n,i,a]}function ie(e,t){if(e){for(const s of Object.keys(e).sort((r,a)=>a.length-r.length))if(bt(s).test(t))return[...e[s]]}}var X,K,Ne,ht,tt,es=(tt=class{constructor(){y(this,Ne);f(this,"name","RegExpRouter");y(this,X);y(this,K);f(this,"match",Yt);h(this,X,{[C]:Object.create(null)}),h(this,K,{[C]:Object.create(null)})}add(e,t,s){var o;const r=u(this,X),a=u(this,K);if(!r||!a)throw new Error(mt);r[e]||[r,a].forEach(i=>{i[e]=Object.create(null),Object.keys(i[C]).forEach(c=>{i[e][c]=[...i[C][c]]})}),t==="/*"&&(t="*");const n=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){const i=bt(t);e===C?Object.keys(r).forEach(c=>{var p;(p=r[c])[t]||(p[t]=ie(r[c],t)||ie(r[C],t)||[])}):(o=r[e])[t]||(o[t]=ie(r[e],t)||ie(r[C],t)||[]),Object.keys(r).forEach(c=>{(e===C||e===c)&&Object.keys(r[c]).forEach(p=>{i.test(p)&&r[c][p].push([s,n])})}),Object.keys(a).forEach(c=>{(e===C||e===c)&&Object.keys(a[c]).forEach(p=>i.test(p)&&a[c][p].push([s,n]))});return}const l=lt(t)||[t];for(let i=0,c=l.length;i<c;i++){const p=l[i];Object.keys(a).forEach(m=>{var g;(e===C||e===m)&&((g=a[m])[p]||(g[p]=[...ie(r[m],p)||ie(r[C],p)||[]]),a[m][p].push([s,n-c+i+1]))})}}buildAllMatchers(){const e=Object.create(null);return Object.keys(u(this,K)).concat(Object.keys(u(this,X))).forEach(t=>{e[t]||(e[t]=k(this,Ne,ht).call(this,t))}),h(this,X,h(this,K,void 0)),Zt(),e}},X=new WeakMap,K=new WeakMap,Ne=new WeakSet,ht=function(e){const t=[];let s=e===C;return[u(this,X),u(this,K)].forEach(r=>{const a=r[e]?Object.keys(r[e]).map(n=>[n,r[e][n]]):[];a.length!==0?(s||(s=!0),t.push(...a)):e!==C&&t.push(...Object.keys(r[C]).map(n=>[n,r[C][n]]))}),s?Qt(t):null},tt),Z,z,st,ts=(st=class{constructor(e){f(this,"name","SmartRouter");y(this,Z,[]);y(this,z,[]);h(this,Z,e.routers)}add(e,t,s){if(!u(this,z))throw new Error(mt);u(this,z).push([e,t,s])}match(e,t){if(!u(this,z))throw new Error("Fatal error");const s=u(this,Z),r=u(this,z),a=s.length;let n=0,l;for(;n<a;n++){const o=s[n];try{for(let i=0,c=r.length;i<c;i++)o.add(...r[i]);l=o.match(e,t)}catch(i){if(i instanceof gt)continue;throw i}this.match=o.match.bind(o),h(this,Z,[o]),h(this,z,void 0);break}if(n===a)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,l}get activeRouter(){if(u(this,z)||u(this,Z).length!==1)throw new Error("No active router has been determined yet.");return u(this,Z)[0]}},Z=new WeakMap,z=new WeakMap,st),fe=Object.create(null),Q,L,ne,be,R,W,te,he,ss=(he=class{constructor(t,s,r){y(this,W);y(this,Q);y(this,L);y(this,ne);y(this,be,0);y(this,R,fe);if(h(this,L,r||Object.create(null)),h(this,Q,[]),t&&s){const a=Object.create(null);a[t]={handler:s,possibleKeys:[],score:0},h(this,Q,[a])}h(this,ne,[])}insert(t,s,r){h(this,be,++Ye(this,be)._);let a=this;const n=Dt(s),l=[];for(let o=0,i=n.length;o<i;o++){const c=n[o],p=n[o+1],m=Mt(c,p),g=Array.isArray(m)?m[0]:c;if(g in u(a,L)){a=u(a,L)[g],m&&l.push(m[1]);continue}u(a,L)[g]=new he,m&&(u(a,ne).push(m),l.push(m[1])),a=u(a,L)[g]}return u(a,Q).push({[t]:{handler:r,possibleKeys:l.filter((o,i,c)=>c.indexOf(o)===i),score:u(this,be)}}),a}search(t,s){var i;const r=[];h(this,R,fe);let n=[this];const l=at(s),o=[];for(let c=0,p=l.length;c<p;c++){const m=l[c],g=c===p-1,x=[];for(let v=0,w=n.length;v<w;v++){const b=n[v],E=u(b,L)[m];E&&(h(E,R,u(b,R)),g?(u(E,L)["*"]&&r.push(...k(this,W,te).call(this,u(E,L)["*"],t,u(b,R))),r.push(...k(this,W,te).call(this,E,t,u(b,R)))):x.push(E));for(let _=0,U=u(b,ne).length;_<U;_++){const I=u(b,ne)[_],j=u(b,R)===fe?{}:{...u(b,R)};if(I==="*"){const V=u(b,L)["*"];V&&(r.push(...k(this,W,te).call(this,V,t,u(b,R))),h(V,R,j),x.push(V));continue}const[$,M,T]=I;if(!m&&!(T instanceof RegExp))continue;const S=u(b,L)[$],wt=l.slice(c).join("/");if(T instanceof RegExp){const V=T.exec(wt);if(V){if(j[M]=V[0],r.push(...k(this,W,te).call(this,S,t,u(b,R),j)),Object.keys(u(S,L)).length){h(S,R,j);const Oe=((i=V[0].match(/\//))==null?void 0:i.length)??0;(o[Oe]||(o[Oe]=[])).push(S)}continue}}(T===!0||T.test(m))&&(j[M]=m,g?(r.push(...k(this,W,te).call(this,S,t,j,u(b,R))),u(S,L)["*"]&&r.push(...k(this,W,te).call(this,u(S,L)["*"],t,j,u(b,R)))):(h(S,R,j),x.push(S)))}}n=x.concat(o.shift()??[])}return r.length>1&&r.sort((c,p)=>c.score-p.score),[r.map(({handler:c,params:p})=>[c,p])]}},Q=new WeakMap,L=new WeakMap,ne=new WeakMap,be=new WeakMap,R=new WeakMap,W=new WeakSet,te=function(t,s,r,a){const n=[];for(let l=0,o=u(t,Q).length;l<o;l++){const i=u(t,Q)[l],c=i[s]||i[C],p={};if(c!==void 0&&(c.params=Object.create(null),n.push(c),r!==fe||a&&a!==fe))for(let m=0,g=c.possibleKeys.length;m<g;m++){const x=c.possibleKeys[m],v=p[c.score];c.params[x]=a!=null&&a[x]&&!v?a[x]:r[x]??(a==null?void 0:a[x]),p[c.score]=!0}}return n},he),le,rt,rs=(rt=class{constructor(){f(this,"name","TrieRouter");y(this,le);h(this,le,new ss)}add(e,t,s){const r=lt(t);if(r){for(let a=0,n=r.length;a<n;a++)u(this,le).insert(e,r[a],s);return}u(this,le).insert(e,t,s)}match(e,t){return u(this,le).search(e,t)}},le=new WeakMap,rt),ze=class extends Wt{constructor(e={}){super(e),this.router=e.router??new ts({routers:[new es,new rs]})}},as=e=>{const s={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...e},r=(n=>typeof n=="string"?n==="*"?()=>n:l=>n===l?l:null:typeof n=="function"?n:l=>n.includes(l)?l:null)(s.origin),a=(n=>typeof n=="function"?n:Array.isArray(n)?()=>n:()=>[])(s.allowMethods);return async function(l,o){var p;function i(m,g){l.res.headers.set(m,g)}const c=await r(l.req.header("origin")||"",l);if(c&&i("Access-Control-Allow-Origin",c),s.credentials&&i("Access-Control-Allow-Credentials","true"),(p=s.exposeHeaders)!=null&&p.length&&i("Access-Control-Expose-Headers",s.exposeHeaders.join(",")),l.req.method==="OPTIONS"){s.origin!=="*"&&i("Vary","Origin"),s.maxAge!=null&&i("Access-Control-Max-Age",s.maxAge.toString());const m=await a(l.req.header("origin")||"",l);m.length&&i("Access-Control-Allow-Methods",m.join(","));let g=s.allowHeaders;if(!(g!=null&&g.length)){const x=l.req.header("Access-Control-Request-Headers");x&&(g=x.split(/\s*,\s*/))}return g!=null&&g.length&&(i("Access-Control-Allow-Headers",g.join(",")),l.res.headers.append("Vary","Access-Control-Request-Headers")),l.res.headers.delete("Content-Length"),l.res.headers.delete("Content-Type"),new Response(null,{headers:l.res.headers,status:204,statusText:"No Content"})}await o(),s.origin!=="*"&&l.header("Vary","Origin",{append:!0})}},ns=/^\s*(?:text\/(?!event-stream(?:[;\s]|$))[^;\s]+|application\/(?:javascript|json|xml|xml-dtd|ecmascript|dart|postscript|rtf|tar|toml|vnd\.dart|vnd\.ms-fontobject|vnd\.ms-opentype|wasm|x-httpd-php|x-javascript|x-ns-proxy-autoconfig|x-sh|x-tar|x-virtualbox-hdd|x-virtualbox-ova|x-virtualbox-ovf|x-virtualbox-vbox|x-virtualbox-vdi|x-virtualbox-vhd|x-virtualbox-vmdk|x-www-form-urlencoded)|font\/(?:otf|ttf)|image\/(?:bmp|vnd\.adobe\.photoshop|vnd\.microsoft\.icon|vnd\.ms-dds|x-icon|x-ms-bmp)|message\/rfc822|model\/gltf-binary|x-shader\/x-fragment|x-shader\/x-vertex|[^;\s]+?\+(?:json|text|xml|yaml))(?:[;\s]|$)/i,Xe=(e,t=os)=>{const s=/\.([a-zA-Z0-9]+?)$/,r=e.match(s);if(!r)return;let a=t[r[1]];return a&&a.startsWith("text")&&(a+="; charset=utf-8"),a},ls={aac:"audio/aac",avi:"video/x-msvideo",avif:"image/avif",av1:"video/av1",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",gz:"application/gzip",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",map:"application/json",mid:"audio/x-midi",midi:"audio/x-midi",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",pdf:"application/pdf",png:"image/png",rtf:"application/rtf",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",wasm:"application/wasm",webm:"video/webm",weba:"audio/webm",webmanifest:"application/manifest+json",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xml:"application/xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2",gltf:"model/gltf+json",glb:"model/gltf-binary"},os=ls,is=(...e)=>{let t=e.filter(a=>a!=="").join("/");t=t.replace(new RegExp("(?<=\\/)\\/+","g"),"");const s=t.split("/"),r=[];for(const a of s)a===".."&&r.length>0&&r.at(-1)!==".."?r.pop():a!=="."&&r.push(a);return r.join("/")||"."},ft={br:".br",zstd:".zst",gzip:".gz"},ds=Object.keys(ft),cs="index.html",ps=e=>{const t=e.root??"./",s=e.path,r=e.join??is;return async(a,n)=>{var p,m,g,x;if(a.finalized)return n();let l;if(e.path)l=e.path;else try{if(l=decodeURIComponent(a.req.path),/(?:^|[\/\\])\.\.(?:$|[\/\\])/.test(l))throw new Error}catch{return await((p=e.onNotFound)==null?void 0:p.call(e,a.req.path,a)),n()}let o=r(t,!s&&e.rewriteRequestPath?e.rewriteRequestPath(l):l);e.isDir&&await e.isDir(o)&&(o=r(o,cs));const i=e.getContent;let c=await i(o,a);if(c instanceof Response)return a.newResponse(c.body,c);if(c){const v=e.mimes&&Xe(o,e.mimes)||Xe(o);if(a.header("Content-Type",v||"application/octet-stream"),e.precompressed&&(!v||ns.test(v))){const w=new Set((m=a.req.header("Accept-Encoding"))==null?void 0:m.split(",").map(b=>b.trim()));for(const b of ds){if(!w.has(b))continue;const E=await i(o+ft[b],a);if(E){c=E,a.header("Content-Encoding",b),a.header("Vary","Accept-Encoding",{append:!0});break}}}return await((g=e.onFound)==null?void 0:g.call(e,o,a)),a.body(c)}await((x=e.onNotFound)==null?void 0:x.call(e,o,a)),await n()}},us=async(e,t)=>{let s;t&&t.manifest?typeof t.manifest=="string"?s=JSON.parse(t.manifest):s=t.manifest:typeof __STATIC_CONTENT_MANIFEST=="string"?s=JSON.parse(__STATIC_CONTENT_MANIFEST):s=__STATIC_CONTENT_MANIFEST;let r;t&&t.namespace?r=t.namespace:r=__STATIC_CONTENT;const a=s[e]||e;if(!a)return null;const n=await r.get(a,{type:"stream"});return n||null},ms=e=>async function(s,r){return ps({...e,getContent:async n=>us(n,{manifest:e.manifest,namespace:e.namespace?e.namespace:s.env?s.env.__STATIC_CONTENT:void 0})})(s,r)},gs=e=>ms(e);const B=new ze;B.get("/api/classes",async e=>{const{DB:t}=e.env,s=e.req.query("academyId")||"1";try{const r=await t.prepare(`
      SELECT c.*, COUNT(s.id) as student_count
      FROM classes c
      LEFT JOIN students s ON c.id = s.class_id
      WHERE c.academy_id = ?
      GROUP BY c.id
      ORDER BY c.created_at DESC
    `).bind(s).all();return e.json({success:!0,classes:r.results})}catch(r){return e.json({success:!1,error:r.message},500)}});B.post("/api/classes",async e=>{const{DB:t}=e.env,{academyId:s,className:r,grade:a,description:n}=await e.req.json();try{const l=await t.prepare(`
      INSERT INTO classes (academy_id, class_name, grade, description)
      VALUES (?, ?, ?, ?)
    `).bind(s||1,r,a||"",n||"").run();return e.json({success:!0,classId:l.meta.last_row_id})}catch(l){return e.json({success:!1,error:l.message},500)}});B.put("/api/classes/:classId",async e=>{const{DB:t}=e.env,s=e.req.param("classId"),{className:r,grade:a,description:n}=await e.req.json();try{return await t.prepare(`
      UPDATE classes
      SET class_name = ?, grade = ?, description = ?
      WHERE id = ?
    `).bind(r,a||"",n||"",s).run(),e.json({success:!0})}catch(l){return e.json({success:!1,error:l.message},500)}});B.delete("/api/classes/:classId",async e=>{const{DB:t}=e.env,s=e.req.param("classId");try{return await t.prepare("DELETE FROM classes WHERE id = ?").bind(s).run(),e.json({success:!0})}catch(r){return e.json({success:!1,error:r.message},500)}});B.get("/api/students",async e=>{const{DB:t}=e.env,s=e.req.query("academyId")||"1",r=e.req.query("classId");try{let a=`
      SELECT s.*, c.class_name
      FROM students s
      LEFT JOIN classes c ON s.class_id = c.id
      WHERE s.academy_id = ?
    `;const n=[s];r&&(a+=" AND s.class_id = ?",n.push(r)),a+=" ORDER BY s.created_at DESC";const l=await t.prepare(a).bind(...n).all();return e.json({success:!0,students:l.results})}catch(a){return e.json({success:!1,error:a.message},500)}});B.get("/api/students/:studentId",async e=>{const{DB:t}=e.env,s=e.req.param("studentId");try{const r=await t.prepare(`
      SELECT s.*, c.class_name
      FROM students s
      LEFT JOIN classes c ON s.class_id = c.id
      WHERE s.id = ?
    `).bind(s).first();return r?e.json({success:!0,student:r}):e.json({success:!1,error:"í•™ìƒì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404)}catch(r){return e.json({success:!1,error:r.message},500)}});B.post("/api/students",async e=>{const{DB:t}=e.env,s=await e.req.json(),{academyId:r,classId:a,name:n,phone:l,parentName:o,parentPhone:i,grade:c,subjects:p,enrollmentDate:m,memo:g}=s;try{const x=await t.prepare(`
      INSERT INTO students (academy_id, class_id, name, phone, parent_name, parent_phone, grade, subjects, enrollment_date, notes)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `).bind(r||1,a||null,n,l||"",o,i,c,p,m,g||"").run();return e.json({success:!0,studentId:x.meta.last_row_id})}catch(x){return e.json({success:!1,error:x.message},500)}});B.put("/api/students/:studentId",async e=>{const{DB:t}=e.env,s=e.req.param("studentId"),r=await e.req.json(),{classId:a,name:n,phone:l,parentName:o,parentPhone:i,grade:c,subjects:p,memo:m}=r;try{return await t.prepare(`
      UPDATE students
      SET class_id = ?, name = ?, phone = ?, parent_name = ?, parent_phone = ?, grade = ?, subjects = ?, notes = ?, updated_at = CURRENT_TIMESTAMP
      WHERE id = ?
    `).bind(a||null,n,l||"",o,i,c,p,m||"",s).run(),e.json({success:!0})}catch(g){return e.json({success:!1,error:g.message},500)}});B.delete("/api/students/:studentId",async e=>{const{DB:t}=e.env,s=e.req.param("studentId");try{return await t.prepare("DELETE FROM students WHERE id = ?").bind(s).run(),e.json({success:!0})}catch(r){return e.json({success:!1,error:r.message},500)}});B.get("/api/courses",async e=>{const{DB:t}=e.env,s=e.req.query("academyId")||"1";try{const r=await t.prepare(`
      SELECT * FROM courses WHERE academy_id = ? ORDER BY created_at DESC
    `).bind(s).all();return e.json({success:!0,courses:r.results})}catch(r){return e.json({success:!1,error:r.message},500)}});B.post("/api/courses",async e=>{const{DB:t}=e.env,{academy_id:s,course_name:r,description:a}=await e.req.json();try{const n=await t.prepare(`
      INSERT INTO courses (academy_id, course_name, description)
      VALUES (?, ?, ?)
    `).bind(s||1,r,a||"").run();return e.json({success:!0,courseId:n.meta.last_row_id})}catch(n){return e.json({success:!1,error:n.message},500)}});B.put("/api/courses/:courseId",async e=>{const{DB:t}=e.env,s=e.req.param("courseId"),{academy_id:r,course_name:a,description:n}=await e.req.json();try{return await t.prepare(`
      UPDATE courses 
      SET course_name = ?, description = ?
      WHERE id = ? AND academy_id = ?
    `).bind(a,n||"",s,r).run(),e.json({success:!0})}catch(l){return e.json({success:!1,error:l.message},500)}});B.delete("/api/courses/:courseId",async e=>{const{DB:t}=e.env,s=e.req.param("courseId"),r=e.req.query("academyId");try{return await t.prepare(`
      DELETE FROM courses 
      WHERE id = ? AND academy_id = ?
    `).bind(s,r).run(),e.json({success:!0})}catch(a){return e.json({success:!1,error:a.message},500)}});B.get("/api/daily-records",async e=>{const{DB:t}=e.env,s=e.req.query("studentId"),r=e.req.query("date"),a=e.req.query("startDate"),n=e.req.query("endDate");try{let l=`
      SELECT dr.*, s.name as student_name, c.course_name
      FROM daily_records dr
      LEFT JOIN students s ON dr.student_id = s.id
      LEFT JOIN courses c ON dr.course_id = c.id
      WHERE 1=1
    `;const o=[];s&&(l+=" AND dr.student_id = ?",o.push(s)),r?(l+=" AND dr.record_date = ?",o.push(r)):a&&n&&(l+=" AND dr.record_date BETWEEN ? AND ?",o.push(a,n)),l+=" ORDER BY dr.record_date DESC, dr.created_at DESC";const i=await t.prepare(l).bind(...o).all();return e.json({success:!0,records:i.results})}catch(l){return e.json({success:!1,error:l.message},500)}});B.post("/api/daily-records",async e=>{const{DB:t}=e.env,s=await e.req.json(),{studentId:r,courseId:a,recordDate:n,attendance:l,homeworkStatus:o,understandingLevel:i,participationLevel:c,achievement:p,memo:m}=s;try{const g=await t.prepare(`
      INSERT INTO daily_records (student_id, course_id, record_date, attendance, homework_status, understanding_level, participation_level, achievement, memo)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
    `).bind(r,a||null,n,l||null,o||null,i||null,c||null,p||"",m||"").run();return e.json({success:!0,recordId:g.meta.last_row_id})}catch(g){return e.json({success:!1,error:g.message},500)}});B.put("/api/daily-records/:recordId",async e=>{const{DB:t}=e.env,s=e.req.param("recordId"),r=await e.req.json(),{courseId:a,attendance:n,homeworkStatus:l,understandingLevel:o,participationLevel:i,achievement:c,memo:p}=r;try{return await t.prepare(`
      UPDATE daily_records
      SET course_id = ?, attendance = ?, homework_status = ?, understanding_level = ?, participation_level = ?, achievement = ?, memo = ?
      WHERE id = ?
    `).bind(a||null,n||null,l||null,o||null,i||null,c||"",p||"",s).run(),e.json({success:!0})}catch(m){return e.json({success:!1,error:m.message},500)}});B.delete("/api/daily-records/:recordId",async e=>{const{DB:t}=e.env,s=e.req.param("recordId");try{return await t.prepare("DELETE FROM daily_records WHERE id = ?").bind(s).run(),e.json({success:!0})}catch(r){return e.json({success:!1,error:r.message},500)}});B.get("/api/students/:studentId/stats",async e=>{const{DB:t}=e.env,s=e.req.param("studentId"),r=e.req.query("startDate"),a=e.req.query("endDate");try{const l=await t.prepare(`
      SELECT 
        COUNT(*) as total_records,
        SUM(CASE WHEN attendance = 'ì¶œì„' THEN 1 ELSE 0 END) as attendance_count,
        SUM(CASE WHEN homework_status = 'ì™„ë£Œ' THEN 1 ELSE 0 END) as homework_completed,
        AVG(understanding_level) as avg_understanding,
        AVG(participation_level) as avg_participation
      FROM daily_records
      WHERE student_id = ?
        AND record_date BETWEEN ? AND ?
    `).bind(s,r,a).first();return e.json({success:!0,stats:l})}catch(n){return e.json({success:!1,error:n.message},500)}});const xs=`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°˜ ê´€ë¦¬ - ê¾¸ë©”ë•…í•™ì›</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <a href="/students" class="text-gray-600 hover:text-gray-900">
                        <i class="fas fa-arrow-left mr-2"></i>ëŒì•„ê°€ê¸°
                    </a>
                    <h1 class="text-2xl font-bold text-gray-900">ğŸ« ë°˜ ê´€ë¦¬</h1>
                </div>
                <button onclick="showAddModal()" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700">
                    <i class="fas fa-plus mr-2"></i>ìƒˆ ë°˜ ì¶”ê°€
                </button>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 py-8">
        <div id="classList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div class="text-center text-gray-500 py-8">ë¡œë”© ì¤‘...</div>
        </div>
    </div>

    <!-- ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="classModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4">
            <h2 id="modalTitle" class="text-2xl font-bold mb-6">ìƒˆ ë°˜ ì¶”ê°€</h2>
            <form id="classForm">
                <input type="hidden" id="classId">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ë°˜ ì´ë¦„ *</label>
                        <input type="text" id="className" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" placeholder="ì˜ˆ: ì¤‘1-Aë°˜">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">í•™ë…„</label>
                        <select id="grade" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                            <option value="ì´ˆ1">ì´ˆ1</option>
                            <option value="ì´ˆ2">ì´ˆ2</option>
                            <option value="ì´ˆ3">ì´ˆ3</option>
                            <option value="ì´ˆ4">ì´ˆ4</option>
                            <option value="ì´ˆ5">ì´ˆ5</option>
                            <option value="ì´ˆ6">ì´ˆ6</option>
                            <option value="ì¤‘1">ì¤‘1</option>
                            <option value="ì¤‘2">ì¤‘2</option>
                            <option value="ì¤‘3">ì¤‘3</option>
                            <option value="ê³ 1">ê³ 1</option>
                            <option value="ê³ 2">ê³ 2</option>
                            <option value="ê³ 3">ê³ 3</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì„¤ëª…</label>
                        <textarea id="description" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" placeholder="ë°˜ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…"></textarea>
                    </div>
                </div>
                <div class="flex space-x-3 mt-6">
                    <button type="submit" class="flex-1 bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700">
                        ì €ì¥
                    </button>
                    <button type="button" onclick="hideModal()" class="flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-400">
                        ì·¨ì†Œ
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const academyId = 1;
        let classes = [];

        async function loadClasses() {
            try {
                const res = await fetch('/api/classes?academyId=' + academyId);
                const data = await res.json();
                if (data.success) {
                    classes = data.classes;
                    renderClasses();
                }
            } catch (error) {
                console.error('ë°˜ ëª©ë¡ ë¡œë”© ì‹¤íŒ¨:', error);
            }
        }

        function renderClasses() {
            const container = document.getElementById('classList');
            if (classes.length === 0) {
                container.innerHTML = '<div class="col-span-full text-center text-gray-500 py-12">ë“±ë¡ëœ ë°˜ì´ ì—†ìŠµë‹ˆë‹¤.<br>ìƒˆ ë°˜ì„ ì¶”ê°€í•´ë³´ì„¸ìš”!</div>';
                return;
            }

            container.innerHTML = classes.map(cls => \`
                <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h3 class="text-xl font-bold text-gray-900">\${cls.class_name}</h3>
                            <p class="text-sm text-gray-500">\${cls.grade || 'í•™ë…„ ë¯¸ì§€ì •'}</p>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="editClass(\${cls.id})" class="text-blue-600 hover:text-blue-800">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteClass(\${cls.id}, '\${cls.class_name}')" class="text-red-600 hover:text-red-800">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4 text-sm">\${cls.description || 'ì„¤ëª… ì—†ìŒ'}</p>
                    <div class="flex justify-between items-center pt-4 border-t">
                        <span class="text-sm text-gray-500">
                            <i class="fas fa-users mr-2"></i>í•™ìƒ \${cls.student_count}ëª…
                        </span>
                        <a href="/students/list?classId=\${cls.id}" class="text-purple-600 hover:text-purple-800 font-medium">
                            í•™ìƒ ë³´ê¸° â†’
                        </a>
                    </div>
                </div>
            \`).join('');
        }

        function showAddModal() {
            document.getElementById('modalTitle').textContent = 'ìƒˆ ë°˜ ì¶”ê°€';
            document.getElementById('classForm').reset();
            document.getElementById('classId').value = '';
            document.getElementById('classModal').classList.remove('hidden');
        }

        function hideModal() {
            document.getElementById('classModal').classList.add('hidden');
        }

        function editClass(classId) {
            const cls = classes.find(c => c.id === classId);
            if (!cls) return;

            document.getElementById('modalTitle').textContent = 'ë°˜ ìˆ˜ì •';
            document.getElementById('classId').value = cls.id;
            document.getElementById('className').value = cls.class_name;
            document.getElementById('grade').value = cls.grade || '';
            document.getElementById('description').value = cls.description || '';
            document.getElementById('classModal').classList.remove('hidden');
        }

        async function deleteClass(classId, className) {
            if (!confirm(\`"\${className}" ë°˜ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\\n\\nâš ï¸ ì´ ë°˜ì˜ í•™ìƒë“¤ì€ ë°˜ ë°°ì •ì´ í•´ì œë©ë‹ˆë‹¤.\`)) return;

            try {
                const res = await fetch('/api/classes/' + classId, { method: 'DELETE' });
                const data = await res.json();
                if (data.success) {
                    alert('ë°˜ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    loadClasses();
                } else {
                    alert('ì‚­ì œ ì‹¤íŒ¨: ' + data.error);
                }
            } catch (error) {
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        document.getElementById('classForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const classId = document.getElementById('classId').value;
            const payload = {
                academyId,
                className: document.getElementById('className').value,
                grade: document.getElementById('grade').value,
                description: document.getElementById('description').value
            };

            try {
                const url = classId ? '/api/classes/' + classId : '/api/classes';
                const method = classId ? 'PUT' : 'POST';
                
                const res = await fetch(url, {
                    method,
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const data = await res.json();
                if (data.success) {
                    alert(classId ? 'ë°˜ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.' : 'ìƒˆ ë°˜ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    hideModal();
                    loadClasses();
                } else {
                    alert('ì €ì¥ ì‹¤íŒ¨: ' + data.error);
                }
            } catch (error) {
                alert('ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        });

        loadClasses();
    <\/script>
</body>
</html>
`,vs=`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•™ìƒ ëª©ë¡ - ê¾¸ë©”ë•…í•™ì›</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <a href="/students" class="text-gray-600 hover:text-gray-900">
                        <i class="fas fa-arrow-left mr-2"></i>ëŒì•„ê°€ê¸°
                    </a>
                    <h1 class="text-2xl font-bold text-gray-900">ğŸ‘¨â€ğŸ“ í•™ìƒ ëª©ë¡</h1>
                </div>
                <button onclick="showAddModal()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                    <i class="fas fa-user-plus mr-2"></i>ìƒˆ í•™ìƒ ë“±ë¡
                </button>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 py-8">
        <!-- í•„í„° ë° ê²€ìƒ‰ -->
        <div class="bg-white rounded-xl shadow p-6 mb-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ë°˜ í•„í„°</label>
                    <select id="classFilter" onchange="loadStudents()" class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                        <option value="">ì „ì²´ í•™ìƒ</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">í•™ë…„ í•„í„°</label>
                    <select id="gradeFilter" onchange="filterStudents()" class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                        <option value="">ì „ì²´ í•™ë…„</option>
                        <option value="ì´ˆ1">ì´ˆ1</option>
                        <option value="ì´ˆ2">ì´ˆ2</option>
                        <option value="ì´ˆ3">ì´ˆ3</option>
                        <option value="ì´ˆ4">ì´ˆ4</option>
                        <option value="ì´ˆ5">ì´ˆ5</option>
                        <option value="ì´ˆ6">ì´ˆ6</option>
                        <option value="ì¤‘1">ì¤‘1</option>
                        <option value="ì¤‘2">ì¤‘2</option>
                        <option value="ì¤‘3">ì¤‘3</option>
                        <option value="ê³ 1">ê³ 1</option>
                        <option value="ê³ 2">ê³ 2</option>
                        <option value="ê³ 3">ê³ 3</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ê²€ìƒ‰</label>
                    <input type="text" id="searchInput" oninput="filterStudents()" placeholder="ì´ë¦„, í•™ë¶€ëª¨ ì´ë¦„, ì „í™”ë²ˆí˜¸..." class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                </div>
            </div>
        </div>

        <!-- í•™ìƒ ëª©ë¡ -->
        <div id="studentsList" class="space-y-4">
            <div class="text-center text-gray-500 py-8">ë¡œë”© ì¤‘...</div>
        </div>
    </div>

    <!-- í•™ìƒ ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="studentModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto">
        <div class="bg-white rounded-xl p-8 max-w-2xl w-full mx-4 my-8">
            <h2 id="modalTitle" class="text-2xl font-bold mb-6">ìƒˆ í•™ìƒ ë“±ë¡</h2>
            <form id="studentForm">
                <input type="hidden" id="studentId">
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- í•™ìƒ ê¸°ë³¸ ì •ë³´ -->
                    <div class="col-span-2 border-b pb-4 mb-2">
                        <h3 class="text-lg font-semibold text-gray-800">ğŸ“‹ í•™ìƒ ì •ë³´</h3>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">í•™ìƒ ì´ë¦„ *</label>
                        <input type="text" id="studentName" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="í™ê¸¸ë™">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">í•™ìƒ ì—°ë½ì²˜</label>
                        <input type="tel" id="studentPhone" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="010-1234-5678">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ë°˜ ë°°ì •</label>
                        <select id="studentClass" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="">ë¯¸ë°°ì •</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">í•™ë…„ *</label>
                        <select id="studentGrade" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                            <option value="ì´ˆ1">ì´ˆ1</option>
                            <option value="ì´ˆ2">ì´ˆ2</option>
                            <option value="ì´ˆ3">ì´ˆ3</option>
                            <option value="ì´ˆ4">ì´ˆ4</option>
                            <option value="ì´ˆ5">ì´ˆ5</option>
                            <option value="ì´ˆ6">ì´ˆ6</option>
                            <option value="ì¤‘1">ì¤‘1</option>
                            <option value="ì¤‘2">ì¤‘2</option>
                            <option value="ì¤‘3">ì¤‘3</option>
                            <option value="ê³ 1">ê³ 1</option>
                            <option value="ê³ 2">ê³ 2</option>
                            <option value="ê³ 3">ê³ 3</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ìˆ˜ê°• ê³¼ëª© *</label>
                        <div id="subjectsCheckboxes" class="grid grid-cols-2 gap-2 p-3 border border-gray-300 rounded-lg">
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="subject" value="ì˜ì–´" class="w-4 h-4 text-blue-600">
                                <span class="text-sm">ì˜ì–´</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="subject" value="ìˆ˜í•™" class="w-4 h-4 text-blue-600">
                                <span class="text-sm">ìˆ˜í•™</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="subject" value="ê³¼í•™" class="w-4 h-4 text-blue-600">
                                <span class="text-sm">ê³¼í•™</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="subject" value="êµ­ì–´" class="w-4 h-4 text-blue-600">
                                <span class="text-sm">êµ­ì–´</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="subject" value="í”„ë¡œê·¸ë¨1" class="w-4 h-4 text-blue-600">
                                <span class="text-sm">í”„ë¡œê·¸ë¨1</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="subject" value="í”„ë¡œê·¸ë¨2" class="w-4 h-4 text-blue-600">
                                <span class="text-sm">í”„ë¡œê·¸ë¨2</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="subject" value="í”„ë¡œê·¸ë¨3" class="w-4 h-4 text-blue-600">
                                <span class="text-sm">í”„ë¡œê·¸ë¨3</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="subject" value="í”„ë¡œê·¸ë¨4" class="w-4 h-4 text-blue-600">
                                <span class="text-sm">í”„ë¡œê·¸ë¨4</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" name="subject" value="í”„ë¡œê·¸ë¨5" class="w-4 h-4 text-blue-600">
                                <span class="text-sm">í”„ë¡œê·¸ë¨5</span>
                            </label>
                        </div>
                        <input type="hidden" id="studentSubjects" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ë“±ë¡ì¼ *</label>
                        <input type="date" id="enrollmentDate" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <!-- í•™ë¶€ëª¨ ì •ë³´ -->
                    <div class="col-span-2 border-b pb-4 mb-2 mt-4">
                        <h3 class="text-lg font-semibold text-gray-800">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ í•™ë¶€ëª¨ ì •ë³´</h3>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">í•™ë¶€ëª¨ ì´ë¦„ *</label>
                        <input type="text" id="parentName" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="í™ê¸¸ë™">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">í•™ë¶€ëª¨ ì—°ë½ì²˜ *</label>
                        <input type="tel" id="parentPhone" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="010-1234-5678">
                    </div>
                    
                    <div class="col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ë©”ëª¨</label>
                        <textarea id="studentMemo" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="íŠ¹ì´ì‚¬í•­ì´ë‚˜ ê¸°íƒ€ ë©”ëª¨"></textarea>
                    </div>
                </div>
                
                <div class="flex space-x-3 mt-6">
                    <button type="submit" class="flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700">
                        ì €ì¥
                    </button>
                    <button type="button" onclick="hideModal()" class="flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-400">
                        ì·¨ì†Œ
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const academyId = 1;
        let students = [];
        let allStudents = [];
        let classes = [];

        async function loadClasses() {
            try {
                const res = await fetch('/api/classes?academyId=' + academyId);
                const data = await res.json();
                if (data.success) {
                    classes = data.classes;
                    
                    // ë°˜ í•„í„° ë“œë¡­ë‹¤ìš´ ì±„ìš°ê¸°
                    const classFilter = document.getElementById('classFilter');
                    const studentClassSelect = document.getElementById('studentClass');
                    
                    classFilter.innerHTML = '<option value="">ì „ì²´ í•™ìƒ</option>' +
                        classes.map(c => \`<option value="\${c.id}">\${c.class_name}</option>\`).join('');
                    
                    studentClassSelect.innerHTML = '<option value="">ë¯¸ë°°ì •</option>' +
                        classes.map(c => \`<option value="\${c.id}">\${c.class_name}</option>\`).join('');
                    
                    // URL íŒŒë¼ë¯¸í„°ì—ì„œ classId í™•ì¸
                    const urlParams = new URLSearchParams(window.location.search);
                    const classId = urlParams.get('classId');
                    if (classId) {
                        classFilter.value = classId;
                    }
                }
            } catch (error) {
                console.error('ë°˜ ëª©ë¡ ë¡œë”© ì‹¤íŒ¨:', error);
            }
        }

        async function loadStudents() {
            try {
                const classId = document.getElementById('classFilter').value;
                let url = '/api/students?academyId=' + academyId;
                if (classId) url += '&classId=' + classId;
                
                const res = await fetch(url);
                const data = await res.json();
                if (data.success) {
                    allStudents = data.students;
                    students = allStudents;
                    filterStudents();
                }
            } catch (error) {
                console.error('í•™ìƒ ëª©ë¡ ë¡œë”© ì‹¤íŒ¨:', error);
            }
        }

        function filterStudents() {
            const gradeFilter = document.getElementById('gradeFilter').value;
            const searchText = document.getElementById('searchInput').value.toLowerCase();
            
            students = allStudents.filter(student => {
                const matchGrade = !gradeFilter || student.grade === gradeFilter;
                const matchSearch = !searchText || 
                    student.name.toLowerCase().includes(searchText) ||
                    (student.parent_name && student.parent_name.toLowerCase().includes(searchText)) ||
                    (student.phone && student.phone.includes(searchText)) ||
                    (student.parent_phone && student.parent_phone.includes(searchText));
                
                return matchGrade && matchSearch;
            });
            
            renderStudents();
        }

        function renderStudents() {
            const container = document.getElementById('studentsList');
            if (students.length === 0) {
                container.innerHTML = '<div class="text-center text-gray-500 py-12 bg-white rounded-xl">í•™ìƒì´ ì—†ìŠµë‹ˆë‹¤.<br>ìƒˆ í•™ìƒì„ ë“±ë¡í•´ë³´ì„¸ìš”!</div>';
                return;
            }

            container.innerHTML = students.map(student => \`
                <div class="bg-white rounded-xl shadow p-6 hover:shadow-lg transition">
                    <div class="flex justify-between items-start">
                        <div class="flex items-start space-x-4 flex-1">
                            <div class="bg-blue-100 text-blue-600 rounded-full w-14 h-14 flex items-center justify-center text-xl font-bold flex-shrink-0">
                                \${student.name.charAt(0)}
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-3 mb-2">
                                    <h3 class="text-xl font-bold text-gray-900">\${student.name}</h3>
                                    <span class="px-3 py-1 bg-blue-100 text-blue-600 rounded-full text-sm font-medium">\${student.grade}</span>
                                    \${student.class_name ? \`<span class="px-3 py-1 bg-purple-100 text-purple-600 rounded-full text-sm">\${student.class_name}</span>\` : ''}
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600">
                                    <div><i class="fas fa-phone mr-2"></i>í•™ìƒ: \${student.phone || 'ë¯¸ë“±ë¡'}</div>
                                    <div><i class="fas fa-book mr-2"></i>\${student.subjects}</div>
                                    <div><i class="fas fa-user mr-2"></i>í•™ë¶€ëª¨: \${student.parent_name}</div>
                                    <div><i class="fas fa-mobile-alt mr-2"></i>\${student.parent_phone}</div>
                                </div>
                                \${student.notes ? \`<div class="mt-2 text-sm text-gray-500"><i class="fas fa-sticky-note mr-2"></i>\${student.notes}</div>\` : ''}
                            </div>
                        </div>
                        <div class="flex space-x-2 ml-4">
                            <a href="/students/detail/\${student.id}" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
                                <i class="fas fa-chart-line mr-1"></i>ìƒì„¸
                            </a>
                            <button onclick="editStudent(\${student.id})" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteStudent(\${student.id}, '\${student.name}')" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            \`).join('');
        }

        async function showAddModal() {
            document.getElementById('modalTitle').textContent = 'ìƒˆ í•™ìƒ ë“±ë¡';
            document.getElementById('studentForm').reset();
            document.getElementById('studentId').value = '';
            document.getElementById('enrollmentDate').valueAsDate = new Date();
            
            // ì²´í¬ë°•ìŠ¤ ì´ˆê¸°í™”
            document.querySelectorAll('input[name="subject"]').forEach(cb => cb.checked = false);
            
            // ìµœì‹  ë°˜ ëª©ë¡ ë¡œë“œ
            await loadClasses();
            
            document.getElementById('studentModal').classList.remove('hidden');
        }

        function hideModal() {
            document.getElementById('studentModal').classList.add('hidden');
        }

        async function editStudent(studentId) {
            const student = allStudents.find(s => s.id === studentId);
            if (!student) return;

            document.getElementById('modalTitle').textContent = 'í•™ìƒ ì •ë³´ ìˆ˜ì •';
            document.getElementById('studentId').value = student.id;
            document.getElementById('studentName').value = student.name;
            document.getElementById('studentPhone').value = student.phone || '';
            document.getElementById('studentGrade').value = student.grade;
            document.getElementById('enrollmentDate').value = student.enrollment_date;
            document.getElementById('parentName').value = student.parent_name;
            document.getElementById('parentPhone').value = student.parent_phone;
            document.getElementById('studentMemo').value = student.notes || '';
            
            // ìµœì‹  ë°˜ ëª©ë¡ ë¡œë“œ
            await loadClasses();
            
            // ë°˜ ì„ íƒ ë³µì›
            document.getElementById('studentClass').value = student.class_id || '';
            
            // ì²´í¬ë°•ìŠ¤ ì´ˆê¸°í™” í›„ ì„ íƒëœ ê³¼ëª© ì²´í¬
            document.querySelectorAll('input[name="subject"]').forEach(cb => cb.checked = false);
            const subjects = student.subjects.split(',').map(s => s.trim());
            subjects.forEach(subject => {
                const checkbox = document.querySelector(\`input[name="subject"][value="\${subject}"]\`);
                if (checkbox) checkbox.checked = true;
            });
            
            document.getElementById('studentModal').classList.remove('hidden');
        }

        async function deleteStudent(studentId, studentName) {
            if (!confirm(\`"\${studentName}" í•™ìƒì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\\n\\nâš ï¸ ëª¨ë“  ì„±ê³¼ ê¸°ë¡ë„ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤.\`)) return;

            try {
                const res = await fetch('/api/students/' + studentId, { method: 'DELETE' });
                const data = await res.json();
                if (data.success) {
                    alert('í•™ìƒì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    loadStudents();
                } else {
                    alert('ì‚­ì œ ì‹¤íŒ¨: ' + data.error);
                }
            } catch (error) {
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        document.getElementById('studentForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // ì²´í¬ë°•ìŠ¤ì—ì„œ ì„ íƒëœ ê³¼ëª© ìˆ˜ì§‘
            const selectedSubjects = Array.from(document.querySelectorAll('input[name="subject"]:checked'))
                .map(cb => cb.value);
            
            if (selectedSubjects.length === 0) {
                alert('ìˆ˜ê°• ê³¼ëª©ì„ ìµœì†Œ 1ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const studentId = document.getElementById('studentId').value;
            const payload = {
                academyId,
                classId: document.getElementById('studentClass').value || null,
                name: document.getElementById('studentName').value,
                phone: document.getElementById('studentPhone').value,
                parentName: document.getElementById('parentName').value,
                parentPhone: document.getElementById('parentPhone').value,
                grade: document.getElementById('studentGrade').value,
                subjects: selectedSubjects.join(', '),
                enrollmentDate: document.getElementById('enrollmentDate').value,
                memo: document.getElementById('studentMemo').value
            };

            try {
                const url = studentId ? '/api/students/' + studentId : '/api/students';
                const method = studentId ? 'PUT' : 'POST';
                
                const res = await fetch(url, {
                    method,
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const data = await res.json();
                if (data.success) {
                    alert(studentId ? 'í•™ìƒ ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.' : 'ìƒˆ í•™ìƒì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    hideModal();
                    loadStudents();
                } else {
                    alert('ì €ì¥ ì‹¤íŒ¨: ' + data.error);
                }
            } catch (error) {
                alert('ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                console.error(error);
            }
        });

        // ì´ˆê¸° ë¡œë“œ
        (async () => {
            await loadClasses();
            await loadStudents();
        })();
    <\/script>
</body>
</html>
`,bs=`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¼ì¼ ì„±ê³¼ ê¸°ë¡ - ê¾¸ë©”ë•…í•™ì›</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .calendar-day { cursor: pointer; transition: all 0.2s; }
        .calendar-day:hover { background-color: #e0e7ff; }
        .calendar-day.selected { background-color: #818cf8; color: white; }
        .calendar-day.today { border: 2px solid #6366f1; }
        .calendar-day.has-record { background-color: #dbeafe; }
    </style>
</head>
<body class="bg-gray-50">
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <a href="/students" class="text-gray-600 hover:text-gray-900">
                        <i class="fas fa-arrow-left mr-2"></i>ëŒì•„ê°€ê¸°
                    </a>
                    <h1 class="text-2xl font-bold text-gray-900">ğŸ“… ì¼ì¼ ì„±ê³¼ ê¸°ë¡</h1>
                </div>
                <div class="flex items-center space-x-3">
                    <span id="selectedDateDisplay" class="text-lg font-semibold text-gray-700"></span>
                    <button onclick="showRecordModal()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">
                        <i class="fas fa-plus mr-2"></i>ì„±ê³¼ ê¸°ë¡ ì¶”ê°€
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- ë‹¬ë ¥ -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex justify-between items-center mb-4">
                        <button onclick="previousMonth()" class="p-2 hover:bg-gray-100 rounded">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2 id="calendarTitle" class="text-xl font-bold text-gray-900"></h2>
                        <button onclick="nextMonth()" class="p-2 hover:bg-gray-100 rounded">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <div class="grid grid-cols-7 gap-1 text-center text-sm">
                        <div class="font-semibold text-red-500">ì¼</div>
                        <div class="font-semibold">ì›”</div>
                        <div class="font-semibold">í™”</div>
                        <div class="font-semibold">ìˆ˜</div>
                        <div class="font-semibold">ëª©</div>
                        <div class="font-semibold">ê¸ˆ</div>
                        <div class="font-semibold text-blue-500">í† </div>
                    </div>
                    <div id="calendarDays" class="grid grid-cols-7 gap-1 mt-2"></div>
                </div>

                <!-- ë¹ ë¥¸ í†µê³„ -->
                <div class="bg-white rounded-xl shadow-lg p-6 mt-6">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">ğŸ“Š ì´ë²ˆ ë‹¬ í†µê³„</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-600">ì´ ê¸°ë¡ ìˆ˜</span>
                            <span id="monthlyTotal" class="font-bold text-blue-600">0ê±´</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">í‰ê·  ì¶œì„ë¥ </span>
                            <span id="monthlyAttendance" class="font-bold text-green-600">0%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì„ íƒëœ ë‚ ì§œì˜ ê¸°ë¡ ëª©ë¡ -->
            <div class="lg:col-span-2">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-bold text-gray-900 mb-6">
                        <i class="fas fa-list mr-2"></i><span id="recordDateTitle">ì˜¤ëŠ˜ì˜ ê¸°ë¡</span>
                    </h2>
                    <div id="recordsList" class="space-y-4">
                        <div class="text-center text-gray-500 py-12">ë‚ ì§œë¥¼ ì„ íƒí•˜ë©´ ê¸°ë¡ì´ í‘œì‹œë©ë‹ˆë‹¤.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ì„±ê³¼ ê¸°ë¡ ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="recordModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto">
        <div class="bg-white rounded-xl p-8 max-w-2xl w-full mx-4 my-8">
            <h2 id="recordModalTitle" class="text-2xl font-bold mb-6">ì„±ê³¼ ê¸°ë¡ ì¶”ê°€</h2>
            <form id="recordForm">
                <input type="hidden" id="recordId">
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">í•™ìƒ ì„ íƒ *</label>
                        <select id="recordStudent" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ê³¼ëª©</label>
                        <select id="recordCourse" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì¶œì„</label>
                        <div class="grid grid-cols-4 gap-2">
                            <label class="flex items-center justify-center px-4 py-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-green-50 has-[:checked]:border-green-500 has-[:checked]:bg-green-50">
                                <input type="radio" name="attendance" value="ì¶œì„" class="mr-2">
                                <span class="text-sm font-medium">âœ… ì¶œì„</span>
                            </label>
                            <label class="flex items-center justify-center px-4 py-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-yellow-50 has-[:checked]:border-yellow-500 has-[:checked]:bg-yellow-50">
                                <input type="radio" name="attendance" value="ì§€ê°" class="mr-2">
                                <span class="text-sm font-medium">â° ì§€ê°</span>
                            </label>
                            <label class="flex items-center justify-center px-4 py-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-red-50 has-[:checked]:border-red-500 has-[:checked]:bg-red-50">
                                <input type="radio" name="attendance" value="ê²°ì„" class="mr-2">
                                <span class="text-sm font-medium">âŒ ê²°ì„</span>
                            </label>
                            <label class="flex items-center justify-center px-4 py-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-orange-50 has-[:checked]:border-orange-500 has-[:checked]:bg-orange-50">
                                <input type="radio" name="attendance" value="ì¡°í‡´" class="mr-2">
                                <span class="text-sm font-medium">ğŸƒ ì¡°í‡´</span>
                            </label>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ê³¼ì œ ì™„ì„±ë„</label>
                        <div class="grid grid-cols-3 gap-2">
                            <label class="flex items-center justify-center px-4 py-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-green-50 has-[:checked]:border-green-500 has-[:checked]:bg-green-50">
                                <input type="radio" name="homework" value="ì™„ë£Œ" class="mr-2">
                                <span class="text-sm font-medium">âœ… ì™„ë£Œ</span>
                            </label>
                            <label class="flex items-center justify-center px-4 py-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-yellow-50 has-[:checked]:border-yellow-500 has-[:checked]:bg-yellow-50">
                                <input type="radio" name="homework" value="ë¶€ë¶„ì™„ë£Œ" class="mr-2">
                                <span class="text-sm font-medium">âš ï¸ ë¶€ë¶„</span>
                            </label>
                            <label class="flex items-center justify-center px-4 py-3 border-2 border-gray-300 rounded-lg cursor-pointer hover:bg-red-50 has-[:checked]:border-red-500 has-[:checked]:bg-red-50">
                                <input type="radio" name="homework" value="ë¯¸ì™„ë£Œ" class="mr-2">
                                <span class="text-sm font-medium">âŒ ë¯¸ì™„ë£Œ</span>
                            </label>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ì´í•´ë„ (1~5)</label>
                            <div class="flex items-center space-x-2">
                                <input type="range" id="understanding" min="1" max="5" value="3" class="flex-1">
                                <span id="understandingValue" class="text-xl font-bold text-blue-600 w-8 text-center">3</span>
                            </div>
                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                <span>ë‚®ìŒ</span>
                                <span>ë†’ìŒ</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ì°¸ì—¬ë„ (1~5)</label>
                            <div class="flex items-center space-x-2">
                                <input type="range" id="participation" min="1" max="5" value="3" class="flex-1">
                                <span id="participationValue" class="text-xl font-bold text-purple-600 w-8 text-center">3</span>
                            </div>
                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                <span>ë‚®ìŒ</span>
                                <span>ë†’ìŒ</span>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì„±ê³¼/íŠ¹ì´ì‚¬í•­</label>
                        <textarea id="achievement" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500" placeholder="ì˜¤ëŠ˜ì˜ í•™ìŠµ ì„±ê³¼ë‚˜ íŠ¹ì´ì‚¬í•­ì„ ê¸°ë¡í•˜ì„¸ìš”"></textarea>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ë©”ëª¨</label>
                        <textarea id="recordMemo" rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500" placeholder="ì¶”ê°€ ë©”ëª¨"></textarea>
                    </div>
                </div>
                
                <div class="flex space-x-3 mt-6">
                    <button type="submit" class="flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700">
                        ì €ì¥
                    </button>
                    <button type="button" onclick="hideRecordModal()" class="flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-400">
                        ì·¨ì†Œ
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const academyId = 1;
        let currentDate = new Date();
        let selectedDate = new Date();
        let students = [];
        let courses = [];
        let records = [];
        let monthlyRecords = [];

        // ìŠ¬ë¼ì´ë” ê°’ í‘œì‹œ
        document.getElementById('understanding').addEventListener('input', (e) => {
            document.getElementById('understandingValue').textContent = e.target.value;
        });
        document.getElementById('participation').addEventListener('input', (e) => {
            document.getElementById('participationValue').textContent = e.target.value;
        });

        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return \`\${year}-\${month}-\${day}\`;
        }

        function formatDateKorean(date) {
            return \`\${date.getFullYear()}ë…„ \${date.getMonth() + 1}ì›” \${date.getDate()}ì¼\`;
        }

        async function loadStudents() {
            try {
                const res = await fetch('/api/students?academyId=' + academyId);
                const data = await res.json();
                if (data.success) {
                    students = data.students;
                    const select = document.getElementById('recordStudent');
                    select.innerHTML = '<option value="">ì„ íƒí•˜ì„¸ìš”</option>' +
                        students.map(s => \`<option value="\${s.id}">\${s.name} (\${s.grade})</option>\`).join('');
                }
            } catch (error) {
                console.error('í•™ìƒ ëª©ë¡ ë¡œë”© ì‹¤íŒ¨:', error);
            }
        }

        async function loadCourses() {
            try {
                const res = await fetch('/api/courses?academyId=' + academyId);
                const data = await res.json();
                if (data.success) {
                    courses = data.courses;
                    const select = document.getElementById('recordCourse');
                    select.innerHTML = '<option value="">ì„ íƒí•˜ì„¸ìš”</option>' +
                        courses.map(c => \`<option value="\${c.id}">\${c.course_name}</option>\`).join('');
                }
            } catch (error) {
                console.error('ê³¼ëª© ëª©ë¡ ë¡œë”© ì‹¤íŒ¨:', error);
            }
        }

        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            document.getElementById('calendarTitle').textContent = \`\${year}ë…„ \${month + 1}ì›”\`;
            
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            const container = document.getElementById('calendarDays');
            container.innerHTML = '';
            
            // ë¹ˆ ì¹¸
            for (let i = 0; i < firstDay; i++) {
                container.innerHTML += '<div></div>';
            }
            
            // ë‚ ì§œ
            const today = new Date();
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                const dateStr = formatDate(date);
                const isToday = date.toDateString() === today.toDateString();
                const isSelected = date.toDateString() === selectedDate.toDateString();
                const hasRecord = monthlyRecords.some(r => r.record_date === dateStr);
                
                let classes = 'calendar-day p-2 rounded text-center';
                if (isToday) classes += ' today';
                if (isSelected) classes += ' selected';
                if (hasRecord) classes += ' has-record';
                
                container.innerHTML += \`<div class="\${classes}" onclick="selectDate(new Date(\${year}, \${month}, \${day}))">\${day}</div>\`;
            }
        }

        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            loadMonthlyRecords();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            loadMonthlyRecords();
        }

        function selectDate(date) {
            selectedDate = date;
            document.getElementById('selectedDateDisplay').textContent = formatDateKorean(date);
            document.getElementById('recordDateTitle').textContent = formatDateKorean(date) + 'ì˜ ê¸°ë¡';
            renderCalendar();
            loadRecords();
        }

        async function loadRecords() {
            try {
                const dateStr = formatDate(selectedDate);
                const res = await fetch('/api/daily-records?date=' + dateStr);
                const data = await res.json();
                if (data.success) {
                    records = data.records;
                    renderRecords();
                }
            } catch (error) {
                console.error('ê¸°ë¡ ë¡œë”© ì‹¤íŒ¨:', error);
            }
        }

        async function loadMonthlyRecords() {
            try {
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();
                const startDate = \`\${year}-\${String(month + 1).padStart(2, '0')}-01\`;
                const endDate = \`\${year}-\${String(month + 1).padStart(2, '0')}-31\`;
                
                const res = await fetch(\`/api/daily-records?startDate=\${startDate}&endDate=\${endDate}\`);
                const data = await res.json();
                if (data.success) {
                    monthlyRecords = data.records;
                    
                    // í†µê³„ ê³„ì‚°
                    document.getElementById('monthlyTotal').textContent = monthlyRecords.length + 'ê±´';
                    const attendanceCount = monthlyRecords.filter(r => r.attendance === 'ì¶œì„').length;
                    const attendanceRate = monthlyRecords.length > 0 
                        ? Math.round((attendanceCount / monthlyRecords.length) * 100) 
                        : 0;
                    document.getElementById('monthlyAttendance').textContent = attendanceRate + '%';
                    
                    renderCalendar();
                }
            } catch (error) {
                console.error('ì›”ê°„ ê¸°ë¡ ë¡œë”© ì‹¤íŒ¨:', error);
            }
        }

        function renderRecords() {
            const container = document.getElementById('recordsList');
            if (records.length === 0) {
                container.innerHTML = '<div class="text-center text-gray-500 py-12">ì´ ë‚ ì§œì— ê¸°ë¡ëœ ì„±ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            container.innerHTML = records.map(record => {
                const attendanceColor = {
                    'ì¶œì„': 'bg-green-100 text-green-800',
                    'ì§€ê°': 'bg-yellow-100 text-yellow-800',
                    'ê²°ì„': 'bg-red-100 text-red-800',
                    'ì¡°í‡´': 'bg-orange-100 text-orange-800'
                }[record.attendance] || 'bg-gray-100 text-gray-800';

                const homeworkColor = {
                    'ì™„ë£Œ': 'bg-green-100 text-green-800',
                    'ë¶€ë¶„ì™„ë£Œ': 'bg-yellow-100 text-yellow-800',
                    'ë¯¸ì™„ë£Œ': 'bg-red-100 text-red-800'
                }[record.homework_status] || 'bg-gray-100 text-gray-800';

                return \`
                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h3 class="text-lg font-bold text-gray-900">\${record.student_name}</h3>
                                <p class="text-sm text-gray-500">\${record.course_name || 'ê³¼ëª© ë¯¸ì§€ì •'}</p>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="editRecord(\${record.id})" class="text-blue-600 hover:text-blue-800">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="deleteRecord(\${record.id}, '\${record.student_name}')" class="text-red-600 hover:text-red-800">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-2 mb-3">
                            \${record.attendance ? \`<span class="px-3 py-1 rounded-full text-sm font-medium \${attendanceColor}">\${record.attendance}</span>\` : ''}
                            \${record.homework_status ? \`<span class="px-3 py-1 rounded-full text-sm font-medium \${homeworkColor}">ê³¼ì œ \${record.homework_status}</span>\` : ''}
                            \${record.understanding_level ? \`<span class="px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">ì´í•´ë„ \${record.understanding_level}/5</span>\` : ''}
                            \${record.participation_level ? \`<span class="px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800">ì°¸ì—¬ë„ \${record.participation_level}/5</span>\` : ''}
                        </div>
                        \${record.achievement ? \`<p class="text-sm text-gray-700 mb-2"><strong>ì„±ê³¼:</strong> \${record.achievement}</p>\` : ''}
                        \${record.memo ? \`<p class="text-sm text-gray-600"><strong>ë©”ëª¨:</strong> \${record.memo}</p>\` : ''}
                    </div>
                \`;
            }).join('');
        }

        async function showRecordModal() {
            document.getElementById('recordModalTitle').textContent = formatDateKorean(selectedDate) + ' ì„±ê³¼ ê¸°ë¡ ì¶”ê°€';
            document.getElementById('recordForm').reset();
            document.getElementById('recordId').value = '';
            document.getElementById('understanding').value = 3;
            document.getElementById('participation').value = 3;
            document.getElementById('understandingValue').textContent = '3';
            document.getElementById('participationValue').textContent = '3';
            
            await loadStudents();
            await loadCourses();
            
            document.getElementById('recordModal').classList.remove('hidden');
        }

        function hideRecordModal() {
            document.getElementById('recordModal').classList.add('hidden');
        }

        async function editRecord(recordId) {
            const record = records.find(r => r.id === recordId);
            if (!record) return;

            await loadStudents();
            await loadCourses();

            document.getElementById('recordModalTitle').textContent = 'ì„±ê³¼ ê¸°ë¡ ìˆ˜ì •';
            document.getElementById('recordId').value = record.id;
            document.getElementById('recordStudent').value = record.student_id;
            document.getElementById('recordCourse').value = record.course_id || '';
            
            if (record.attendance) {
                document.querySelector(\`input[name="attendance"][value="\${record.attendance}"]\`).checked = true;
            }
            if (record.homework_status) {
                document.querySelector(\`input[name="homework"][value="\${record.homework_status}"]\`).checked = true;
            }
            
            if (record.understanding_level) {
                document.getElementById('understanding').value = record.understanding_level;
                document.getElementById('understandingValue').textContent = record.understanding_level;
            }
            if (record.participation_level) {
                document.getElementById('participation').value = record.participation_level;
                document.getElementById('participationValue').textContent = record.participation_level;
            }
            
            document.getElementById('achievement').value = record.achievement || '';
            document.getElementById('recordMemo').value = record.memo || '';
            document.getElementById('recordModal').classList.remove('hidden');
        }

        async function deleteRecord(recordId, studentName) {
            if (!confirm(\`\${studentName} í•™ìƒì˜ ì„±ê³¼ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\`)) return;

            try {
                const res = await fetch('/api/daily-records/' + recordId, { method: 'DELETE' });
                const data = await res.json();
                if (data.success) {
                    alert('ê¸°ë¡ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    loadRecords();
                    loadMonthlyRecords();
                } else {
                    alert('ì‚­ì œ ì‹¤íŒ¨: ' + data.error);
                }
            } catch (error) {
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        document.getElementById('recordForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const recordId = document.getElementById('recordId').value;
            const attendance = document.querySelector('input[name="attendance"]:checked');
            const homework = document.querySelector('input[name="homework"]:checked');
            
            const payload = {
                studentId: document.getElementById('recordStudent').value,
                courseId: document.getElementById('recordCourse').value || null,
                recordDate: formatDate(selectedDate),
                attendance: attendance ? attendance.value : null,
                homeworkStatus: homework ? homework.value : null,
                understandingLevel: parseInt(document.getElementById('understanding').value),
                participationLevel: parseInt(document.getElementById('participation').value),
                achievement: document.getElementById('achievement').value,
                memo: document.getElementById('recordMemo').value
            };

            try {
                const url = recordId ? '/api/daily-records/' + recordId : '/api/daily-records';
                const method = recordId ? 'PUT' : 'POST';
                
                const res = await fetch(url, {
                    method,
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const data = await res.json();
                if (data.success) {
                    alert(recordId ? 'ê¸°ë¡ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.' : 'ê¸°ë¡ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    hideRecordModal();
                    loadRecords();
                    loadMonthlyRecords();
                } else {
                    alert('ì €ì¥ ì‹¤íŒ¨: ' + data.error);
                }
            } catch (error) {
                alert('ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                console.error(error);
            }
        });

        // ì´ˆê¸° ë¡œë“œ
        (async () => {
            selectDate(new Date());
            await loadMonthlyRecords();
            await loadStudents();
            await loadCourses();
        })();
    <\/script>
</body>
</html>
`,hs=`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•™ìƒ ìƒì„¸ - ê¾¸ë©”ë•…í•™ì›</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"><\/script>
</head>
<body class="bg-gray-50">
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <a href="/students/list" class="text-gray-600 hover:text-gray-900">
                        <i class="fas fa-arrow-left mr-2"></i>í•™ìƒ ëª©ë¡
                    </a>
                    <h1 id="pageTitle" class="text-2xl font-bold text-gray-900">í•™ìƒ ìƒì„¸</h1>
                </div>
                <div class="flex space-x-3">
                    <a href="/students/daily-record" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                        <i class="fas fa-calendar-check mr-2"></i>ì„±ê³¼ ê¸°ë¡
                    </a>
                    <button onclick="sendSMS()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                        <i class="fas fa-sms mr-2"></i>í•™ë¶€ëª¨ ë¬¸ì
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 py-8">
        <div id="loadingMessage" class="text-center text-gray-500 py-12">ë¡œë”© ì¤‘...</div>
        
        <div id="studentContent" class="hidden">
            <!-- í•™ìƒ í”„ë¡œí•„ -->
            <div class="bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl shadow-xl p-8 mb-6 text-white">
                <div class="flex items-center space-x-6">
                    <div class="bg-white text-blue-600 rounded-full w-24 h-24 flex items-center justify-center text-4xl font-bold">
                        <span id="studentInitial"></span>
                    </div>
                    <div class="flex-1">
                        <h2 id="studentName" class="text-3xl font-bold mb-2"></h2>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                            <div>
                                <span class="opacity-80">í•™ë…„</span>
                                <p id="studentGrade" class="font-semibold text-lg"></p>
                            </div>
                            <div>
                                <span class="opacity-80">ë°˜</span>
                                <p id="studentClass" class="font-semibold text-lg"></p>
                            </div>
                            <div>
                                <span class="opacity-80">ìˆ˜ê°• ê³¼ëª©</span>
                                <p id="studentSubjects" class="font-semibold text-lg"></p>
                            </div>
                            <div>
                                <span class="opacity-80">ë“±ë¡ì¼</span>
                                <p id="enrollmentDate" class="font-semibold text-lg"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- í•™ë¶€ëª¨ ì •ë³´ & ì—°ë½ì²˜ -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h3 class="text-xl font-bold text-gray-900 mb-4">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ í•™ë¶€ëª¨ ì •ë³´</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <span class="text-sm text-gray-500">í•™ë¶€ëª¨ ì´ë¦„</span>
                        <p id="parentName" class="text-lg font-semibold text-gray-900"></p>
                    </div>
                    <div>
                        <span class="text-sm text-gray-500">í•™ë¶€ëª¨ ì—°ë½ì²˜</span>
                        <p id="parentPhone" class="text-lg font-semibold text-gray-900"></p>
                    </div>
                    <div>
                        <span class="text-sm text-gray-500">í•™ìƒ ì—°ë½ì²˜</span>
                        <p id="studentPhone" class="text-lg font-semibold text-gray-900"></p>
                    </div>
                </div>
                <div id="studentNotes" class="mt-4 p-4 bg-yellow-50 rounded-lg hidden">
                    <span class="text-sm text-gray-500">ë©”ëª¨</span>
                    <p id="notesContent" class="text-gray-900 mt-1"></p>
                </div>
            </div>

            <!-- í†µê³„ ì¹´ë“œ -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-gray-600">ì¶œì„ë¥ </span>
                        <i class="fas fa-calendar-check text-green-500 text-2xl"></i>
                    </div>
                    <p id="attendanceRate" class="text-3xl font-bold text-green-600">-%</p>
                    <p class="text-sm text-gray-500 mt-1">ì´ <span id="attendanceDays">0</span>ì¼</p>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-gray-600">ê³¼ì œ ì™„ì„±ë¥ </span>
                        <i class="fas fa-tasks text-blue-500 text-2xl"></i>
                    </div>
                    <p id="homeworkRate" class="text-3xl font-bold text-blue-600">-%</p>
                    <p class="text-sm text-gray-500 mt-1">ì™„ë£Œ <span id="homeworkCompleted">0</span>ê±´</p>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-gray-600">í‰ê·  ì´í•´ë„</span>
                        <i class="fas fa-brain text-purple-500 text-2xl"></i>
                    </div>
                    <p id="avgUnderstanding" class="text-3xl font-bold text-purple-600">-</p>
                    <p class="text-sm text-gray-500 mt-1">5ì  ë§Œì </p>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-gray-600">í‰ê·  ì°¸ì—¬ë„</span>
                        <i class="fas fa-hand-paper text-orange-500 text-2xl"></i>
                    </div>
                    <p id="avgParticipation" class="text-3xl font-bold text-orange-600">-</p>
                    <p class="text-sm text-gray-500 mt-1">5ì  ë§Œì </p>
                </div>
            </div>

            <!-- ê¸°ê°„ ì„ íƒ -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <div class="flex items-center space-x-4">
                    <label class="text-sm font-medium text-gray-700">ê¸°ê°„ ì„ íƒ:</label>
                    <select id="periodSelect" onchange="loadStats()" class="px-4 py-2 border border-gray-300 rounded-lg">
                        <option value="7">ìµœê·¼ 7ì¼</option>
                        <option value="30" selected>ìµœê·¼ 30ì¼</option>
                        <option value="90">ìµœê·¼ 90ì¼</option>
                        <option value="all">ì „ì²´ ê¸°ê°„</option>
                    </select>
                </div>
            </div>

            <!-- ì„±ê³¼ ê·¸ë˜í”„ -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">ğŸ“ˆ ì´í•´ë„ & ì°¸ì—¬ë„ ì¶”ì´</h3>
                    <canvas id="levelChart"></canvas>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-bold text-gray-900 mb-4">ğŸ“Š ì¶œì„ & ê³¼ì œ í˜„í™©</h3>
                    <canvas id="statusChart"></canvas>
                </div>
            </div>

            <!-- ìµœê·¼ ì„±ê³¼ ê¸°ë¡ íƒ€ì„ë¼ì¸ -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold text-gray-900 mb-6">ğŸ“ ìµœê·¼ ì„±ê³¼ ê¸°ë¡</h3>
                <div id="recentRecords" class="space-y-4"></div>
            </div>
        </div>
    </div>

    <script>
        const studentId = window.location.pathname.split('/').pop();
        const academyId = 1;
        let student = null;
        let stats = null;
        let records = [];
        let levelChart = null;
        let statusChart = null;

        async function loadStudent() {
            try {
                const res = await fetch('/api/students/' + studentId);
                const data = await res.json();
                if (data.success) {
                    student = data.student;
                    renderStudent();
                } else {
                    document.getElementById('loadingMessage').innerHTML = '<div class="text-center text-red-500 py-12">í•™ìƒ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>';
                }
            } catch (error) {
                console.error('í•™ìƒ ì •ë³´ ë¡œë”© ì‹¤íŒ¨:', error);
                document.getElementById('loadingMessage').innerHTML = '<div class="text-center text-red-500 py-12">ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</div>';
            }
        }

        function renderStudent() {
            document.getElementById('pageTitle').textContent = student.name + ' í•™ìƒ';
            document.getElementById('studentInitial').textContent = student.name.charAt(0);
            document.getElementById('studentName').textContent = student.name;
            document.getElementById('studentGrade').textContent = student.grade;
            document.getElementById('studentClass').textContent = student.class_name || 'ë¯¸ë°°ì •';
            document.getElementById('studentSubjects').textContent = student.subjects;
            document.getElementById('enrollmentDate').textContent = student.enrollment_date;
            document.getElementById('parentName').textContent = student.parent_name;
            document.getElementById('parentPhone').textContent = student.parent_phone;
            document.getElementById('studentPhone').textContent = student.phone || 'ë¯¸ë“±ë¡';
            
            if (student.notes) {
                document.getElementById('studentNotes').classList.remove('hidden');
                document.getElementById('notesContent').textContent = student.notes;
            }

            document.getElementById('loadingMessage').classList.add('hidden');
            document.getElementById('studentContent').classList.remove('hidden');
        }

        async function loadStats() {
            try {
                const period = document.getElementById('periodSelect').value;
                let startDate, endDate = new Date().toISOString().split('T')[0];
                
                if (period === 'all') {
                    startDate = student.enrollment_date;
                } else {
                    const date = new Date();
                    date.setDate(date.getDate() - parseInt(period));
                    startDate = date.toISOString().split('T')[0];
                }

                const res = await fetch(\`/api/students/\${studentId}/stats?startDate=\${startDate}&endDate=\${endDate}\`);
                const data = await res.json();
                if (data.success) {
                    stats = data.stats;
                    renderStats();
                }

                // ì „ì²´ ê¸°ë¡ë„ ë¡œë“œ
                const recordsRes = await fetch(\`/api/daily-records?studentId=\${studentId}&startDate=\${startDate}&endDate=\${endDate}\`);
                const recordsData = await recordsRes.json();
                if (recordsData.success) {
                    records = recordsData.records;
                    renderRecords();
                    renderCharts();
                }
            } catch (error) {
                console.error('í†µê³„ ë¡œë”© ì‹¤íŒ¨:', error);
            }
        }

        function renderStats() {
            const totalRecords = parseInt(stats.total_records) || 0;
            const attendanceCount = parseInt(stats.attendance_count) || 0;
            const homeworkCompleted = parseInt(stats.homework_completed) || 0;
            const avgUnderstanding = parseFloat(stats.avg_understanding) || 0;
            const avgParticipation = parseFloat(stats.avg_participation) || 0;

            const attendanceRate = totalRecords > 0 ? Math.round((attendanceCount / totalRecords) * 100) : 0;
            const homeworkRate = totalRecords > 0 ? Math.round((homeworkCompleted / totalRecords) * 100) : 0;

            document.getElementById('attendanceRate').textContent = attendanceRate + '%';
            document.getElementById('attendanceDays').textContent = attendanceCount;
            document.getElementById('homeworkRate').textContent = homeworkRate + '%';
            document.getElementById('homeworkCompleted').textContent = homeworkCompleted;
            document.getElementById('avgUnderstanding').textContent = avgUnderstanding > 0 ? avgUnderstanding.toFixed(1) : '-';
            document.getElementById('avgParticipation').textContent = avgParticipation > 0 ? avgParticipation.toFixed(1) : '-';
        }

        function renderRecords() {
            const container = document.getElementById('recentRecords');
            if (records.length === 0) {
                container.innerHTML = '<div class="text-center text-gray-500 py-8">ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            const sortedRecords = [...records].sort((a, b) => new Date(b.record_date) - new Date(a.record_date)).slice(0, 10);

            container.innerHTML = sortedRecords.map(record => {
                const date = new Date(record.record_date);
                const dateStr = \`\${date.getMonth() + 1}ì›” \${date.getDate()}ì¼\`;

                const attendanceColor = {
                    'ì¶œì„': 'bg-green-100 text-green-800',
                    'ì§€ê°': 'bg-yellow-100 text-yellow-800',
                    'ê²°ì„': 'bg-red-100 text-red-800',
                    'ì¡°í‡´': 'bg-orange-100 text-orange-800'
                }[record.attendance] || 'bg-gray-100 text-gray-800';

                return \`
                    <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg hover:shadow-md transition">
                        <div class="flex-shrink-0 text-center">
                            <div class="text-sm text-gray-500">\${dateStr}</div>
                            <div class="text-2xl font-bold text-gray-900">\${date.getDate()}</div>
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-2">
                                <span class="font-semibold text-gray-900">\${record.course_name || 'ê³¼ëª© ë¯¸ì§€ì •'}</span>
                                \${record.attendance ? \`<span class="px-2 py-1 rounded-full text-xs font-medium \${attendanceColor}">\${record.attendance}</span>\` : ''}
                            </div>
                            <div class="flex items-center space-x-3 text-sm text-gray-600 mb-2">
                                \${record.homework_status ? \`<span>ğŸ“ ê³¼ì œ: \${record.homework_status}</span>\` : ''}
                                \${record.understanding_level ? \`<span>ğŸ’¡ ì´í•´ë„: \${record.understanding_level}/5</span>\` : ''}
                                \${record.participation_level ? \`<span>âœ‹ ì°¸ì—¬ë„: \${record.participation_level}/5</span>\` : ''}
                            </div>
                            \${record.achievement ? \`<p class="text-sm text-gray-700">\${record.achievement}</p>\` : ''}
                        </div>
                    </div>
                \`;
            }).join('');
        }

        function renderCharts() {
            // ì´í•´ë„ & ì°¸ì—¬ë„ ì¶”ì´
            const dates = records.map(r => {
                const d = new Date(r.record_date);
                return \`\${d.getMonth() + 1}/\${d.getDate()}\`;
            }).reverse();
            const understanding = records.map(r => r.understanding_level || 0).reverse();
            const participation = records.map(r => r.participation_level || 0).reverse();

            if (levelChart) levelChart.destroy();
            const levelCtx = document.getElementById('levelChart').getContext('2d');
            levelChart = new Chart(levelCtx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [
                        {
                            label: 'ì´í•´ë„',
                            data: understanding,
                            borderColor: 'rgb(147, 51, 234)',
                            backgroundColor: 'rgba(147, 51, 234, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'ì°¸ì—¬ë„',
                            data: participation,
                            borderColor: 'rgb(249, 115, 22)',
                            backgroundColor: 'rgba(249, 115, 22, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: { beginAtZero: true, max: 5 }
                    }
                }
            });

            // ì¶œì„ & ê³¼ì œ í˜„í™©
            const attendanceData = {
                'ì¶œì„': records.filter(r => r.attendance === 'ì¶œì„').length,
                'ì§€ê°': records.filter(r => r.attendance === 'ì§€ê°').length,
                'ê²°ì„': records.filter(r => r.attendance === 'ê²°ì„').length,
                'ì¡°í‡´': records.filter(r => r.attendance === 'ì¡°í‡´').length
            };

            const homeworkData = {
                'ì™„ë£Œ': records.filter(r => r.homework_status === 'ì™„ë£Œ').length,
                'ë¶€ë¶„ì™„ë£Œ': records.filter(r => r.homework_status === 'ë¶€ë¶„ì™„ë£Œ').length,
                'ë¯¸ì™„ë£Œ': records.filter(r => r.homework_status === 'ë¯¸ì™„ë£Œ').length
            };

            if (statusChart) statusChart.destroy();
            const statusCtx = document.getElementById('statusChart').getContext('2d');
            statusChart = new Chart(statusCtx, {
                type: 'bar',
                data: {
                    labels: ['ì¶œì„', 'ì§€ê°', 'ê²°ì„', 'ì¡°í‡´', 'ê³¼ì œì™„ë£Œ', 'ê³¼ì œë¶€ë¶„', 'ê³¼ì œë¯¸ì™„'],
                    datasets: [{
                        label: 'íšŸìˆ˜',
                        data: [
                            attendanceData['ì¶œì„'],
                            attendanceData['ì§€ê°'],
                            attendanceData['ê²°ì„'],
                            attendanceData['ì¡°í‡´'],
                            homeworkData['ì™„ë£Œ'],
                            homeworkData['ë¶€ë¶„ì™„ë£Œ'],
                            homeworkData['ë¯¸ì™„ë£Œ']
                        ],
                        backgroundColor: [
                            'rgba(34, 197, 94, 0.8)',
                            'rgba(234, 179, 8, 0.8)',
                            'rgba(239, 68, 68, 0.8)',
                            'rgba(249, 115, 22, 0.8)',
                            'rgba(59, 130, 246, 0.8)',
                            'rgba(168, 85, 247, 0.8)',
                            'rgba(156, 163, 175, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }

        function sendSMS() {
            if (!student) return;
            window.location.href = \`/sms/compose?phone=\${student.parent_phone}&name=\${student.parent_name}\`;
        }

        // ì´ˆê¸° ë¡œë“œ
        (async () => {
            await loadStudent();
            await loadStats();
        })();
    <\/script>
</body>
</html>
`,fs=`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³¼ëª© ê´€ë¦¬ - ê¾¸ë©”ë•…í•™ì›</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-green {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-7xl mx-auto p-6">
        <!-- í—¤ë” -->
        <div class="flex justify-between items-center mb-8">
            <div>
                <h1 class="text-3xl font-bold text-gray-900 mb-2">ğŸ“š ê³¼ëª© ê´€ë¦¬</h1>
                <p class="text-gray-600">í•™ì›ì—ì„œ ìš´ì˜í•˜ëŠ” ê³¼ëª©ì„ ê´€ë¦¬í•˜ì„¸ìš”</p>
            </div>
            <div class="flex gap-3">
                <a href="/students" class="px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                    <i class="fas fa-arrow-left mr-2"></i>ëŒì•„ê°€ê¸°
                </a>
                <button onclick="showAddModal()" class="px-4 py-2 gradient-green text-white rounded-lg hover:shadow-lg transition">
                    <i class="fas fa-plus mr-2"></i>ê³¼ëª© ì¶”ê°€
                </button>
            </div>
        </div>

        <!-- í†µê³„ ì¹´ë“œ -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="bg-white rounded-xl shadow p-6">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-gray-600">ì „ì²´ ê³¼ëª©</span>
                    <i class="fas fa-book text-green-500 text-2xl"></i>
                </div>
                <div id="totalCourses" class="text-3xl font-bold text-gray-900">0ê°œ</div>
            </div>
            
            <div class="bg-white rounded-xl shadow p-6">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-gray-600">ìˆ˜ê°• í•™ìƒ</span>
                    <i class="fas fa-users text-blue-500 text-2xl"></i>
                </div>
                <div id="totalStudents" class="text-3xl font-bold text-gray-900">0ëª…</div>
            </div>
            
            <div class="bg-white rounded-xl shadow p-6">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-gray-600">ì§„í–‰ì¤‘ì¸ ìˆ˜ì—…</span>
                    <i class="fas fa-chalkboard-teacher text-purple-500 text-2xl"></i>
                </div>
                <div id="activeClasses" class="text-3xl font-bold text-gray-900">0ê°œ</div>
            </div>
        </div>

        <!-- ê³¼ëª© ëª©ë¡ -->
        <div class="bg-white rounded-xl shadow">
            <div class="p-6 border-b border-gray-200">
                <h2 class="text-xl font-bold text-gray-900">ê³¼ëª© ëª©ë¡</h2>
            </div>
            <div id="coursesList" class="p-6">
                <div class="text-center py-12 text-gray-500">
                    <i class="fas fa-book text-4xl mb-4 text-gray-300"></i>
                    <p>ë“±ë¡ëœ ê³¼ëª©ì´ ì—†ìŠµë‹ˆë‹¤. ê³¼ëª©ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ê³¼ëª© ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ -->
    <div id="courseModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <h2 id="modalTitle" class="text-2xl font-bold text-gray-900">ê³¼ëª© ì¶”ê°€</h2>
            </div>
            <form id="courseForm" class="p-6 space-y-6">
                <input type="hidden" id="courseId">
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        ê³¼ëª©ëª… <span class="text-red-500">*</span>
                    </label>
                    <input type="text" id="courseName" required 
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                        placeholder="ì˜ˆ: ì˜ì–´, ìˆ˜í•™, í”„ë¡œê·¸ë¨1">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        ê³¼ëª© ì„¤ëª…
                    </label>
                    <textarea id="courseDescription" rows="4"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"
                        placeholder="ê³¼ëª©ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                </div>

                <div class="flex gap-3 pt-4">
                    <button type="submit" class="flex-1 px-6 py-3 gradient-green text-white rounded-lg font-bold hover:shadow-lg transition">
                        <i class="fas fa-check mr-2"></i>ì €ì¥
                    </button>
                    <button type="button" onclick="closeModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-bold hover:bg-gray-300 transition">
                        ì·¨ì†Œ
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let currentUser = null;
        let allCourses = [];

        // ë¡œê·¸ì¸ ì²´í¬
        window.addEventListener('DOMContentLoaded', async () => {
            const userData = localStorage.getItem('user');
            if (!userData) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                window.location.href = '/login';
                return;
            }
            currentUser = JSON.parse(userData);
            await loadCourses();
        });

        // ê³¼ëª© ëª©ë¡ ë¡œë“œ
        async function loadCourses() {
            try {
                const response = await fetch(\`/api/courses?academyId=\${currentUser.id}\`);
                const data = await response.json();

                if (data.success) {
                    allCourses = data.courses || [];
                    renderCourses();
                    updateStats();
                }
            } catch (error) {
                console.error('ê³¼ëª© ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        // ê³¼ëª© ë Œë”ë§
        function renderCourses() {
            const container = document.getElementById('coursesList');
            
            if (allCourses.length === 0) {
                container.innerHTML = \`
                    <div class="text-center py-12 text-gray-500">
                        <i class="fas fa-book text-4xl mb-4 text-gray-300"></i>
                        <p>ë“±ë¡ëœ ê³¼ëª©ì´ ì—†ìŠµë‹ˆë‹¤. ê³¼ëª©ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>
                    </div>
                \`;
                return;
            }

            container.innerHTML = \`
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    \${allCourses.map(course => \`
                        <div class="border-2 border-gray-200 rounded-xl p-4 hover:border-green-400 transition">
                            <div class="flex justify-between items-start mb-3">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-book text-green-500 text-xl"></i>
                                    <h3 class="font-bold text-lg text-gray-900">\${course.course_name}</h3>
                                </div>
                                <div class="flex gap-1">
                                    <button onclick="editCourse(\${course.id})" class="p-2 text-blue-600 hover:bg-blue-50 rounded">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="deleteCourse(\${course.id}, '\${course.course_name}')" class="p-2 text-red-600 hover:bg-red-50 rounded">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            \${course.description ? \`
                                <p class="text-sm text-gray-600 mb-3">\${course.description}</p>
                            \` : ''}
                            <div class="flex items-center justify-between text-sm text-gray-500">
                                <span><i class="fas fa-users mr-1"></i>ìˆ˜ê°•ìƒ 0ëª…</span>
                                <span class="text-xs text-gray-400">\${new Date(course.created_at).toLocaleDateString('ko-KR')}</span>
                            </div>
                        </div>
                    \`).join('')}
                </div>
            \`;
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            document.getElementById('totalCourses').textContent = allCourses.length + 'ê°œ';
            // ìˆ˜ê°• í•™ìƒê³¼ ì§„í–‰ì¤‘ì¸ ìˆ˜ì—…ì€ ì¶”í›„ êµ¬í˜„
            document.getElementById('totalStudents').textContent = '0ëª…';
            document.getElementById('activeClasses').textContent = '0ê°œ';
        }

        // ëª¨ë‹¬ ì—´ê¸°
        function showAddModal() {
            document.getElementById('modalTitle').textContent = 'ê³¼ëª© ì¶”ê°€';
            document.getElementById('courseForm').reset();
            document.getElementById('courseId').value = '';
            document.getElementById('courseModal').classList.remove('hidden');
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal() {
            document.getElementById('courseModal').classList.add('hidden');
        }

        // ê³¼ëª© ìˆ˜ì •
        function editCourse(courseId) {
            const course = allCourses.find(c => c.id === courseId);
            if (!course) return;

            document.getElementById('modalTitle').textContent = 'ê³¼ëª© ìˆ˜ì •';
            document.getElementById('courseId').value = course.id;
            document.getElementById('courseName').value = course.course_name;
            document.getElementById('courseDescription').value = course.description || '';
            document.getElementById('courseModal').classList.remove('hidden');
        }

        // ê³¼ëª© ì‚­ì œ
        async function deleteCourse(courseId, courseName) {
            if (!confirm(\`'\${courseName}' ê³¼ëª©ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\`)) return;

            try {
                const response = await fetch(\`/api/courses/\${courseId}?academyId=\${currentUser.id}\`, {
                    method: 'DELETE'
                });

                const data = await response.json();

                if (data.success) {
                    alert('ê³¼ëª©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    await loadCourses();
                } else {
                    alert(data.error || 'ì‚­ì œ ì‹¤íŒ¨');
                }
            } catch (error) {
                console.error('ì‚­ì œ ì‹¤íŒ¨:', error);
                alert('ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // í¼ ì œì¶œ
        document.getElementById('courseForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const courseId = document.getElementById('courseId').value;
            const data = {
                academy_id: currentUser.id,
                course_name: document.getElementById('courseName').value,
                description: document.getElementById('courseDescription').value
            };

            try {
                let response;
                if (courseId) {
                    // ìˆ˜ì •
                    response = await fetch(\`/api/courses/\${courseId}\`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                } else {
                    // ì¶”ê°€
                    response = await fetch('/api/courses', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                }

                const result = await response.json();

                if (result.success) {
                    alert(courseId ? 'ê³¼ëª©ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.' : 'ê³¼ëª©ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    closeModal();
                    await loadCourses();
                } else {
                    alert(result.error || 'ì €ì¥ ì‹¤íŒ¨');
                }
            } catch (error) {
                console.error('ì €ì¥ ì‹¤íŒ¨:', error);
                alert('ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        });

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.getElementById('courseModal').addEventListener('click', (e) => {
            if (e.target.id === 'courseModal') {
                closeModal();
            }
        });
    <\/script>
</body>
</html>
`,je={classesPage:xs,studentsListPage:vs,dailyRecordPage:bs,studentDetailPage:hs,coursesPage:fs},d=new ze;d.use("/api/*",as());d.use("/static/*",gs({root:"./public"}));d.route("/",B);d.post("/api/contact",async e=>{try{const{name:t,email:s,phone:r,academy_name:a,message:n}=await e.req.json();if(!t||!s||!r||!n)return e.json({success:!1,error:"í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const l=await e.env.DB.prepare(`
      INSERT INTO contacts (name, email, phone, academy_name, message)
      VALUES (?, ?, ?, ?, ?)
    `).bind(t,s,r,a||"",n).run();return e.json({success:!0,message:"ë¬¸ì˜ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ë¹ ë¥¸ ì‹œì¼ ë‚´ì— ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.",id:l.meta.last_row_id})}catch(t){return console.error("Contact submission error:",t),e.json({success:!1,error:"ë¬¸ì˜ ì ‘ìˆ˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/signup",async e=>{try{const{email:t,password:s,name:r,phone:a,academy_name:n,academy_location:l}=await e.req.json();if(!t||!s||!r||!a||!n)return e.json({success:!1,error:"í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);if(await e.env.DB.prepare(`
      SELECT id FROM users WHERE email = ?
    `).bind(t).first())return e.json({success:!1,error:"ì´ë¯¸ ê°€ì…ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤."},400);const i=s,c=await e.env.DB.prepare(`
      INSERT INTO users (email, password, name, phone, academy_name, role)
      VALUES (?, ?, ?, ?, ?, 'member')
    `).bind(t,i,r,a,n||"").run();return e.json({success:!0,message:"íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",id:c.meta.last_row_id})}catch(t){return console.error("Signup error:",t),e.json({success:!1,error:"íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/health",async e=>{try{if(!e.env.DB)return e.json({success:!1,error:"DB binding not found",env_keys:Object.keys(e.env)},500);const t=await e.env.DB.prepare("SELECT 1 as test").first(),s=await e.env.DB.prepare("PRAGMA table_info(users)").all();return e.json({success:!0,message:"DB connection is healthy",test_result:t,users_table_columns:s.results.map(r=>r.name)})}catch(t){return e.json({success:!1,error:t.message,stack:t.stack},500)}});d.post("/api/login",async e=>{try{if(!e.env.DB)return e.json({success:!1,error:"DB binding not configured. Please check Cloudflare Pages settings.",debug:{env_keys:Object.keys(e.env),has_db:!!e.env.DB}},500);const{email:t,password:s}=await e.req.json();if(!t||!s)return e.json({success:!1,error:"ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const r=await e.env.DB.prepare(`
      SELECT id, email, name, role, points, academy_name FROM users WHERE email = ? AND password = ?
    `).bind(t,s).first();return r?e.json({success:!0,message:"ë¡œê·¸ì¸ ì„±ê³µ",user:{id:r.id,email:r.email,name:r.name,role:r.role,points:r.points||0,academy_name:r.academy_name||"",user_type:"director"}}):e.json({success:!1,error:"ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."},401)}catch(t){return console.error("Login error:",t),console.error("Login error details:",{message:t.message,stack:t.stack,name:t.name}),e.json({success:!1,error:"ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",debug:{error_message:t.message,error_name:t.name,has_db:!!e.env.DB}},500)}});d.post("/api/auth/google",async e=>{try{const{idToken:t,email:s,name:r,picture:a}=await e.req.json();if(!t||!s)return e.json({success:!1,error:"êµ¬ê¸€ ì¸ì¦ ì •ë³´ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤."},400);let n=await e.env.DB.prepare(`
      SELECT id, email, name, role, points, google_id FROM users WHERE google_id = ?
    `).bind(t).first();return n||(n=await e.env.DB.prepare(`
        SELECT id, email, name, role, points, google_id FROM users WHERE email = ?
      `).bind(s).first(),n&&!n.google_id&&(await e.env.DB.prepare(`
          UPDATE users SET google_id = ?, profile_image = ?, social_provider = 'google', updated_at = CURRENT_TIMESTAMP WHERE id = ?
        `).bind(t,a||null,n.id).run(),n.google_id=t)),n?e.json({success:!0,message:"êµ¬ê¸€ ë¡œê·¸ì¸ ì„±ê³µ",user:{id:n.id,email:n.email,name:n.name,role:n.role,points:n.points||0,profile_image:n.profile_image}}):e.json({success:!1,needsRegistration:!0,socialData:{provider:"google",email:s,name:r,picture:a,google_id:t},message:"íšŒì›ê°€ì…ì´ í•„ìš”í•©ë‹ˆë‹¤."},200)}catch(t){return console.error("Google login error:",t),e.json({success:!1,error:"êµ¬ê¸€ ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/auth/kakao",async e=>{try{const{accessToken:t,id:s,email:r,nickname:a,profile_image:n}=await e.req.json();if(!t||!s)return e.json({success:!1,error:"ì¹´ì¹´ì˜¤ ì¸ì¦ ì •ë³´ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤."},400);const l=String(s);let o=await e.env.DB.prepare(`
      SELECT id, email, name, role, points, kakao_id FROM users WHERE kakao_id = ?
    `).bind(l).first();return!o&&r&&(o=await e.env.DB.prepare(`
        SELECT id, email, name, role, points, kakao_id FROM users WHERE email = ?
      `).bind(r).first(),o&&!o.kakao_id&&(await e.env.DB.prepare(`
          UPDATE users SET kakao_id = ?, profile_image = ?, social_provider = 'kakao', updated_at = CURRENT_TIMESTAMP WHERE id = ?
        `).bind(l,n||null,o.id).run(),o.kakao_id=l)),o?e.json({success:!0,message:"ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì„±ê³µ",user:{id:o.id,email:o.email,name:o.name,role:o.role,points:o.points||0,profile_image:o.profile_image}}):e.json({success:!1,needsRegistration:!0,socialData:{provider:"kakao",email:r||"",name:a||"",picture:n||"",kakao_id:l},message:"íšŒì›ê°€ì…ì´ í•„ìš”í•©ë‹ˆë‹¤."},200)}catch(t){return console.error("Kakao login error:",t),e.json({success:!1,error:"ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/users/:id/points",async e=>{try{const t=e.req.param("id"),s=await e.env.DB.prepare(`
      SELECT id, email, name, points FROM users WHERE id = ?
    `).bind(t).first();return s?e.json({success:!0,points:s.points||0,user:{id:s.id,email:s.email,name:s.name,points:s.points||0}}):e.json({success:!1,error:"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404)}catch(t){return console.error("Get points error:",t),e.json({success:!1,error:"í¬ì¸íŠ¸ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/admin/users/:id/password",async e=>{try{const t=e.req.param("id"),{newPassword:s}=await e.req.json();return!s||s.length<6?e.json({success:!1,error:"ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤."},400):(await e.env.DB.prepare(`
      UPDATE users SET password = ? WHERE id = ?
    `).bind(s,t).run(),e.json({success:!0,message:"ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤."}))}catch(t){return console.error("Password change error:",t),e.json({success:!1,error:"ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.put("/api/admin/users/:id/points",async e=>{try{const t=e.req.param("id"),{points:s}=await e.req.json();if(!s||s<=0)return e.json({success:!1,error:"ì˜¬ë°”ë¥¸ í¬ì¸íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”."},400);const r=await e.env.DB.prepare(`
      SELECT points FROM users WHERE id = ?
    `).bind(t).first(),a=((r==null?void 0:r.points)||0)+s;return await e.env.DB.prepare(`
      UPDATE users SET points = ? WHERE id = ?
    `).bind(a,t).run(),e.json({success:!0,message:"í¬ì¸íŠ¸ê°€ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤.",newPoints:a})}catch(t){return console.error("Points update error:",t),e.json({success:!1,error:"í¬ì¸íŠ¸ ì§€ê¸‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.put("/api/admin/users/:id/points/deduct",async e=>{try{const t=e.req.param("id"),{points:s}=await e.req.json();if(!s||s<=0)return e.json({success:!1,error:"ì˜¬ë°”ë¥¸ í¬ì¸íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”."},400);const r=await e.env.DB.prepare(`
      SELECT id, email, name, points FROM users WHERE id = ?
    `).bind(t).first();if(!r)return e.json({success:!1,error:"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);const a=(r==null?void 0:r.points)||0,n=a-s;return console.log("Deduct points:",{userId:t,userName:r.name,currentPoints:a,deductPoints:s,newPoints:n}),await e.env.DB.prepare(`
      UPDATE users SET points = ? WHERE id = ?
    `).bind(n,t).run(),e.json({success:!0,message:s+"Pê°€ ì°¨ê°ë˜ì—ˆìŠµë‹ˆë‹¤.",deductedPoints:s,newPoints:n})}catch(t){return console.error("Points deduct error:",t),e.json({success:!1,error:"í¬ì¸íŠ¸ ì°¨ê° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/admin/login-as/:id",async e=>{try{const t=e.req.param("id"),s=await e.env.DB.prepare(`
      SELECT id, email, name, role FROM users WHERE id = ?
    `).bind(t).first();return s?e.json({success:!0,message:"ë¡œê·¸ì¸ ì„±ê³µ",user:{id:s.id,email:s.email,name:s.name,role:s.role}}):e.json({success:!1,error:"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404)}catch(t){return console.error("Login as error:",t),e.json({success:!1,error:"ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/register",async e=>{try{const{email:t,password:s,name:r,phone:a,academy_name:n,academy_location:l,google_id:o,kakao_id:i,profile_image:c,social_provider:p}=await e.req.json();if(!t||!r)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);if(!p&&!s)return e.json({success:!1,error:"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);if(await e.env.DB.prepare(`
      SELECT id FROM users WHERE email = ?
    `).bind(t).first())return e.json({success:!1,error:"ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤."},400);const g=await e.env.DB.prepare(`
      INSERT INTO users (email, password, name, phone, academy_name, role, google_id, kakao_id, profile_image, social_provider)
      VALUES (?, ?, ?, ?, ?, 'user', ?, ?, ?, ?)
    `).bind(t,s||"social_login_"+Date.now(),r,a||null,n||null,o||null,i||null,c||null,p||null).run();return e.json({success:!0,message:"íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",user:{id:g.meta.last_row_id,email:t,name:r}})}catch(t){return console.error("Register error:",t),e.json({success:!1,error:"íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/user/permissions",async e=>{try{const t=e.req.query("userId");if(!t)return e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const s=await e.env.DB.prepare("SELECT role FROM users WHERE id = ?").bind(t).first();if(s&&s.role==="admin")return e.json({success:!0,permissions:{search_volume:!0,sms:!0,landing_builder:!0,analytics:!0,all:!0}});const r=await e.env.DB.prepare(`
      SELECT program_key 
      FROM user_permissions 
      WHERE user_id = ? AND is_active = 1 
      AND (expires_at IS NULL OR expires_at > datetime('now'))
    `).bind(t).all(),a={search_volume:!1,sms:!1,landing_builder:!1,analytics:!1,all:!1};return r.results.forEach(n=>{a[n.program_key]=!0}),e.json({success:!0,permissions:a})}catch(t){return console.error("Get user permissions error:",t),e.json({success:!1,error:"ê¶Œí•œ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/admin/grant-permission",async e=>{try{const t=await e.req.json(),{userId:s,programKey:r,expiresAt:a}=t,n=t.adminId||t.grantedBy;if(!s||!r||!n)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const l=await e.env.DB.prepare("SELECT role FROM users WHERE id = ?").bind(n).first();return!l||l.role!=="admin"?e.json({success:!1,error:"ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤."},403):(await e.env.DB.prepare(`
      INSERT OR REPLACE INTO user_permissions (user_id, program_key, granted_by, is_active, expires_at)
      VALUES (?, ?, ?, 1, ?)
    `).bind(s,r,n,a||null).run(),e.json({success:!0,message:"ê¶Œí•œì´ ë¶€ì—¬ë˜ì—ˆìŠµë‹ˆë‹¤."}))}catch(t){return console.error("Grant permission error:",t),e.json({success:!1,error:"ê¶Œí•œ ë¶€ì—¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/admin/revoke-permission",async e=>{try{const{userId:t,programKey:s,adminId:r}=await e.req.json();if(!t||!s||!r)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const a=await e.env.DB.prepare("SELECT role FROM users WHERE id = ?").bind(r).first();return!a||a.role!=="admin"?e.json({success:!1,error:"ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤."},403):(await e.env.DB.prepare(`
      UPDATE user_permissions 
      SET is_active = 0 
      WHERE user_id = ? AND program_key = ?
    `).bind(t,s).run(),e.json({success:!0,message:"ê¶Œí•œì´ íšŒìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤."}))}catch(t){return console.error("Revoke permission error:",t),e.json({success:!1,error:"ê¶Œí•œ íšŒìˆ˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/admin/update-user-permissions",async e=>{try{const{userId:t,permissions:s,adminId:r}=await e.req.json();if(!t||!s||!r)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const a=await e.env.DB.prepare("SELECT role FROM users WHERE id = ?").bind(r).first();if(!a||a.role!=="admin")return e.json({success:!1,error:"ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤."},403);await e.env.DB.prepare(`
      UPDATE user_permissions 
      SET is_active = 0 
      WHERE user_id = ?
    `).bind(t).run();let n=0;for(const l of s)try{await e.env.DB.prepare(`
          INSERT OR REPLACE INTO user_permissions (user_id, program_key, granted_by, is_active)
          VALUES (?, ?, ?, 1)
        `).bind(t,l,r).run(),n++}catch(o){console.error("ê¶Œí•œ ì¶”ê°€ ì˜¤ë¥˜:",l,o)}return e.json({success:!0,message:`${n}ê°œì˜ ê¶Œí•œì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.`,count:n})}catch(t){return console.error("Update permissions error:",t),e.json({success:!1,error:"ê¶Œí•œ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: "+t.message},500)}});d.post("/api/admin/run-migration",async e=>{try{const{adminId:t}=await e.req.json(),s=await e.env.DB.prepare("SELECT role FROM users WHERE id = ?").bind(t).first();if(!s||s.role!=="admin")return e.json({success:!1,error:"ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤."},403);await e.env.DB.prepare("DROP TABLE IF EXISTS user_permissions_backup").run();try{await e.env.DB.prepare("ALTER TABLE user_permissions RENAME TO user_permissions_backup").run()}catch{console.log("No existing user_permissions table to backup")}return await e.env.DB.prepare(`
      CREATE TABLE IF NOT EXISTS user_permissions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        user_id INTEGER NOT NULL,
        program_key TEXT NOT NULL,
        granted_by INTEGER,
        granted_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        expires_at DATETIME,
        is_active INTEGER DEFAULT 1,
        FOREIGN KEY (user_id) REFERENCES users(id),
        FOREIGN KEY (granted_by) REFERENCES users(id),
        UNIQUE(user_id, program_key)
      )
    `).run(),await e.env.DB.prepare("CREATE INDEX IF NOT EXISTS idx_user_permissions_user_id ON user_permissions(user_id)").run(),await e.env.DB.prepare("CREATE INDEX IF NOT EXISTS idx_user_permissions_program_key ON user_permissions(program_key)").run(),await e.env.DB.prepare("CREATE INDEX IF NOT EXISTS idx_user_permissions_active ON user_permissions(is_active)").run(),e.json({success:!0,message:"user_permissions í…Œì´ë¸”ì´ ì„±ê³µì ìœ¼ë¡œ ì¬ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤."})}catch(t){return console.error("Migration error:",t),e.json({success:!1,error:"ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: "+t.message},500)}});d.get("/api/sms/pricing",async e=>{try{const t=await e.env.DB.prepare(`
      SELECT * FROM sms_pricing ORDER BY wholesale_price ASC
    `).all();return e.json({success:!0,pricing:t.results})}catch(t){return console.error("Get SMS pricing error:",t),e.json({success:!1,error:"SMS ìš”ê¸ˆí‘œ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/sms/senders",async e=>{try{const t=e.req.header("X-User-Id")||e.req.query("userId");if(!t)return e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const s=await e.env.DB.prepare(`
      SELECT id, phone_number, verification_method, verification_date, status
      FROM sender_ids
      WHERE user_id = ?
      ORDER BY created_at DESC
    `).bind(t).all();return e.json({success:!0,senders:s.results})}catch(t){return console.error("Get senders error:",t),e.json({success:!1,error:"ë°œì‹ ë²ˆí˜¸ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/sms/sender/register",async e=>{try{const{userId:t,phoneNumber:s,verificationMethod:r}=await e.req.json();if(!t||!s)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const a=s.replace(/-/g,"");if(!/^01[0-9]{8,9}$/.test(a))return e.json({success:!1,error:"ì˜¬ë°”ë¥¸ íœ´ëŒ€í° ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);if(await e.env.DB.prepare(`
      SELECT id FROM sender_ids WHERE user_id = ? AND phone_number = ?
    `).bind(t,a).first())return e.json({success:!1,error:"ì´ë¯¸ ë“±ë¡ëœ ë°œì‹ ë²ˆí˜¸ì…ë‹ˆë‹¤."},400);const l=await e.env.DB.prepare(`
      INSERT INTO sender_ids (user_id, phone_number, verification_method, status, verification_date)
      VALUES (?, ?, ?, 'verified', CURRENT_TIMESTAMP)
    `).bind(t,a,r||"manual").run();return e.json({success:!0,message:"ë°œì‹ ë²ˆí˜¸ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.",senderId:l.meta.last_row_id})}catch(t){return console.error("Sender registration error:",t),e.json({success:!1,error:"ë°œì‹ ë²ˆí˜¸ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.delete("/api/sms/sender/:senderId",async e=>{try{const t=e.req.param("senderId"),s=e.req.query("userId");return!s||!t?e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400):await e.env.DB.prepare(`
      SELECT id FROM sender_ids WHERE id = ? AND user_id = ?
    `).bind(t,s).first()?(await e.env.DB.prepare(`
      DELETE FROM sender_ids WHERE id = ? AND user_id = ?
    `).bind(t,s).run(),e.json({success:!0,message:"ë°œì‹ ë²ˆí˜¸ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."})):e.json({success:!1,error:"ë°œì‹ ë²ˆí˜¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404)}catch(t){return console.error("Sender delete error:",t),e.json({success:!1,error:"ë°œì‹ ë²ˆí˜¸ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/sms/folders",async e=>{try{const t=e.req.query("userId");if(!t)return e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const s=await e.env.DB.prepare(`
      SELECT * FROM sms_folders WHERE user_id = ? ORDER BY created_at DESC
    `).bind(t).all();return e.json({success:!0,folders:s.results})}catch(t){return console.error("Get folders error:",t),e.json({success:!1,error:"í´ë” ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.post("/api/sms/folders",async e=>{try{const{userId:t,name:s}=await e.req.json();if(!t||!s)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤."},400);const r=await e.env.DB.prepare(`
      INSERT INTO sms_folders (user_id, name) VALUES (?, ?)
    `).bind(t,s).run();return e.json({success:!0,folderId:r.meta.last_row_id})}catch(t){return console.error("Create folder error:",t),e.json({success:!1,error:"í´ë” ìƒì„± ì‹¤íŒ¨"},500)}});d.delete("/api/sms/folders/:folderId",async e=>{try{const t=e.req.param("folderId"),s=e.req.query("userId");return s?await e.env.DB.prepare(`
      SELECT * FROM sms_folders WHERE id = ? AND user_id = ?
    `).bind(t,s).first()?(await e.env.DB.prepare(`
      UPDATE sms_templates SET folder_id = NULL WHERE folder_id = ?
    `).bind(t).run(),await e.env.DB.prepare(`
      DELETE FROM sms_folders WHERE id = ?
    `).bind(t).run(),e.json({success:!0})):e.json({success:!1,error:"í´ë”ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404):e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400)}catch(t){return console.error("Delete folder error:",t),e.json({success:!1,error:"í´ë” ì‚­ì œ ì‹¤íŒ¨"},500)}});d.get("/api/sms/templates",async e=>{try{const t=e.req.query("userId"),s=e.req.query("folderId");if(!t)return e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);let r="SELECT * FROM sms_templates WHERE user_id = ?",a=[t];s?(r+=" AND folder_id = ?",a.push(s)):r+=" AND folder_id IS NULL",r+=" ORDER BY updated_at DESC";const n=await e.env.DB.prepare(r).bind(...a).all();return e.json({success:!0,templates:n.results})}catch(t){return console.error("Get templates error:",t),e.json({success:!1,error:"í…œí”Œë¦¿ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.post("/api/sms/templates",async e=>{try{const{userId:t,folderId:s,title:r,message:a,receivers:n}=await e.req.json();if(!t||!r||!a)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤."},400);const l=await e.env.DB.prepare(`
      INSERT INTO sms_templates (user_id, folder_id, title, message, receivers)
      VALUES (?, ?, ?, ?, ?)
    `).bind(t,s||null,r,a,n||null).run();return e.json({success:!0,templateId:l.meta.last_row_id})}catch(t){return console.error("Create template error:",t),e.json({success:!1,error:"í…œí”Œë¦¿ ì €ì¥ ì‹¤íŒ¨"},500)}});d.put("/api/sms/templates/:templateId",async e=>{try{const t=e.req.param("templateId"),{userId:s,title:r,message:a,folderId:n}=await e.req.json();return s?await e.env.DB.prepare(`
      SELECT * FROM sms_templates WHERE id = ? AND user_id = ?
    `).bind(t,s).first()?(await e.env.DB.prepare(`
      UPDATE sms_templates 
      SET title = ?, message = ?, folder_id = ?, updated_at = CURRENT_TIMESTAMP
      WHERE id = ?
    `).bind(r,a,n||null,t).run(),e.json({success:!0})):e.json({success:!1,error:"í…œí”Œë¦¿ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404):e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400)}catch(t){return console.error("Update template error:",t),e.json({success:!1,error:"í…œí”Œë¦¿ ìˆ˜ì • ì‹¤íŒ¨"},500)}});d.delete("/api/sms/templates/:templateId",async e=>{try{const t=e.req.param("templateId"),s=e.req.query("userId");return s?await e.env.DB.prepare(`
      SELECT * FROM sms_templates WHERE id = ? AND user_id = ?
    `).bind(t,s).first()?(await e.env.DB.prepare(`
      DELETE FROM sms_templates WHERE id = ?
    `).bind(t).run(),e.json({success:!0})):e.json({success:!1,error:"í…œí”Œë¦¿ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404):e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400)}catch(t){return console.error("Delete template error:",t),e.json({success:!1,error:"í…œí”Œë¦¿ ì‚­ì œ ì‹¤íŒ¨"},500)}});d.post("/api/init-db",async e=>{try{return await e.env.DB.prepare(`
      CREATE TABLE IF NOT EXISTS users (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        email TEXT UNIQUE NOT NULL,
        name TEXT NOT NULL,
        password TEXT NOT NULL,
        academy_id INTEGER NOT NULL DEFAULT 1,
        role TEXT DEFAULT 'teacher',
        balance INTEGER DEFAULT 0,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `).run(),await e.env.DB.prepare(`
      CREATE TABLE IF NOT EXISTS point_transactions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        user_id INTEGER NOT NULL,
        amount INTEGER NOT NULL,
        balance_before INTEGER DEFAULT 0,
        balance_after INTEGER NOT NULL,
        transaction_type TEXT NOT NULL,
        description TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        FOREIGN KEY (user_id) REFERENCES users(id)
      )
    `).run(),await e.env.DB.prepare(`
      CREATE TABLE IF NOT EXISTS sender_ids (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        user_id INTEGER NOT NULL,
        phone_number TEXT NOT NULL,
        verification_method TEXT NOT NULL,
        verification_date DATETIME DEFAULT CURRENT_TIMESTAMP,
        status TEXT DEFAULT 'verified',
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        FOREIGN KEY (user_id) REFERENCES users(id)
      )
    `).run(),await e.env.DB.prepare(`
      CREATE TABLE IF NOT EXISTS sms_pricing (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        message_type TEXT NOT NULL,
        price INTEGER NOT NULL,
        description TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `).run(),await e.env.DB.prepare("SELECT id FROM users WHERE id = 1").first()||await e.env.DB.prepare(`
        INSERT INTO users (id, email, name, password, academy_id, role, balance)
        VALUES (1, 'test@test.com', 'í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì', 'password', 1, 'teacher', 0)
      `).run(),await e.env.DB.prepare("SELECT id FROM sms_pricing WHERE message_type = ?").bind("SMS").first()||await e.env.DB.prepare(`
        INSERT INTO sms_pricing (message_type, price, description)
        VALUES ('SMS', 20, 'ë‹¨ë¬¸ SMS (90ë°”ì´íŠ¸ ì´í•˜)'),
               ('LMS', 50, 'ì¥ë¬¸ SMS (90ë°”ì´íŠ¸ ì´ˆê³¼)')
      `).run(),e.json({success:!0,message:"DB ì´ˆê¸°í™” ì™„ë£Œ",tables:["users","point_transactions","sender_ids","sms_pricing"]})}catch(t){return console.error("DB Init error:",t),e.json({success:!1,error:"DB ì´ˆê¸°í™” ì‹¤íŒ¨: "+t.message},500)}});d.post("/api/points/charge",async e=>{try{const{userId:t,amount:s}=await e.req.json();if(!t||!s)return e.json({success:!1,error:"ì‚¬ìš©ì IDì™€ ì¶©ì „ ê¸ˆì•¡ì´ í•„ìš”í•©ë‹ˆë‹¤."},400);const r=await e.env.DB.prepare("SELECT * FROM users WHERE id = ?").bind(t).first();if(!r)return e.json({success:!1,error:"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);const a=r.balance||0;await e.env.DB.prepare("UPDATE users SET balance = balance + ? WHERE id = ?").bind(s,t).run(),await e.env.DB.prepare(`
      INSERT INTO point_transactions (user_id, amount, balance_before, balance_after, transaction_type, description, created_at)
      VALUES (?, ?, ?, ?, 'charge', 'í…ŒìŠ¤íŠ¸ ì¶©ì „', CURRENT_TIMESTAMP)
    `).bind(t,s,a,a+s).run();const n=await e.env.DB.prepare("SELECT balance FROM users WHERE id = ?").bind(t).first();return e.json({success:!0,message:"í¬ì¸íŠ¸ê°€ ì¶©ì „ë˜ì—ˆìŠµë‹ˆë‹¤.",balance:n.balance})}catch(t){return console.error("Charge points error:",t),e.json({success:!1,error:"í¬ì¸íŠ¸ ì¶©ì „ ì‹¤íŒ¨: "+t.message},500)}});d.post("/api/sms/send",async e=>{var t;try{const{userId:s,senderId:r,receivers:a,message:n,reserveTime:l}=await e.req.json();if(!s||!r||!a||!n)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const o=await e.env.DB.prepare(`
      SELECT balance FROM users WHERE id = ?
    `).bind(s).first();if(!o)return e.json({success:!1,error:"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);const i=new Blob([n]).size;let c="SMS";i>90&&(c="LMS");const p=await e.env.DB.prepare(`
      SELECT retail_price FROM sms_pricing WHERE message_type = ?
    `).bind(c).first();if(!p)return e.json({success:!1,error:"SMS ìš”ê¸ˆ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},500);const g=p.retail_price*a.length;if(o.balance<g)return e.json({success:!1,error:`í¬ì¸íŠ¸ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. (í•„ìš”: ${g}P, ë³´ìœ : ${o.balance}P)`},400);const x=o.balance,v=o.balance-g;await e.env.DB.prepare(`
      UPDATE users SET balance = ? WHERE id = ?
    `).bind(v,s).run(),await e.env.DB.prepare(`
      INSERT INTO point_transactions (user_id, transaction_type, amount, balance_before, balance_after, description)
      VALUES (?, 'sms_cost', ?, ?, ?, ?)
    `).bind(s,-g,x,v,`SMS ${a.length}ê±´ ë°œì†¡`).run();const w=await e.env.DB.prepare(`
      SELECT phone_number FROM sender_ids WHERE id = ? AND user_id = ? AND status = 'verified'
    `).bind(r,s).first();if(!w)return await e.env.DB.prepare(`
        UPDATE users SET balance = ? WHERE id = ?
      `).bind(x,s).run(),e.json({success:!1,error:"ì¸ì¦ëœ ë°œì‹ ë²ˆí˜¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);const b=e.env.ALIGO_API_KEY||"4bbi3l27pb5qh11tkujl578bttz6vb5j",E=e.env.ALIGO_USER_ID||"wangholy";console.log("Aligo ENV Check:",{hasApiKey:!!e.env.ALIGO_API_KEY,hasUserId:!!e.env.ALIGO_USER_ID,apiKeyLength:(t=e.env.ALIGO_API_KEY)==null?void 0:t.length,userId:e.env.ALIGO_USER_ID});const _=new URLSearchParams;_.append("key",b),_.append("user_id",E),_.append("sender",w.phone_number),_.append("receiver",a.map(j=>j.phone).join(",")),_.append("msg",n),_.append("msg_type",c),l&&(_.append("rdate",l.split("T")[0].replace(/-/g,"")),_.append("rtime",l.split("T")[1].substring(0,5).replace(":","")));const I=await(await fetch("https://apis.aligo.in/send/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:_})).json();if(I.result_code==="1"){const j=await e.env.DB.prepare(`
        INSERT INTO sms_logs (user_id, sender_id, sender_number, receiver_number, message_type, message_content, byte_size, point_cost, status, alligo_response, alligo_msg_id, reserve_time, sent_at)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, 'success', ?, ?, ?, CURRENT_TIMESTAMP)
      `).bind(s,r,w.phone_number,a.map($=>$.phone).join(","),c,n,i,g,JSON.stringify(I),I.msg_id||null,l||null).run();for(const $ of a){const M=n.replace(/#{ì´ë¦„}/g,$.name||"");await e.env.DB.prepare(`
          INSERT INTO sms_recipients (sms_log_id, receiver_number, receiver_name, message_content, status, sent_at)
          VALUES (?, ?, ?, ?, 'success', CURRENT_TIMESTAMP)
        `).bind(j.meta.last_row_id,$.phone,$.name||null,M).run()}return e.json({success:!0,message:"ë¬¸ì ë°œì†¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",sentCount:a.length,totalCost:g,remainingBalance:v})}else return await e.env.DB.prepare(`
        UPDATE users SET balance = ? WHERE id = ?
      `).bind(x,s).run(),await e.env.DB.prepare(`
        INSERT INTO point_transactions (user_id, transaction_type, amount, balance_before, balance_after, description)
        VALUES (?, 'refund', ?, ?, ?, ?)
      `).bind(s,g,v,x,"SMS ë°œì†¡ ì‹¤íŒ¨ë¡œ ì¸í•œ í™˜ë¶ˆ").run(),await e.env.DB.prepare(`
        INSERT INTO sms_logs (user_id, sender_id, sender_number, receiver_number, message_type, message_content, byte_size, point_cost, status, alligo_response)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, 'failed', ?)
      `).bind(s,r,w.phone_number,a.map(j=>j.phone).join(","),c,n,i,g,JSON.stringify(I)).run(),e.json({success:!1,error:I.message||"ë¬¸ì ë°œì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",aligoError:I},400)}catch(s){return console.error("SMS send error:",s),e.json({success:!1,error:"ë¬¸ì ë°œì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/sms/logs",async e=>{try{const t=e.req.query("userId"),s=parseInt(e.req.query("page")||"1"),r=parseInt(e.req.query("limit")||"20"),a=(s-1)*r;if(!t)return e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const n=await e.env.DB.prepare(`
      SELECT 
        sms_logs.*,
        sender_ids.phone_number as sender_phone
      FROM sms_logs
      LEFT JOIN sender_ids ON sms_logs.sender_id = sender_ids.id
      WHERE sms_logs.user_id = ?
      ORDER BY sms_logs.created_at DESC
      LIMIT ? OFFSET ?
    `).bind(t,r,a).all(),l=await e.env.DB.prepare(`
      SELECT COUNT(*) as count FROM sms_logs WHERE user_id = ?
    `).bind(t).first();return e.json({success:!0,logs:n.results,pagination:{page:s,limit:r,total:(l==null?void 0:l.count)||0,totalPages:Math.ceil(((l==null?void 0:l.count)||0)/r)}})}catch(t){return console.error("Get SMS logs error:",t),e.json({success:!1,error:"SMS ë°œì†¡ ë‚´ì—­ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/sms/charge",async e=>{try{const{userId:t,amount:s,adminId:r,description:a}=await e.req.json();if(!t||!s||!r)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const n=await e.env.DB.prepare(`
      SELECT role FROM users WHERE id = ?
    `).bind(r).first();if(!n||n.role!=="admin")return e.json({success:!1,error:"ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤."},403);const l=await e.env.DB.prepare(`
      SELECT balance FROM users WHERE id = ?
    `).bind(t).first();if(!l)return e.json({success:!1,error:"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);const o=l.balance,i=l.balance+s;return await e.env.DB.prepare(`
      UPDATE users SET balance = ? WHERE id = ?
    `).bind(i,t).run(),await e.env.DB.prepare(`
      INSERT INTO point_transactions (user_id, transaction_type, amount, balance_before, balance_after, description, admin_id)
      VALUES (?, 'charge', ?, ?, ?, ?, ?)
    `).bind(t,s,o,i,a||"ê´€ë¦¬ì í¬ì¸íŠ¸ ì¶©ì „",r).run(),e.json({success:!0,message:"í¬ì¸íŠ¸ ì¶©ì „ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",balance:i})}catch(t){return console.error("Point charge error:",t),e.json({success:!1,error:"í¬ì¸íŠ¸ ì¶©ì „ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/kakao/pricing",async e=>{try{const{results:t}=await e.env.DB.prepare(`
      SELECT * FROM kakao_pricing ORDER BY wholesale_price ASC
    `).all();return e.json({success:!0,pricing:t})}catch(t){return console.error("Failed to load kakao pricing:",t),e.json({success:!1,error:"ìš”ê¸ˆí‘œ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.get("/api/kakao/profiles",async e=>{try{const t=e.req.query("userId");if(!t)return e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const{results:s}=await e.env.DB.prepare(`
      SELECT id, sender_key, profile_name, category_code, status, verification_date, created_at
      FROM kakao_sender_profiles
      WHERE user_id = ?
      ORDER BY created_at DESC
    `).bind(t).all();return e.json({success:!0,profiles:s||[]})}catch(t){return console.error("Failed to load kakao profiles:",t),e.json({success:!1,error:"ë°œì‹  í”„ë¡œí•„ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.post("/api/kakao/profile/register",async e=>{try{const{userId:t,senderKey:s,profileName:r,categoryCode:a}=await e.req.json();if(!t||!s||!r)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);if(await e.env.DB.prepare(`
      SELECT id FROM kakao_sender_profiles WHERE sender_key = ? AND user_id = ?
    `).bind(s,t).first())return e.json({success:!1,error:"ì´ë¯¸ ë“±ë¡ëœ ë°œì‹  í”„ë¡œí•„ì…ë‹ˆë‹¤."},400);const l=await e.env.DB.prepare(`
      INSERT INTO kakao_sender_profiles (user_id, sender_key, profile_name, category_code, status)
      VALUES (?, ?, ?, ?, 'active')
    `).bind(t,s,r,a||null).run();return e.json({success:!0,message:"ë°œì‹  í”„ë¡œí•„ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.",profileId:l.meta.last_row_id})}catch(t){return console.error("Failed to register kakao profile:",t),e.json({success:!1,error:"ë°œì‹  í”„ë¡œí•„ ë“±ë¡ ì‹¤íŒ¨"},500)}});d.get("/api/kakao/templates",async e=>{try{const t=e.req.query("userId");if(!t)return e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const{results:s}=await e.env.DB.prepare(`
      SELECT * FROM kakao_templates
      WHERE user_id = ?
      ORDER BY created_at DESC
    `).bind(t).all();return e.json({success:!0,templates:s||[]})}catch(t){return console.error("Failed to load kakao templates:",t),e.json({success:!1,error:"í…œí”Œë¦¿ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.post("/api/kakao/template/register",async e=>{try{const{userId:t,templateCode:s,templateName:r,templateContent:a,buttonsJson:n}=await e.req.json();if(!t||!s||!r||!a)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const l=await e.env.DB.prepare(`
      INSERT INTO kakao_templates (
        user_id, template_code, template_name, template_content, 
        buttons_json, status
      ) VALUES (?, ?, ?, ?, ?, 'approved')
    `).bind(t,s,r,a,n||null).run();return e.json({success:!0,message:"í…œí”Œë¦¿ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.",templateId:l.meta.last_row_id})}catch(t){return console.error("Failed to register kakao template:",t),e.json({success:!1,error:"í…œí”Œë¦¿ ë“±ë¡ ì‹¤íŒ¨"},500)}});d.post("/api/kakao/send",async e=>{try{const{userId:t,senderKey:s,templateCode:r,receivers:a,failover:n,failoverSms:l,reserveTime:o}=await e.req.json();if(console.log("Kakao send request:",{userId:t,senderKey:s,templateCode:r,receiversCount:a==null?void 0:a.length}),!t||!s||!r||!a||a.length===0)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const i=await e.env.DB.prepare(`
      SELECT * FROM kakao_templates WHERE template_code = ? AND user_id = ?
    `).bind(r,t).first();if(!i)return e.json({success:!1,error:"í…œí”Œë¦¿ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);const c=await e.env.DB.prepare(`
      SELECT retail_price FROM kakao_pricing WHERE message_type = 'ALIMTALK'
    `).first(),m=((c==null?void 0:c.retail_price)||15)*a.length,g=await e.env.DB.prepare(`
      SELECT balance FROM users WHERE id = ?
    `).bind(t).first();if(!g||g.balance<m)return e.json({success:!1,error:`í¬ì¸íŠ¸ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. (í•„ìš”: ${m}P, ë³´ìœ : ${(g==null?void 0:g.balance)||0}P)`},400);const x=g.balance,v=x-m;await e.env.DB.prepare(`
      UPDATE users SET balance = ? WHERE id = ?
    `).bind(v,t).run(),await e.env.DB.prepare(`
      INSERT INTO point_transactions (user_id, transaction_type, amount, balance_before, balance_after, description)
      VALUES (?, 'kakao_cost', ?, ?, ?, ?)
    `).bind(t,-m,x,v,`ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ ${a.length}ê±´ ë°œì†¡`).run(),console.log("Points deducted:",x,"->",v);try{const w=e.env.ALIGO_API_KEY,b=e.env.ALIGO_USER_ID;if(!w||!b)throw new Error("ì•Œë¦¬ê³  API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.");const E=a.map(M=>{var T;return{rcv:M.phone.replace(/-/g,""),rcv_name:M.name||"",emtitle_1:((T=M.variables)==null?void 0:T.title)||"",message:i.template_content}}),_={apikey:w,userid:b,senderkey:s,tpl_code:r,sender:s,receiver_1:E[0].rcv,recvname_1:E[0].rcv_name,subject_1:E[0].emtitle_1,message_1:E[0].message,failover:n||"Y",fsubject_1:l||"ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼",fmessage_1:l||i.template_content};if(o){const M=new Date(o);_.rdate=M.toISOString().split("T")[0].replace(/-/g,""),_.rtime=M.toTimeString().split(" ")[0].replace(/:/g,"").substring(0,4)}const I=await(await fetch("https://kakaoapi.aligo.in/akv10/alimtalk/send/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(_)})).json();console.log("Aligo kakao response:",I);const $=(await e.env.DB.prepare(`
        INSERT INTO kakao_logs (
          user_id, sender_key, template_code, receiver_phone, receiver_name, 
          message, buttons_json, fail_over, fail_over_sms, 
          status, result_code, result_message, msg_id, cost, reserved_date, sent_at
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP)
      `).bind(t,s,r,a[0].phone,a[0].name,i.template_content,i.buttons_json,n||"Y",l,I.result_code===1?"success":"failed",I.result_code||0,I.message||"",I.msg_id||"",m,o||null).run()).meta.last_row_id;for(const M of a)await e.env.DB.prepare(`
          INSERT INTO kakao_recipients (
            kakao_log_id, receiver_phone, receiver_name, status, sent_at
          ) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP)
        `).bind($,M.phone,M.name,I.result_code===1?"success":"pending").run();return I.result_code===1?e.json({success:!0,message:`ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ ${a.length}ê±´ì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.`,balance:v,cost:m,msgId:I.msg_id}):(await e.env.DB.prepare(`
          UPDATE users SET balance = ? WHERE id = ?
        `).bind(x,t).run(),await e.env.DB.prepare(`
          INSERT INTO point_transactions (user_id, transaction_type, amount, balance_before, balance_after, description)
          VALUES (?, 'refund', ?, ?, ?, ?)
        `).bind(t,m,v,x,"ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ ë°œì†¡ ì‹¤íŒ¨ë¡œ ì¸í•œ í™˜ë¶ˆ").run(),e.json({success:!1,error:I.message||"ì•Œë¦¼í†¡ ë°œì†¡ ì‹¤íŒ¨",aligoError:I},500))}catch(w){return console.error("Aligo kakao API error:",w),await e.env.DB.prepare(`
        UPDATE users SET balance = ? WHERE id = ?
      `).bind(x,t).run(),await e.env.DB.prepare(`
        INSERT INTO point_transactions (user_id, transaction_type, amount, balance_before, balance_after, description)
        VALUES (?, 'refund', ?, ?, ?, ?)
      `).bind(t,m,v,x,"ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ API ì˜¤ë¥˜ë¡œ ì¸í•œ í™˜ë¶ˆ").run(),e.json({success:!1,error:"ì•Œë¦¬ê³  API í˜¸ì¶œ ì‹¤íŒ¨",details:w.message},500)}}catch(t){return console.error("Kakao send error:",t),e.json({success:!1,error:"ì•Œë¦¼í†¡ ë°œì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/kakao/logs",async e=>{try{const t=e.req.query("userId"),s=parseInt(e.req.query("page")||"1"),r=parseInt(e.req.query("limit")||"20"),a=(s-1)*r;if(!t)return e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const{results:n}=await e.env.DB.prepare(`
      SELECT * FROM kakao_logs
      WHERE user_id = ?
      ORDER BY created_at DESC
      LIMIT ? OFFSET ?
    `).bind(t,r,a).all(),l=await e.env.DB.prepare(`
      SELECT COUNT(*) as count FROM kakao_logs WHERE user_id = ?
    `).bind(t).first(),o=await e.env.DB.prepare(`
      SELECT 
        COUNT(*) as total_sent,
        SUM(CASE WHEN status = 'success' THEN 1 ELSE 0 END) as success_count,
        SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END) as failed_count,
        SUM(cost) as total_cost
      FROM kakao_logs
      WHERE user_id = ?
    `).bind(t).first();return e.json({success:!0,logs:n||[],pagination:{page:s,limit:r,total:(l==null?void 0:l.count)||0,totalPages:Math.ceil(((l==null?void 0:l.count)||0)/r)},stats:{totalSent:(o==null?void 0:o.total_sent)||0,successCount:(o==null?void 0:o.success_count)||0,failedCount:(o==null?void 0:o.failed_count)||0,totalCost:(o==null?void 0:o.total_cost)||0}})}catch(t){return console.error("Failed to load kakao logs:",t),e.json({success:!1,error:"ë°œì†¡ ë‚´ì—­ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.post("/api/deposit/request",async e=>{try{const{userId:t,userName:s,userEmail:r,amount:a,bankName:n,accountNumber:l,depositorName:o,message:i}=await e.req.json();if(!t||!a||a<=0)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const c=await e.env.DB.prepare(`
      INSERT INTO deposit_requests (user_id, user_name, user_email, amount, bank_name, account_number, depositor_name, message, status)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, 'pending')
    `).bind(t,s,r,a,n||null,l||null,o||null,i||null).run();return e.json({success:!0,message:"ì…ê¸ˆ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",requestId:c.meta.last_row_id})}catch(t){return console.error("Deposit request error:",t),e.json({success:!1,error:"ì…ê¸ˆ ì‹ ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/deposit/my-requests/:userId",async e=>{try{const t=e.req.param("userId");if(!t)return e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const{results:s}=await e.env.DB.prepare(`
      SELECT 
        id,
        amount,
        bank_name,
        account_number,
        depositor_name,
        message,
        status,
        created_at,
        processed_at
      FROM deposit_requests
      WHERE user_id = ?
      ORDER BY created_at DESC
    `).bind(t).all();return e.json({success:!0,requests:s||[]})}catch(t){return console.error("Failed to load deposit requests:",t),e.json({success:!1,error:"ì…ê¸ˆ ì‹ ì²­ ë‚´ì—­ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/point-transactions/:userId",async e=>{try{const t=e.req.param("userId"),s=parseInt(e.req.query("limit")||"50"),r=parseInt(e.req.query("offset")||"0");if(!t)return e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const{results:a}=await e.env.DB.prepare(`
      SELECT 
        id,
        transaction_type,
        amount,
        balance_before,
        balance_after,
        description,
        created_at
      FROM point_transactions
      WHERE user_id = ?
      ORDER BY created_at DESC
      LIMIT ? OFFSET ?
    `).bind(t,s,r).all(),n=await e.env.DB.prepare(`
      SELECT 
        SUM(CASE WHEN amount > 0 THEN amount ELSE 0 END) as total_charged,
        SUM(CASE WHEN amount < 0 THEN ABS(amount) ELSE 0 END) as total_used,
        COUNT(*) as total_transactions
      FROM point_transactions
      WHERE user_id = ?
    `).bind(t).first();return e.json({success:!0,transactions:a||[],stats:{totalCharged:(n==null?void 0:n.total_charged)||0,totalUsed:(n==null?void 0:n.total_used)||0,totalTransactions:(n==null?void 0:n.total_transactions)||0}})}catch(t){return console.error("Failed to load point transactions:",t),e.json({success:!1,error:"ê±°ë˜ ë‚´ì—­ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/upload/document",async e=>{try{const{userId:t,fileName:s,fileData:r,fileType:a}=await e.req.json();if(!t||!s||!r||!a)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤."},400);const n=r.split(",")[1],l=atob(n),o=new Uint8Array(l.length);for(let m=0;m<l.length;m++)o[m]=l.charCodeAt(m);if(o.length>5*1024*1024)return e.json({success:!1,error:"íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤."},400);const i=Date.now(),c=`documents/${t}/${i}-${s}`;await e.env.R2.put(c,o,{httpMetadata:{contentType:a}});const p=`https://superplace-academy.pages.dev/api/document/${c}`;return e.json({success:!0,url:p,key:c})}catch(t){return console.error("R2 upload error:",t),e.json({success:!1,error:"ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/document/:path{.+}",async e=>{var t;try{const s=e.req.param("path");if(!s)return e.text("File not found",404);const r=await e.env.R2.get(s);return r?new Response(r.body,{headers:{"Content-Type":((t=r.httpMetadata)==null?void 0:t.contentType)||"application/octet-stream","Cache-Control":"public, max-age=31536000"}}):e.text("File not found",404)}catch(s){return console.error("R2 get error:",s),e.text("Error retrieving file",500)}});d.post("/api/sms/sender/verification-request",async e=>{try{const{userId:t,phoneNumber:s,businessName:r,businessRegistrationNumber:a,businessRegistrationImage:n,certificateImage:l,employmentCertImage:o,contractImage:i}=await e.req.json();if(console.log("Verification request received:",{userId:t,phoneNumber:s,businessName:r}),!t||!s||!r||!a||!n||!l||!o||!i)return e.json({success:!1,error:"ëª¨ë“  í•„ìˆ˜ ì„œë¥˜ë¥¼ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”."},400);const c=s.replace(/-/g,"");if(!/^01[0-9]{8,9}$/.test(c))return e.json({success:!1,error:"ì˜¬ë°”ë¥¸ íœ´ëŒ€í° ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);console.log("Checking existing request...");const p=await e.env.DB.prepare(`
      SELECT id, status FROM sender_verification_requests
      WHERE phone_number = ? AND user_id = ? AND status IN ('pending', 'approved')
      ORDER BY request_date DESC
      LIMIT 1
    `).bind(c,t).first();if(p){if(p.status==="pending")return e.json({success:!1,error:"ì´ë¯¸ ì‹ ì²­ ì¤‘ì¸ ë²ˆí˜¸ì…ë‹ˆë‹¤."},400);if(p.status==="approved")return e.json({success:!1,error:"ì´ë¯¸ ìŠ¹ì¸ëœ ë²ˆí˜¸ì…ë‹ˆë‹¤."},400)}console.log("Inserting new request...");const m=await e.env.DB.prepare(`
      INSERT INTO sender_verification_requests 
      (user_id, phone_number, business_name, business_registration_number, 
       business_registration_image, certificate_image, employment_cert_image, contract_image, status)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, 'pending')
    `).bind(t,c,r,a,n,l,o,i).run();return console.log("Insert successful, ID:",m.meta.last_row_id),e.json({success:!0,message:"ë°œì‹ ë²ˆí˜¸ ì¸ì¦ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê´€ë¦¬ì ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”. (í‰ì¼ ê¸°ì¤€ 2~3ì¼ ì†Œìš”)",requestId:m.meta.last_row_id})}catch(t){return console.error("Sender verification request error:",t),console.error("Error stack:",t.stack),console.error("Error message:",t.message),e.json({success:!1,error:"ë°œì‹ ë²ˆí˜¸ ì¸ì¦ ì‹ ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",details:t.message},500)}});d.get("/api/sms/sender/verification-requests",async e=>{try{const t=e.req.query("userId");if(!t)return e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const s=await e.env.DB.prepare(`
      SELECT 
        id, phone_number, business_name, business_registration_number, 
        business_registration_image, certificate_image, employment_cert_image, contract_image,
        request_date, status, admin_note, rejection_reason, processed_date
      FROM sender_verification_requests
      WHERE user_id = ?
      ORDER BY request_date DESC
    `).bind(t).all();return e.json({success:!0,requests:s.results})}catch(t){return console.error("Get verification requests error:",t),e.json({success:!1,error:"ì‹ ì²­ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/sms/sender/verification-process",async e=>{try{const{requestId:t,action:s,adminNote:r,adminId:a}=await e.req.json();if(!t||!s||!a)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);if(!["approve","reject"].includes(s))return e.json({success:!1,error:"ì˜¬ë°”ë¥¸ ì•¡ì…˜ì„ ì„ íƒí•´ì£¼ì„¸ìš”."},400);const n=await e.env.DB.prepare(`
      SELECT role FROM users WHERE id = ?
    `).bind(a).first();if(!n||n.role!=="admin")return e.json({success:!1,error:"ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤."},403);const l=await e.env.DB.prepare(`
      SELECT * FROM sender_verification_requests WHERE id = ?
    `).bind(t).first();if(!l)return e.json({success:!1,error:"ì‹ ì²­ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);if(l.status!=="pending")return e.json({success:!1,error:"ì´ë¯¸ ì²˜ë¦¬ëœ ì‹ ì²­ì…ë‹ˆë‹¤."},400);const o=s==="approve"?"approved":"rejected",i=new Date().toISOString();if(await e.env.DB.prepare(`
      UPDATE sender_verification_requests
      SET status = ?, admin_note = ?, processed_by = ?, processed_date = ?
      WHERE id = ?
    `).bind(o,r||null,a,i,t).run(),s==="approve"){await e.env.DB.prepare(`
        INSERT INTO sender_ids 
        (user_id, phone_number, verification_method, status, verification_request_id, business_name, business_registration_number)
        VALUES (?, ?, 'business_registration', 'verified', ?, ?, ?)
      `).bind(l.user_id,l.phone_number,t,l.business_name,l.business_registration_number).run();try{const c=e.env.ALIGO_USER_ID||"",p=e.env.ALIGO_API_KEY||"";if(!c||!p)console.warn("Aligo API credentials not configured");else{const g=await(await fetch("https://apis.aligo.in/sender/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({user_id:c,key:p,sender:l.phone_number.replace(/-/g,""),comment:`${l.business_name} - ìŠ¹ì¸ì¼: ${new Date().toLocaleDateString("ko-KR")}`})})).json();console.log("Aligo API response:",g),g.result_code!=="1"&&console.error("Aligo sender registration failed:",g)}}catch(c){console.error("Aligo API error:",c)}}return e.json({success:!0,message:s==="approve"?"ë°œì‹ ë²ˆí˜¸ê°€ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.":"ë°œì‹ ë²ˆí˜¸ ì‹ ì²­ì´ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤."})}catch(t){return console.error("Process verification error:",t),e.json({success:!1,error:"ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/admin/sender/verification-requests",async e=>{try{const t=e.req.query("adminId");if(!t)return e.json({success:!1,error:"ê´€ë¦¬ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const s=await e.env.DB.prepare(`
      SELECT role FROM users WHERE id = ?
    `).bind(t).first();if(!s||s.role!=="admin")return e.json({success:!1,error:"ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤."},403);const r=await e.env.DB.prepare(`
      SELECT 
        svr.id, svr.user_id, svr.phone_number, svr.business_name, 
        svr.business_registration_number, svr.business_registration_image,
        svr.certificate_image, svr.employment_cert_image, svr.contract_image,
        svr.request_date, svr.status, svr.admin_note, svr.rejection_reason, svr.processed_date,
        u.name as user_name, u.email as user_email
      FROM sender_verification_requests svr
      LEFT JOIN users u ON svr.user_id = u.id
      ORDER BY 
        CASE svr.status 
          WHEN 'pending' THEN 1 
          WHEN 'approved' THEN 2 
          WHEN 'rejected' THEN 3 
        END,
        svr.request_date DESC
    `).all();return e.json({success:!0,requests:r.results})}catch(t){return console.error("Get admin verification requests error:",t),e.json({success:!1,error:"ì‹ ì²­ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/downloads/consent-form",async e=>{const r=await(await fetch("https://www.genspark.ai/api/files/s/lIFq9l1L")).arrayBuffer();return new Response(r,{headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.wordprocessingml.document","Content-Disposition":'attachment; filename="ë°œì‹ ë²ˆí˜¸_ì‚¬ì „ë“±ë¡_ëŒ€ë¦¬_ì‹ ì²­ì„œ.docx"'}})});d.get("/api/downloads/contract",async e=>{const r=await(await fetch("https://www.genspark.ai/api/files/s/aKg3VCJT")).arrayBuffer();return new Response(r,{headers:{"Content-Type":"application/vnd.openxmlformats-officedocument.wordprocessingml.document","Content-Disposition":'attachment; filename="ë¬¸ìë©”ì‹œì§€_ì´ìš©ê³„ì•½ì„œ.docx"'}})});d.get("/api/downloads/employment-cert",async e=>e.html(`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <title>ì¬ì§ì¦ëª…ì„œ</title>
      <style>
        body { font-family: 'Malgun Gothic', sans-serif; padding: 60px; }
        h1 { text-align: center; font-size: 32px; margin-bottom: 40px; }
        table { width: 100%; border-collapse: collapse; margin: 30px 0; }
        th, td { border: 1px solid #000; padding: 12px; text-align: left; }
        th { background-color: #f0f0f0; font-weight: bold; }
        .info { margin: 30px 0; line-height: 2; }
        .signature { text-align: right; margin-top: 60px; }
      </style>
    </head>
    <body>
      <h1>ì¬ ì§ ì¦ ëª… ì„œ</h1>
      
      <div class="info">
        <table>
          <tr>
            <th width="30%">ì„±ëª… (í•œê¸€)</th>
            <td></td>
            <th width="30%">ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸</th>
            <td></td>
          </tr>
          <tr>
            <th>ì£¼ì†Œ</th>
            <td colspan="3"></td>
          </tr>
        </table>
        
        <table>
          <tr>
            <th width="30%">ê·¼ë¬´ë¶€ì„œ</th>
            <td></td>
            <th width="30%">ì§ìœ„</th>
            <td></td>
          </tr>
          <tr>
            <th>ì¬ì§ê¸°ê°„</th>
            <td colspan="3">20   ë…„   ì›”   ì¼ ë¶€í„° 20   ë…„   ì›”   ì¼ í˜„ì¬ê¹Œì§€</td>
          </tr>
          <tr>
            <th>ì œì¶œìš©ë„</th>
            <td colspan="3"></td>
          </tr>
        </table>
      </div>
      
      <p style="text-align: center; margin: 40px 0;">
        ìœ„ì˜ ê¸°ì¬ì‚¬í•­ì´ ì‚¬ì‹¤ê³¼ ë‹¤ë¦„ì—†ìŒì„ ì¦ëª…í•©ë‹ˆë‹¤.
      </p>
      
      <div class="signature">
        <p>ë…„ &nbsp;&nbsp;&nbsp; ì›” &nbsp;&nbsp;&nbsp; ì¼</p>
        <br><br>
        <p>íšŒ ì‚¬ ëª…: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (ì¸)</p>
        <p>ëŒ€ í‘œ ì: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (ì¸)</p>
        <p>ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸:</p>
        <p>ì£¼ ì†Œ:</p>
        <p>ì „ í™”:</p>
      </div>
    </body>
    </html>
  `));d.get("/api/deposit/my-requests/:userId",async e=>{try{const t=e.req.param("userId"),s=await e.env.DB.prepare(`
      SELECT * FROM deposit_requests WHERE user_id = ? ORDER BY created_at DESC
    `).bind(t).all();return e.json({success:!0,requests:s.results})}catch(t){return console.error("Get deposit requests error:",t),e.json({success:!1,error:"ì…ê¸ˆ ì‹ ì²­ ë‚´ì—­ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/admin/deposit/requests",async e=>{try{const t=await e.env.DB.prepare(`
      SELECT * FROM deposit_requests ORDER BY created_at DESC
    `).all();return e.json({success:!0,requests:t.results})}catch(t){return console.error("Get all deposit requests error:",t),e.json({success:!1,error:"ì…ê¸ˆ ì‹ ì²­ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.put("/api/admin/deposit/requests/:id/process",async e=>{try{const t=e.req.param("id"),{status:s,adminId:r}=await e.req.json();if(console.log("Processing deposit:",{requestId:t,status:s,adminId:r}),r){const l=await e.env.DB.prepare(`
        SELECT role FROM users WHERE id = ?
      `).bind(r).first();if(!l||l.role!=="admin")return e.json({success:!1,error:"ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤."},403)}const a=await e.env.DB.prepare(`
      SELECT * FROM deposit_requests WHERE id = ?
    `).bind(t).first();if(console.log("Found request:",a),!a)return e.json({success:!1,error:"ì…ê¸ˆ ì‹ ì²­ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);if(a.status!=="pending")return e.json({success:!1,error:"ì´ë¯¸ ì²˜ë¦¬ëœ ì‹ ì²­ì…ë‹ˆë‹¤."},400);let n=0;if(s==="approved"){const l=a.amount;console.log("Approving deposit for user:",a.user_id,"adding:",l);const o=await e.env.DB.prepare(`
        SELECT balance FROM users WHERE id = ?
      `).bind(a.user_id).first(),i=(o==null?void 0:o.balance)||0;if(n=i+l,await e.env.DB.prepare(`
        UPDATE users SET balance = ? WHERE id = ?
      `).bind(n,a.user_id).run(),console.log("Balance updated:",i,"->",n),await e.env.DB.prepare(`
        INSERT INTO point_transactions (user_id, transaction_type, amount, balance_before, balance_after, description, admin_id)
        VALUES (?, 'deposit_approval', ?, ?, ?, ?, ?)
      `).bind(a.user_id,l,i,n,`ì…ê¸ˆ ì‹ ì²­ ìŠ¹ì¸ (ì‹ ì²­ ID: ${t})`,r||null).run(),a.user_email)try{const c=e.env.RESEND_API_KEY;if(c){const p=await fetch("https://api.resend.com/emails",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({from:"ìŠˆí¼í”Œë ˆì´ìŠ¤ <noreply@superplace.co.kr>",to:a.user_email,subject:"âœ… í¬ì¸íŠ¸ ì¶©ì „ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤",html:`
                  <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
                    <div style="background: linear-gradient(135deg, #9333ea 0%, #7e22ce 100%); padding: 30px; border-radius: 10px 10px 0 0; text-align: center;">
                      <h1 style="color: white; margin: 0; font-size: 24px;">ğŸ’° í¬ì¸íŠ¸ ì¶©ì „ ì™„ë£Œ</h1>
                    </div>
                    
                    <div style="background: white; padding: 30px; border: 1px solid #e5e7eb; border-top: none; border-radius: 0 0 10px 10px;">
                      <p style="font-size: 16px; color: #374151; margin-bottom: 20px;">
                        ì•ˆë…•í•˜ì„¸ìš”, <strong>${a.user_name||"íšŒì›"}</strong>ë‹˜!
                      </p>
                      
                      <p style="font-size: 16px; color: #374151; margin-bottom: 30px;">
                        ì…ê¸ˆ ì‹ ì²­í•˜ì‹  í¬ì¸íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶©ì „ë˜ì—ˆìŠµë‹ˆë‹¤. ğŸ‰
                      </p>
                      
                      <div style="background: #f9fafb; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                          <span style="color: #6b7280;">ì¶©ì „ ê¸ˆì•¡</span>
                          <strong style="color: #9333ea; font-size: 20px;">${l.toLocaleString()}P</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding-top: 10px; border-top: 1px solid #e5e7eb;">
                          <span style="color: #6b7280;">í˜„ì¬ ì”ì•¡</span>
                          <strong style="color: #1f2937; font-size: 18px;">${n.toLocaleString()}P</strong>
                        </div>
                      </div>
                      
                      <div style="background: #eff6ff; padding: 15px; border-radius: 8px; border-left: 4px solid #3b82f6; margin-bottom: 30px;">
                        <p style="margin: 0; color: #1e40af; font-size: 14px;">
                          ğŸ’¡ <strong>SMS ë°œì†¡ ê°€ëŠ¥ ê±´ìˆ˜</strong><br>
                          â€¢ SMS (90ì): ì•½ ${Math.floor(n/20).toLocaleString()}ê±´<br>
                          â€¢ LMS (2000ì): ì•½ ${Math.floor(n/50).toLocaleString()}ê±´<br>
                          â€¢ MMS (ì‚¬ì§„ í¬í•¨): ì•½ ${Math.floor(n/150).toLocaleString()}ê±´
                        </p>
                      </div>
                      
                      <div style="text-align: center;">
                        <a href="https://superplace-academy.pages.dev/sms/compose" 
                           style="display: inline-block; background: #9333ea; color: white; padding: 14px 30px; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px;">
                          ì§€ê¸ˆ ë¬¸ì ë³´ë‚´ê¸° ğŸ“¤
                        </a>
                      </div>
                      
                      <p style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e5e7eb; color: #6b7280; font-size: 14px; text-align: center;">
                        ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ ì—°ë½ì£¼ì„¸ìš”.<br>
                        ê°ì‚¬í•©ë‹ˆë‹¤!
                      </p>
                    </div>
                  </div>
                `})});p.ok?console.log("Email notification sent successfully"):console.error("Failed to send email notification:",await p.text())}}catch(c){console.error("Email sending error:",c)}}return await e.env.DB.prepare(`
      UPDATE deposit_requests SET status = ?, processed_at = CURRENT_TIMESTAMP WHERE id = ?
    `).bind(s,t).run(),e.json({success:!0,message:s==="approved"?"ì…ê¸ˆì´ ìŠ¹ì¸ë˜ê³  í¬ì¸íŠ¸ê°€ ì¶©ì „ë˜ì—ˆìŠµë‹ˆë‹¤.":"ì…ê¸ˆ ì‹ ì²­ì´ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤."})}catch(t){return console.error("Process deposit request error:",t),e.json({success:!1,error:"ì…ê¸ˆ ì‹ ì²­ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",details:error.message},500)}});d.put("/api/admin/users/:id/password",async e=>{try{const t=e.req.param("id"),{newPassword:s}=await e.req.json();return!s||s.length<6?e.json({success:!1,error:"ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤."},400):(await e.env.DB.prepare(`
      UPDATE users SET password = ? WHERE id = ?
    `).bind(s,t).run(),e.json({success:!0,message:"ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤."}))}catch(t){return console.error("Change password error:",t),e.json({success:!1,error:"ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.put("/api/admin/users/:id/points",async e=>{try{const t=e.req.param("id"),{points:s,action:r}=await e.req.json();if(!s||s<=0)return e.json({success:!1,error:"ìœ íš¨í•œ í¬ì¸íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const a=await e.env.DB.prepare(`
      SELECT points FROM users WHERE id = ?
    `).bind(t).first();if(!a)return e.json({success:!1,error:"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);let n=a.points||0;return r==="add"?n+=s:r==="subtract"&&(n=Math.max(0,n-s)),await e.env.DB.prepare(`
      UPDATE users SET points = ? WHERE id = ?
    `).bind(n,t).run(),e.json({success:!0,message:"í¬ì¸íŠ¸ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.",newPoints:n})}catch(t){return console.error("Update points error:",t),e.json({success:!1,error:"í¬ì¸íŠ¸ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/admin/login-as/:id",async e=>{try{const t=e.req.param("id"),s=await e.env.DB.prepare(`
      SELECT id, email, name, role, points FROM users WHERE id = ?
    `).bind(t).first();return s?e.json({success:!0,message:"ë¡œê·¸ì¸ ì„±ê³µ",user:{id:s.id,email:s.email,name:s.name,role:s.role,points:s.points}}):e.json({success:!1,error:"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404)}catch(t){return console.error("Login as user error:",t),e.json({success:!1,error:"ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/contacts",async e=>{try{const{results:t}=await e.env.DB.prepare(`
      SELECT * FROM contacts ORDER BY created_at DESC LIMIT 50
    `).all();return e.json({success:!0,contacts:t})}catch(t){return console.error("Fetch contacts error:",t),e.json({success:!1,error:"ë¬¸ì˜ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.put("/api/admin/contacts/:id",async e=>{try{const t=e.req.param("id"),{status:s,reply_memo:r,handled_by:a}=await e.req.json();let n="UPDATE contacts SET ";const l=[],o=[];return s&&(l.push("status = ?"),o.push(s)),r!==void 0&&(l.push("reply_memo = ?"),o.push(r)),a&&(l.push("handled_by = ?, handled_at = CURRENT_TIMESTAMP"),o.push(a)),n+=l.join(", ")+" WHERE id = ?",o.push(t),await e.env.DB.prepare(n).bind(...o).run(),e.json({success:!0,message:"ë¬¸ì˜ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤."})}catch(t){return console.error("Update contact error:",t),e.json({success:!1,error:"ë¬¸ì˜ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨"},500)}});d.get("/api/admin/users",async e=>{try{const{results:t}=await e.env.DB.prepare("SELECT id, email, name, phone, academy_name, role, created_at FROM users ORDER BY created_at DESC").all();return e.json({success:!0,users:t})}catch{return e.json({success:!1,error:"ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.get("/api/admin/programs",async e=>{try{const{results:t}=await e.env.DB.prepare("SELECT * FROM programs ORDER BY created_at DESC").all();return e.json({success:!0,programs:t})}catch(t){return console.error("Programs error:",t),e.json({success:!1,error:"í”„ë¡œê·¸ë¨ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.post("/api/admin/programs",async e=>{try{const{name:t,description:s,price:r,duration_days:a,max_students:n}=await e.req.json(),l=await e.env.DB.prepare(`
      INSERT INTO programs (name, description, price, duration_days, max_students, status, is_active)
      VALUES (?, ?, ?, ?, ?, 'active', 1)
    `).bind(t,s||"",r||0,a||30,n||null).run();return e.json({success:!0,message:"í”„ë¡œê·¸ë¨ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.",id:l.meta.last_row_id})}catch(t){return console.error("Add program error:",t),e.json({success:!1,error:"í”„ë¡œê·¸ë¨ ì¶”ê°€ ì‹¤íŒ¨"},500)}});d.put("/api/admin/programs/:id",async e=>{try{const t=e.req.param("id"),{name:s,description:r,price:a,duration_days:n,max_students:l,status:o}=await e.req.json();return await e.env.DB.prepare(`
      UPDATE programs 
      SET name = ?, description = ?, price = ?, duration_days = ?, max_students = ?, status = ?
      WHERE id = ?
    `).bind(s,r,a,n,l,o,t).run(),e.json({success:!0,message:"í”„ë¡œê·¸ë¨ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤."})}catch(t){return console.error("Update program error:",t),e.json({success:!1,error:"í”„ë¡œê·¸ë¨ ìˆ˜ì • ì‹¤íŒ¨"},500)}});d.delete("/api/admin/programs/:id",async e=>{try{const t=e.req.param("id");return await e.env.DB.prepare("UPDATE programs SET status = ?, is_active = 0 WHERE id = ?").bind("inactive",t).run(),e.json({success:!0,message:"í”„ë¡œê·¸ë¨ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."})}catch(t){return console.error("Delete program error:",t),e.json({success:!1,error:"í”„ë¡œê·¸ë¨ ì‚­ì œ ì‹¤íŒ¨"},500)}});d.get("/api/admin/enrollments",async e=>{try{const t="SELECT up.*, u.name as user_name, p.name as program_name FROM user_programs up JOIN users u ON up.user_id = u.id JOIN programs p ON up.program_id = p.id WHERE up.status = ? ORDER BY up.created_at DESC",{results:s}=await e.env.DB.prepare(t).bind("active").all();return e.json({success:!0,enrollments:s})}catch{return e.json({success:!1,error:"ìˆ˜ê°• í˜„í™© ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.get("/api/admin/stats/monthly-users",async e=>{try{const t=`
      SELECT 
        strftime('%Y-%m', created_at) as month,
        COUNT(*) as count
      FROM users
      WHERE created_at >= date('now', '-6 months')
      GROUP BY month
      ORDER BY month ASC
    `,{results:s}=await e.env.DB.prepare(t).all();return e.json({success:!0,data:s})}catch(t){return console.error("Monthly users stats error:",t),e.json({success:!1,error:"í†µê³„ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.get("/api/admin/stats/program-enrollments",async e=>{try{const t=`
      SELECT 
        p.name as program_name,
        p.price,
        COUNT(up.id) as enrollment_count,
        SUM(p.price) as revenue
      FROM programs p
      LEFT JOIN user_programs up ON p.id = up.program_id AND up.status = 'active'
      WHERE p.status = 'active'
      GROUP BY p.id, p.name, p.price
      ORDER BY enrollment_count DESC
    `,{results:s}=await e.env.DB.prepare(t).all();return e.json({success:!0,data:s})}catch(t){return console.error("Program enrollments stats error:",t),e.json({success:!1,error:"í†µê³„ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.get("/api/admin/stats/dashboard-summary",async e=>{try{const t=await e.env.DB.prepare("SELECT COUNT(*) as count FROM users").first(),s=await e.env.DB.prepare('SELECT COUNT(*) as count FROM users WHERE updated_at >= date("now", "-30 days")').first(),r=await e.env.DB.prepare("SELECT COUNT(*) as count FROM contacts WHERE status = ?").bind("pending").first(),a=await e.env.DB.prepare("SELECT COUNT(*) as count FROM contacts").first(),n=await e.env.DB.prepare("SELECT COUNT(*) as count FROM programs WHERE status = ?").bind("active").first(),l=await e.env.DB.prepare("SELECT COUNT(*) as count FROM user_programs WHERE status = ?").bind("active").first(),o=await e.env.DB.prepare(`
      SELECT SUM(p.price) as total
      FROM user_programs up
      JOIN programs p ON up.program_id = p.id
      WHERE up.status = 'active'
    `).first();return e.json({success:!0,data:{totalUsers:(t==null?void 0:t.count)||0,activeUsers:(s==null?void 0:s.count)||0,pendingContacts:(r==null?void 0:r.count)||0,totalContacts:(a==null?void 0:a.count)||0,activePrograms:(n==null?void 0:n.count)||0,totalEnrollments:(l==null?void 0:l.count)||0,totalRevenue:(o==null?void 0:o.total)||0}})}catch(t){return console.error("Dashboard summary error:",t),e.json({success:!1,error:"í†µê³„ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.get("/api/admin/users/:id/programs",async e=>{try{const t=e.req.param("id"),s="SELECT up.*, p.name as program_name, p.duration_days FROM user_programs up JOIN programs p ON up.program_id = p.id WHERE up.user_id = ? AND up.status = ? ORDER BY up.created_at DESC",{results:r}=await e.env.DB.prepare(s).bind(t,"active").all();return e.json({success:!0,programs:r})}catch{return e.json({success:!1,error:"í”„ë¡œê·¸ë¨ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.post("/api/admin/assign-program",async e=>{try{const{user_id:t,program_id:s,end_date:r}=await e.req.json();return await e.env.DB.prepare("INSERT INTO user_programs (user_id, program_id, end_date, status) VALUES (?, ?, ?, ?)").bind(t,s,r||null,"active").run(),e.json({success:!0,message:"í”„ë¡œê·¸ë¨ì´ ë¶€ì—¬ë˜ì—ˆìŠµë‹ˆë‹¤."})}catch{return e.json({success:!1,error:"í”„ë¡œê·¸ë¨ ë¶€ì—¬ ì‹¤íŒ¨"},500)}});d.delete("/api/admin/remove-program/:id",async e=>{try{const t=e.req.param("id");return await e.env.DB.prepare("DELETE FROM user_programs WHERE id = ?").bind(t).run(),e.json({success:!0,message:"í”„ë¡œê·¸ë¨ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."})}catch{return e.json({success:!1,error:"í”„ë¡œê·¸ë¨ ì‚­ì œ ì‹¤íŒ¨"},500)}});d.post("/api/admin/reset-password",async e=>{try{const{user_id:t}=await e.req.json(),s="academy1234";return await e.env.DB.prepare("UPDATE users SET password = ? WHERE id = ?").bind(s,t).run(),e.json({success:!0,message:`ë¹„ë°€ë²ˆí˜¸ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. (ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸: ${s})`})}catch{return e.json({success:!1,error:"ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™” ì‹¤íŒ¨"},500)}});d.post("/api/admin/toggle-user-status",async e=>{try{const{user_id:t,is_active:s}=await e.req.json(),r=s?"active":"inactive";return await e.env.DB.prepare("UPDATE users SET status = ? WHERE id = ?").bind(r,t).run(),e.json({success:!0,message:`ì‚¬ìš©ìê°€ ${s?"í™œì„±í™”":"ë¹„í™œì„±í™”"}ë˜ì—ˆìŠµë‹ˆë‹¤.`})}catch{return e.json({success:!1,error:"ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨"},500)}});d.put("/api/admin/contacts/:id/status",async e=>{try{const t=e.req.param("id"),{status:s}=await e.req.json();return await e.env.DB.prepare("UPDATE contacts SET status = ? WHERE id = ?").bind(s,t).run(),e.json({success:!0,message:"ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤."})}catch{return e.json({success:!1,error:"ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨"},500)}});d.post("/api/landing/create",async e=>{try{const{title:t,template_type:s,input_data:r,thumbnail_url:a,og_title:n,og_description:l,folder_id:o}=await e.req.json();console.log("ğŸ” APIì—ì„œ ë°›ì€ ë°ì´í„°:",{title:t,template_type:s,thumbnail_url:a?a.length>100?a.substring(0,100)+"...":a:null,og_title:n,og_description:l,folder_id:o});const i=e.req.header("X-User-Data-Base64");let c={id:1};if(i)try{const b=decodeURIComponent(escape(atob(i)));c=JSON.parse(b)}catch(b){console.warn("Failed to decode user data:",b)}const p=Math.random().toString(36).substring(2,10),m=ys(s,r),g=`${e.req.header("origin")||"https://example.com"}/landing/${p}`,x=`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(g)}`,w=await e.env.DB.prepare(`
      INSERT INTO landing_pages (user_id, slug, title, template_type, content_json, html_content, qr_code_url, thumbnail_url, og_title, og_description, folder_id, status)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'active')
    `).bind(c.id,p,t,s,JSON.stringify(r),m,x,a||null,n||null,l||null,o||null).run();return e.json({success:!0,message:"ëœë”©í˜ì´ì§€ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.",slug:p,url:`/landing/${p}`,qrCodeUrl:x,id:w.meta.last_row_id})}catch(t){return console.error("Landing page creation error:",t),e.json({success:!1,error:"ëœë”©í˜ì´ì§€ ìƒì„± ì‹¤íŒ¨: "+error.message},500)}});d.get("/api/landing/my-pages",async e=>{try{const t=e.req.query("userId"),s=e.req.query("folderId");let r="SELECT id, slug, title, template_type, view_count, status, folder_id, created_at FROM landing_pages WHERE user_id = ?",a=[t];s?(r+=" AND folder_id = ?",a.push(s)):(s===null||s==="null")&&(r+=" AND folder_id IS NULL"),r+=" ORDER BY created_at DESC";const{results:n}=await e.env.DB.prepare(r).bind(...a).all();return e.json({success:!0,pages:n})}catch(t){return console.error("ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨:",t),e.json({success:!1,error:"ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.get("/api/landing/folders",async e=>{try{const t=e.req.query("userId"),s="SELECT id, name, created_at FROM landing_folders WHERE user_id = ? ORDER BY created_at DESC",{results:r}=await e.env.DB.prepare(s).bind(t).all(),a=await Promise.all(r.map(async o=>{const c=await e.env.DB.prepare("SELECT COUNT(*) as count FROM landing_pages WHERE folder_id = ?").bind(o.id).first();return{...o,page_count:c.count||0}})),l=await e.env.DB.prepare("SELECT COUNT(*) as count FROM landing_pages WHERE user_id = ?").bind(t).first();return e.json({success:!0,folders:a,totalPages:l.count||0})}catch(t){return console.error("í´ë” ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨:",t),e.json({success:!1,error:"í´ë” ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.post("/api/landing/folders",async e=>{try{const{userId:t,name:s}=await e.req.json();if(!s||!s.trim())return e.json({success:!1,error:"í´ë” ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”."},400);const a=await e.env.DB.prepare("INSERT INTO landing_folders (user_id, name) VALUES (?, ?)").bind(t,s.trim()).run();return e.json({success:!0,folderId:a.meta.last_row_id,message:"í´ë”ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤."})}catch(t){return console.error("í´ë” ìƒì„± ì‹¤íŒ¨:",t),e.json({success:!1,error:"í´ë” ìƒì„± ì‹¤íŒ¨"},500)}});d.put("/api/landing/move-to-folder",async e=>{try{const{pageId:t,folderId:s}=await e.req.json();return await e.env.DB.prepare("UPDATE landing_pages SET folder_id = ? WHERE id = ?").bind(s,t).run(),e.json({success:!0,message:"í´ë”ë¡œ ì´ë™ë˜ì—ˆìŠµë‹ˆë‹¤."})}catch(t){return console.error("í´ë” ì´ë™ ì‹¤íŒ¨:",t),e.json({success:!1,error:"í´ë” ì´ë™ ì‹¤íŒ¨"},500)}});d.get("/api/landing/:slug",async e=>{try{const t=e.req.param("slug"),r=await e.env.DB.prepare("SELECT * FROM landing_pages WHERE slug = ? AND status = ?").bind(t,"active").first();return r?(await e.env.DB.prepare("UPDATE landing_pages SET view_count = view_count + 1 WHERE slug = ?").bind(t).run(),await e.env.DB.prepare("INSERT INTO landing_page_views (landing_page_id, user_agent, referrer) VALUES (?, ?, ?)").bind(r.id,e.req.header("user-agent")||"",e.req.header("referer")||"").run(),e.json({success:!0,page:r})):e.json({success:!1,error:"í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404)}catch{return e.json({success:!1,error:"í˜ì´ì§€ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.get("/api/landing/stats/summary",async e=>{try{const t=e.req.header("X-User-Data"),s=t?JSON.parse(t):{id:1},r=await e.env.DB.prepare("SELECT COUNT(*) as count FROM landing_pages WHERE user_id = ?").bind(s.id).first(),a=await e.env.DB.prepare("SELECT SUM(view_count) as total FROM landing_pages WHERE user_id = ?").bind(s.id).first(),n=await e.env.DB.prepare("SELECT id, title, slug, view_count FROM landing_pages WHERE user_id = ? ORDER BY view_count DESC LIMIT 5").bind(s.id).all();return e.json({success:!0,stats:{totalPages:(r==null?void 0:r.count)||0,totalViews:(a==null?void 0:a.total)||0,topPages:n.results||[]}})}catch{return e.json({success:!1,error:"í†µê³„ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.delete("/api/landing/:id",async e=>{try{const t=e.req.param("id"),s=JSON.parse(e.req.header("X-User-Data")||'{"id":1}');return await e.env.DB.prepare("DELETE FROM landing_pages WHERE id = ? AND user_id = ?").bind(t,s.id).run(),e.json({success:!0,message:"ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."})}catch{return e.json({success:!1,error:"ì‚­ì œ ì‹¤íŒ¨"},500)}});function ys(e,t){const s={"academy-intro":ws,"program-promo":Es,"event-promo":ks,"student-report":Is,"admission-info":_s,"academy-stats":Ts,"teacher-intro":Ss};return(s[e]||s["academy-intro"])(t)}function ws(e){const{academyName:t,location:s,features:r,specialties:a,contact:n}=e;return`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${t} - í•™ì› ì†Œê°œ</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <style>
      @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
      * { font-family: 'Pretendard Variable', sans-serif; }
      .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
      .pattern-bg { background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.1) 1px, transparent 0); background-size: 40px 40px; }
      @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-20px); } }
      .float-animation { animation: float 3s ease-in-out infinite; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Hero Section with Enhanced Design -->
    <div class="gradient-bg pattern-bg text-white py-24 px-6 relative overflow-hidden">
        <div class="absolute inset-0 bg-black opacity-10"></div>
        <div class="max-w-6xl mx-auto relative z-10">
            <div class="text-center mb-16">
                <div class="inline-block bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full text-sm font-bold mb-6 float-animation">
                    <i class="fas fa-graduation-cap mr-2"></i>ë¯¿ì„ ìˆ˜ ìˆëŠ” êµìœ¡ íŒŒíŠ¸ë„ˆ
                </div>
                <h1 class="text-6xl font-bold mb-6 leading-tight">${t}</h1>
                <div class="flex items-center justify-center gap-4 text-xl mb-8">
                    <i class="fas fa-map-marker-alt"></i>
                    <p class="text-2xl">${s}</p>
                </div>
                <p class="text-2xl opacity-95 max-w-3xl mx-auto leading-relaxed">${r||"í•™ìƒ í•œ ëª… í•œ ëª…ì˜ ê¿ˆì„ ì‘ì›í•˜ëŠ” êµìœ¡ íŒŒíŠ¸ë„ˆ"}</p>
            </div>
            
            <!-- Quick Stats -->
            <div class="grid md:grid-cols-4 gap-6 mt-12">
                <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 text-center">
                    <div class="text-4xl font-bold mb-2">500+</div>
                    <div class="text-sm opacity-90">í•™ìƒ ìˆ˜</div>
                </div>
                <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 text-center">
                    <div class="text-4xl font-bold mb-2">98%</div>
                    <div class="text-sm opacity-90">í•™ë¶€ëª¨ ë§Œì¡±ë„</div>
                </div>
                <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 text-center">
                    <div class="text-4xl font-bold mb-2">15ë…„</div>
                    <div class="text-sm opacity-90">êµìœ¡ ê²½ë ¥</div>
                </div>
                <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 text-center">
                    <div class="text-4xl font-bold mb-2">1:1</div>
                    <div class="text-sm opacity-90">ë§ì¶¤ ê´€ë¦¬</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="max-w-6xl mx-auto px-6 py-20">
        <!-- í•™ì› ì†Œê°œ -->
        <div class="mb-20">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">
                    <i class="fas fa-school text-purple-600 mr-3"></i>
                    ìš°ë¦¬ í•™ì›ì„ ì†Œê°œí•©ë‹ˆë‹¤
                </h2>
                <p class="text-xl text-gray-600">${t}ëŠ” í•™ìƒ ê°œê°œì¸ì˜ ì„±ì¥ì„ ìµœìš°ì„ ìœ¼ë¡œ ìƒê°í•©ë‹ˆë‹¤</p>
            </div>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-gradient-to-br from-purple-50 to-blue-50 rounded-2xl p-8 shadow-lg">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-16 h-16 bg-purple-600 rounded-full flex items-center justify-center text-white text-2xl">
                            <i class="fas fa-bullseye"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900">ìš°ë¦¬ì˜ ëª©í‘œ</h3>
                    </div>
                    <p class="text-gray-700 text-lg leading-relaxed">
                        ë‹¨ìˆœíˆ ì„±ì  í–¥ìƒì„ ë„˜ì–´, í•™ìƒë“¤ì´ ìŠ¤ìŠ¤ë¡œ í•™ìŠµí•˜ëŠ” í˜ì„ ê¸°ë¥´ê³  
                        ìì‹ ì˜ ê¿ˆì„ í–¥í•´ ë‚˜ì•„ê°ˆ ìˆ˜ ìˆë„ë¡ ë•ëŠ” ê²ƒì´ ìš°ë¦¬ì˜ ëª©í‘œì…ë‹ˆë‹¤. 
                        ì²´ê³„ì ì¸ ì»¤ë¦¬í˜ëŸ¼ê³¼ ê°œë³„ ë§ì¶¤ í•™ìŠµìœ¼ë¡œ ìµœìƒì˜ ê²°ê³¼ë¥¼ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤.
                    </p>
                </div>
                
                <div class="bg-gradient-to-br from-blue-50 to-green-50 rounded-2xl p-8 shadow-lg">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center text-white text-2xl">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900">ìš°ë¦¬ì˜ ì•½ì†</h3>
                    </div>
                    <p class="text-gray-700 text-lg leading-relaxed">
                        ëª¨ë“  í•™ìƒì„ ë‚´ ìë…€ì²˜ëŸ¼ ìƒê°í•˜ë©°, í•œ ëª… í•œ ëª…ì—ê²Œ ìµœì„ ì„ ë‹¤í•©ë‹ˆë‹¤. 
                        ì •ê¸°ì ì¸ í•™ë¶€ëª¨ ìƒë‹´ê³¼ ì‹¤ì‹œê°„ í•™ìŠµ ë¦¬í¬íŠ¸ë¥¼ í†µí•´ 
                        í•™ìƒì˜ ì„±ì¥ ê³¼ì •ì„ íˆ¬ëª…í•˜ê²Œ ê³µìœ í•©ë‹ˆë‹¤.
                    </p>
                </div>
            </div>
        </div>
        
        <!-- íŠ¹ë³„í•œ ê°•ì  -->
        <div class="bg-white rounded-3xl shadow-2xl p-12 mb-20">
            <h2 class="text-4xl font-bold text-gray-900 mb-12 text-center">
                <i class="fas fa-star text-yellow-500 mr-3"></i>
                ${t}ì˜ íŠ¹ë³„í•œ ê°•ì 
            </h2>
            <div class="grid md:grid-cols-2 gap-8">
                ${(a||[]).map((l,o)=>`
                    <div class="group hover:transform hover:scale-105 transition-all duration-300">
                        <div class="flex items-start gap-6 p-8 bg-gradient-to-br from-purple-50 to-white rounded-2xl border-2 border-purple-100 hover:border-purple-300 hover:shadow-xl">
                            <div class="w-14 h-14 bg-gradient-to-br from-purple-600 to-purple-800 rounded-2xl flex items-center justify-center text-white font-bold text-2xl flex-shrink-0 shadow-lg group-hover:scale-110 transition-transform">
                                ${o+1}
                            </div>
                            <div class="flex-1">
                                <p class="text-gray-800 text-xl leading-relaxed font-medium">${l}</p>
                            </div>
                        </div>
                    </div>
                `).join("")}
            </div>
        </div>
        
        <!-- í•™ìŠµ ì‹œìŠ¤í…œ -->
        <div class="mb-20">
            <h2 class="text-4xl font-bold text-gray-900 mb-12 text-center">
                <i class="fas fa-cogs text-purple-600 mr-3"></i>
                ì²´ê³„ì ì¸ í•™ìŠµ ì‹œìŠ¤í…œ
            </h2>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-white rounded-2xl p-8 shadow-lg border-t-4 border-purple-600">
                    <div class="text-5xl mb-6 text-center">ğŸ“</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4 text-center">1ë‹¨ê³„: ì§„ë‹¨ í‰ê°€</h3>
                    <p class="text-gray-600 text-center leading-relaxed">
                        í•™ìƒì˜ í˜„ì¬ ì‹¤ë ¥ê³¼ í•™ìŠµ ìŠ¤íƒ€ì¼ì„ ì •í™•íˆ íŒŒì•…í•˜ì—¬ 
                        ë§ì¶¤í˜• í•™ìŠµ ê³„íšì„ ìˆ˜ë¦½í•©ë‹ˆë‹¤.
                    </p>
                </div>
                <div class="bg-white rounded-2xl p-8 shadow-lg border-t-4 border-blue-600">
                    <div class="text-5xl mb-6 text-center">ğŸ“š</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4 text-center">2ë‹¨ê³„: ë§ì¶¤ ìˆ˜ì—…</h3>
                    <p class="text-gray-600 text-center leading-relaxed">
                        ê°œì¸ë³„ ë§ì¶¤ ì»¤ë¦¬í˜ëŸ¼ìœ¼ë¡œ ì•½ì ì„ ì§‘ì¤‘ ë³´ì™„í•˜ê³  
                        ê°•ì ì„ ë”ìš± ë°œì „ì‹œí‚µë‹ˆë‹¤.
                    </p>
                </div>
                <div class="bg-white rounded-2xl p-8 shadow-lg border-t-4 border-green-600">
                    <div class="text-5xl mb-6 text-center">ğŸ“Š</div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4 text-center">3ë‹¨ê³„: ì„±ê³¼ ê´€ë¦¬</h3>
                    <p class="text-gray-600 text-center leading-relaxed">
                        ì •ê¸° í…ŒìŠ¤íŠ¸ì™€ í•™ìŠµ ë¦¬í¬íŠ¸ë¡œ 
                        ì§€ì†ì ì¸ ì„±ì¥ì„ í™•ì¸í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.
                    </p>
                </div>
            </div>
        </div>
        
        <!-- í•™ë¶€ëª¨ í›„ê¸° -->
        <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-3xl p-12 mb-20">
            <h2 class="text-4xl font-bold text-gray-900 mb-12 text-center">
                <i class="fas fa-comments text-purple-600 mr-3"></i>
                í•™ë¶€ëª¨ë‹˜ë“¤ì˜ ìƒìƒí•œ í›„ê¸°
            </h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white rounded-2xl p-8 shadow-lg">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 text-2xl font-bold">
                            ê¹€
                        </div>
                        <div>
                            <div class="font-bold text-lg">ê¹€ì§€í˜„ í•™ë¶€ëª¨ë‹˜</div>
                            <div class="text-gray-500 text-sm">ì¤‘3 í•™ìƒ ì–´ë¨¸ë‹ˆ</div>
                        </div>
                    </div>
                    <div class="text-yellow-400 text-xl mb-4">â˜…â˜…â˜…â˜…â˜…</div>
                    <p class="text-gray-700 leading-relaxed">
                        "ì•„ì´ê°€ ê³µë¶€ì— í¥ë¯¸ë¥¼ ìƒì–´ ê³ ë¯¼ì´ì—ˆëŠ”ë°, ${t}ì—ì„œ 
                        1:1 ë§ì¶¤ ê´€ë¦¬ë¥¼ ë°›ìœ¼ë©´ì„œ ì„±ì ë„ ì˜¤ë¥´ê³  ìì‹ ê°ë„ ìƒê²¼ì–´ìš”. 
                        ì„ ìƒë‹˜ë“¤ì˜ ì„¸ì‹¬í•œ ê´€ë¦¬ì— ì •ë§ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤!"
                    </p>
                </div>
                <div class="bg-white rounded-2xl p-8 shadow-lg">
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 text-2xl font-bold">
                            ë°•
                        </div>
                        <div>
                            <div class="font-bold text-lg">ë°•ì¤€ì˜ í•™ë¶€ëª¨ë‹˜</div>
                            <div class="text-gray-500 text-sm">ê³ 2 í•™ìƒ ì•„ë²„ì§€</div>
                        </div>
                    </div>
                    <div class="text-yellow-400 text-xl mb-4">â˜…â˜…â˜…â˜…â˜…</div>
                    <p class="text-gray-700 leading-relaxed">
                        "ì…ì‹œ ì»¨ì„¤íŒ…ê¹Œì§€ í•¨ê»˜í•´ì£¼ì…”ì„œ ì •ë§ ë§Œì¡±ìŠ¤ëŸ½ìŠµë‹ˆë‹¤. 
                        ì²´ê³„ì ì¸ í•™ìŠµ ê´€ë¦¬ì™€ ì •ê¸°ì ì¸ í”¼ë“œë°±ìœ¼ë¡œ 
                        ì•„ì´ì˜ ì„±ì¥ì„ ëˆˆìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”."
                    </p>
                </div>
            </div>
        </div>
        
        <!-- CTA Section -->
        <div class="bg-gradient-to-br from-purple-600 to-purple-900 rounded-3xl shadow-2xl p-12 text-white text-center">
            <h2 class="text-4xl font-bold mb-6">
                <i class="fas fa-phone-alt mr-3"></i>
                ì§€ê¸ˆ ë°”ë¡œ ìƒë‹´ ë°›ìœ¼ì„¸ìš”!
            </h2>
            <p class="text-2xl mb-8 opacity-95">
                ë¬´ë£Œ í•™ìŠµ ì§„ë‹¨ ë° ë§ì¶¤ ìƒë‹´ì„ ì œê³µí•©ë‹ˆë‹¤
            </p>
            <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-8 mb-8 max-w-2xl mx-auto">
                <div class="text-3xl font-bold mb-4">
                    <i class="fas fa-phone text-yellow-300 mr-3"></i>
                    ${n||"ìƒë‹´ ë¬¸ì˜"}
                </div>
                <p class="text-lg opacity-90">í‰ì¼ ì˜¤ì „ 9ì‹œ ~ ì˜¤í›„ 10ì‹œ | ì£¼ë§ ì˜¤ì „ 10ì‹œ ~ ì˜¤í›„ 6ì‹œ</p>
            </div>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="tel:${n}" class="inline-flex items-center justify-center bg-white text-purple-600 px-10 py-5 rounded-full text-xl font-bold hover:bg-gray-100 transition-all transform hover:scale-105 shadow-lg">
                    <i class="fas fa-phone mr-3"></i>
                    ì „í™” ìƒë‹´í•˜ê¸°
                </a>
                <a href="javascript:alert('ì¹´ì¹´ì˜¤í†¡ ìƒë‹´ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤')" class="inline-flex items-center justify-center bg-yellow-300 text-gray-900 px-10 py-5 rounded-full text-xl font-bold hover:bg-yellow-200 transition-all transform hover:scale-105 shadow-lg">
                    <i class="fab fa-comment mr-3"></i>
                    ì¹´ì¹´ì˜¤í†¡ ë¬¸ì˜
                </a>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-300 py-12 px-6">
        <div class="max-w-6xl mx-auto text-center">
            <h3 class="text-2xl font-bold text-white mb-4">${t}</h3>
            <p class="mb-4">
                <i class="fas fa-map-marker-alt mr-2"></i>${s}
            </p>
            <p class="mb-4">
                <i class="fas fa-phone mr-2"></i>${n||"ìƒë‹´ ë¬¸ì˜"}
            </p>
            <p class="text-sm opacity-75 mt-8">Â© 2026 ${t}. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>
  `}function Es(e){const{programName:t,target:s,features:r,price:a,duration:n,cta:l}=e;return`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${t} - í”„ë¡œê·¸ë¨ ì•ˆë‚´</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <style>
      @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
      * { font-family: 'Pretendard Variable', sans-serif; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen py-12 px-6">
    <div class="max-w-3xl mx-auto">
        <div class="bg-white rounded-3xl shadow-2xl overflow-hidden">
            <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-12 text-center">
                <div class="inline-block bg-white/20 px-6 py-2 rounded-full text-sm font-medium mb-6">
                    ${s||"ëˆ„êµ¬ë‚˜ ì°¸ì—¬ ê°€ëŠ¥"}
                </div>
                <h1 class="text-4xl md:text-5xl font-bold mb-4">${t}</h1>
                <p class="text-xl opacity-90">${n||"ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•˜ì„¸ìš”"}</p>
            </div>
            
            <div class="p-10">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ¯ ì´ëŸ° ë¶„ë“¤ì—ê²Œ ì¶”ì²œí•©ë‹ˆë‹¤</h2>
                <div class="space-y-4 mb-10">
                    ${(r||[]).map(o=>`
                        <div class="flex items-center gap-3 p-4 bg-blue-50 rounded-xl">
                            <span class="text-2xl">âœ…</span>
                            <span class="text-lg text-gray-800">${o}</span>
                        </div>
                    `).join("")}
                </div>
                
                <div class="bg-gradient-to-br from-yellow-50 to-orange-50 rounded-2xl p-8 mb-10 border-2 border-yellow-200">
                    <div class="text-center">
                        <p class="text-gray-600 text-lg mb-2">íŠ¹ë³„ ê°€ê²©</p>
                        <p class="text-5xl font-bold text-gray-900 mb-2">${a}ì›</p>
                        <p class="text-gray-500">${n}</p>
                    </div>
                </div>
                
                <a href="${l||"#"}" class="block w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white text-center py-5 rounded-xl text-xl font-bold hover:shadow-2xl transition transform hover:scale-105">
                    ğŸš€ ì§€ê¸ˆ ë°”ë¡œ ì‹ ì²­í•˜ê¸°
                </a>
            </div>
        </div>
    </div>
</body>
</html>
  `}function ks(e){const{eventName:t,period:s,benefits:r,urgency:a,cta:n}=e;return`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${t} - íŠ¹ë³„ ì´ë²¤íŠ¸</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <style>
      @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
      * { font-family: 'Pretendard Variable', sans-serif; }
      @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
      .pulse-animation { animation: pulse 2s infinite; }
    </style>
</head>
<body class="bg-black text-white min-h-screen">
    <div class="min-h-screen flex items-center justify-center px-6 py-12">
        <div class="max-w-2xl w-full">
            <div class="bg-gradient-to-br from-red-600 via-pink-600 to-purple-600 rounded-3xl p-1">
                <div class="bg-black rounded-3xl p-10">
                    <div class="text-center mb-10">
                        <div class="inline-block bg-red-600 px-6 py-2 rounded-full text-sm font-bold mb-6 pulse-animation">
                            âš¡ ${a||"í•œì • íŠ¹ê°€"}
                        </div>
                        <h1 class="text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-yellow-300 to-red-300 bg-clip-text text-transparent">
                            ${t}
                        </h1>
                        <p class="text-2xl text-gray-300 mb-4">ğŸ“… ${s}</p>
                    </div>
                    
                    <div class="bg-gradient-to-br from-yellow-500/10 to-red-500/10 rounded-2xl p-8 mb-10 border border-yellow-500/30">
                        <h2 class="text-2xl font-bold mb-6 text-yellow-300">ğŸ íŠ¹ë³„ í˜œíƒ</h2>
                        <div class="space-y-4">
                            ${(r||[]).map(l=>`
                                <div class="flex items-center gap-3">
                                    <span class="text-3xl">â­</span>
                                    <span class="text-lg">${l}</span>
                                </div>
                            `).join("")}
                        </div>
                    </div>
                    
                    <a href="${n||"#"}" class="block w-full bg-gradient-to-r from-yellow-400 to-red-500 text-black text-center py-6 rounded-xl text-2xl font-bold hover:shadow-2xl transition transform hover:scale-105">
                        ğŸ”¥ ì§€ê¸ˆ ë°”ë¡œ ì‹ ì²­í•˜ê¸°
                    </a>
                    
                    <p class="text-center text-gray-400 text-sm mt-6">â° ì„œë‘ë¥´ì„¸ìš”! ì¡°ê¸° ë§ˆê°ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
  `}function Is(e){const{studentName:t,month:s,achievements:r,improvements:a,nextGoals:n,teacherName:l,textbooks:o,attendanceRate:i,attendanceDays:c,totalDays:p}=e;return`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>${t} í•™ìƒ ${s} í•™ìŠµ ë¦¬í¬íŠ¸</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    <style>
      @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
      * { font-family: 'Pretendard Variable', sans-serif; }
      @keyframes slideInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
      .animate-slide { animation: slideInUp 0.6s ease-out; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 min-h-screen py-4 sm:py-8 px-3 sm:px-6">
    <div class="max-w-4xl mx-auto">
        <!-- Header Card -->
        <div class="bg-white rounded-2xl sm:rounded-3xl shadow-xl sm:shadow-2xl overflow-hidden mb-4 sm:mb-8 animate-slide">
            <div class="bg-gradient-to-r from-green-400 via-blue-500 to-purple-600 text-white p-6 sm:p-10 text-center relative">
                <div class="absolute top-2 right-2 sm:top-4 sm:right-4 bg-white/20 backdrop-blur-sm px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm font-bold">
                    <i class="fas fa-calendar-alt mr-1 sm:mr-2"></i>${s}
                </div>
                <div class="mb-4 sm:mb-6">
                    <div class="inline-block bg-white/20 backdrop-blur-sm px-4 py-1.5 sm:px-6 sm:py-2 rounded-full text-xs sm:text-sm font-bold mb-2 sm:mb-4">
                        ğŸ“Š Monthly Learning Report
                    </div>
                </div>
                <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold mb-3 sm:mb-4">${s} í•™ìŠµ ë¦¬í¬íŠ¸</h1>
                <div class="flex items-center justify-center gap-2 sm:gap-3 text-2xl sm:text-3xl font-bold">
                    <i class="fas fa-user-graduate"></i>
                    <span>${t} í•™ìƒ</span>
                </div>
                <p class="text-sm sm:text-lg mt-3 sm:mt-4 opacity-90">ì—´ì‹¬íˆ ë…¸ë ¥í•œ í•œ ë‹¬ì˜ ê¸°ë¡ì…ë‹ˆë‹¤</p>
            </div>
            
            <!-- Quick Stats -->
            <div class="grid grid-cols-3 divide-x divide-gray-200 bg-gray-50">
                <div class="p-3 sm:p-6 text-center">
                    <div class="text-2xl sm:text-3xl font-bold text-green-600 mb-0.5 sm:mb-1">${(r||[]).length}</div>
                    <div class="text-xs sm:text-sm text-gray-600">ì´ë‹¬ì˜ ì„±ê³¼</div>
                </div>
                <div class="p-3 sm:p-6 text-center">
                    <div class="text-2xl sm:text-3xl font-bold text-blue-600 mb-0.5 sm:mb-1">${i||95}%</div>
                    <div class="text-xs sm:text-sm text-gray-600">ì¶œì„ë¥ </div>
                </div>
                <div class="p-3 sm:p-6 text-center">
                    <div class="text-2xl sm:text-3xl font-bold text-purple-600 mb-0.5 sm:mb-1">${(n||[]).length}</div>
                    <div class="text-xs sm:text-sm text-gray-600">ë‹¤ìŒ ëª©í‘œ</div>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="bg-white rounded-2xl sm:rounded-3xl shadow-lg sm:shadow-xl p-4 sm:p-6 md:p-10 mb-4 sm:mb-8 space-y-6 sm:space-y-10">
            
            <!-- êµì¬ ì •ë³´ -->
            ${o&&o.length>0?`
            <div class="p-4 sm:p-6 bg-gradient-to-br from-amber-50 to-orange-50 rounded-xl sm:rounded-2xl border-2 border-amber-100">
                <h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-3 sm:mb-4 flex items-center gap-2 sm:gap-3">
                    <i class="fas fa-book text-amber-600 text-2xl sm:text-3xl"></i>
                    ì‚¬ìš© êµì¬
                </h2>
                <div class="space-y-2 sm:space-y-3">
                    ${(o||[]).map(m=>`
                        <div class="flex items-center gap-2 sm:gap-3 p-3 sm:p-4 bg-white rounded-lg sm:rounded-xl shadow-sm">
                            <i class="fas fa-check-circle text-amber-600 text-lg sm:text-xl flex-shrink-0"></i>
                            <span class="text-sm sm:text-base text-gray-800 font-medium">${m}</span>
                        </div>
                    `).join("")}
                </div>
            </div>
            `:""}
            
            <!-- ì¶œì„ í˜„í™© -->
            <div class="p-4 sm:p-6 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl sm:rounded-2xl border-2 border-blue-100">
                <h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-3 sm:mb-4 flex items-center gap-2 sm:gap-3">
                    <i class="fas fa-calendar-check text-blue-600 text-2xl sm:text-3xl"></i>
                    ì¶œì„ í˜„í™©
                </h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
                    <div class="bg-white rounded-lg sm:rounded-xl p-4 sm:p-5 shadow-sm">
                        <div class="flex items-center justify-between mb-3">
                            <span class="text-sm sm:text-base text-gray-700 font-medium">ì¶œì„ë¥ </span>
                            <span class="text-2xl sm:text-3xl font-bold text-blue-600">${i||95}%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 sm:h-3">
                            <div class="bg-gradient-to-r from-blue-500 to-blue-600 h-2.5 sm:h-3 rounded-full" style="width: ${i||95}%"></div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg sm:rounded-xl p-4 sm:p-5 shadow-sm">
                        <div class="text-center">
                            <div class="text-sm sm:text-base text-gray-600 mb-2">ì¶œì„ ì¼ìˆ˜</div>
                            <div class="text-2xl sm:text-3xl font-bold text-blue-600">${c||19}ì¼ / ${p||20}ì¼</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ì´ë‹¬ì˜ ì„±ê³¼ -->
            <div>
                <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-4 sm:mb-6 flex flex-wrap items-center gap-2 sm:gap-3">
                    <div class="w-10 h-10 sm:w-12 sm:h-12 bg-green-600 rounded-full flex items-center justify-center text-white flex-shrink-0">
                        <i class="fas fa-trophy text-base sm:text-lg"></i>
                    </div>
                    <span class="text-xl sm:text-2xl md:text-3xl">ì´ë‹¬ì˜ ì„±ê³¼</span>
                    <span class="hidden sm:inline text-base sm:text-lg text-gray-500 font-normal">Outstanding Achievements</span>
                </h2>
                <div class="space-y-3 sm:space-y-4">
                    ${(r||[]).map((m,g)=>`
                        <div class="bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-500 p-4 sm:p-6 rounded-r-xl sm:rounded-r-2xl shadow-sm hover:shadow-md transition-shadow">
                            <div class="flex items-start gap-3 sm:gap-4">
                                <div class="flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 bg-green-600 rounded-full flex items-center justify-center text-white font-bold text-sm sm:text-base">
                                    ${g+1}
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-gray-800 text-base sm:text-lg md:text-xl leading-relaxed font-medium break-words">${m}</p>
                                    <div class="mt-2 sm:mt-3">
                                        <span class="inline-block text-xs bg-green-100 text-green-700 px-2 sm:px-3 py-1 rounded-full font-medium">
                                            <i class="fas fa-check-circle mr-1"></i>ë‹¬ì„± ì™„ë£Œ
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `).join("")}
                </div>
            </div>
            
            <!-- ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„ -->
            ${a&&a.length>0?`
            <div>
                <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-4 sm:mb-6 flex flex-wrap items-center gap-2 sm:gap-3">
                    <div class="w-10 h-10 sm:w-12 sm:h-12 bg-blue-600 rounded-full flex items-center justify-center text-white flex-shrink-0">
                        <i class="fas fa-chart-line text-base sm:text-lg"></i>
                    </div>
                    <span class="text-xl sm:text-2xl md:text-3xl">ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„</span>
                    <span class="hidden sm:inline text-base sm:text-lg text-gray-500 font-normal">Areas for Improvement</span>
                </h2>
                <div class="space-y-3 sm:space-y-4">
                    ${(a||[]).map((m,g)=>`
                        <div class="bg-gradient-to-r from-blue-50 to-cyan-50 border-l-4 border-blue-500 p-4 sm:p-6 rounded-r-xl sm:rounded-r-2xl shadow-sm hover:shadow-md transition-shadow">
                            <div class="flex items-start gap-3 sm:gap-4">
                                <div class="flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold text-sm sm:text-base">
                                    ${g+1}
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-gray-800 text-base sm:text-lg md:text-xl leading-relaxed font-medium break-words">${m}</p>
                                    <div class="mt-2 sm:mt-3">
                                        <span class="inline-block text-xs bg-blue-100 text-blue-700 px-2 sm:px-3 py-1 rounded-full font-medium">
                                            <i class="fas fa-lightbulb mr-1"></i>ê°œì„  ë°©í–¥
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `).join("")}
                </div>
            </div>
            `:""}
            
            <!-- ë‹¤ìŒ ë‹¬ ëª©í‘œ -->
            <div>
                <h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-4 sm:mb-6 flex flex-wrap items-center gap-2 sm:gap-3">
                    <div class="w-10 h-10 sm:w-12 sm:h-12 bg-purple-600 rounded-full flex items-center justify-center text-white flex-shrink-0">
                        <i class="fas fa-bullseye text-base sm:text-lg"></i>
                    </div>
                    <span class="text-xl sm:text-2xl md:text-3xl">ë‹¤ìŒ ë‹¬ í•™ìŠµ ëª©í‘œ</span>
                    <span class="hidden sm:inline text-base sm:text-lg text-gray-500 font-normal">Next Month Goals</span>
                </h2>
                <div class="space-y-3 sm:space-y-4">
                    ${(n||[]).map((m,g)=>`
                        <div class="bg-gradient-to-r from-purple-50 to-pink-50 border-l-4 border-purple-500 p-4 sm:p-6 rounded-r-xl sm:rounded-r-2xl shadow-sm hover:shadow-md transition-shadow">
                            <div class="flex items-start gap-3 sm:gap-4">
                                <div class="flex-shrink-0 w-8 h-8 sm:w-10 sm:h-10 bg-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm sm:text-base">
                                    ${g+1}
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-gray-800 text-base sm:text-lg md:text-xl leading-relaxed font-medium break-words">${m}</p>
                                    <div class="mt-2 sm:mt-3">
                                        <span class="inline-block text-xs bg-purple-100 text-purple-700 px-2 sm:px-3 py-1 rounded-full font-medium">
                                            <i class="fas fa-star mr-1"></i>ëª©í‘œ ì„¤ì •
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `).join("")}
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="bg-white rounded-2xl sm:rounded-3xl shadow-lg p-4 sm:p-6 md:p-8 text-center">
            <p class="text-base sm:text-lg text-gray-700 mb-2 sm:mb-3">ë‹´ë‹¹ ì„ ìƒë‹˜: <span class="font-bold text-purple-600">${l||"ë‹´ë‹¹ êµì‚¬"}</span></p>
            <p class="text-xs sm:text-sm text-gray-500">ì´ ë¦¬í¬íŠ¸ëŠ” í•™ìƒì˜ í•™ìŠµ ì„±ì¥ì„ ìœ„í•œ ê¸°ë¡ì…ë‹ˆë‹¤</p>
        </div>
    </div>
</body>
</html>
  `}function _s(e){const{eventTitle:t,eventDate:s,eventTime:r,location:a,agenda:n,benefits:l,targetGrade:o,contact:i}=e;return`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${t} - ì…í•™ ì„¤ëª…íšŒ</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <style>
      @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
      * { font-family: 'Pretendard Variable', sans-serif; }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 min-h-screen py-12 px-6">
    <div class="max-w-4xl mx-auto">
        <div class="bg-white rounded-3xl shadow-2xl overflow-hidden">
            <div class="bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white p-12 text-center">
                <div class="inline-block bg-white/20 px-6 py-2 rounded-full text-sm font-bold mb-6">
                    ğŸ“ ${o||"ì „ì²´ í•™ë…„"} ëŒ€ìƒ
                </div>
                <h1 class="text-4xl md:text-5xl font-bold mb-4">${t}</h1>
                <div class="flex flex-col md:flex-row justify-center items-center gap-4 text-xl mt-8">
                    <div class="flex items-center gap-2">
                        <span>ğŸ“…</span>
                        <span>${s}</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span>ğŸ•</span>
                        <span>${r}</span>
                    </div>
                </div>
                <p class="text-lg mt-4 opacity-90">ğŸ“ ${a}</p>
            </div>
            
            <div class="p-10">
                <div class="mb-10">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6 text-center">ğŸ“‹ ì„¤ëª…íšŒ ì•ˆë‚´</h2>
                    <div class="space-y-4">
                        ${(n||[]).map((c,p)=>`
                            <div class="flex items-start gap-4 p-5 bg-indigo-50 rounded-xl">
                                <div class="w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0">
                                    ${p+1}
                                </div>
                                <div class="flex-1">
                                    <p class="text-gray-800 text-lg leading-relaxed">${c}</p>
                                </div>
                            </div>
                        `).join("")}
                    </div>
                </div>
                
                <div class="mb-10">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6 text-center">ğŸ ì°¸ì„ í˜œíƒ</h2>
                    <div class="grid md:grid-cols-2 gap-4">
                        ${(l||[]).map(c=>`
                            <div class="flex items-center gap-3 p-5 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl border-2 border-purple-200">
                                <span class="text-3xl">â­</span>
                                <span class="text-gray-800 font-medium">${c}</span>
                            </div>
                        `).join("")}
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 text-white text-center">
                    <h3 class="text-2xl font-bold mb-4">ì°¸ì„ ì‹ ì²­</h3>
                    <p class="text-lg mb-6">ì „í™” ë˜ëŠ” ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ì‹ ì²­í•˜ì„¸ìš”</p>
                    <a href="tel:${i}" class="inline-block bg-white text-purple-600 px-10 py-4 rounded-full text-xl font-bold hover:bg-gray-100 transition">
                        ğŸ“ ${i}
                    </a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
  `}function Ts(e){const{academyName:t,period:s,totalStudents:r,achievements:a,testimonials:n,gradeImprovement:l}=e;return`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${t} - ì„±ê³¼ í†µê³„</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"><\/script>
    <style>
      @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
      * { font-family: 'Pretendard Variable', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 py-12 px-6">
    <div class="max-w-5xl mx-auto">
        <div class="text-center mb-12">
            <h1 class="text-5xl font-bold text-gray-900 mb-4">${t}</h1>
            <p class="text-2xl text-gray-600">${s} ì„±ê³¼ ë³´ê³ ì„œ</p>
        </div>
        
        <div class="grid md:grid-cols-3 gap-6 mb-12">
            <div class="bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl p-8 text-white text-center">
                <div class="text-5xl font-bold mb-2">${r||0}</div>
                <div class="text-xl opacity-90">ì´ ì¬í•™ìƒ</div>
            </div>
            <div class="bg-gradient-to-br from-green-500 to-green-700 rounded-2xl p-8 text-white text-center">
                <div class="text-5xl font-bold mb-2">${l||"2"}ë“±ê¸‰</div>
                <div class="text-xl opacity-90">í‰ê·  ì„±ì  í–¥ìƒ</div>
            </div>
            <div class="bg-gradient-to-br from-purple-500 to-purple-700 rounded-2xl p-8 text-white text-center">
                <div class="text-5xl font-bold mb-2">95%</div>
                <div class="text-xl opacity-90">ì¬ë“±ë¡ë¥ </div>
            </div>
        </div>
        
        <div class="bg-white rounded-2xl shadow-xl p-10 mb-12">
            <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">ğŸ† ì£¼ìš” ì„±ê³¼</h2>
            <div class="space-y-4">
                ${(a||[]).map(o=>`
                    <div class="flex items-start gap-4 p-5 bg-yellow-50 border-l-4 border-yellow-500 rounded-r-xl">
                        <span class="text-3xl">ğŸ¯</span>
                        <p class="text-gray-800 text-lg leading-relaxed flex-1">${o}</p>
                    </div>
                `).join("")}
            </div>
        </div>
        
        <div class="bg-white rounded-2xl shadow-xl p-10">
            <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">ğŸ’¬ í•™ë¶€ëª¨ í›„ê¸°</h2>
            <div class="space-y-6">
                ${(n||[]).map(o=>`
                    <div class="bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200">
                        <div class="flex items-center gap-2 mb-3">
                            <div class="flex text-yellow-400">
                                ${"â­".repeat(5)}
                            </div>
                        </div>
                        <p class="text-gray-700 leading-relaxed">"${o}"</p>
                    </div>
                `).join("")}
            </div>
        </div>
    </div>
</body>
</html>
  `}function Ss(e){const{teacherName:t,subject:s,experience:r,education:a,specialty:n,achievements:l,teachingStyle:o,contact:i}=e;return`
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${t} ì„ ìƒë‹˜ - ì†Œê°œ</title>
    <script src="https://cdn.tailwindcss.com"><\/script>
    <style>
      @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
      * { font-family: 'Pretendard Variable', sans-serif; }
    </style>
</head>
<body class="bg-gradient-to-br from-teal-50 to-cyan-50 min-h-screen py-12 px-6">
    <div class="max-w-4xl mx-auto">
        <div class="bg-white rounded-3xl shadow-2xl overflow-hidden">
            <div class="bg-gradient-to-r from-teal-600 to-cyan-600 text-white p-12 text-center">
                <div class="w-32 h-32 bg-white/20 rounded-full mx-auto mb-6 flex items-center justify-center">
                    <span class="text-6xl">ğŸ‘¨â€ğŸ«</span>
                </div>
                <h1 class="text-4xl font-bold mb-3">${t} ì„ ìƒë‹˜</h1>
                <p class="text-2xl opacity-90">${s} ì „ë¬¸</p>
                <div class="mt-6 inline-block bg-white/20 px-6 py-2 rounded-full">
                    <span class="text-lg font-medium">ê²½ë ¥ ${r}ë…„</span>
                </div>
            </div>
            
            <div class="p-10">
                <div class="mb-10">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">ğŸ“ í•™ë ¥</h2>
                    <div class="bg-teal-50 rounded-xl p-6">
                        <p class="text-gray-800 text-lg leading-relaxed">${a}</p>
                    </div>
                </div>
                
                <div class="mb-10">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">ğŸ’¡ ì „ë¬¸ ë¶„ì•¼</h2>
                    <div class="bg-cyan-50 rounded-xl p-6">
                        <p class="text-gray-800 text-lg leading-relaxed">${n}</p>
                    </div>
                </div>
                
                <div class="mb-10">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ† ì£¼ìš” ì‹¤ì </h2>
                    <div class="space-y-3">
                        ${(l||[]).map(c=>`
                            <div class="flex items-center gap-3 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl">
                                <span class="text-2xl">ğŸ¯</span>
                                <span class="text-gray-800">${c}</span>
                            </div>
                        `).join("")}
                    </div>
                </div>
                
                <div class="mb-10">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">ğŸ“š ìˆ˜ì—… ë°©ì‹</h2>
                    <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200">
                        <p class="text-gray-700 text-lg leading-relaxed">${o}</p>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-teal-600 to-cyan-600 rounded-2xl p-8 text-white text-center">
                    <h3 class="text-2xl font-bold mb-4">ìˆ˜ì—… ë¬¸ì˜</h3>
                    <a href="tel:${i}" class="inline-block bg-white text-teal-600 px-10 py-4 rounded-full text-xl font-bold hover:bg-gray-100 transition">
                        ğŸ“ ${i||"ë¬¸ì˜í•˜ê¸°"}
                    </a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
  `}d.post("/api/generate-parent-message",async e=>{var t,s;try{const{studentName:r,grade:a,subject:n,shortMessage:l}=await e.req.json();if(!r||!a||!n||!l)return e.json({success:!1,error:"í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const o=Fe(r,a,n,l);return e.json({success:!0,message:o,metadata:{studentName:r,grade:a,subject:n,originalMessage:l,mode:"template"}})}catch(r){return console.error("Generate message error:",r),e.json({success:!1,error:"ë©”ì‹œì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/generate-parent-message-from-records",async e=>{try{const{studentId:t,studentName:s,grade:r,subjects:a,parentName:n,records:l,additionalMessage:o}=await e.req.json();if(!t||!s)return e.json({success:!1,error:"í•™ìƒ ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const i=js(l),c=Cs(s,r,a,n,i,o),p=e.env.OPENAI_API_KEY,m=e.env.OPENAI_BASE_URL||"https://api.openai.com/v1";if(p)try{const x=await fetch(`${m}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:`ë‹¹ì‹ ì€ í•™ì› ì›ì¥ë‹˜ì…ë‹ˆë‹¤. í•™ë¶€ëª¨ë‹˜ê»˜ í•™ìƒì˜ í•™ìŠµ í˜„í™©ì„ ë”°ëœ»í•˜ê³  ê²©ë ¤í•˜ëŠ” ë§íˆ¬ë¡œ ì „ë‹¬í•˜ëŠ” ë©”ì‹œì§€ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

ê·œì¹™:
1. ì¡´ëŒ“ë§ ì‚¬ìš© (í•™ë¶€ëª¨ë‹˜ê»˜)
2. ë”°ëœ»í•˜ê³  ê¸ì •ì ì¸ í†¤
3. êµ¬ì²´ì ì¸ ë°ì´í„° ê¸°ë°˜ ì¹­ì°¬ (ì¶œì„ë¥ , ê³¼ì œ ì™„ì„±ë¥ , ì´í•´ë„ ë“±)
4. ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„ë„ ê²©ë ¤ì™€ í•¨ê»˜ ì „ë‹¬
5. ì•ìœ¼ë¡œì˜ í•™ìŠµ ë°©í–¥ ì œì‹œ
6. 250-350ì ì •ë„ì˜ ì ì ˆí•œ ê¸¸ì´
7. ì´ëª¨ì§€ 2-3ê°œ ìì—°ìŠ¤ëŸ½ê²Œ ì‚¬ìš©
8. í•™ë¶€ëª¨ë‹˜ì´ ì•ˆì‹¬í•˜ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ë‚´ìš©
9. ìµœê·¼ 7ì¼ê°„ì˜ êµ¬ì²´ì ì¸ í•™ìŠµ ê¸°ë¡ì„ ë°”íƒ•ìœ¼ë¡œ ì‘ì„±`},{role:"user",content:c}],temperature:.8,max_tokens:600})}),v=await x.json();if(x.ok&&v.choices&&v.choices[0])return e.json({success:!0,message:v.choices[0].message.content,metadata:{studentName:s,grade:r,subjects:a,mode:"ai",recordsCount:l.length}})}catch(x){console.error("OpenAI API error:",x)}const g=Ds(s,r,a,n,i,o);return e.json({success:!0,message:g,metadata:{studentName:s,grade:r,subjects:a,mode:"template",recordsCount:l.length}})}catch(t){return console.error("Generate message from records error:",t),e.json({success:!1,error:"ë©”ì‹œì§€ ìƒì„± ì‹¤íŒ¨: "+t.message},500)}});function js(e){if(!e||e.length===0)return{totalDays:0,attendanceRate:0,homeworkRate:0,avgUnderstanding:0,avgParticipation:0,achievements:[],memos:[],latestRecords:[]};const t=e.length,s=e.filter(p=>p.attendance==="ì¶œì„").length,r=e.filter(p=>p.homework_status==="ì™„ë£Œ").length,a=e.filter(p=>p.understanding_level).map(p=>p.understanding_level),n=e.filter(p=>p.participation_level).map(p=>p.participation_level),l=a.length>0?(a.reduce((p,m)=>p+m,0)/a.length).toFixed(1):"0",o=n.length>0?(n.reduce((p,m)=>p+m,0)/n.length).toFixed(1):"0",i=e.filter(p=>p.achievement).map(p=>p.achievement),c=e.filter(p=>p.memo).map(p=>p.memo);return{totalDays:t,attendanceRate:(s/t*100).toFixed(0),homeworkRate:t>0?(r/t*100).toFixed(0):"0",avgUnderstanding:l,avgParticipation:o,achievements:i,memos:c,latestRecords:e.slice(0,3)}}function Cs(e,t,s,r,a,n){const l=a.achievements.length>0?`ì£¼ìš” ì„±ê³¼:
${a.achievements.slice(0,3).map(c=>`- ${c}`).join(`
`)}`:"",o=a.memos.length>0?`ì„ ìƒë‹˜ ë©”ëª¨:
${a.memos.slice(0,3).map(c=>`- ${c}`).join(`
`)}`:"",i=n?`ì¶”ê°€ ì „ë‹¬ ì‚¬í•­: ${n}`:"";return`í•™ìƒ ì´ë¦„: ${e}
í•™ë…„: ${t}
ê³¼ëª©: ${s}
í•™ë¶€ëª¨: ${r||"í•™ë¶€ëª¨"} ë‹˜

ìµœê·¼ 7ì¼ê°„ í•™ìŠµ ê¸°ë¡ ë¶„ì„:
- ì´ ìˆ˜ì—… ì¼ìˆ˜: ${a.totalDays}ì¼
- ì¶œì„ë¥ : ${a.attendanceRate}%
- ê³¼ì œ ì™„ì„±ë¥ : ${a.homeworkRate}%
- í‰ê·  ì´í•´ë„: ${a.avgUnderstanding}/5ì 
- í‰ê·  ì°¸ì—¬ë„: ${a.avgParticipation}/5ì 

${l}

${o}

${i}

ìœ„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ${r||"í•™ë¶€ëª¨"} ë‹˜ê»˜ ë³´ë‚¼ ë”°ëœ»í•˜ê³  êµ¬ì²´ì ì¸ ë©”ì‹œì§€ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”. 
í•™ìƒì˜ ê°•ì ì„ êµ¬ì²´ì ì¸ ìˆ˜ì¹˜ì™€ í•¨ê»˜ ì¹­ì°¬í•˜ê³ , ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„ì€ ê²©ë ¤ì™€ í•¨ê»˜ ì œì‹œí•´ì£¼ì„¸ìš”.`}function Ds(e,t,s,r,a,n){let o=`ì•ˆë…•í•˜ì„¸ìš”, ${r?`${r} í•™ë¶€ëª¨ë‹˜`:"í•™ë¶€ëª¨ë‹˜"}! ğŸ˜Š

`;return o+=`${e} í•™ìƒì˜ ìµœê·¼ ì¼ì£¼ì¼ í•™ìŠµ í˜„í™©ì„ ì „ë‹¬ë“œë¦½ë‹ˆë‹¤.

`,parseInt(a.attendanceRate)>=80&&(o+=`âœ… ì¶œì„ë¥  ${a.attendanceRate}%ë¡œ ì„±ì‹¤í•˜ê²Œ ìˆ˜ì—…ì— ì°¸ì—¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. `),parseInt(a.homeworkRate)>=70&&(o+=`ê³¼ì œ ì™„ì„±ë¥ ë„ ${a.homeworkRate}%ë¡œ ê¾¸ì¤€íˆ ê³¼ì œë¥¼ ì™„ìˆ˜í•˜ê³  ìˆì–´ìš”. `),parseFloat(a.avgUnderstanding)>=4?o+=`

íŠ¹íˆ ì´í•´ë„ê°€ ${a.avgUnderstanding}/5ì ìœ¼ë¡œ ìˆ˜ì—… ë‚´ìš©ì„ ì˜ ì†Œí™”í•˜ê³  ìˆìŠµë‹ˆë‹¤! ğŸ‘ `:parseFloat(a.avgUnderstanding)>=3&&(o+=`

ì´í•´ë„ëŠ” ${a.avgUnderstanding}/5ì ìœ¼ë¡œ ê¾¸ì¤€íˆ ë°œì „í•˜ê³  ìˆìŠµë‹ˆë‹¤. `),parseFloat(a.avgParticipation)>=4&&(o+=`ìˆ˜ì—… ì°¸ì—¬ë„ë„ ${a.avgParticipation}/5ì ìœ¼ë¡œ ë§¤ìš° ì ê·¹ì ì´ì—ìš”! `),a.achievements.length>0&&(o+=`

ğŸ¯ ìµœê·¼ ì„±ê³¼:
${a.achievements.slice(0,2).map(i=>`- ${i}`).join(`
`)}
`),n&&(o+=`
${n}
`),o+=`
ì•ìœ¼ë¡œë„ ${e} í•™ìƒì´ ë”ìš± ì„±ì¥í•  ìˆ˜ ìˆë„ë¡ ìµœì„ ì„ ë‹¤í•´ ì§€ë„í•˜ê² ìŠµë‹ˆë‹¤. ğŸ’ª`,o}function Fe(e,t,s,r){const a=[`ì•ˆë…•í•˜ì„¸ìš”, ${e} í•™ë¶€ëª¨ë‹˜! ğŸ˜Š

ì˜¤ëŠ˜ ${s} ìˆ˜ì—…ì—ì„œ ${e} í•™ìƒì˜ ëª¨ìŠµì„ ì „í•´ë“œë¦½ë‹ˆë‹¤.

${r}

${e}ì˜ ì„±ì¥ ëª¨ìŠµì´ ì •ë§ ë³´ê¸° ì¢‹ìŠµë‹ˆë‹¤. ì•ìœ¼ë¡œë„ ì´ë ‡ê²Œ ê¾¸ì¤€íˆ ë…¸ë ¥í•œë‹¤ë©´ ${s} ì‹¤ë ¥ì´ ë”ìš± íƒ„íƒ„í•´ì§ˆ ê²ƒì…ë‹ˆë‹¤! ğŸ’ª

í•­ìƒ ì‘ì›í•˜ê² ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!`,`${e} í•™ë¶€ëª¨ë‹˜, ì•ˆë…•í•˜ì„¸ìš”! ğŸ‘‹

${t} ${s} ìˆ˜ì—… ì†Œì‹ì„ ì „í•´ë“œë¦½ë‹ˆë‹¤.

${r}

${e}ì˜ ì´ëŸ¬í•œ ëª¨ìŠµì´ ì •ë§ ìë‘ìŠ¤ëŸ½ìŠµë‹ˆë‹¤. ê³„ì†í•´ì„œ ì´ëŸ° ê¸ì •ì ì¸ ìì„¸ë¡œ í•™ìŠµì— ì„í•œë‹¤ë©´ ëª©í‘œí•œ ì„±ê³¼ë¥¼ ê¼­ ì´ë£° ìˆ˜ ìˆì„ ê±°ì˜ˆìš”! ğŸ¯

ê¶ê¸ˆí•˜ì‹  ì  ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”!`,`í•™ë¶€ëª¨ë‹˜, ì•ˆë…•í•˜ì„¸ìš”! ğŸ˜Š

ì˜¤ëŠ˜ ${e} í•™ìƒì˜ ${s} ìˆ˜ì—… í˜„í™©ì„ ë§ì”€ë“œë¦½ë‹ˆë‹¤.

${r}

${e}ê°€ ë³´ì—¬ì¤€ ì´ëŸ° ëª¨ìŠµë“¤ì´ ì •ë§ ì¸ìƒ ê¹Šì—ˆìŠµë‹ˆë‹¤. ì´ëŒ€ë¡œë§Œ ê¾¸ì¤€íˆ ë…¸ë ¥í•œë‹¤ë©´ ${s} ê³¼ëª©ì—ì„œ ë” í° ë°œì „ì„ ê¸°ëŒ€í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤! âœ¨

ì•ìœ¼ë¡œë„ ${e}ì˜ ì„±ì¥ì„ í•¨ê»˜ ì‘ì›í•˜ê² ìŠµë‹ˆë‹¤!`],n=Math.floor(Math.random()*a.length);return a[n]}d.post("/api/generate-blog-post",async e=>{var t,s;try{const{topic:r,keywords:a,tone:n}=await e.req.json();if(!r)return e.json({success:!1,error:"ì£¼ì œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const l=Ue(r,a,n);return e.json({success:!0,content:l,metadata:{topic:r,keywords:a,tone:n,wordCount:l.length,mode:"template"}})}catch(r){return console.error("Generate blog post error:",r),e.json({success:!1,error:"ë¸”ë¡œê·¸ ê¸€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});function Ue(e,t,s){const a=(t?t.split(",").map(n=>n.trim()):[e])[0];return`ğŸ“Œ ${e} - í•™ì›ì¥ì´ ì•Œë ¤ë“œë¦¬ëŠ” ì‹¤ì „ ê°€ì´ë“œ

ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ì€ ë§ì€ í•™ë¶€ëª¨ë‹˜ë“¤ì´ ê¶ê¸ˆí•´í•˜ì‹œëŠ” "${e}"ì— ëŒ€í•´ ìƒì„¸íˆ ì•Œë ¤ë“œë¦¬ë ¤ê³  í•©ë‹ˆë‹¤. ğŸ˜Š

ì‹¤ì œ í•™ì›ì„ ìš´ì˜í•˜ë©´ì„œ ê²ªì€ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ì •ë§ ë„ì›€ì´ ë˜ëŠ” ì •ë³´ë§Œ ëª¨ì•˜ìœ¼ë‹ˆ, ëê¹Œì§€ ì½ì–´ë³´ì‹œë©´ í° ë„ì›€ì´ ë˜ì‹¤ ê±°ì˜ˆìš”!


ğŸ¯ ì™œ ${a}ì´(ê°€) ì¤‘ìš”í• ê¹Œìš”?

ìš”ì¦˜ í•™ë¶€ëª¨ë‹˜ë“¤ê³¼ ìƒë‹´í•˜ë‹¤ ë³´ë©´ "${a}"ì— ëŒ€í•œ ê³ ë¯¼ì´ ì •ë§ ë§ìœ¼ì‹­ë‹ˆë‹¤. ê·¸ë§Œí¼ ì¤‘ìš”í•œ ì£¼ì œì´ê¸° ë•Œë¬¸ì´ì£ .

íŠ¹íˆ ì´ˆë“±í•™ìƒë¶€í„° ê³ ë“±í•™ìƒê¹Œì§€, í•™ë…„ë³„ë¡œ ì ‘ê·¼ ë°©ë²•ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ìš°ë¦¬ ì•„ì´ì—ê²Œ ë§ëŠ” ë°©ë²•ì„ ì°¾ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤.


âœ¨ ${e} - í•µì‹¬ í¬ì¸íŠ¸ 3ê°€ì§€

1ï¸âƒ£ ì²« ë²ˆì§¸ í•µì‹¬ í¬ì¸íŠ¸

${a}ì„(ë¥¼) ì‹œì‘í•  ë•Œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ ê¸°ì´ˆë¥¼ íƒ„íƒ„íˆ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë§ì€ í•™ìƒë“¤ì´ ë¹¨ë¦¬ ì§„ë„ë¥¼ ë‚˜ê°€ë ¤ê³  í•˜ì§€ë§Œ, ê¸°ì´ˆê°€ ì•½í•˜ë©´ ë‚˜ì¤‘ì— ì–´ë ¤ì›€ì„ ê²ªê²Œ ë©ë‹ˆë‹¤.

ì‹¤ì œë¡œ ì €í¬ í•™ì›ì—ì„œë„ ê¸°ì´ˆë¶€í„° ì²´ê³„ì ìœ¼ë¡œ í•™ìŠµí•œ í•™ìƒë“¤ì´ ì¥ê¸°ì ìœ¼ë¡œ í›¨ì”¬ ì¢‹ì€ ì„±ê³¼ë¥¼ ë‚´ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.


2ï¸âƒ£ ë‘ ë²ˆì§¸ í•µì‹¬ í¬ì¸íŠ¸

ê¾¸ì¤€í•¨ì´ ì •ë§ ì¤‘ìš”í•©ë‹ˆë‹¤. ${a}ì€(ëŠ”) ë‹¨ê¸°ê°„ì— íš¨ê³¼ë¥¼ ë³´ê¸° ì–´ë µìŠµë‹ˆë‹¤. ìµœì†Œ 3ê°œì›” ì´ìƒ ê¾¸ì¤€íˆ í•™ìŠµí•´ì•¼ í™•ì‹¤í•œ ë³€í™”ë¥¼ ëŠë‚„ ìˆ˜ ìˆì–´ìš”.

í•˜ë£¨ 30ë¶„ì´ë¼ë„ ë§¤ì¼ ê¾¸ì¤€íˆ í•˜ëŠ” ê²ƒì´ ì£¼ë§ì— 3ì‹œê°„ ëª°ì•„ì„œ í•˜ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ íš¨ê³¼ì ì…ë‹ˆë‹¤. ğŸ’ª


3ï¸âƒ£ ì„¸ ë²ˆì§¸ í•µì‹¬ í¬ì¸íŠ¸

ì „ë¬¸ê°€ì˜ ë„ì›€ì„ ë°›ëŠ” ê²ƒë„ ì¢‹ì€ ë°©ë²•ì…ë‹ˆë‹¤. í˜¼ìì„œ í•˜ë‹¤ ë³´ë©´ ë°©í–¥ì„ ìƒê¸° ì‰½ê³ , ì˜ëª»ëœ ìŠµê´€ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

${t?t.split(",").map(n=>n.trim()).join(", "):e}ê³¼ ê´€ë ¨í•´ì„œ ì²´ê³„ì ì¸ ì»¤ë¦¬í˜ëŸ¼ì„ ê°–ì¶˜ ê³³ì—ì„œ í•™ìŠµí•˜ë©´ ì‹œê°„ê³¼ ë…¸ë ¥ì„ ì•„ë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.


ğŸ“š ì‹¤ì „ í™œìš© íŒ

ì´ë¡ ë§Œ ì•„ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì‹¤ì œë¡œ ì ìš©í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. 

ë§¤ì¼ ì‘ì€ ëª©í‘œë¥¼ ì„¸ìš°ê³ , ê·¸ê²ƒì„ ë‹¬ì„±í•˜ë©´ì„œ ì„±ì·¨ê°ì„ ëŠë¼ê²Œ í•´ì£¼ì„¸ìš”. ì´ë ‡ê²Œ í•˜ë©´ ìì—°ìŠ¤ëŸ½ê²Œ í•™ìŠµ ë™ê¸°ê°€ ìƒê¸°ê³ , ${a}ì— ëŒ€í•œ í¥ë¯¸ë„ ë†’ì•„ì§‘ë‹ˆë‹¤.

íŠ¹íˆ í•™ë¶€ëª¨ë‹˜ì˜ ê´€ì‹¬ê³¼ ì‘ì›ì´ ì •ë§ ì¤‘ìš”í•©ë‹ˆë‹¤. ì‘ì€ ë°œì „ì´ë¼ë„ ì¹­ì°¬í•´ì£¼ì‹œë©´, ì•„ì´ë“¤ì€ ë” ì—´ì‹¬íˆ í•˜ê²Œ ë©ë‹ˆë‹¤! ğŸ‰


ğŸ’¡ ë§ˆë¬´ë¦¬í•˜ë©°

ì˜¤ëŠ˜ì€ ${e}ì— ëŒ€í•´ ìì„¸íˆ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.

í•µì‹¬ì€ ê¸°ì´ˆë¥¼ íƒ„íƒ„íˆ í•˜ê³ , ê¾¸ì¤€íˆ í•™ìŠµí•˜ë©°, í•„ìš”í•˜ë‹¤ë©´ ì „ë¬¸ê°€ì˜ ë„ì›€ì„ ë°›ëŠ” ê²ƒì…ë‹ˆë‹¤.

ìš°ë¦¬ ì•„ì´ì—ê²Œ ë§ëŠ” ë°©ë²•ì„ ì°¾ì•„ì„œ ì°¨ê·¼ì°¨ê·¼ ì§„í–‰í•˜ì‹œë©´, ë¶„ëª… ì¢‹ì€ ê²°ê³¼ê°€ ìˆì„ ê±°ì˜ˆìš”! ğŸ˜Š

ê¶ê¸ˆí•˜ì‹  ì ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš”. ì„±ì‹¬ì„±ì˜ê» ë‹µë³€ë“œë¦¬ê² ìŠµë‹ˆë‹¤!

#${a} ${t?t.split(",").map(n=>"#"+n.trim()).join(" "):""} #í•™ì› #í•™ìŠµë²• #ê³µë¶€ë²• #êµìœ¡ì •ë³´`}d.get("/",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤ - í•™ì› ì „ë¬¸ ë§ˆì¼€íŒ… | ìŠˆí¼ í”Œë ˆì´ìŠ¤</title>
        <meta name="description" content="100% í˜„ì§ í•™ì›ì¥ì´ ì•Œë ¤ì£¼ëŠ” ì‹¤ì „ ë§ˆì¼€íŒ…! ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìƒìœ„ë…¸ì¶œ, ë¸”ë¡œê·¸ ë§ˆì¼€íŒ…, í¼ë„ ë§ˆì¼€íŒ… ì „ë¬¸ êµìœ¡. ëŒ€í‘œì´ì‚¬ ê³ í¬ì¤€, ì œ1íŒ€ì¥ ê³ ì„ ìš°ì™€ í•¨ê»˜í•˜ëŠ” í•™ì› ì„±ì¥ ì»¨ì„¤íŒ….">
        
        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://superplace-academy.pages.dev/">
        <meta property="og:title" content="ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤ - í•™ì› ì „ë¬¸ ë§ˆì¼€íŒ…">
        <meta property="og:description" content="100% í˜„ì§ í•™ì›ì¥ì´ ì•Œë ¤ì£¼ëŠ” ì‹¤ì „ ë§ˆì¼€íŒ…! ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìƒìœ„ë…¸ì¶œ, ë¸”ë¡œê·¸ ë§ˆì¼€íŒ… ì „ë¬¸ êµìœ¡">
        <meta property="og:image" content="https://superplace-academy.pages.dev/thumbnail-share.jpg">
        
        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image">
        <meta property="twitter:url" content="https://superplace-academy.pages.dev/">
        <meta property="twitter:title" content="ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤ - í•™ì› ì „ë¬¸ ë§ˆì¼€íŒ…">
        <meta property="twitter:description" content="100% í˜„ì§ í•™ì›ì¥ì´ ì•Œë ¤ì£¼ëŠ” ì‹¤ì „ ë§ˆì¼€íŒ…!">
        <meta property="twitter:image" content="https://superplace-academy.pages.dev/thumbnail-share.jpg">
        
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
          
          :root {
            --primary: #7c3aed;
            --primary-dark: #5b21b6;
            --accent: #fb923c;
            --accent-dark: #f97316;
          }
          
          body {
            background: #ffffff;
            color: #1f2937;
          }
          
          .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          }
          
          .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px -8px rgba(124, 58, 237, 0.15);
          }
          
          .animate-fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
          }
          
          .animate-fade-in.visible {
            opacity: 1;
            transform: translateY(0);
          }
          
          .gradient-purple {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
          }
          
          .gradient-orange {
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
          }
          
          .section-light {
            background: #fafafa;
          }
          
          .text-balance {
            text-wrap: balance;
          }
        </style>
    </head>
    <body>
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100">
            <div class="max-w-7xl mx-auto px-6 lg:px-8">
                <div class="flex justify-between items-center h-20">
                    <div class="flex items-center space-x-3">
                        <img src="/static/images/logo.png" alt="SUPER PLACE" class="h-10" onerror="this.style.display='none'">
                        <span class="text-xl font-bold text-gray-900">ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</span>
                    </div>
                    <div class="hidden md:flex items-center space-x-10">
                        <a href="/" class="text-gray-700 hover:text-purple-600 font-medium transition">í™ˆ</a>
                        <a href="/programs" class="text-gray-700 hover:text-purple-600 font-medium transition">êµìœ¡ í”„ë¡œê·¸ë¨</a>
                        <a href="/success" class="text-gray-700 hover:text-purple-600 font-medium transition">ì„±ê³µ ì‚¬ë¡€</a>
                        <a href="/contact" class="text-gray-700 hover:text-purple-600 font-medium transition">ë¬¸ì˜í•˜ê¸°</a>
                        <!-- ë¡œê·¸ì¸ ì „ -->
                        <a href="/signup?teacher=true" id="teacherRegisterBtn" class="text-purple-600 hover:text-purple-700 font-semibold border border-purple-600 px-5 py-2.5 rounded-full hover:bg-purple-50 transition-all">
                            ì„ ìƒë‹˜ ë“±ë¡
                        </a>
                        <a href="/login" id="loginBtn" class="gradient-purple text-white px-6 py-2.5 rounded-full font-medium hover:shadow-lg transition-all">
                            ë¡œê·¸ì¸
                        </a>
                        
                        <!-- ì„ ìƒë‹˜ ì „ìš© (ë¡œê·¸ì¸ í›„) -->
                        <a href="/academy-management" id="academyManageLink" class="hidden text-gray-700 hover:text-purple-600 font-medium transition">í•™ì› ê´€ë¦¬</a>
                        
                        <!-- ë¡œê·¸ì¸ í›„ -->
                        <div id="userMenu" class="hidden flex items-center space-x-4">
                            <a href="/dashboard" class="text-gray-700 hover:text-purple-600 font-medium">ëŒ€ì‹œë³´ë“œ</a>
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-purple-600 rounded-full flex items-center justify-center text-white font-bold" id="userAvatar"></div>
                                <span id="userName" class="text-gray-900 font-medium"></span>
                            </div>
                            <button onclick="logout()" class="text-gray-600 hover:text-red-600">ë¡œê·¸ì•„ì›ƒ</button>
                        </div>
                    </div>
                    <div class="md:hidden">
                        <button id="mobile-menu-btn" class="text-gray-700">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Mobile menu -->
            <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-100">
                <div class="px-6 py-4 space-y-2">
                    <a href="/" class="block px-4 py-3 text-gray-700 hover:bg-purple-50 rounded-xl transition">í™ˆ</a>
                    <a href="/programs" class="block px-4 py-3 text-gray-700 hover:bg-purple-50 rounded-xl transition">êµìœ¡ í”„ë¡œê·¸ë¨</a>
                    <a href="/success" class="block px-4 py-3 text-gray-700 hover:bg-purple-50 rounded-xl transition">ì„±ê³µ ì‚¬ë¡€</a>
                    <a href="/contact" class="block px-4 py-3 text-gray-700 hover:bg-purple-50 rounded-xl transition">ë¬¸ì˜í•˜ê¸°</a>
                    <a href="/teachers/register" class="block px-4 py-3 text-purple-600 border border-purple-600 bg-white hover:bg-purple-50 rounded-xl text-center font-semibold">ì„ ìƒë‹˜ ë“±ë¡</a>
                    <a href="/login" class="block px-4 py-3 gradient-purple text-white rounded-xl text-center font-medium">ë¡œê·¸ì¸</a>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="pt-32 pb-32 px-6 bg-white relative overflow-hidden">
            <div class="absolute inset-0 z-0">
                <div class="absolute top-0 right-0 w-1/2 h-1/2 bg-gradient-to-br from-purple-100 to-transparent rounded-full blur-3xl opacity-30"></div>
                <div class="absolute bottom-0 left-0 w-1/2 h-1/2 bg-gradient-to-tr from-orange-100 to-transparent rounded-full blur-3xl opacity-30"></div>
            </div>
            <div class="max-w-7xl mx-auto relative z-10">
                <div class="grid lg:grid-cols-2 gap-12 items-center">
                    <!-- Left: Text Content -->
                    <div class="animate-fade-in">
                        <div class="inline-block mb-6 px-5 py-2.5 bg-purple-50 rounded-full text-purple-700 text-sm font-medium border border-purple-100">
                            í•™ì› ë§ˆì¼€íŒ…ì˜ ìƒˆë¡œìš´ ê¸°ì¤€
                        </div>
                        <h1 class="text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight">
                            í•™ì›ì¥ë‹˜ì˜ ì„±ê³µ,<br>
                            <span class="text-purple-600">ìš°ë¦¬ê°€ í•¨ê»˜í•©ë‹ˆë‹¤</span>
                        </h1>
                        <p class="text-xl text-gray-600 mb-10 leading-relaxed">
                            ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ 1ìœ„, ë¸”ë¡œê·¸ ìƒìœ„ë…¸ì¶œ, í¼ë„ ë§ˆì¼€íŒ…ê¹Œì§€<br>
                            <span class="text-gray-900 font-medium">500ê°œ í•™ì›ì´ ê²€ì¦</span>í•œ ì‹¤ì „ ë§ˆì¼€íŒ… ë…¸í•˜ìš°
                        </p>
                        <div class="flex flex-col sm:flex-row gap-4 mb-12">
                            <a href="/contact" class="gradient-purple text-white px-10 py-4 rounded-full text-lg font-medium shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 text-center">
                                ë¬´ë£Œ ìƒë‹´ ì‹ ì²­í•˜ê¸°
                            </a>
                            <a href="/programs" class="bg-white text-purple-600 border-2 border-purple-200 px-10 py-4 rounded-full text-lg font-medium hover:border-purple-400 hover:bg-purple-50 transition-all text-center">
                                êµìœ¡ í”„ë¡œê·¸ë¨ ë³´ê¸°
                            </a>
                        </div>
                        
                        <!-- ì„ ìƒë‹˜ ë“±ë¡ ì•ˆë‚´ -->
                        <div class="bg-gradient-to-r from-purple-50 to-blue-50 border-2 border-purple-200 rounded-2xl p-6">
                            <div class="flex items-start space-x-4">
                                <div class="flex-shrink-0">
                                    <div class="w-12 h-12 bg-purple-600 rounded-full flex items-center justify-center">
                                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                                        </svg>
                                    </div>
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-lg font-bold text-gray-900 mb-2">ì„ ìƒë‹˜ì´ì‹ ê°€ìš”?</h3>
                                    <p class="text-gray-600 mb-4">
                                        í•™ì› ì›ì¥ë‹˜ê³¼ í•¨ê»˜ í•™ìƒ ê´€ë¦¬ë¥¼ ì‹œì‘í•˜ì„¸ìš”. ê°„í¸í•œ ë“±ë¡ ì ˆì°¨ë¡œ ë°”ë¡œ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                    </p>
                                    <a href="/teachers/register" class="inline-flex items-center px-6 py-3 bg-white border-2 border-purple-600 text-purple-600 rounded-full font-semibold hover:bg-purple-600 hover:text-white transition-all">
                                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path>
                                        </svg>
                                        ì„ ìƒë‹˜ ë“±ë¡í•˜ê¸°
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right: Hero Image -->
                    <div class="animate-fade-in" style="transition-delay: 0.2s">
                        <div class="relative rounded-3xl overflow-hidden shadow-2xl">
                            <img src="/static/images/hero-main.png" 
                                 alt="í•™ì› ì „ë¬¸ ë§ˆì¼€íŒ… - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤" 
                                 class="w-full h-auto object-cover">
                            <div class="absolute inset-0 bg-gradient-to-t from-purple-900/10 to-transparent"></div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-20">
                    
                    <!-- Stats -->
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-8 pt-12 border-t border-gray-100">
                        <div class="text-center">
                            <div class="text-4xl lg:text-5xl font-bold text-purple-600 mb-2">500+</div>
                            <div class="text-sm lg:text-base text-gray-600 font-medium">êµìœ¡ ìˆ˜ë£Œ í•™ì›</div>
                        </div>
                        <div class="text-center">
                            <div class="text-4xl lg:text-5xl font-bold text-orange-500 mb-2">95%</div>
                            <div class="text-sm lg:text-base text-gray-600 font-medium">ë§Œì¡±ë„</div>
                        </div>
                        <div class="text-center">
                            <div class="text-4xl lg:text-5xl font-bold text-purple-600 mb-2">24/7</div>
                            <div class="text-sm lg:text-base text-gray-600 font-medium">ì»¤ë®¤ë‹ˆí‹° ìš´ì˜</div>
                        </div>
                        <div class="text-center">
                            <div class="text-4xl lg:text-5xl font-bold text-orange-500 mb-2">1:1</div>
                            <div class="text-sm lg:text-base text-gray-600 font-medium">ë§ì¶¤ ì»¨ì„¤íŒ…</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Services Section -->
        <section class="py-32 px-6 section-light">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-20 animate-fade-in">
                    <h2 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-6">
                        í•µì‹¬ êµìœ¡ í”„ë¡œê·¸ë¨
                    </h2>
                    <p class="text-xl text-gray-600">
                        ì‹¤ì „ì—ì„œ ë°”ë¡œ ì ìš© ê°€ëŠ¥í•œ í•™ì› ë§ˆì¼€íŒ… ì „ëµ
                    </p>
                </div>
                
                <div class="grid md:grid-cols-3 gap-6 lg:gap-8">
                    <!-- Service 1 -->
                    <div class="bg-white rounded-3xl overflow-hidden border border-gray-100 card-hover animate-fade-in" style="transition-delay: 0.1s">
                        <div class="h-48 overflow-hidden">
                            <img src="/static/images/naver-place.png" 
                                 alt="ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ë§ˆì¼€íŒ…" 
                                 class="w-full h-full object-cover hover:scale-105 transition-transform duration-500">
                        </div>
                        <div class="p-8">
                            <div class="w-12 h-12 gradient-purple rounded-xl flex items-center justify-center mb-4">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-3">ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤<br>ìƒìœ„ë…¸ì¶œ</h3>
                            <p class="text-gray-600 mb-6 leading-relaxed">
                                ì§€ì—­ ê²€ìƒ‰ 1ìœ„ ë‹¬ì„±ì„ ìœ„í•œ ì‹¤ì „ ë…¸í•˜ìš°. í‚¤ì›Œë“œ ë¶„ì„ë¶€í„° ë¦¬ë·° ê´€ë¦¬ê¹Œì§€ ì™„ë²½í•˜ê²Œ ë§ˆìŠ¤í„°í•©ë‹ˆë‹¤.
                            </p>
                            <ul class="space-y-3 text-gray-700">
                                <li class="flex items-start">
                                    <svg class="w-5 h-5 text-purple-600 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>í‚¤ì›Œë“œ ìµœì í™” ì „ëµ</span>
                                </li>
                                <li class="flex items-start">
                                    <svg class="w-5 h-5 text-purple-600 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>ë¦¬ë·° ê´€ë¦¬ ì‹œìŠ¤í…œ</span>
                                </li>
                                <li class="flex items-start">
                                    <svg class="w-5 h-5 text-purple-600 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>ì§€ì—­ SEO ì™„ë²½ ê°€ì´ë“œ</span>
                                </li>
                            </ul>
                            <a href="/programs/naver-place" class="mt-6 block w-full py-3 text-center gradient-purple text-white rounded-xl font-bold hover:shadow-lg transition-all">
                                ìì„¸íˆ ë³´ê¸° â†’
                            </a>
                        </div>
                    </div>

                    <!-- Service 2 -->
                    <div class="bg-white rounded-3xl overflow-hidden border border-gray-100 card-hover animate-fade-in" style="transition-delay: 0.2s">
                        <div class="h-48 overflow-hidden">
                            <img src="/static/images/blog-marketing.jpg" 
                                 alt="ë¸”ë¡œê·¸ ë§ˆì¼€íŒ…" 
                                 class="w-full h-full object-cover hover:scale-105 transition-transform duration-500">
                        </div>
                        <div class="p-8">
                            <div class="w-12 h-12 gradient-orange rounded-xl flex items-center justify-center mb-4">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                </svg>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-3">ë¸”ë¡œê·¸<br>ìƒìœ„ë…¸ì¶œ</h3>
                            <p class="text-gray-600 mb-6 leading-relaxed">
                                ë„¤ì´ë²„ ë¸”ë¡œê·¸ ê²€ìƒ‰ ìµœìƒìœ„ ì§„ì… ì „ëµ. SEO ìµœì í™”ì™€ ì½˜í…ì¸  ê¸°íšì˜ ëª¨ë“  ê²ƒì„ ë°°ì›ë‹ˆë‹¤.
                            </p>
                            <ul class="space-y-3 text-gray-700">
                                <li class="flex items-start">
                                    <svg class="w-5 h-5 text-orange-500 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜ ì™„ë²½ ì´í•´</span>
                                </li>
                                <li class="flex items-start">
                                    <svg class="w-5 h-5 text-orange-500 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>íš¨ê³¼ì ì¸ ê¸€ì“°ê¸° ê¸°ë²•</span>
                                </li>
                                <li class="flex items-start">
                                    <svg class="w-5 h-5 text-orange-500 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>ì½˜í…ì¸  ì „ëµ ìˆ˜ë¦½</span>
                                </li>
                            </ul>
                            <a href="/programs/blog" class="mt-6 block w-full py-3 text-center gradient-orange text-white rounded-xl font-bold hover:shadow-lg transition-all">
                                ìì„¸íˆ ë³´ê¸° â†’
                            </a>
                        </div>
                    </div>

                    <!-- Service 3 -->
                    <div class="bg-white rounded-3xl overflow-hidden border border-gray-100 card-hover animate-fade-in" style="transition-delay: 0.3s">
                        <div class="h-48 overflow-hidden">
                            <img src="/static/images/funnel-marketing.png" 
                                 alt="í¼ë„ ë§ˆì¼€íŒ…" 
                                 class="w-full h-full object-cover hover:scale-105 transition-transform duration-500">
                        </div>
                        <div class="p-8">
                            <div class="w-12 h-12 gradient-purple rounded-xl flex items-center justify-center mb-4">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-3">í¼ë„<br>ë§ˆì¼€íŒ…</h3>
                            <p class="text-gray-600 mb-6 leading-relaxed">
                                ìƒë‹´ë¶€í„° ë“±ë¡ê¹Œì§€ ìë™í™” ì‹œìŠ¤í…œ êµ¬ì¶•. íš¨ìœ¨ì ì¸ í•™ìƒ ëª¨ì§‘ í”„ë¡œì„¸ìŠ¤ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.
                            </p>
                            <ul class="space-y-3 text-gray-700">
                                <li class="flex items-start">
                                    <svg class="w-5 h-5 text-purple-600 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>ê³ ê° ì—¬ì • ì™„ë²½ ì„¤ê³„</span>
                                </li>
                                <li class="flex items-start">
                                    <svg class="w-5 h-5 text-purple-600 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>ë§ˆì¼€íŒ… ìë™í™” ë„êµ¬</span>
                                </li>
                                <li class="flex items-start">
                                    <svg class="w-5 h-5 text-purple-600 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>ì „í™˜ìœ¨ ê·¹ëŒ€í™” ì „ëµ</span>
                                </li>
                            </ul>
                            <a href="/programs/funnel" class="mt-6 block w-full py-3 text-center gradient-purple text-white rounded-xl font-bold hover:shadow-lg transition-all">
                                ìì„¸íˆ ë³´ê¸° â†’
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Program CTA Section -->
        <section class="py-20 px-6 bg-gradient-to-br from-purple-50 to-white">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-12">
                    <h2 class="text-3xl lg:text-4xl font-bold text-gray-900 mb-4">
                        ê´€ì‹¬ìˆëŠ” í”„ë¡œê·¸ë¨ì„ ì„ íƒí•˜ì„¸ìš”
                    </h2>
                    <p class="text-lg text-gray-600">
                        ê° í”„ë¡œê·¸ë¨ì˜ ìƒì„¸ ë‚´ìš©ì„ í™•ì¸í•˜ê³  ë°”ë¡œ ì‹ ì²­í•˜ì„¸ìš”
                    </p>
                </div>
                
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                    <!-- ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ë²„íŠ¼ -->
                    <a href="/programs/naver-place" class="group bg-white rounded-2xl p-8 border-2 border-purple-200 hover:border-purple-600 hover:shadow-xl transition-all duration-300 hover:-translate-y-2">
                        <div class="w-16 h-16 gradient-purple rounded-2xl flex items-center justify-center mb-6 mx-auto group-hover:scale-110 transition-transform">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 text-center mb-3">
                            ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤<br>ìƒìœ„ë…¸ì¶œ
                        </h3>
                        <p class="text-gray-600 text-center mb-4">
                            ì§€ì—­ ê²€ìƒ‰ 1ìœ„ ë‹¬ì„± ì „ëµ
                        </p>
                        <div class="text-center">
                            <span class="text-purple-600 font-bold group-hover:text-purple-700">
                                ìì„¸íˆ ë³´ê¸° â†’
                            </span>
                        </div>
                    </a>

                    <!-- ë¸”ë¡œê·¸ ë²„íŠ¼ -->
                    <a href="/programs/blog" class="group bg-white rounded-2xl p-8 border-2 border-orange-200 hover:border-orange-500 hover:shadow-xl transition-all duration-300 hover:-translate-y-2">
                        <div class="w-16 h-16 gradient-orange rounded-2xl flex items-center justify-center mb-6 mx-auto group-hover:scale-110 transition-transform">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 text-center mb-3">
                            ë¸”ë¡œê·¸<br>ìƒìœ„ë…¸ì¶œ
                        </h3>
                        <p class="text-gray-600 text-center mb-4">
                            ê²€ìƒ‰ ìµœìƒìœ„ ì§„ì… ì „ëµ
                        </p>
                        <div class="text-center">
                            <span class="text-orange-500 font-bold group-hover:text-orange-600">
                                ìì„¸íˆ ë³´ê¸° â†’
                            </span>
                        </div>
                    </a>

                    <!-- í¼ë„ ë§ˆì¼€íŒ… ë²„íŠ¼ -->
                    <a href="/programs/funnel" class="group bg-white rounded-2xl p-8 border-2 border-purple-200 hover:border-purple-600 hover:shadow-xl transition-all duration-300 hover:-translate-y-2">
                        <div class="w-16 h-16 gradient-purple rounded-2xl flex items-center justify-center mb-6 mx-auto group-hover:scale-110 transition-transform">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 text-center mb-3">
                            í¼ë„<br>ë§ˆì¼€íŒ…
                        </h3>
                        <p class="text-gray-600 text-center mb-4">
                            24ì‹œê°„ ìë™ í•™ìƒ ëª¨ì§‘
                        </p>
                        <div class="text-center">
                            <span class="text-purple-600 font-bold group-hover:text-purple-700">
                                ìì„¸íˆ ë³´ê¸° â†’
                            </span>
                        </div>
                    </a>
                    
                    <!-- í•™ìƒ ê´€ë¦¬ ë²„íŠ¼ -->
                    <a href="/students" class="group bg-white rounded-2xl p-8 border-2 border-blue-200 hover:border-blue-600 hover:shadow-xl transition-all duration-300 hover:-translate-y-2">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl flex items-center justify-center mb-6 mx-auto group-hover:scale-110 transition-transform">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 text-center mb-3">
                            í•™ìƒ<br>ê´€ë¦¬
                        </h3>
                        <p class="text-gray-600 text-center mb-4">
                            í•™ìƒ/ë°˜/ì„±ê³¼ í†µí•© ê´€ë¦¬
                        </p>
                        <div class="text-center">
                            <span class="text-blue-600 font-bold group-hover:text-blue-700">
                                ë°”ë¡œê°€ê¸° â†’
                            </span>
                        </div>
                    </a>
                </div>

                <!-- ëŒ€í–‰ ë¬¸ì˜ í° ë²„íŠ¼ -->
                <div class="text-center">
                    <a href="/contact" class="inline-block gradient-purple text-white px-16 py-6 rounded-full text-xl font-bold shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all duration-300">
                        <span class="flex items-center gap-3">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                            </svg>
                            <span>ëŒ€í–‰ ë¬¸ì˜í•˜ê¸°</span>
                        </span>
                    </a>
                    <p class="text-gray-500 mt-4">
                        24ì‹œê°„ ë‚´ì— ë‹µë³€ë“œë¦½ë‹ˆë‹¤
                    </p>
                </div>
            </div>
        </section>

        <!-- Why Us Section -->
        <section class="py-32 px-6 bg-white">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-20 animate-fade-in">
                    <h2 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-6">
                        ì™œ ìš°ë¦¬ë¥¼ ì„ íƒí•´ì•¼ í• ê¹Œìš”?
                    </h2>
                    <p class="text-xl text-gray-600">
                        í˜„ì—… í•™ì›ì¥ì´ ì§ì ‘ ê°€ë¥´ì¹˜ëŠ” ì‹¤ì „ ë§ˆì¼€íŒ… êµìœ¡
                    </p>
                </div>

                <div class="grid lg:grid-cols-2 gap-8 mb-20">
                    <!-- Left: Image Grid -->
                    <div class="grid grid-cols-2 gap-4 animate-fade-in">
                        <div class="col-span-2 rounded-2xl overflow-hidden">
                            <img src="/static/images/seminar-education.jpg" 
                                 alt="íœ´ì§€í†µ(ä¼‘çŸ¥é€š) êµìœ¡ ì„¸ë¯¸ë‚˜ - í•™ì›ì¥ êµìœ¡ í˜„ì¥" 
                                 class="w-full h-72 object-cover">
                        </div>
                        <div class="rounded-2xl overflow-hidden">
                            <img src="/static/images/kumetang-classroom-2.jpg" 
                                 alt="ê¾¸ë©”ë•…í•™ì› í•™ìŠµ ê³µê°„" 
                                 class="w-full h-48 object-cover">
                        </div>
                        <div class="rounded-2xl overflow-hidden bg-white flex items-center justify-center p-4">
                            <img src="/static/images/kumetang-logo.png" 
                                 alt="ê¾¸ë©”ë•…í•™ì› ë¡œê³ " 
                                 class="w-full h-auto object-contain">
                        </div>
                    </div>
                    
                    <!-- Right: Features -->
                    <div class="space-y-6 animate-fade-in" style="transition-delay: 0.1s">
                        <div class="bg-gradient-to-br from-purple-50 to-white rounded-2xl p-8 border border-purple-100">
                            <div class="flex items-start gap-4">
                                <div class="w-14 h-14 gradient-purple rounded-xl flex items-center justify-center flex-shrink-0 text-white text-xl font-bold">
                                    01
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-900 mb-2">
                                        í˜„ì—… í•™ì›ì¥ì˜ ì‚´ì•„ìˆëŠ” ë…¸í•˜ìš°
                                    </h3>
                                    <p class="text-gray-600 leading-relaxed">
                                        ê¾¸ë©”ë•…í•™ì›ì„ ìš´ì˜í•˜ë©° ì§ì ‘ ê²€ì¦í•œ ì‹¤ì „ ì „ëµ. ì´ë¡ ì´ ì•„ë‹Œ ê²½í—˜ì—ì„œ ìš°ëŸ¬ë‚˜ì˜¨ ì§„ì§œ ë…¸í•˜ìš°ë¥¼ ë°°ì›ë‹ˆë‹¤.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-orange-50 to-white rounded-2xl p-8 border border-orange-100">
                            <div class="flex items-start gap-4">
                                <div class="w-14 h-14 gradient-orange rounded-xl flex items-center justify-center flex-shrink-0 text-white text-xl font-bold">
                                    02
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-900 mb-2">
                                        24/7 ì»¤ë®¤ë‹ˆí‹° & ì˜¤í”„ë¼ì¸ ëª¨ì„
                                    </h3>
                                    <p class="text-gray-600 leading-relaxed">
                                        ì˜¤í”ˆì±„íŒ…ë°©ì—ì„œ ì‹¤ì‹œê°„ ì†Œí†µí•˜ê³ , ì •ê¸° ì˜¤í”„ë¼ì¸ ëª¨ì„ì—ì„œ ì „êµ­ í•™ì›ì¥ë‹˜ë“¤ê³¼ ë„¤íŠ¸ì›Œí‚¹í•˜ì„¸ìš”.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-purple-50 to-white rounded-2xl p-8 border border-purple-100">
                            <div class="flex items-start gap-4">
                                <div class="w-14 h-14 gradient-purple rounded-xl flex items-center justify-center flex-shrink-0 text-white text-xl font-bold">
                                    03
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-900 mb-2">
                                        500ê°œ í•™ì›ì´ ê²€ì¦í•œ ì„±ê³¼
                                    </h3>
                                    <p class="text-gray-600 leading-relaxed">
                                        500ê°œ ì´ìƒ í•™ì›ì˜ ì‹¤ì œ ì„±ê³µ ì‚¬ë¡€ì™€ 95% ë§Œì¡±ë„ê°€ ì¦ëª…í•˜ëŠ” í™•ì‹¤í•œ íš¨ê³¼ë¥¼ ê²½í—˜í•˜ì„¸ìš”.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Testimonial -->
                <div class="bg-gradient-to-br from-purple-600 to-purple-800 rounded-3xl p-12 lg:p-16 max-w-5xl mx-auto animate-fade-in shadow-2xl">
                    <div class="flex items-start gap-6 mb-8">
                        <svg class="w-12 h-12 text-white/80 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
                        </svg>
                    </div>
                    <p class="text-2xl lg:text-3xl text-white leading-relaxed mb-10 font-medium">
                        í”Œë ˆì´ìŠ¤ ë§ˆì¼€íŒ… êµìœ¡ì„ ë°›ì€ í›„ 3ê°œì›” ë§Œì— ì‹ ê·œ ë¬¸ì˜ê°€ <span class="text-orange-300 font-bold">2ë°° ì´ìƒ</span> ëŠ˜ì—ˆìŠµë‹ˆë‹¤. ì‹¤ì „ ë…¸í•˜ìš°ê°€ ì •ë§ ëŒ€ë‹¨í•©ë‹ˆë‹¤!
                    </p>
                    <div class="flex items-center gap-5">
                        <div class="w-20 h-20 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center text-white font-bold text-2xl border-2 border-white/30">
                            ê¹€
                        </div>
                        <div>
                            <div class="font-bold text-white text-xl">ê¹€OO ì›ì¥ë‹˜</div>
                            <div class="text-white/80">ì„œìš¸ ê°•ë‚¨êµ¬ ì˜ì–´í•™ì›</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="py-32 px-6 gradient-purple">
            <div class="max-w-4xl mx-auto text-center animate-fade-in">
                <h2 class="text-4xl lg:text-6xl font-bold text-white mb-8 text-balance">
                    í•™ì› ì„±ì¥ì˜ ì‹œì‘,<br>
                    ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•˜ì„¸ìš”
                </h2>
                <p class="text-xl text-white/90 mb-12 leading-relaxed">
                    ë¬´ë£Œ ìƒë‹´ìœ¼ë¡œ ìš°ë¦¬ í•™ì›ì— ë”± ë§ëŠ” ë§ˆì¼€íŒ… ì „ëµì„ ë°›ì•„ë³´ì„¸ìš”
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="/contact" class="bg-white text-purple-600 px-12 py-5 rounded-full text-lg font-medium shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all duration-300">
                        ë¬´ë£Œ ìƒë‹´ ì‹ ì²­í•˜ê¸°
                    </a>
                    <a href="/programs" class="bg-white/10 backdrop-blur-sm border-2 border-white/40 text-white px-12 py-5 rounded-full text-lg font-medium hover:bg-white hover:text-purple-600 transition-all">
                        êµìœ¡ í”„ë¡œê·¸ë¨ ë³´ê¸°
                    </a>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-gray-50 text-gray-600 py-20 px-6 border-t border-gray-100">
            <div class="max-w-7xl mx-auto">
                <div class="grid md:grid-cols-4 gap-12 mb-16">
                    <div>
                        <div class="flex items-center space-x-2 mb-4">
                            <img src="/static/images/logo.png" alt="SUPER PLACE" class="h-8" onerror="this.style.display='none'">
                            <span class="text-xl font-bold text-gray-900">ìŠˆí¼í”Œë ˆì´ìŠ¤</span>
                        </div>
                        <p class="text-gray-500 text-sm leading-relaxed">
                            í•™ì› ë§ˆì¼€íŒ…ì˜ ìƒˆë¡œìš´ ê¸°ì¤€
                        </p>
                    </div>
                    <div>
                        <h4 class="font-bold text-gray-900 mb-4">ì„œë¹„ìŠ¤</h4>
                        <ul class="space-y-3 text-sm">
                            <li><a href="/programs" class="hover:text-purple-600 transition">êµìœ¡ í”„ë¡œê·¸ë¨</a></li>
                            <li><a href="/success" class="hover:text-purple-600 transition">ì„±ê³µ ì‚¬ë¡€</a></li>
                            <li><a href="/contact" class="hover:text-purple-600 transition">ë¬¸ì˜í•˜ê¸°</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-gray-900 mb-4">íšŒì‚¬</h4>
                        <ul class="space-y-3 text-sm">
                            <li><a href="/about" class="hover:text-purple-600 transition">íšŒì‚¬ ì†Œê°œ</a></li>
                            <li><a href="#" class="hover:text-purple-600 transition">ì´ìš©ì•½ê´€</a></li>
                            <li><a href="#" class="hover:text-purple-600 transition">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-gray-900 mb-4">ì—°ë½ì²˜</h4>
                        <ul class="space-y-3 text-sm">
                            <li>ì¸ì²œê´‘ì—­ì‹œ ì„œêµ¬ ì²­ë¼ì»¤ë‚¼ë¡œ 270, 2ì¸µ 2196í˜¸</li>
                            <li>wangholy1@naver.com</li>
                            <li>010-8739-9697</li>
                        </ul>
                    </div>
                </div>
                <div class="border-t border-gray-200 pt-8 mt-8">
                    <div class="text-center text-gray-600 text-sm space-y-2">
                        <p class="font-medium text-gray-900">ì£¼ì‹íšŒì‚¬ ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</p>
                        <p>ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 142-88-02445</p>
                        <p>ì£¼ì†Œ: ì¸ì²œê´‘ì—­ì‹œ ì„œêµ¬ ì²­ë¼ì»¤ë‚¼ë¡œ 270, 2ì¸µ 2196í˜¸</p>
                        <p>ì´ë©”ì¼: wangholy1@naver.com | ì „í™”: 010-8739-9697</p>
                        <p class="text-gray-500 mt-4">&copy; 2024 ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤. All rights reserved.</p>
                    </div>
                </div>
            </div>
        </footer>

        <script>
            // ë¡œê·¸ì¸ ìƒíƒœ ì²´í¬
            function checkLoginStatus() {
                const user = JSON.parse(localStorage.getItem('user') || 'null');
                if (user) {
                    // ë¡œê·¸ì¸ëœ ìƒíƒœ
                    document.getElementById('loginBtn').classList.add('hidden');
                    document.getElementById('teacherRegisterBtn').classList.add('hidden');
                    document.getElementById('userMenu').classList.remove('hidden');
                    document.getElementById('userMenu').classList.add('flex');
                    document.getElementById('userName').textContent = user.name;
                    document.getElementById('userAvatar').textContent = user.name.charAt(0);
                    
                    // ì„ ìƒë‹˜ì¸ ê²½ìš° 'í•™ì› ê´€ë¦¬' ë²„íŠ¼ ë³´ì´ê¸°
                    if (user.user_type === 'teacher') {
                        document.getElementById('academyManageLink').classList.remove('hidden');
                    }
                } else {
                    // ë¡œê·¸ì•„ì›ƒ ìƒíƒœ
                    document.getElementById('loginBtn').classList.remove('hidden');
                    document.getElementById('teacherRegisterBtn').classList.remove('hidden');
                    document.getElementById('userMenu').classList.add('hidden');
                    document.getElementById('academyManageLink').classList.add('hidden');
                }
            }

            function logout() {
                if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    localStorage.removeItem('user');
                    location.reload();
                }
            }

            // Mobile menu toggle
            document.getElementById('mobile-menu-btn').addEventListener('click', function() {
                const menu = document.getElementById('mobile-menu');
                menu.classList.toggle('hidden');
            });

            // Smooth scroll animations
            const observeElements = () => {
                const elements = document.querySelectorAll('.animate-fade-in');
                
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        }
                    });
                }, {
                    threshold: 0.15,
                    rootMargin: '0px 0px -60px 0px'
                });
                
                elements.forEach(element => observer.observe(element));
            };

            // Initialize
            document.addEventListener('DOMContentLoaded', () => {
                checkLoginStatus(); // ë¡œê·¸ì¸ ìƒíƒœ ì²´í¬ ì¶”ê°€
                observeElements();
                
                // Add visible class to hero immediately
                document.querySelector('section .animate-fade-in')?.classList.add('visible');
            });
        <\/script>
    </body>
    </html>
  `));d.get("/contact",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë¬¸ì˜í•˜ê¸° - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
          .gradient-purple {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
          }
        </style>
    </head>
    <body class="bg-white">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100">
            <div class="max-w-7xl mx-auto px-6 lg:px-8">
                <div class="flex justify-between items-center h-20">
                    <a href="/" class="flex items-center space-x-3">
                        <img src="/static/images/logo.png" alt="SUPER PLACE" class="h-10" onerror="this.style.display='none'">
                        <span class="text-xl font-bold text-gray-900">ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</span>
                    </a>
                    <div class="hidden md:flex items-center space-x-10">
                        <a href="/" class="text-gray-700 hover:text-purple-600 font-medium transition">í™ˆ</a>
                        <a href="/programs" class="text-gray-700 hover:text-purple-600 font-medium transition">êµìœ¡ í”„ë¡œê·¸ë¨</a>
                        <a href="/success" class="text-gray-700 hover:text-purple-600 font-medium transition">ì„±ê³µ ì‚¬ë¡€</a>
                        <a href="/contact" class="text-purple-600 font-medium transition">ë¬¸ì˜í•˜ê¸°</a>
                        <a href="/login" class="gradient-purple text-white px-6 py-2.5 rounded-full font-medium hover:shadow-lg transition-all">ë¡œê·¸ì¸</a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Contact Form Section -->
        <section class="pt-32 pb-24 px-6">
            <div class="max-w-3xl mx-auto">
                <div class="text-center mb-12">
                    <h1 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-4">ë¬´ë£Œ ìƒë‹´ ì‹ ì²­</h1>
                    <p class="text-xl text-gray-600">í•™ì›ì— ë§ëŠ” ë§ì¶¤ ë§ˆì¼€íŒ… ì „ëµì„ ìƒë‹´í•´ë“œë¦½ë‹ˆë‹¤</p>
                </div>

                <div class="bg-white rounded-2xl border border-gray-200 p-8 lg:p-12">
                    <form id="contactForm" class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì´ë¦„ <span class="text-red-500">*</span></label>
                            <input type="text" name="name" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì´ë©”ì¼ <span class="text-red-500">*</span></label>
                            <input type="email" name="email" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì—°ë½ì²˜ <span class="text-red-500">*</span></label>
                            <input type="tel" name="phone" required placeholder="010-0000-0000" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">í•™ì›ëª…</label>
                            <input type="text" name="academy_name" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ë¬¸ì˜ ë‚´ìš© <span class="text-red-500">*</span></label>
                            <textarea name="message" required rows="6" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition resize-none"></textarea>
                        </div>

                        <button type="submit" class="w-full gradient-purple text-white py-4 rounded-xl text-lg font-medium hover:shadow-xl transition-all">
                            ë¬¸ì˜ ì ‘ìˆ˜í•˜ê¸°
                        </button>

                        <div id="message" class="hidden mt-4 p-4 rounded-xl"></div>
                    </form>
                </div>

                <div class="mt-12 grid md:grid-cols-3 gap-6">
                    <div class="text-center p-6 bg-gray-50 rounded-xl">
                        <svg class="w-10 h-10 mx-auto mb-3 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                        </svg>
                        <div class="font-medium text-gray-900">ì´ë©”ì¼</div>
                        <div class="text-sm text-gray-600 mt-1">contact@superplace.kr</div>
                    </div>
                    <div class="text-center p-6 bg-gray-50 rounded-xl">
                        <svg class="w-10 h-10 mx-auto mb-3 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                        <div class="font-medium text-gray-900">ìœ„ì¹˜</div>
                        <div class="text-sm text-gray-600 mt-1">ì¸ì²œê´‘ì—­ì‹œ ì„œêµ¬</div>
                    </div>
                    <div class="text-center p-6 bg-gray-50 rounded-xl">
                        <svg class="w-10 h-10 mx-auto mb-3 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <div class="font-medium text-gray-900">ìƒë‹´ ì‹œê°„</div>
                        <div class="text-sm text-gray-600 mt-1">í‰ì¼ 10:00 - 18:00</div>
                    </div>
                </div>
            </div>
        </section>

        <script>
            document.getElementById('contactForm').addEventListener('submit', async (e) => {
                e.preventDefault()
                
                const formData = new FormData(e.target)
                const data = {
                    name: formData.get('name'),
                    email: formData.get('email'),
                    phone: formData.get('phone'),
                    academy_name: formData.get('academy_name'),
                    message: formData.get('message')
                }

                try {
                    const response = await fetch('/api/contact', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    })

                    const result = await response.json()
                    const messageEl = document.getElementById('message')
                    messageEl.classList.remove('hidden')

                    if (result.success) {
                        messageEl.className = 'mt-4 p-4 rounded-xl bg-green-50 text-green-800 border border-green-200'
                        messageEl.textContent = result.message
                        e.target.reset()
                    } else {
                        messageEl.className = 'mt-4 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200'
                        messageEl.textContent = result.error
                    }
                } catch (err) {
                    const messageEl = document.getElementById('message')
                    messageEl.classList.remove('hidden')
                    messageEl.className = 'mt-4 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200'
                    messageEl.textContent = 'ë¬¸ì˜ ì ‘ìˆ˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
                }
            })
        <\/script>
    </body>
    </html>
  `));d.get("/register",e=>e.redirect("/signup"));d.get("/login",e=>{const t=e.env.GOOGLE_CLIENT_ID||"YOUR_GOOGLE_CLIENT_ID",s=e.env.KAKAO_JS_KEY||"YOUR_KAKAO_JS_KEY";return e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë¡œê·¸ì¸ - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
          .gradient-purple {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
          }
        </style>
    </head>
    <body class="bg-gray-50">
        <div class="min-h-screen flex items-center justify-center px-6 py-12">
            <div class="max-w-md w-full">
                <div class="text-center mb-10">
                    <a href="/" class="inline-block mb-6">
                        <span class="text-2xl font-bold text-gray-900">ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</span>
                    </a>
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">ë¡œê·¸ì¸</h1>
                    <p class="text-gray-600">í•™ì› ë§ˆì¼€íŒ… êµìœ¡ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤</p>
                </div>

                <div class="bg-white rounded-2xl border border-gray-200 p-8">
                    <form id="loginForm" class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì´ë©”ì¼</label>
                            <input type="email" name="email" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ë¹„ë°€ë²ˆí˜¸</label>
                            <input type="password" name="password" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition">
                        </div>

                        <button type="submit" class="w-full gradient-purple text-white py-3 rounded-xl font-medium hover:shadow-xl transition-all">
                            ë¡œê·¸ì¸
                        </button>

                        <div id="message" class="hidden mt-4 p-4 rounded-xl"></div>
                    </form>

                    <!-- ì†Œì…œ ë¡œê·¸ì¸ -->
                    <div class="mt-6">
                        <div class="relative">
                            <div class="absolute inset-0 flex items-center">
                                <div class="w-full border-t border-gray-200"></div>
                            </div>
                            <div class="relative flex justify-center text-sm">
                                <span class="px-4 bg-white text-gray-500">ë˜ëŠ” ê°„í¸ ë¡œê·¸ì¸</span>
                            </div>
                        </div>

                        <div class="mt-6 space-y-3">
                            <button onclick="loginWithGoogle()" class="w-full flex items-center justify-center gap-3 px-4 py-3 border border-gray-300 rounded-xl hover:bg-gray-50 transition-all">
                                <svg class="w-5 h-5" viewBox="0 0 24 24">
                                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                                </svg>
                                <span class="font-medium text-gray-700">êµ¬ê¸€ë¡œ ê³„ì†í•˜ê¸°</span>
                            </button>

                            <button onclick="loginWithKakao()" class="w-full flex items-center justify-center gap-3 px-4 py-3 rounded-xl transition-all" style="background-color: #FEE500;">
                                <svg class="w-5 h-5" viewBox="0 0 24 24">
                                    <path fill="#000000" d="M12 3c5.799 0 10.5 3.664 10.5 8.185 0 4.52-4.701 8.184-10.5 8.184a13.5 13.5 0 0 1-1.727-.11l-4.408 2.883c-.501.265-.678.236-.472-.413l.892-3.678c-2.88-1.46-4.785-3.99-4.785-6.866C1.5 6.665 6.201 3 12 3zm5.907 8.06l1.47-1.424a.472.472 0 0 0-.656-.678l-1.928 1.866V9.282a.472.472 0 0 0-.944 0v2.557a.471.471 0 0 0 0 .222V13.5a.472.472 0 0 0 .944 0v-1.363l.427-.413 1.428 2.033a.472.472 0 1 0 .773-.543l-1.514-2.155zm-2.958 1.924h-1.46V9.297a.472.472 0 0 0-.943 0v4.159c0 .26.21.472.471.472h1.932a.472.472 0 1 0 0-.944zm-5.857-1.092l.696-1.707.638 1.707H9.092zm2.523.488l.002-.016a.469.469 0 0 0-.127-.32l-1.046-2.8a.69.69 0 0 0-.627-.474.696.696 0 0 0-.653.447l-1.661 4.075a.472.472 0 0 0 .874.357l.33-.813h2.07l.299.8a.472.472 0 1 0 .884-.33l-.345-.926zM8.294 9.302a.472.472 0 0 0-.471-.472H5.185a.472.472 0 1 0 0 .944h1.039v3.736a.472.472 0 0 0 .943 0V9.774h1.127a.472.472 0 0 0 .47-.472z"/>
                                </svg>
                                <span class="font-medium text-gray-900">ì¹´ì¹´ì˜¤ë¡œ ê³„ì†í•˜ê¸°</span>
                            </button>
                        </div>
                    </div>

                    <div class="mt-6 text-center text-sm text-gray-600">
                        ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <a href="/signup" class="text-purple-600 hover:text-purple-700 font-medium">íšŒì›ê°€ì…</a>
                    </div>
                    
                    <div class="mt-4 pt-4 border-t border-gray-200">
                        <div class="text-center">
                            <p class="text-sm text-gray-600 mb-2">ì„ ìƒë‹˜ì´ì‹ ê°€ìš”?</p>
                            <a href="/teachers/register" class="inline-flex items-center text-sm text-purple-600 hover:text-purple-700 font-medium">
                                <i class="fas fa-chalkboard-teacher mr-2"></i>
                                ì„ ìƒë‹˜ ë“±ë¡í•˜ê¸°
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Google Sign-In SDK -->
        <script src="https://accounts.google.com/gsi/client" async defer><\/script>
        <!-- Kakao SDK -->
        <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.0/kakao.min.js" integrity="sha384-l+xbElFSnPZ2rOaPrU//2FF5B4LB8FiX5q4fXYTlfcG4PGpMkE1vcL7kNXI6Cci0" crossorigin="anonymous"><\/script>

        <script>
            // API í‚¤ ì„¤ì • (ì„œë²„ì—ì„œ ì£¼ì…)
            const GOOGLE_CLIENT_ID = '${t}';
            const KAKAO_JS_KEY = '${s}';
            
            // êµ¬ê¸€ ë¡œê·¸ì¸ ì´ˆê¸°í™”
            function initGoogleSignIn() {
                google.accounts.id.initialize({
                    client_id: GOOGLE_CLIENT_ID,
                    callback: handleGoogleCallback
                })
            }

            // êµ¬ê¸€ ë¡œê·¸ì¸ ì½œë°±
            async function handleGoogleCallback(response) {
                try {
                    // JWT í† í° ë””ì½”ë”©
                    const payload = JSON.parse(atob(response.credential.split('.')[1]))
                    
                    const result = await fetch('/api/auth/google', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            idToken: response.credential,
                            email: payload.email,
                            name: payload.name,
                            picture: payload.picture
                        })
                    })

                    const data = await result.json()
                    
                    if (data.success) {
                        localStorage.setItem('user', JSON.stringify(data.user))
                        showMessage('success', data.message)
                        setTimeout(() => {
                            window.location.href = data.user.role === 'admin' ? '/admin/dashboard' : '/dashboard'
                        }, 1000)
                    } else if (data.needsRegistration) {
                        // íšŒì›ê°€ì… í•„ìš”
                        sessionStorage.setItem('socialData', JSON.stringify(data.socialData))
                        window.location.href = '/signup?from=google'
                    } else {
                        showMessage('error', data.error || 'êµ¬ê¸€ ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
                    }
                } catch (err) {
                    console.error('Google login error:', err)
                    showMessage('error', 'êµ¬ê¸€ ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')
                }
            }

            // êµ¬ê¸€ ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
            function loginWithGoogle() {
                google.accounts.id.prompt()
            }

            // ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì´ˆê¸°í™”
            function initKakaoLogin() {
                if (!Kakao.isInitialized()) {
                    Kakao.init(KAKAO_JS_KEY)
                }
            }

            // ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸
            function loginWithKakao() {
                Kakao.Auth.login({
                    success: async function(authObj) {
                        try {
                            // ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
                            Kakao.API.request({
                                url: '/v2/user/me',
                                success: async function(response) {
                                    const result = await fetch('/api/auth/kakao', {
                                        method: 'POST',
                                        headers: { 'Content-Type': 'application/json' },
                                        body: JSON.stringify({
                                            accessToken: authObj.access_token,
                                            id: response.id,
                                            email: response.kakao_account?.email || '',
                                            nickname: response.properties?.nickname || '',
                                            profile_image: response.properties?.profile_image || ''
                                        })
                                    })

                                    const data = await result.json()
                                    
                                    if (data.success) {
                                        localStorage.setItem('user', JSON.stringify(data.user))
                                        showMessage('success', data.message)
                                        setTimeout(() => {
                                            window.location.href = data.user.role === 'admin' ? '/admin/dashboard' : '/dashboard'
                                        }, 1000)
                                    } else if (data.needsRegistration) {
                                        // íšŒì›ê°€ì… í•„ìš”
                                        sessionStorage.setItem('socialData', JSON.stringify(data.socialData))
                                        window.location.href = '/signup?from=kakao'
                                    } else {
                                        showMessage('error', data.error || 'ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
                                    }
                                },
                                fail: function(error) {
                                    console.error('Kakao API error:', err)
                                    showMessage('error', 'ì¹´ì¹´ì˜¤ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.')
                                }
                            })
                        } catch (err) {
                            console.error('Kakao login error:', err)
                            showMessage('error', 'ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')
                        }
                    },
                    fail: function(err) {
                        console.error('Kakao login failed:', err)
                        showMessage('error', 'ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
                    }
                })
            }

            // ë©”ì‹œì§€ í‘œì‹œ í•¨ìˆ˜
            function showMessage(type, text) {
                const messageEl = document.getElementById('message')
                messageEl.classList.remove('hidden')
                if (type === 'success') {
                    messageEl.className = 'mt-4 p-4 rounded-xl bg-green-50 text-green-800 border border-green-200'
                } else {
                    messageEl.className = 'mt-4 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200'
                }
                messageEl.textContent = text
            }

            // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
            window.addEventListener('load', () => {
                initGoogleSignIn()
                initKakaoLogin()
            })

            document.getElementById('loginForm').addEventListener('submit', async (e) => {
                e.preventDefault()
                
                const formData = new FormData(e.target)
                const data = {
                    email: formData.get('email'),
                    password: formData.get('password')
                }

                try {
                    const response = await fetch('/api/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    })

                    const result = await response.json()
                    const messageEl = document.getElementById('message')
                    messageEl.classList.remove('hidden')

                    if (result.success) {
                        messageEl.className = 'mt-4 p-4 rounded-xl bg-green-50 text-green-800 border border-green-200'
                        messageEl.textContent = result.message
                        localStorage.setItem('user', JSON.stringify(result.user))
                        
                        // ì—­í• ì— ë”°ë¼ ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸
                        setTimeout(() => {
                            if (result.user.role === 'admin') {
                                window.location.href = '/admin/dashboard'
                            } else {
                                window.location.href = '/dashboard'
                            }
                        }, 1000)
                    } else {
                        messageEl.className = 'mt-4 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200'
                        messageEl.textContent = result.error
                    }
                } catch (err) {
                    const messageEl = document.getElementById('message')
                    messageEl.classList.remove('hidden')
                    messageEl.className = 'mt-4 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200'
                    messageEl.textContent = 'ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
                }
            })
        <\/script>
    </body>
    </html>
  `)});d.get("/test-route",e=>e.html("<h1>Test Route Works!</h1>"));d.get("/teachers/register",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ì„ ìƒë‹˜ ë“±ë¡ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gradient-to-br from-purple-50 to-blue-50 min-h-screen flex items-center justify-center p-4">
        <div class="max-w-md w-full">
            <!-- ë¡œê³  -->
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-16 h-16 gradient-purple rounded-2xl mb-4">
                    <i class="fas fa-chalkboard-teacher text-3xl text-white"></i>
                </div>
                <h1 class="text-3xl font-bold text-gray-900 mb-2">ì„ ìƒë‹˜ ë“±ë¡</h1>
                <p class="text-gray-600">í•™ì› ì¸ì¦ ì½”ë“œë¡œ ì„ ìƒë‹˜ ê³„ì •ì„ ë“±ë¡í•˜ì„¸ìš”</p>
            </div>

            <!-- ë“±ë¡ í¼ -->
            <div class="bg-white rounded-2xl shadow-xl p-8">
                <form id="registerForm" onsubmit="handleRegister(event)">
                    <div class="space-y-4">
                        <!-- í•™ì› ì¸ì¦ ì½”ë“œ -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-key text-purple-600 mr-2"></i>í•™ì› ì¸ì¦ ì½”ë“œ *
                            </label>
                            <input 
                                type="text" 
                                name="verificationCode" 
                                required 
                                maxlength="6"
                                placeholder="6ìë¦¬ ì½”ë“œ"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent uppercase"
                            >
                            <p class="text-xs text-gray-500 mt-1">
                                ì›ì¥ë‹˜ìœ¼ë¡œë¶€í„° ë°›ì€ 6ìë¦¬ ì¸ì¦ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”
                            </p>
                        </div>

                        <!-- í•™ì›ëª… -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-school text-purple-600 mr-2"></i>í•™ì›ëª… *
                            </label>
                            <input 
                                type="text" 
                                name="academyName" 
                                required 
                                placeholder="ì˜ˆ: ê¾¸ë©”ë•…í•™ì› ë¶„ë‹¹ì "
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            >
                            <p class="text-xs text-gray-500 mt-1">
                                ì¸ì¦ ì½”ë“œì™€ ì¼ì¹˜í•˜ëŠ” í•™ì›ëª…ì„ ì •í™•íˆ ì…ë ¥í•˜ì„¸ìš”
                            </p>
                        </div>

                        <!-- ì´ë¦„ -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-user text-purple-600 mr-2"></i>ì´ë¦„ *
                            </label>
                            <input 
                                type="text" 
                                name="name" 
                                required 
                                placeholder="í™ê¸¸ë™"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            >
                        </div>

                        <!-- ì´ë©”ì¼ -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-envelope text-purple-600 mr-2"></i>ì´ë©”ì¼ *
                            </label>
                            <input 
                                type="email" 
                                name="email" 
                                required 
                                placeholder="teacher@example.com"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            >
                        </div>

                        <!-- ë¹„ë°€ë²ˆí˜¸ -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-lock text-purple-600 mr-2"></i>ë¹„ë°€ë²ˆí˜¸ *
                            </label>
                            <input 
                                type="password" 
                                name="password" 
                                required 
                                minlength="6"
                                placeholder="ìµœì†Œ 6ì ì´ìƒ"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            >
                        </div>

                        <!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-lock text-purple-600 mr-2"></i>ë¹„ë°€ë²ˆí˜¸ í™•ì¸ *
                            </label>
                            <input 
                                type="password" 
                                name="confirmPassword" 
                                required 
                                minlength="6"
                                placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            >
                        </div>

                        <!-- ì „í™”ë²ˆí˜¸ -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-phone text-purple-600 mr-2"></i>ì „í™”ë²ˆí˜¸
                            </label>
                            <input 
                                type="tel" 
                                name="phone" 
                                placeholder="010-1234-5678"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            >
                        </div>
                    </div>

                    <!-- ì•ˆë‚´ ë©”ì‹œì§€ -->
                    <div class="mt-6 p-4 bg-purple-50 border border-purple-200 rounded-lg">
                        <p class="text-sm text-purple-800">
                            <i class="fas fa-info-circle mr-2"></i>
                            <strong>ë“±ë¡ ì ˆì°¨:</strong> ì‹ ì²­ í›„ ì›ì¥ë‹˜ì˜ ìŠ¹ì¸ì„ ë°›ìœ¼ë©´ ê³„ì •ì´ í™œì„±í™”ë©ë‹ˆë‹¤.
                        </p>
                    </div>

                    <!-- ë²„íŠ¼ -->
                    <button 
                        type="submit" 
                        class="w-full mt-6 gradient-purple text-white py-3 rounded-lg font-medium hover:opacity-90 transition"
                    >
                        <i class="fas fa-user-plus mr-2"></i>ë“±ë¡ ì‹ ì²­
                    </button>
                </form>

                <!-- ë¡œê·¸ì¸ ë§í¬ -->
                <div class="mt-6 text-center">
                    <p class="text-gray-600">
                        ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? 
                        <a href="/login" class="text-purple-600 hover:text-purple-700 font-medium">ë¡œê·¸ì¸</a>
                    </p>
                    <p class="text-gray-600 mt-2">
                        <a href="/" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-home mr-1"></i>í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
                        </a>
                    </p>
                </div>
            </div>

            <!-- ë„ì›€ë§ -->
            <div class="mt-8 text-center">
                <p class="text-sm text-gray-600">
                    <i class="fas fa-question-circle mr-2"></i>
                    ì¸ì¦ ì½”ë“œê°€ ì—†ìœ¼ì‹ ê°€ìš”? ì†Œì† í•™ì› ì›ì¥ë‹˜ê»˜ ë¬¸ì˜í•˜ì„¸ìš”.
                </p>
            </div>
        </div>

        <script>
            async function handleRegister(event) {
                event.preventDefault();
                
                const form = event.target;
                const formData = {
                    verificationCode: form.verificationCode.value.toUpperCase().trim(),
                    academyName: form.academyName.value.trim(),
                    name: form.name.value.trim(),
                    email: form.email.value.trim(),
                    password: form.password.value,
                    phone: form.phone.value.trim()
                };
                
                // ë¹„ë°€ë²ˆí˜¸ í™•ì¸
                if (formData.password !== form.confirmPassword.value) {
                    alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                    return;
                }
                
                try {
                    const response = await fetch('/api/teachers/apply', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(formData)
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        alert(data.message);
                        // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
                        window.location.href = '/login';
                    } else {
                        alert('ì˜¤ë¥˜: ' + data.error);
                    }
                } catch (error) {
                    console.error('Register error:', error);
                    alert('ë“±ë¡ ì‹ ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }
        <\/script>
    </body>
    </html>
  `));d.get("/signup",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>íšŒì›ê°€ì… v2.0 - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
          .gradient-purple {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
          }
        </style>
    </head>
    <body class="bg-gray-50">
        <div class="min-h-screen flex items-center justify-center px-6 py-12">
            <div class="max-w-md w-full">
                <div class="text-center mb-10">
                    <a href="/" class="inline-block mb-6">
                        <span class="text-2xl font-bold text-gray-900">ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</span>
                    </a>
                    <div class="flex items-center justify-center gap-3 mb-2">
                        <h1 class="text-3xl font-bold text-gray-900">íšŒì›ê°€ì…</h1>
                        <span class="px-2 py-1 bg-purple-100 text-purple-700 text-xs font-bold rounded-full">v2.0</span>
                    </div>
                    <p class="text-gray-600">í•™ì› ë§ˆì¼€íŒ… êµìœ¡ì„ ì‹œì‘í•´ë³´ì„¸ìš”</p>
                </div>

                <div class="bg-white rounded-2xl border border-gray-200 p-8">
                    <!-- ê³„ì • ìœ í˜• ì„ íƒ (ë¼ë””ì˜¤ ë²„íŠ¼) -->
                    <div class="mb-6">
                        <label class="block text-lg font-bold text-gray-900 mb-4 text-center">
                            ì–´ë–¤ ê³„ì •ìœ¼ë¡œ ê°€ì…í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
                        </label>
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <label class="relative cursor-pointer">
                                <input type="radio" name="userType" value="director" checked class="peer sr-only" onchange="toggleUserType()">
                                <div class="p-6 border-2 border-gray-300 rounded-xl peer-checked:border-purple-600 peer-checked:bg-purple-50 hover:border-purple-400 transition text-center">
                                    <i class="fas fa-school text-4xl text-purple-600 mb-3 block"></i>
                                    <p class="font-bold text-gray-900 text-lg mb-1">í•™ì›ì¥</p>
                                    <p class="text-xs text-gray-600">í•™ì›ì„ ìš´ì˜í•©ë‹ˆë‹¤</p>
                                </div>
                            </label>
                            <label class="relative cursor-pointer">
                                <input type="radio" name="userType" value="teacher" class="peer sr-only" onchange="toggleUserType()">
                                <div class="p-6 border-2 border-gray-300 rounded-xl peer-checked:border-purple-600 peer-checked:bg-purple-50 hover:border-purple-400 transition text-center">
                                    <i class="fas fa-chalkboard-teacher text-4xl text-purple-600 mb-3 block"></i>
                                    <p class="font-bold text-gray-900 text-lg mb-1">ì„ ìƒë‹˜</p>
                                    <p class="text-xs text-gray-600">í•™ì›ì—ì„œ ê°€ë¥´ì¹©ë‹ˆë‹¤</p>
                                </div>
                            </label>
                        </div>
                    </div>

                    <form id="signupForm" class="space-y-5">
                        <!-- ì„ ìƒë‹˜ ì „ìš© í•„ë“œ -->
                        <div id="teacherFields" class="hidden space-y-5">
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">
                                    <i class="fas fa-key text-purple-600 mr-2"></i>í•™ì› ì¸ì¦ ì½”ë“œ <span class="text-red-500">*</span>
                                </label>
                                <input type="text" name="verificationCode" id="verificationCode" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition uppercase" placeholder="ABC123" maxlength="6">
                                <p class="text-xs text-gray-500 mt-1">ì›ì¥ë‹˜ì—ê²Œ ë°›ì€ 6ìë¦¬ ì½”ë“œ</p>
                            </div>
                        </div>

                        <!-- ê³µí†µ í•„ë“œ -->
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">
                                <span id="nameLabel">ì›ì¥ë‹˜ ì„±í•¨</span> <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="name" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition" placeholder="í™ê¸¸ë™">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì´ë©”ì¼ <span class="text-red-500">*</span></label>
                            <input type="email" name="email" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition" placeholder="example@email.com">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ë¹„ë°€ë²ˆí˜¸ <span class="text-red-500">*</span></label>
                            <input type="password" name="password" required minlength="6" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition" placeholder="ìµœì†Œ 6ì ì´ìƒ">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì—°ë½ì²˜ <span class="text-red-500">*</span></label>
                            <input type="tel" name="phone" required placeholder="010-0000-0000" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">í•™ì› ì´ë¦„ <span class="text-red-500">*</span></label>
                            <input type="text" name="academy_name" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition" placeholder="ê¾¸ë©”ë•…í•™ì›">
                            <p id="academyHint" class="text-xs text-gray-500 mt-1 hidden">ì¸ì¦ ì½”ë“œì™€ ì¼ì¹˜í•˜ëŠ” í•™ì›ëª…ì„ ì •í™•íˆ ì…ë ¥í•˜ì„¸ìš”</p>
                        </div>

                        <!-- ì›ì¥ë‹˜ ì „ìš© í•„ë“œ -->
                        <div id="directorFields">
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">í•™ì› ìœ„ì¹˜</label>
                                <input type="text" name="academy_location" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition" placeholder="ì¸ì²œ ì„œêµ¬ ê²€ë‹¨ë™ (ì„ íƒì‚¬í•­)">
                            </div>
                        </div>

                        <!-- ì„ ìƒë‹˜ ì•ˆë‚´ ë©”ì‹œì§€ -->
                        <div id="teacherNotice" class="hidden bg-purple-50 border border-purple-200 rounded-xl p-4">
                            <p class="text-sm text-purple-800">
                                <i class="fas fa-info-circle mr-2"></i>
                                <strong>ë“±ë¡ ì ˆì°¨:</strong> ì‹ ì²­ í›„ ì›ì¥ë‹˜ì˜ ìŠ¹ì¸ì„ ë°›ìœ¼ë©´ ê³„ì •ì´ í™œì„±í™”ë©ë‹ˆë‹¤.
                            </p>
                        </div>

                        <button type="submit" class="w-full gradient-purple text-white py-3 rounded-xl font-medium hover:shadow-xl transition-all">
                            <span id="submitText">íšŒì›ê°€ì…</span>
                        </button>

                        <div id="message" class="hidden mt-4 p-4 rounded-xl"></div>
                    </form>

                    <div class="mt-6 text-center text-sm text-gray-600">
                        ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? <a href="/login" class="text-purple-600 hover:text-purple-700 font-medium">ë¡œê·¸ì¸</a>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // ë¼ë””ì˜¤ ë²„íŠ¼ í† ê¸€ í•¨ìˆ˜
            function toggleUserType() {
                const userTypeRadio = document.querySelector('input[name="userType"]:checked').value;
                const isTeacher = userTypeRadio === 'teacher';
                
                const teacherFields = document.getElementById('teacherFields');
                const directorFields = document.getElementById('directorFields');
                const teacherNotice = document.getElementById('teacherNotice');
                const academyHint = document.getElementById('academyHint');
                const nameLabel = document.getElementById('nameLabel');
                const submitText = document.getElementById('submitText');
                const verificationCodeInput = document.getElementById('verificationCode');

                if (isTeacher) {
                    // ì„ ìƒë‹˜ ëª¨ë“œ
                    teacherFields.classList.remove('hidden');
                    directorFields.classList.add('hidden');
                    teacherNotice.classList.remove('hidden');
                    academyHint.classList.remove('hidden');
                    nameLabel.textContent = 'ì´ë¦„';
                    submitText.innerHTML = '<i class="fas fa-user-plus mr-2"></i>ì„ ìƒë‹˜ ë“±ë¡ ì‹ ì²­';
                    verificationCodeInput.required = true;
                } else {
                    // ì›ì¥ë‹˜ ëª¨ë“œ
                    teacherFields.classList.add('hidden');
                    directorFields.classList.remove('hidden');
                    teacherNotice.classList.add('hidden');
                    academyHint.classList.add('hidden');
                    nameLabel.textContent = 'ì›ì¥ë‹˜ ì„±í•¨';
                    submitText.textContent = 'íšŒì›ê°€ì…';
                    verificationCodeInput.required = false;
                }
            }

            // í¼ ì œì¶œ
            document.getElementById('signupForm').addEventListener('submit', async (e) => {
                e.preventDefault()
                
                const formData = new FormData(e.target)
                const userTypeRadio = document.querySelector('input[name="userType"]:checked').value;
                const isTeacher = userTypeRadio === 'teacher';
                
                // ì„ ìƒë‹˜ ë“±ë¡ì¸ ê²½ìš°
                if (isTeacher) {
                    const data = {
                        verificationCode: formData.get('verificationCode'),
                        academy_name: formData.get('academy_name'),
                        name: formData.get('name'),
                        email: formData.get('email'),
                        password: formData.get('password'),
                        phone: formData.get('phone')
                    }
                    
                    try {
                        const response = await fetch('/api/teachers/apply', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(data)
                        })

                        const result = await response.json()
                        const messageEl = document.getElementById('message')
                        messageEl.classList.remove('hidden')

                        if (result.success) {
                            messageEl.className = 'mt-4 p-4 rounded-xl bg-green-50 text-green-800 border border-green-200'
                            messageEl.textContent = result.message || 'ë“±ë¡ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì›ì¥ë‹˜ì˜ ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.'
                            e.target.reset()
                            setTimeout(() => {
                                window.location.href = '/login'
                            }, 2000)
                        } else {
                            messageEl.className = 'mt-4 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200'
                            let errorMsg = result.error || 'ë“±ë¡ ì‹ ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
                            if (result.details) {
                                errorMsg += '\\n\\nìƒì„¸: ' + result.details
                            }
                            messageEl.textContent = errorMsg
                            console.error('Error details:', result)
                        }
                    } catch (error) {
                        console.error('Teacher registration error:', error)
                        const messageEl = document.getElementById('message')
                        messageEl.classList.remove('hidden')
                        messageEl.className = 'mt-4 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200'
                        messageEl.textContent = 'ë“±ë¡ ì‹ ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\\n\\n' + error.message
                    }
                    return
                }
                
                // ì›ì¥ë‹˜ íšŒì›ê°€ì…ì¸ ê²½ìš°
                const data = {
                    name: formData.get('name'),
                    email: formData.get('email'),
                    password: formData.get('password'),
                    phone: formData.get('phone'),
                    academy_name: formData.get('academy_name'),
                    academy_location: formData.get('academy_location')
                }

                try {
                    const response = await fetch('/api/signup', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    })

                    const result = await response.json()
                    const messageEl = document.getElementById('message')
                    messageEl.classList.remove('hidden')

                    if (result.success) {
                        messageEl.className = 'mt-4 p-4 rounded-xl bg-green-50 text-green-800 border border-green-200'
                        messageEl.textContent = result.message
                        setTimeout(() => {
                            window.location.href = '/login'
                        }, 1500)
                    } else {
                        messageEl.className = 'mt-4 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200'
                        messageEl.textContent = result.error
                    }
                } catch (err) {
                    const messageEl = document.getElementById('message')
                    messageEl.classList.remove('hidden')
                    messageEl.className = 'mt-4 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200'
                    messageEl.textContent = 'íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
                }
            })
        <\/script>
    </body>
    </html>
  `));d.get("/programs",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>êµìœ¡ í”„ë¡œê·¸ë¨ - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
          .gradient-purple {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
          }
          .gradient-orange {
            background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);
          }
        </style>
    </head>
    <body class="bg-white">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100">
            <div class="max-w-7xl mx-auto px-6 lg:px-8">
                <div class="flex justify-between items-center h-20">
                    <a href="/" class="flex items-center space-x-3">
                        <span class="text-xl font-bold text-gray-900">ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</span>
                    </a>
                    <div class="hidden md:flex items-center space-x-10">
                        <a href="/" class="text-gray-700 hover:text-purple-600 font-medium transition">í™ˆ</a>
                        <a href="/programs" class="text-purple-600 font-medium">êµìœ¡ í”„ë¡œê·¸ë¨</a>
                        <a href="/success" class="text-gray-700 hover:text-purple-600 font-medium transition">ì„±ê³µ ì‚¬ë¡€</a>
                        <a href="/contact" class="text-gray-700 hover:text-purple-600 font-medium transition">ë¬¸ì˜í•˜ê¸°</a>
                        <a href="/login" class="gradient-purple text-white px-6 py-2.5 rounded-full font-medium">ë¡œê·¸ì¸</a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Hero -->
        <section class="pt-32 pb-20 px-6">
            <div class="max-w-7xl mx-auto text-center">
                <h1 class="text-5xl lg:text-6xl font-bold text-gray-900 mb-6">êµìœ¡ í”„ë¡œê·¸ë¨</h1>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    ì‹¤ì „ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ì²´ê³„ì ì¸ í•™ì› ë§ˆì¼€íŒ… êµìœ¡
                </p>
            </div>
        </section>

        <!-- Programs -->
        <section class="pb-24 px-6">
            <div class="max-w-7xl mx-auto space-y-20">
                <!-- Program 1 -->
                <div class="grid lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <div class="inline-block px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-medium mb-4">í”„ë¡œê·¸ë¨ 01</div>
                        <h2 class="text-4xl font-bold text-gray-900 mb-6">ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìƒìœ„ë…¸ì¶œ</h2>
                        <p class="text-xl text-gray-600 mb-8">
                            ì§€ì—­ ê²€ìƒ‰ 1ìœ„ë¥¼ ì°¨ì§€í•˜ëŠ” ì‹¤ì „ ë…¸í•˜ìš°. í•™ì› ìœ„ì¹˜ ê¸°ë°˜ ìµœì í™” ì „ëµìœ¼ë¡œ ì‹ ê·œ í•™ìƒ ìœ ì…ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤.
                        </p>
                        <div class="space-y-4 mb-8">
                            <div class="flex items-start">
                                <svg class="w-6 h-6 text-purple-600 mt-1 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <div>
                                    <div class="font-semibold text-gray-900">í‚¤ì›Œë“œ ë¶„ì„ ë° ìµœì í™”</div>
                                    <div class="text-gray-600 text-sm">í•™ì›ì— ë§ëŠ” ìµœì ì˜ í‚¤ì›Œë“œ ë°œêµ´</div>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <svg class="w-6 h-6 text-purple-600 mt-1 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <div>
                                    <div class="font-semibold text-gray-900">ë¦¬ë·° ê´€ë¦¬ ì „ëµ</div>
                                    <div class="text-gray-600 text-sm">ê¸ì •ì ì¸ ë¦¬ë·° í™•ë³´ ë° ê´€ë¦¬</div>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <svg class="w-6 h-6 text-purple-600 mt-1 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <div>
                                    <div class="font-semibold text-gray-900">ì§€ì—­ SEO ì™„ë²½ ê°€ì´ë“œ</div>
                                    <div class="text-gray-600 text-sm">ì§€ì—­ ê¸°ë°˜ ê²€ìƒ‰ ìµœì í™”</div>
                                </div>
                            </div>
                        </div>
                        <a href="/contact" class="inline-block gradient-purple text-white px-8 py-4 rounded-xl font-medium hover:shadow-xl transition">
                            ë¬¸ì˜í•˜ê¸°
                        </a>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-white rounded-2xl p-12 border border-purple-100">
                        <div class="text-6xl mb-6">ğŸ“</div>
                        <div class="space-y-3 text-gray-700">
                            <div class="flex justify-between items-center p-4 bg-white rounded-xl">
                                <span>êµìœ¡ ê¸°ê°„</span>
                                <span class="font-semibold">4ì£¼</span>
                            </div>
                            <div class="flex justify-between items-center p-4 bg-white rounded-xl">
                                <span>ìˆ˜ê°• ë°©ì‹</span>
                                <span class="font-semibold">ì˜¨ë¼ì¸ + ì˜¤í”„ë¼ì¸</span>
                            </div>
                            <div class="flex justify-between items-center p-4 bg-white rounded-xl">
                                <span>ë‚œì´ë„</span>
                                <span class="font-semibold">ì´ˆê¸‰-ì¤‘ê¸‰</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Program 2 -->
                <div class="grid lg:grid-cols-2 gap-12 items-center">
                    <div class="order-2 lg:order-1">
                        <div class="bg-gradient-to-br from-orange-50 to-white rounded-2xl p-12 border border-orange-100">
                            <div class="text-6xl mb-6">ğŸ“</div>
                            <div class="space-y-3 text-gray-700">
                                <div class="flex justify-between items-center p-4 bg-white rounded-xl">
                                    <span>êµìœ¡ ê¸°ê°„</span>
                                    <span class="font-semibold">4ì£¼</span>
                                </div>
                                <div class="flex justify-between items-center p-4 bg-white rounded-xl">
                                    <span>ìˆ˜ê°• ë°©ì‹</span>
                                    <span class="font-semibold">ì˜¨ë¼ì¸</span>
                                </div>
                                <div class="flex justify-between items-center p-4 bg-white rounded-xl">
                                    <span>ë‚œì´ë„</span>
                                    <span class="font-semibold">ì´ˆê¸‰-ì¤‘ê¸‰</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="order-1 lg:order-2">
                        <div class="inline-block px-4 py-2 bg-orange-100 text-orange-700 rounded-full text-sm font-medium mb-4">í”„ë¡œê·¸ë¨ 02</div>
                        <h2 class="text-4xl font-bold text-gray-900 mb-6">ë¸”ë¡œê·¸ ìƒìœ„ë…¸ì¶œ</h2>
                        <p class="text-xl text-gray-600 mb-8">
                            ë„¤ì´ë²„ ë¸”ë¡œê·¸ ê²€ìƒ‰ ìƒìœ„ê¶Œ ì§„ì… ì „ëµ. SEO ìµœì í™”ë¶€í„° ì½˜í…ì¸  ê¸°íšê¹Œì§€ ì²´ê³„ì ìœ¼ë¡œ í•™ìŠµí•©ë‹ˆë‹¤.
                        </p>
                        <div class="space-y-4 mb-8">
                            <div class="flex items-start">
                                <svg class="w-6 h-6 text-orange-500 mt-1 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <div>
                                    <div class="font-semibold text-gray-900">ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜ ì´í•´</div>
                                    <div class="text-gray-600 text-sm">ë„¤ì´ë²„ ê²€ìƒ‰ ì›ë¦¬ ì™„ë²½ ë§ˆìŠ¤í„°</div>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <svg class="w-6 h-6 text-orange-500 mt-1 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <div>
                                    <div class="font-semibold text-gray-900">ì½˜í…ì¸  ì‘ì„± ê¸°ë²•</div>
                                    <div class="text-gray-600 text-sm">íš¨ê³¼ì ì¸ ë¸”ë¡œê·¸ ê¸€ì“°ê¸°</div>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <svg class="w-6 h-6 text-orange-500 mt-1 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <div>
                                    <div class="font-semibold text-gray-900">íš¨ê³¼ì ì¸ í¬ìŠ¤íŒ… ì „ëµ</div>
                                    <div class="text-gray-600 text-sm">ì£¼ê¸°ì ì¸ ì½˜í…ì¸  ë°œí–‰ ì „ëµ</div>
                                </div>
                            </div>
                        </div>
                        <a href="/contact" class="inline-block gradient-orange text-white px-8 py-4 rounded-xl font-medium hover:shadow-xl transition">
                            ë¬¸ì˜í•˜ê¸°
                        </a>
                    </div>
                </div>

                <!-- Program 3 -->
                <div class="grid lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <div class="inline-block px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-medium mb-4">í”„ë¡œê·¸ë¨ 03</div>
                        <h2 class="text-4xl font-bold text-gray-900 mb-6">í¼ë„ ë§ˆì¼€íŒ…</h2>
                        <p class="text-xl text-gray-600 mb-8">
                            ìƒë‹´ë¶€í„° ë“±ë¡ê¹Œì§€ ìë™í™” ì‹œìŠ¤í…œ êµ¬ì¶•. íš¨ìœ¨ì ì¸ í•™ìƒ ëª¨ì§‘ í”„ë¡œì„¸ìŠ¤ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.
                        </p>
                        <div class="space-y-4 mb-8">
                            <div class="flex items-start">
                                <svg class="w-6 h-6 text-purple-600 mt-1 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <div>
                                    <div class="font-semibold text-gray-900">ê³ ê° ì—¬ì • ì„¤ê³„</div>
                                    <div class="text-gray-600 text-sm">ìƒë‹´-ë“±ë¡ê¹Œì§€ í”„ë¡œì„¸ìŠ¤ ìµœì í™”</div>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <svg class="w-6 h-6 text-purple-600 mt-1 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <div>
                                    <div class="font-semibold text-gray-900">ìë™í™” ë„êµ¬ í™œìš©</div>
                                    <div class="text-gray-600 text-sm">íš¨ìœ¨ì ì¸ ë§ˆì¼€íŒ… ìë™í™”</div>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <svg class="w-6 h-6 text-purple-600 mt-1 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                </svg>
                                <div>
                                    <div class="font-semibold text-gray-900">ì „í™˜ìœ¨ ìµœì í™”</div>
                                    <div class="text-gray-600 text-sm">ìƒë‹´-ë“±ë¡ ì „í™˜ìœ¨ ê·¹ëŒ€í™”</div>
                                </div>
                            </div>
                        </div>
                        <a href="/contact" class="inline-block gradient-purple text-white px-8 py-4 rounded-xl font-medium hover:shadow-xl transition">
                            ë¬¸ì˜í•˜ê¸°
                        </a>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-white rounded-2xl p-12 border border-purple-100">
                        <div class="text-6xl mb-6">âš¡</div>
                        <div class="space-y-3 text-gray-700">
                            <div class="flex justify-between items-center p-4 bg-white rounded-xl">
                                <span>êµìœ¡ ê¸°ê°„</span>
                                <span class="font-semibold">6ì£¼</span>
                            </div>
                            <div class="flex justify-between items-center p-4 bg-white rounded-xl">
                                <span>ìˆ˜ê°• ë°©ì‹</span>
                                <span class="font-semibold">ì˜¨ë¼ì¸ + 1:1 ì»¨ì„¤íŒ…</span>
                            </div>
                            <div class="flex justify-between items-center p-4 bg-white rounded-xl">
                                <span>ë‚œì´ë„</span>
                                <span class="font-semibold">ì¤‘ê¸‰-ê³ ê¸‰</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA -->
        <section class="py-24 px-6 gradient-purple">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-4xl lg:text-5xl font-bold text-white mb-6">
                    ë¬´ë£Œ ìƒë‹´ìœ¼ë¡œ ì‹œì‘í•˜ì„¸ìš”
                </h2>
                <p class="text-xl text-white/90 mb-10">
                    ìš°ë¦¬ í•™ì›ì— ë§ëŠ” êµìœ¡ í”„ë¡œê·¸ë¨ì„ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤
                </p>
                <a href="/contact" class="inline-block bg-white text-purple-600 px-12 py-5 rounded-full text-lg font-medium shadow-xl hover:-translate-y-1 transition">
                    ë¬´ë£Œ ìƒë‹´ ì‹ ì²­
                </a>
            </div>
        </section>
    </body>
    </html>
  `));d.get("/programs",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>êµìœ¡ í”„ë¡œê·¸ë¨ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            .gradient-orange { background: linear-gradient(135deg, #fb923c 0%, #f97316 100%); }
            .card-hover { transition: all 0.3s; }
            .card-hover:hover { transform: translateY(-4px); }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <div class="flex items-center gap-6">
                        <a href="/" class="text-gray-600 hover:text-purple-600">í™ˆ</a>
                        <a href="/programs" class="text-purple-600 font-medium">êµìœ¡ í”„ë¡œê·¸ë¨</a>
                        <a href="/tools" class="text-gray-600 hover:text-purple-600">ë§ˆì¼€íŒ… íˆ´</a>
                        <a href="/contact" class="text-gray-600 hover:text-purple-600">ë¬¸ì˜í•˜ê¸°</a>
                    </div>
                </div>
            </div>
        </nav>

        <div class="max-w-7xl mx-auto px-6 py-12">
            <div class="text-center mb-12">
                <h1 class="text-5xl font-bold text-gray-900 mb-4">êµìœ¡ í”„ë¡œê·¸ë¨</h1>
                <p class="text-xl text-gray-600">ì‹¤ì „ì—ì„œ ë°”ë¡œ ì ìš© ê°€ëŠ¥í•œ í•™ì› ë§ˆì¼€íŒ… ì „ëµ</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <!-- ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ -->
                <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden card-hover">
                    <div class="h-48 bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center">
                        <i class="fas fa-map-marker-alt text-white text-6xl"></i>
                    </div>
                    <div class="p-8">
                        <h2 class="text-2xl font-bold text-gray-900 mb-3">ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤<br>ìƒìœ„ë…¸ì¶œ</h2>
                        <p class="text-gray-600 mb-6">ì§€ì—­ ê²€ìƒ‰ 1ìœ„ ë‹¬ì„±ì„ ìœ„í•œ ì‹¤ì „ ë…¸í•˜ìš°</p>
                        
                        <div class="space-y-2 mb-6">
                            <div class="flex items-center text-sm text-gray-700">
                                <i class="fas fa-check text-purple-600 mr-2"></i>
                                í‚¤ì›Œë“œ ìµœì í™” ì „ëµ
                            </div>
                            <div class="flex items-center text-sm text-gray-700">
                                <i class="fas fa-check text-purple-600 mr-2"></i>
                                ë¦¬ë·° ê´€ë¦¬ ì‹œìŠ¤í…œ
                            </div>
                            <div class="flex items-center text-sm text-gray-700">
                                <i class="fas fa-check text-purple-600 mr-2"></i>
                                ì§€ì—­ SEO ì™„ë²½ ê°€ì´ë“œ
                            </div>
                        </div>

                        <div class="flex items-center justify-between mb-6">
                            <span class="text-2xl font-bold text-purple-600">â‚©300,000</span>
                            <span class="text-sm text-gray-500">4ì£¼ ê³¼ì •</span>
                        </div>

                        <a href="/programs/naver-place" class="block w-full py-3 text-center gradient-purple text-white rounded-xl font-bold hover:shadow-lg transition">
                            ìì„¸íˆ ë³´ê¸°
                        </a>
                    </div>
                </div>

                <!-- ë¸”ë¡œê·¸ ë§ˆì¼€íŒ… -->
                <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden card-hover">
                    <div class="h-48 bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center">
                        <i class="fas fa-blog text-white text-6xl"></i>
                    </div>
                    <div class="p-8">
                        <h2 class="text-2xl font-bold text-gray-900 mb-3">ë¸”ë¡œê·¸<br>ìƒìœ„ë…¸ì¶œ</h2>
                        <p class="text-gray-600 mb-6">ê²€ìƒ‰ ìµœìƒìœ„ ì§„ì…ì„ ìœ„í•œ SEO ì „ëµ</p>
                        
                        <div class="space-y-2 mb-6">
                            <div class="flex items-center text-sm text-gray-700">
                                <i class="fas fa-check text-orange-600 mr-2"></i>
                                ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜ ì™„ë²½ ì´í•´
                            </div>
                            <div class="flex items-center text-sm text-gray-700">
                                <i class="fas fa-check text-orange-600 mr-2"></i>
                                íš¨ê³¼ì ì¸ ê¸€ì“°ê¸° ê¸°ë²•
                            </div>
                            <div class="flex items-center text-sm text-gray-700">
                                <i class="fas fa-check text-orange-600 mr-2"></i>
                                ì½˜í…ì¸  ì „ëµ ìˆ˜ë¦½
                            </div>
                        </div>

                        <div class="flex items-center justify-between mb-6">
                            <span class="text-2xl font-bold text-orange-600">â‚©250,000</span>
                            <span class="text-sm text-gray-500">3ì£¼ ê³¼ì •</span>
                        </div>

                        <a href="/programs/blog" class="block w-full py-3 text-center gradient-orange text-white rounded-xl font-bold hover:shadow-lg transition">
                            ìì„¸íˆ ë³´ê¸°
                        </a>
                    </div>
                </div>

                <!-- í¼ë„ ë§ˆì¼€íŒ… -->
                <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden card-hover">
                    <div class="h-48 bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center">
                        <i class="fas fa-funnel-dollar text-white text-6xl"></i>
                    </div>
                    <div class="p-8">
                        <h2 class="text-2xl font-bold text-gray-900 mb-3">í¼ë„<br>ë§ˆì¼€íŒ…</h2>
                        <p class="text-gray-600 mb-6">24ì‹œê°„ ìë™ í•™ìƒ ëª¨ì§‘ ì‹œìŠ¤í…œ</p>
                        
                        <div class="space-y-2 mb-6">
                            <div class="flex items-center text-sm text-gray-700">
                                <i class="fas fa-check text-purple-600 mr-2"></i>
                                ê³ ê° ì—¬ì • ì™„ë²½ ì„¤ê³„
                            </div>
                            <div class="flex items-center text-sm text-gray-700">
                                <i class="fas fa-check text-purple-600 mr-2"></i>
                                ë§ˆì¼€íŒ… ìë™í™” ë„êµ¬
                            </div>
                            <div class="flex items-center text-sm text-gray-700">
                                <i class="fas fa-check text-purple-600 mr-2"></i>
                                ì „í™˜ìœ¨ ê·¹ëŒ€í™” ì „ëµ
                            </div>
                        </div>

                        <div class="flex items-center justify-between mb-6">
                            <span class="text-2xl font-bold text-purple-600">â‚©400,000</span>
                            <span class="text-sm text-gray-500">6ì£¼ ê³¼ì •</span>
                        </div>

                        <a href="/programs/funnel" class="block w-full py-3 text-center gradient-purple text-white rounded-xl font-bold hover:shadow-lg transition">
                            ìì„¸íˆ ë³´ê¸°
                        </a>
                    </div>
                </div>
            </div>

            <!-- CTA ì„¹ì…˜ -->
            <div class="mt-16 bg-gradient-to-r from-purple-600 to-pink-600 rounded-3xl p-12 text-center text-white">
                <h2 class="text-4xl font-bold mb-4">ì „ì²´ íŒ¨í‚¤ì§€ë¡œ ë” ì €ë ´í•˜ê²Œ!</h2>
                <p class="text-xl mb-8 opacity-90">3ê°œ í”„ë¡œê·¸ë¨ ì „ì²´ ìˆ˜ê°• ì‹œ 30% í• ì¸</p>
                <div class="flex items-center justify-center gap-4 mb-8">
                    <span class="text-3xl line-through opacity-75">â‚©950,000</span>
                    <span class="text-5xl font-bold">â‚©665,000</span>
                </div>
                <a href="/contact" class="inline-block bg-white text-purple-600 px-12 py-4 rounded-full text-lg font-bold hover:shadow-2xl transition">
                    íŒ¨í‚¤ì§€ ë¬¸ì˜í•˜ê¸°
                </a>
            </div>
        </div>
    </body>
    </html>
  `));d.get("/programs",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>êµìœ¡ í”„ë¡œê·¸ë¨ - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link rel="preconnect" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css">
        <style>
          body { font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif; }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- í—¤ë” -->
        <header class="bg-white shadow-sm border-b">
            <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-blue-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <div class="flex gap-8 items-center">
                        <a href="/" class="text-gray-600 hover:text-blue-600">í™ˆ</a>
                        <a href="/programs" class="text-blue-600 font-semibold">êµìœ¡ í”„ë¡œê·¸ë¨</a>
                        <a href="/tools" class="text-gray-600 hover:text-blue-600">ë§ˆì¼€íŒ… íˆ´</a>
                        <a href="/contact" class="text-gray-600 hover:text-blue-600">ë¬¸ì˜í•˜ê¸°</a>
                        <a href="/login" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">ë¡œê·¸ì¸</a>
                    </div>
                </div>
            </nav>
        </header>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <!-- í˜ì´ì§€ í—¤ë” -->
            <div class="text-center mb-16">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">êµìœ¡ í”„ë¡œê·¸ë¨</h1>
                <p class="text-xl text-gray-600">í•™ì› ë§ˆì¼€íŒ… ì „ë¬¸ê°€ê°€ ë˜ê¸° ìœ„í•œ ì‹¤ì „ êµìœ¡ í”„ë¡œê·¸ë¨</p>
            </div>

            <!-- í”„ë¡œê·¸ë¨ ì¹´ë“œ ê·¸ë¦¬ë“œ -->
            <div id="programsGrid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
                <!-- í”„ë¡œê·¸ë¨ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
            </div>

            <!-- CTA ì„¹ì…˜ -->
            <div class="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-12 text-center text-white">
                <h2 class="text-3xl font-bold mb-4">í”„ë¡œê·¸ë¨ ì‹ ì²­í•˜ê¸°</h2>
                <p class="text-xl mb-8 text-blue-100">ì›í•˜ì‹œëŠ” í”„ë¡œê·¸ë¨ì„ ì„ íƒí•˜ê³  ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•˜ì„¸ìš”</p>
                <a href="/contact" class="inline-block px-8 py-4 bg-white text-blue-600 rounded-lg font-semibold hover:bg-blue-50 transition">
                    ë¬¸ì˜í•˜ê¸° â†’
                </a>
            </div>
        </main>

        <script>
          const user = JSON.parse(localStorage.getItem('user') || '{}');
          
          // í”„ë¡œê·¸ë¨ ëª©ë¡ ë°ì´í„°
          const programs = [
            {
              id: 'naver-place',
              name: 'ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìƒìœ„ë…¸ì¶œ',
              description: 'ì§€ì—­ ê²€ìƒ‰ 1ìœ„ë¥¼ ìœ„í•œ ì‹¤ì „ ë…¸í•˜ìš°',
              details: 'ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìµœì í™”, ë¦¬ë·° ê´€ë¦¬, í‚¤ì›Œë“œ ì „ëµ',
              image: '/static/images/naver-place.png',
              icon: 'ğŸ—ºï¸',
              features: ['ì§€ì—­ ê²€ìƒ‰ ìµœì í™”', 'ë¦¬ë·° ê´€ë¦¬ ì „ëµ', 'í‚¤ì›Œë“œ ë¶„ì„', 'ê²½ìŸì‚¬ ë¶„ì„']
            },
            {
              id: 'blog',
              name: 'ë¸”ë¡œê·¸ ìƒìœ„ë…¸ì¶œ',
              description: 'ê²€ìƒ‰ 1í˜ì´ì§€ ì§„ì…ì„ ìœ„í•œ ë¸”ë¡œê·¸ ë§ˆì¼€íŒ…',
              details: 'SEO ìµœì í™”, ì½˜í…ì¸  ì „ëµ, ìœ ì… ì¦ëŒ€ ë°©ë²•',
              image: '/static/images/blog-marketing.png',
              icon: 'ğŸ“',
              features: ['SEO ìµœì í™”', 'ì½˜í…ì¸  ê¸°íš', 'í‚¤ì›Œë“œ ì „ëµ', 'ìœ ì… ë¶„ì„']
            },
            {
              id: 'funnel',
              name: 'í¼ë„ ë§ˆì¼€íŒ…',
              description: 'ìë™í™”ëœ í•™ìƒ ëª¨ì§‘ ì‹œìŠ¤í…œ êµ¬ì¶•',
              details: 'ëœë”©í˜ì´ì§€, ìë™í™” ì‹œìŠ¤í…œ, ì „í™˜ìœ¨ ìµœì í™”',
              image: '/static/images/funnel-marketing.png',
              icon: 'ğŸ¯',
              features: ['ëœë”©í˜ì´ì§€ ì œì‘', 'ë§ˆì¼€íŒ… ìë™í™”', 'ì „í™˜ìœ¨ ìµœì í™”', 'CRM ì‹œìŠ¤í…œ']
            },
            {
              id: 'sns',
              name: 'SNS ë§ˆì¼€íŒ…',
              description: 'ì¸ìŠ¤íƒ€ê·¸ë¨, í˜ì´ìŠ¤ë¶ í™œìš© ì „ëµ',
              details: 'ì½˜í…ì¸  ì œì‘, ê´‘ê³  ìš´ì˜, íŒ”ë¡œì›Œ í™•ë³´',
              icon: 'ğŸ“±',
              features: ['ì½˜í…ì¸  ì œì‘', 'ê´‘ê³  ìš´ì˜', 'íŒ”ë¡œì›Œ í™•ë³´', 'ì¸í”Œë£¨ì–¸ì„œ í˜‘ì—…']
            },
            {
              id: 'video',
              name: 'ì˜ìƒ ë§ˆì¼€íŒ…',
              description: 'ìœ íŠœë¸Œ, ìˆí¼ ì½˜í…ì¸  ì œì‘',
              details: 'ì˜ìƒ ê¸°íš, ì´¬ì˜/í¸ì§‘, ì±„ë„ ìš´ì˜',
              icon: 'ğŸ¥',
              features: ['ì˜ìƒ ê¸°íš', 'ì´¬ì˜/í¸ì§‘', 'ì±„ë„ ìš´ì˜', 'ìœ íŠœë¸Œ SEO']
            },
            {
              id: 'ad',
              name: 'ì˜¨ë¼ì¸ ê´‘ê³ ',
              description: 'ë„¤ì´ë²„, êµ¬ê¸€ ê´‘ê³  ìš´ì˜ ì „ëµ',
              details: 'ê´‘ê³  ì§‘í–‰, ì˜ˆì‚° ê´€ë¦¬, ROI ìµœì í™”',
              icon: 'ğŸ’°',
              features: ['ê´‘ê³  ì§‘í–‰', 'ì˜ˆì‚° ê´€ë¦¬', 'ROI ë¶„ì„', 'A/B í…ŒìŠ¤íŠ¸']
            },
            {
              id: 'community',
              name: 'ì»¤ë®¤ë‹ˆí‹° ë§ˆì¼€íŒ…',
              description: 'í•™ë¶€ëª¨ ì»¤ë®¤ë‹ˆí‹° í™œì„±í™” ì „ëµ',
              details: 'ì»¤ë®¤ë‹ˆí‹° ìš´ì˜, ì´ë²¤íŠ¸ ê¸°íš, êµ¬ì „ ë§ˆì¼€íŒ…',
              icon: 'ğŸ‘¥',
              features: ['ì»¤ë®¤ë‹ˆí‹° ìš´ì˜', 'ì´ë²¤íŠ¸ ê¸°íš', 'êµ¬ì „ ë§ˆì¼€íŒ…', 'í•™ë¶€ëª¨ ì†Œí†µ']
            },
            {
              id: 'branding',
              name: 'ë¸Œëœë”©',
              description: 'í•™ì› ë¸Œëœë“œ ì•„ì´ë´í‹°í‹° êµ¬ì¶•',
              details: 'ë¸Œëœë“œ ì „ëµ, ë¡œê³ /ë””ìì¸, ìŠ¤í† ë¦¬í…”ë§',
              icon: 'ğŸ¨',
              features: ['ë¸Œëœë“œ ì „ëµ', 'ë¡œê³ /ë””ìì¸', 'ìŠ¤í† ë¦¬í…”ë§', 'BI/CI êµ¬ì¶•']
            },
            {
              id: 'data',
              name: 'ê²€ìƒ‰ëŸ‰ ì¡°íšŒ',
              description: 'ë„¤ì´ë²„ ê²€ìƒ‰ëŸ‰ ë° ìˆœìœ„ ë¶„ì„',
              details: 'í‚¤ì›Œë“œ ê²€ìƒ‰ëŸ‰, í”Œë ˆì´ìŠ¤ ìˆœìœ„ ì¡°íšŒ, ê²½ìŸì‚¬ ë¶„ì„',
              icon: 'ğŸ”',
              features: ['ê²€ìƒ‰ëŸ‰ ì¡°íšŒ', 'ìˆœìœ„ í™•ì¸', 'ê²½ìŸì‚¬ ë¶„ì„', 'í‚¤ì›Œë“œ ì¶”ì¶œ']
            },
            {
              id: 'carrot',
              name: 'ë‹¹ê·¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë§ˆì¼€íŒ…',
              description: 'ì§€ì—­ ê¸°ë°˜ ë‹¹ê·¼ë§ˆì¼“ í™œìš© ì „ëµ',
              details: 'ë‹¹ê·¼ ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œí•„, ì§€ì—­ ê´‘ê³ , ë™ë„¤ í™ë³´',
              icon: 'ğŸ¥•',
              features: ['ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œí•„', 'ì§€ì—­ íƒ€ê²ŸíŒ…', 'ë™ë„¤ ê´‘ê³ ', 'ì§ê±°ë˜ ìœ ë„']
            },
            {
              id: 'meta',
              name: 'ë©”íƒ€ ê´‘ê³ ',
              description: 'Facebook/Instagram ê´‘ê³  ìš´ì˜',
              details: 'ë©”íƒ€ ê´‘ê³  ê´€ë¦¬ì, íƒ€ê²ŸíŒ…, ì„±ê³¼ ë¶„ì„',
              icon: 'ğŸ“˜',
              features: ['ê´‘ê³  ê³„ì • ì„¤ì •', 'íƒ€ê²Ÿ ì˜¤ë””ì–¸ìŠ¤', 'í¬ë¦¬ì—ì´í‹°ë¸Œ', 'ROI ìµœì í™”']
            },
            {
              id: 'youtube-ad',
              name: 'ìœ íŠœë¸Œ ê´‘ê³ ',
              description: 'ìœ íŠœë¸Œ ê´‘ê³  ìº í˜ì¸ ìš´ì˜',
              details: 'ìœ íŠœë¸Œ ê´‘ê³  ìœ í˜•, íƒ€ê²ŸíŒ…, ì˜ìƒ ì œì‘',
              icon: 'ğŸ“º',
              features: ['ê´‘ê³  ìœ í˜• ì„ íƒ', 'íƒ€ê²Ÿ ì„¤ì •', 'ì˜ìƒ ì œì‘', 'ì„±ê³¼ ì¸¡ì •']
            },
            {
              id: 'threads',
              name: 'ì“°ë ˆë“œ ë§ˆì¼€íŒ…',
              description: 'Meta Threads í™œìš© ì „ëµ',
              details: 'ì“°ë ˆë“œ ì½˜í…ì¸ , ì»¤ë®¤ë‹ˆí‹° êµ¬ì¶•, ë°”ì´ëŸ´ ë§ˆì¼€íŒ…',
              icon: 'ğŸ§µ',
              features: ['ì½˜í…ì¸  ì „ëµ', 'íŒ”ë¡œì›Œ í™•ë³´', 'íŠ¸ë Œë“œ í™œìš©', 'ì¸ê²Œì´ì§€ë¨¼íŠ¸']
            }
          ];

          // ì‚¬ìš©ì ê¶Œí•œ í™•ì¸
          async function loadPrograms() {
            const grid = document.getElementById('programsGrid');
            
            let userPermissions = [];
            if (user.id) {
              try {
                const response = await fetch(\`/api/user/\${user.id}/permissions\`);
                const data = await response.json();
                userPermissions = data.permissions || [];
              } catch (err) {
                console.error('ê¶Œí•œ ì¡°íšŒ ì‹¤íŒ¨:', err);
              }
            }

            // í”„ë¡œê·¸ë¨ ê¶Œí•œ í•„í„°ë§
            const programPermissions = userPermissions
              .filter(p => p.permission_type === 'program')
              .map(p => p.permission_name);

            // í”„ë¡œê·¸ë¨ ì¹´ë“œ ë Œë”ë§
            programs.forEach(program => {
              const hasPermission = user.role === 'admin' || programPermissions.includes(program.id);
              
              const card = \`
                <div class="bg-white rounded-xl shadow-sm hover:shadow-lg transition p-6 border border-gray-200">
                  <div class="text-5xl mb-4">\${program.icon}</div>
                  <h3 class="text-2xl font-bold text-gray-900 mb-3">\${program.name}</h3>
                  <p class="text-gray-600 mb-4">\${program.description}</p>
                  <p class="text-sm text-gray-500 mb-6">\${program.details}</p>
                  
                  <div class="mb-6">
                    <p class="text-sm font-semibold text-gray-700 mb-2">ì£¼ìš” ë‚´ìš©:</p>
                    <ul class="space-y-1">
                      \${program.features.map(f => \`
                        <li class="text-sm text-gray-600 flex items-center">
                          <span class="text-blue-600 mr-2">âœ“</span> \${f}
                        </li>
                      \`).join('')}
                    </ul>
                  </div>
                  
                  \${hasPermission ? \`
                    <a href="/programs/\${program.id}" 
                       class="block w-full py-3 bg-blue-600 text-white text-center rounded-lg hover:bg-blue-700 transition font-semibold">
                      í”„ë¡œê·¸ë¨ ì‹œì‘í•˜ê¸° â†’
                    </a>
                  \` : \`
                    <button onclick="requestAccess('\${program.id}', '\${program.name}')" 
                            class="w-full py-3 bg-gray-200 text-gray-600 rounded-lg hover:bg-gray-300 transition font-semibold">
                      ğŸ”’ ê¶Œí•œ ìš”ì²­í•˜ê¸°
                    </button>
                  \`}
                </div>
              \`;
              
              grid.innerHTML += card;
            });
          }

          // ê¶Œí•œ ìš”ì²­
          function requestAccess(programId, programName) {
            if (!user.id) {
              alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
              window.location.href = '/login';
              return;
            }
            
            // íŠ¹ì • í”„ë¡œê·¸ë¨ì€ ì§ì ‘ í˜ì´ì§€ë¡œ ì´ë™
            const programUrls = {
              'data': '/tools/search-volume',
              'sms': '/tools/sms-sender',
              'blog': '/tools/blog-writer',
              'landing': '/tools/landing-builder',
              'student': '/students'
            };
            
            if (programUrls[programId]) {
              window.location.href = programUrls[programId];
              return;
            }
            
            alert(\`"\${programName}" í”„ë¡œê·¸ë¨ì— ëŒ€í•œ ê¶Œí•œ ìš”ì²­ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.\\nê´€ë¦¬ì ìŠ¹ì¸ í›„ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\`);
            
            // ì‹¤ì œë¡œëŠ” ê¶Œí•œ ìš”ì²­ API í˜¸ì¶œ
            // ì˜ˆ: POST /api/access-requests { userId, programId, programName }
          }

          // í˜ì´ì§€ ë¡œë“œ ì‹œ í”„ë¡œê·¸ë¨ ëª©ë¡ ë¡œë“œ
          loadPrograms();
        <\/script>
    </body>
    </html>
  `));d.get("/success",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ì„±ê³µ ì‚¬ë¡€ - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
          .gradient-purple {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
          }
        </style>
    </head>
    <body class="bg-white">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100">
            <div class="max-w-7xl mx-auto px-6 lg:px-8">
                <div class="flex justify-between items-center h-20">
                    <a href="/" class="flex items-center space-x-3">
                        <span class="text-xl font-bold text-gray-900">ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</span>
                    </a>
                    <div class="hidden md:flex items-center space-x-10">
                        <a href="/" class="text-gray-700 hover:text-purple-600 font-medium transition">í™ˆ</a>
                        <a href="/programs" class="text-gray-700 hover:text-purple-600 font-medium transition">êµìœ¡ í”„ë¡œê·¸ë¨</a>
                        <a href="/success" class="text-purple-600 font-medium">ì„±ê³µ ì‚¬ë¡€</a>
                        <a href="/contact" class="text-gray-700 hover:text-purple-600 font-medium transition">ë¬¸ì˜í•˜ê¸°</a>
                        <a href="/login" class="gradient-purple text-white px-6 py-2.5 rounded-full font-medium">ë¡œê·¸ì¸</a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Hero -->
        <section class="pt-32 pb-20 px-6">
            <div class="max-w-7xl mx-auto text-center">
                <h1 class="text-5xl lg:text-6xl font-bold text-gray-900 mb-6">ì„±ê³µ ì‚¬ë¡€</h1>
                <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                    500ê°œ ì´ìƒì˜ í•™ì›ì´ ìš°ë¦¬ì™€ í•¨ê»˜ ì„±ì¥í–ˆìŠµë‹ˆë‹¤
                </p>
            </div>
        </section>

        <!-- Success Stories -->
        <section class="pb-24 px-6">
            <div class="max-w-7xl mx-auto grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Story 1 -->
                <div class="bg-gradient-to-br from-purple-50 to-white rounded-2xl p-8 border border-purple-100">
                    <div class="flex items-start gap-4 mb-6">
                        <svg class="w-10 h-10 text-purple-600 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
                        </svg>
                        <div>
                            <div class="text-3xl font-bold text-purple-600 mb-2">2ë°°</div>
                            <div class="text-sm text-gray-600">ì‹ ê·œ ë¬¸ì˜ ì¦ê°€</div>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-6 leading-relaxed">
                        í”Œë ˆì´ìŠ¤ ë§ˆì¼€íŒ… êµìœ¡ì„ ë°›ì€ í›„ 3ê°œì›” ë§Œì— ì‹ ê·œ ë¬¸ì˜ê°€ 2ë°° ì´ìƒ ëŠ˜ì—ˆìŠµë‹ˆë‹¤. ì‹¤ì „ ë…¸í•˜ìš°ê°€ ì •ë§ ëŒ€ë‹¨í•©ë‹ˆë‹¤!
                    </p>
                    <div class="flex items-center gap-3 pt-4 border-t border-purple-100">
                        <div class="w-12 h-12 gradient-purple rounded-xl flex items-center justify-center text-white font-bold">ê¹€</div>
                        <div>
                            <div class="font-bold text-gray-900">ê¹€OO ì›ì¥ë‹˜</div>
                            <div class="text-sm text-gray-600">ì„œìš¸ ê°•ë‚¨êµ¬ ì˜ì–´í•™ì›</div>
                        </div>
                    </div>
                </div>

                <!-- Story 2 -->
                <div class="bg-gradient-to-br from-orange-50 to-white rounded-2xl p-8 border border-orange-100">
                    <div class="flex items-start gap-4 mb-6">
                        <svg class="w-10 h-10 text-orange-500 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
                        </svg>
                        <div>
                            <div class="text-3xl font-bold text-orange-500 mb-2">1ìœ„</div>
                            <div class="text-sm text-gray-600">ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤</div>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-6 leading-relaxed">
                        í‚¤ì›Œë“œ ë¶„ì„ê³¼ ë¦¬ë·° ê´€ë¦¬ ì „ëµì„ ë°°ìš´ í›„ ìš°ë¦¬ í•™ì›ì´ ì§€ì—­ ê²€ìƒ‰ 1ìœ„ì— ì˜¬ëì–´ìš”. ë“±ë¡ ë¬¸ì˜ê°€ ëŠì´ì§€ ì•ŠìŠµë‹ˆë‹¤.
                    </p>
                    <div class="flex items-center gap-3 pt-4 border-t border-orange-100">
                        <div class="w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-500 rounded-xl flex items-center justify-center text-white font-bold">ë°•</div>
                        <div>
                            <div class="font-bold text-gray-900">ë°•OO ì›ì¥ë‹˜</div>
                            <div class="text-sm text-gray-600">ë¶€ì‚° í•´ìš´ëŒ€êµ¬ ìˆ˜í•™í•™ì›</div>
                        </div>
                    </div>
                </div>

                <!-- Story 3 -->
                <div class="bg-gradient-to-br from-purple-50 to-white rounded-2xl p-8 border border-purple-100">
                    <div class="flex items-start gap-4 mb-6">
                        <svg class="w-10 h-10 text-purple-600 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
                        </svg>
                        <div>
                            <div class="text-3xl font-bold text-purple-600 mb-2">3ë°°</div>
                            <div class="text-sm text-gray-600">ë¸”ë¡œê·¸ ìœ ì…</div>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-6 leading-relaxed">
                        ë¸”ë¡œê·¸ ë§ˆì¼€íŒ… ê°•ì˜ë¥¼ ë“£ê³  ì½˜í…ì¸  ì „ëµì„ ë°”ê¿¨ë”ë‹ˆ ë¸”ë¡œê·¸ ìœ ì…ì´ 3ë°°ë¡œ ëŠ˜ì—ˆìŠµë‹ˆë‹¤. í•™ë¶€ëª¨ë‹˜ë“¤ì˜ ì‹ ë¢°ë„ ë†’ì•„ì¡Œì–´ìš”.
                    </p>
                    <div class="flex items-center gap-3 pt-4 border-t border-purple-100">
                        <div class="w-12 h-12 gradient-purple rounded-xl flex items-center justify-center text-white font-bold">ì´</div>
                        <div>
                            <div class="font-bold text-gray-900">ì´OO ì›ì¥ë‹˜</div>
                            <div class="text-sm text-gray-600">ëŒ€ì „ ìœ ì„±êµ¬ ì˜ì–´í•™ì›</div>
                        </div>
                    </div>
                </div>

                <!-- Story 4 -->
                <div class="bg-gradient-to-br from-orange-50 to-white rounded-2xl p-8 border border-orange-100">
                    <div class="flex items-start gap-4 mb-6">
                        <svg class="w-10 h-10 text-orange-500 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
                        </svg>
                        <div>
                            <div class="text-3xl font-bold text-orange-500 mb-2">40%</div>
                            <div class="text-sm text-gray-600">ì „í™˜ìœ¨ ìƒìŠ¹</div>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-6 leading-relaxed">
                        í¼ë„ ë§ˆì¼€íŒ… ì‹œìŠ¤í…œì„ êµ¬ì¶•í•œ í›„ ìƒë‹´-ë“±ë¡ ì „í™˜ìœ¨ì´ 40% ìƒìŠ¹í–ˆìŠµë‹ˆë‹¤. ìë™í™”ë¡œ ì—…ë¬´ íš¨ìœ¨ë„ í¬ê²Œ ê°œì„ ëì–´ìš”.
                    </p>
                    <div class="flex items-center gap-3 pt-4 border-t border-orange-100">
                        <div class="w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-500 rounded-xl flex items-center justify-center text-white font-bold">ìµœ</div>
                        <div>
                            <div class="font-bold text-gray-900">ìµœOO ì›ì¥ë‹˜</div>
                            <div class="text-sm text-gray-600">ì¸ì²œ ì„œêµ¬ ì¢…í•©í•™ì›</div>
                        </div>
                    </div>
                </div>

                <!-- Story 5 -->
                <div class="bg-gradient-to-br from-purple-50 to-white rounded-2xl p-8 border border-purple-100">
                    <div class="flex items-start gap-4 mb-6">
                        <svg class="w-10 h-10 text-purple-600 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
                        </svg>
                        <div>
                            <div class="text-3xl font-bold text-purple-600 mb-2">50ëª…</div>
                            <div class="text-sm text-gray-600">ì‹ ê·œ ë“±ë¡</div>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-6 leading-relaxed">
                        êµìœ¡ ì´ìˆ˜ í›„ 6ê°œì›” ë§Œì— ì‹ ê·œ ë“±ë¡ í•™ìƒì´ 50ëª… ëŠ˜ì—ˆìŠµë‹ˆë‹¤. í•™ì› ìš´ì˜ì´ ì•ˆì •í™”ë˜ê³  ë§¤ì¶œë„ í¬ê²Œ ì¦ê°€í–ˆì–´ìš”.
                    </p>
                    <div class="flex items-center gap-3 pt-4 border-t border-purple-100">
                        <div class="w-12 h-12 gradient-purple rounded-xl flex items-center justify-center text-white font-bold">ì •</div>
                        <div>
                            <div class="font-bold text-gray-900">ì •OO ì›ì¥ë‹˜</div>
                            <div class="text-sm text-gray-600">ê´‘ì£¼ ë¶êµ¬ ì˜ì–´í•™ì›</div>
                        </div>
                    </div>
                </div>

                <!-- Story 6 -->
                <div class="bg-gradient-to-br from-orange-50 to-white rounded-2xl p-8 border border-orange-100">
                    <div class="flex items-start gap-4 mb-6">
                        <svg class="w-10 h-10 text-orange-500 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
                        </svg>
                        <div>
                            <div class="text-3xl font-bold text-orange-500 mb-2">95%</div>
                            <div class="text-sm text-gray-600">ì¬ë“±ë¡ë¥ </div>
                        </div>
                    </div>
                    <p class="text-gray-700 mb-6 leading-relaxed">
                        ë§ˆì¼€íŒ… ìë™í™”ì™€ í•™ë¶€ëª¨ ì†Œí†µ ì „ëµì„ ë°°ìš´ í›„ ì¬ë“±ë¡ë¥ ì´ 95%ë¡œ ì˜¬ëìŠµë‹ˆë‹¤. í•™ìƒ ê´€ë¦¬ë„ í›¨ì”¬ ì²´ê³„ì ì´ì—ìš”.
                    </p>
                    <div class="flex items-center gap-3 pt-4 border-t border-orange-100">
                        <div class="w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-500 rounded-xl flex items-center justify-center text-white font-bold">ê°•</div>
                        <div>
                            <div class="font-bold text-gray-900">ê°•OO ì›ì¥ë‹˜</div>
                            <div class="text-sm text-gray-600">ìˆ˜ì› ì˜í†µêµ¬ ìˆ˜í•™í•™ì›</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stats -->
        <section class="py-24 px-6 bg-gray-50">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold text-gray-900 mb-4">ìˆ«ìë¡œ ë³´ëŠ” ì„±ê³¼</h2>
                    <p class="text-xl text-gray-600">ë°ì´í„°ê°€ ì¦ëª…í•˜ëŠ” í™•ì‹¤í•œ íš¨ê³¼</p>
                </div>
                <div class="grid md:grid-cols-4 gap-8">
                    <div class="text-center">
                        <div class="text-5xl font-bold text-purple-600 mb-2">500+</div>
                        <div class="text-gray-600">êµìœ¡ ìˆ˜ë£Œ í•™ì›</div>
                    </div>
                    <div class="text-center">
                        <div class="text-5xl font-bold text-purple-600 mb-2">95%</div>
                        <div class="text-gray-600">ë§Œì¡±ë„</div>
                    </div>
                    <div class="text-center">
                        <div class="text-5xl font-bold text-purple-600 mb-2">2.5ë°°</div>
                        <div class="text-gray-600">í‰ê·  ë¬¸ì˜ ì¦ê°€</div>
                    </div>
                    <div class="text-center">
                        <div class="text-5xl font-bold text-purple-600 mb-2">85%</div>
                        <div class="text-gray-600">ì¬ìˆ˜ê°•ë¥ </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="py-24 px-6 bg-gray-50">
            <div class="max-w-4xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-4">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h2>
                    <p class="text-xl text-gray-600">í•™ì›ì¥ë‹˜ë“¤ì´ ê°€ì¥ ê¶ê¸ˆí•´í•˜ì‹œëŠ” ì§ˆë¬¸ë“¤ì…ë‹ˆë‹¤</p>
                </div>
                
                <div class="space-y-4">
                    <details class="bg-white rounded-2xl border border-gray-200 overflow-hidden group">
                        <summary class="px-8 py-6 cursor-pointer font-bold text-lg text-gray-900 hover:text-purple-600 transition flex items-center justify-between">
                            <span>ğŸ’° êµìœ¡ ë¹„ìš©ì€ ì–¼ë§ˆì¸ê°€ìš”?</span>
                            <svg class="w-6 h-6 transform group-open:rotate-180 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </summary>
                        <div class="px-8 pb-6 text-gray-600">
                            <p class="mb-4">í”„ë¡œê·¸ë¨ë³„ë¡œ ìƒì´í•˜ë©°, ë¬´ë£Œ ìƒë‹´ì„ í†µí•´ í•™ì› ê·œëª¨ì™€ ëª©í‘œì— ë§ëŠ” ë§ì¶¤ ê²¬ì ì„ ì œê³µí•´ë“œë¦½ë‹ˆë‹¤.</p>
                            <p class="text-sm text-purple-600">í‰ê·  ROI: 340% (íˆ¬ì ëŒ€ë¹„ 3.4ë°° ìˆ˜ìµ)</p>
                        </div>
                    </details>

                    <details class="bg-white rounded-2xl border border-gray-200 overflow-hidden group">
                        <summary class="px-8 py-6 cursor-pointer font-bold text-lg text-gray-900 hover:text-purple-600 transition flex items-center justify-between">
                            <span>â±ï¸ íš¨ê³¼ë¥¼ ë³´ê¸°ê¹Œì§€ ì–¼ë§ˆë‚˜ ê±¸ë¦¬ë‚˜ìš”?</span>
                            <svg class="w-6 h-6 transform group-open:rotate-180 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </summary>
                        <div class="px-8 pb-6 text-gray-600">
                            <p class="mb-2">â€¢ <strong>ì¦‰ì‹œ íš¨ê³¼</strong>: í•™ë¶€ëª¨ ì†Œí†µ ê°œì„  (1ì£¼ì¼ ë‚´)</p>
                            <p class="mb-2">â€¢ <strong>ë‹¨ê¸° íš¨ê³¼</strong>: ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ë¬¸ì˜ ì¦ê°€ (2~4ì£¼)</p>
                            <p>â€¢ <strong>ì¥ê¸° íš¨ê³¼</strong>: ë¸”ë¡œê·¸ ìœ ì… ì¦ê°€, ë¸Œëœë“œ ì¸ì§€ë„ ìƒìŠ¹ (3ê°œì›”~)</p>
                        </div>
                    </details>

                    <details class="bg-white rounded-2xl border border-gray-200 overflow-hidden group">
                        <summary class="px-8 py-6 cursor-pointer font-bold text-lg text-gray-900 hover:text-purple-600 transition flex items-center justify-between">
                            <span>ğŸ¯ ì»´í“¨í„°ë¥¼ ì˜ ëª» ë‹¤ë¤„ë„ ê´œì°®ë‚˜ìš”?</span>
                            <svg class="w-6 h-6 transform group-open:rotate-180 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </summary>
                        <div class="px-8 pb-6 text-gray-600">
                            <p class="mb-4">ë„¤! ì „í˜€ ê±±ì •í•˜ì§€ ì•Šìœ¼ì…”ë„ ë©ë‹ˆë‹¤. ì €í¬ êµìœ¡ì€ ì´ˆë³´ìë„ ì‰½ê²Œ ë”°ë¼í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                            <ul class="space-y-2 text-sm">
                                <li>âœ“ 1:1 ë§ì¶¤ ì§€ë„</li>
                                <li>âœ“ ë‹¨ê³„ë³„ ì˜ìƒ ê°•ì˜</li>
                                <li>âœ“ 24ì‹œê°„ ì¹´ì¹´ì˜¤í†¡ ì§€ì›</li>
                            </ul>
                        </div>
                    </details>

                    <details class="bg-white rounded-2xl border border-gray-200 overflow-hidden group">
                        <summary class="px-8 py-6 cursor-pointer font-bold text-lg text-gray-900 hover:text-purple-600 transition flex items-center justify-between">
                            <span>ğŸ« ì–´ë–¤ í•™ì›ì— ì í•©í•œê°€ìš”?</span>
                            <svg class="w-6 h-6 transform group-open:rotate-180 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </summary>
                        <div class="px-8 pb-6 text-gray-600">
                            <p class="mb-4">ëª¨ë“  ê·œëª¨ì˜ í•™ì›ì— ì í•©í•©ë‹ˆë‹¤:</p>
                            <ul class="space-y-2">
                                <li>â€¢ ì˜ì–´í•™ì›, ìˆ˜í•™í•™ì›, ì¢…í•©í•™ì›</li>
                                <li>â€¢ ì†Œê·œëª¨ ê°œì¸í•™ì› ~ ëŒ€í˜• í”„ëœì°¨ì´ì¦ˆ</li>
                                <li>â€¢ ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸ í•™ì› ëª¨ë‘ ê°€ëŠ¥</li>
                            </ul>
                        </div>
                    </details>

                    <details class="bg-white rounded-2xl border border-gray-200 overflow-hidden group">
                        <summary class="px-8 py-6 cursor-pointer font-bold text-lg text-gray-900 hover:text-purple-600 transition flex items-center justify-between">
                            <span>ğŸ“± ì˜¤í”„ë¼ì¸ ëª¨ì„ë„ ìˆë‚˜ìš”?</span>
                            <svg class="w-6 h-6 transform group-open:rotate-180 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </summary>
                        <div class="px-8 pb-6 text-gray-600">
                            <p class="mb-4">ë„¤! ì •ê¸°ì ìœ¼ë¡œ ì˜¤í”„ë¼ì¸ ì›Œí¬ìƒµê³¼ ë„¤íŠ¸ì›Œí‚¹ ëª¨ì„ì„ ì§„í–‰í•©ë‹ˆë‹¤.</p>
                            <p class="text-sm text-purple-600">â€¢ ì›” 1íšŒ ì˜¤í”„ë¼ì¸ íŠ¹ê°• (ì¸ì²œ/ì„œìš¸)</p>
                            <p class="text-sm text-purple-600">â€¢ ì—° 2íšŒ ì „êµ­ í•™ì›ì¥ ì»¨í¼ëŸ°ìŠ¤</p>
                        </div>
                    </details>

                    <details class="bg-white rounded-2xl border border-gray-200 overflow-hidden group">
                        <summary class="px-8 py-6 cursor-pointer font-bold text-lg text-gray-900 hover:text-purple-600 transition flex items-center justify-between">
                            <span>ğŸ”„ í™˜ë¶ˆ ì •ì±…ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?</span>
                            <svg class="w-6 h-6 transform group-open:rotate-180 transition" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </summary>
                        <div class="px-8 pb-6 text-gray-600">
                            <p class="mb-4">êµìœ¡ ì‹œì‘ í›„ 7ì¼ ì´ë‚´ 100% í™˜ë¶ˆì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                            <p class="text-sm text-gray-500">ë§Œì¡±ë„ 95% ì´ìƒ! ëŒ€ë¶€ë¶„ì˜ í•™ì›ì¥ë‹˜ë“¤ì´ ë§Œì¡±í•˜ì‹œê³  ì¬êµ¬ë§¤í•˜ì‹­ë‹ˆë‹¤.</p>
                        </div>
                    </details>
                </div>

                <div class="mt-12 text-center">
                    <p class="text-gray-600 mb-6">ë” ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹ ê°€ìš”?</p>
                    <a href="/contact" class="inline-block bg-purple-600 text-white px-8 py-4 rounded-full font-medium hover:bg-purple-700 transition">
                        1:1 ë¬´ë£Œ ìƒë‹´ ì‹ ì²­í•˜ê¸°
                    </a>
                </div>
            </div>
        </section>

        <!-- Customer Reviews Slider -->
        <section class="py-24 px-6 bg-white">
            <div class="max-w-6xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-4">ì‹¤ì œ í›„ê¸°</h2>
                    <p class="text-xl text-gray-600">ìŠˆí¼í”Œë ˆì´ìŠ¤ì™€ í•¨ê»˜í•œ í•™ì›ì¥ë‹˜ë“¤ì˜ ìƒìƒí•œ í›„ê¸°ì…ë‹ˆë‹¤</p>
                </div>

                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Review 1 -->
                    <div class="bg-gradient-to-br from-purple-50 to-white p-8 rounded-2xl border border-purple-100 hover:shadow-xl transition">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 bg-purple-600 rounded-full flex items-center justify-center text-white font-bold text-xl">ê¹€</div>
                            <div class="ml-4">
                                <div class="font-bold text-gray-900">ê¹€ì§€ìˆ˜ ì›ì¥ë‹˜</div>
                                <div class="text-sm text-gray-600">ì¸ì²œ ë¶€í‰êµ¬ ì˜ì–´í•™ì›</div>
                            </div>
                        </div>
                        <div class="text-yellow-500 mb-4">â˜…â˜…â˜…â˜…â˜…</div>
                        <p class="text-gray-700 mb-4">"ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ êµìœ¡ ë°›ê³  í•œ ë‹¬ ë§Œì— ë¬¸ì˜ê°€ 3ë°° ëŠ˜ì—ˆì–´ìš”! ì‹¤ì œë¡œ íš¨ê³¼ê°€ ìˆëŠ” ë§ˆì¼€íŒ…ì„ ë°°ìš¸ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤."</p>
                        <div class="text-sm text-purple-600 font-medium">ë¬¸ì˜ ìˆ˜ 3ë°° ì¦ê°€ â†‘</div>
                    </div>

                    <!-- Review 2 -->
                    <div class="bg-gradient-to-br from-orange-50 to-white p-8 rounded-2xl border border-orange-100 hover:shadow-xl transition">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 bg-orange-500 rounded-full flex items-center justify-center text-white font-bold text-xl">ë°•</div>
                            <div class="ml-4">
                                <div class="font-bold text-gray-900">ë°•ë¯¼ì¤€ ì›ì¥ë‹˜</div>
                                <div class="text-sm text-gray-600">ì„œìš¸ ê°•ë‚¨êµ¬ ìˆ˜í•™í•™ì›</div>
                            </div>
                        </div>
                        <div class="text-yellow-500 mb-4">â˜…â˜…â˜…â˜…â˜…</div>
                        <p class="text-gray-700 mb-4">"ë¸”ë¡œê·¸ ìƒìœ„ë…¸ì¶œ ì „ëµì„ ë°°ìš°ê³  ê²€ìƒ‰ ìœ ì…ì´ í­ë°œì ìœ¼ë¡œ ëŠ˜ì—ˆìŠµë‹ˆë‹¤. íˆ¬ì ëŒ€ë¹„ ìµœê³ ì˜ ì„ íƒì´ì—ˆì–´ìš”!"</p>
                        <div class="text-sm text-orange-600 font-medium">ë¸”ë¡œê·¸ ìœ ì… 500% ì¦ê°€ â†‘</div>
                    </div>

                    <!-- Review 3 -->
                    <div class="bg-gradient-to-br from-purple-50 to-white p-8 rounded-2xl border border-purple-100 hover:shadow-xl transition">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 bg-purple-600 rounded-full flex items-center justify-center text-white font-bold text-xl">ì´</div>
                            <div class="ml-4">
                                <div class="font-bold text-gray-900">ì´ì„œì—° ì›ì¥ë‹˜</div>
                                <div class="text-sm text-gray-600">ì¸ì²œ ì„œêµ¬ ì¢…í•©í•™ì›</div>
                            </div>
                        </div>
                        <div class="text-yellow-500 mb-4">â˜…â˜…â˜…â˜…â˜…</div>
                        <p class="text-gray-700 mb-4">"í•™ë¶€ëª¨ ì†Œí†µ ì‹œìŠ¤í…œ ë•ë¶„ì— ì¬ìˆ˜ê°•ë¥ ì´ í¬ê²Œ ì˜¬ëì–´ìš”. ì‹¤ì „ì—ì„œ ë°”ë¡œ ì¨ë¨¹ì„ ìˆ˜ ìˆëŠ” ë…¸í•˜ìš°ê°€ ìµœê³ ì…ë‹ˆë‹¤!"</p>
                        <div class="text-sm text-purple-600 font-medium">ì¬ìˆ˜ê°•ë¥  20% ì¦ê°€ â†‘</div>
                    </div>
                </div>

                <div class="mt-12 text-center">
                    <a href="/success" class="inline-block text-purple-600 font-medium hover:underline">
                        ë” ë§ì€ ì„±ê³µ ì‚¬ë¡€ ë³´ê¸° â†’
                    </a>
                </div>
            </div>
        </section>

        <!-- CTA -->
        <section class="py-24 px-6 gradient-purple">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-4xl lg:text-5xl font-bold text-white mb-6">
                    ë‹¤ìŒ ì„±ê³µ ì‚¬ë¡€ì˜ ì£¼ì¸ê³µì€ ì›ì¥ë‹˜ì…ë‹ˆë‹¤
                </h2>
                <p class="text-xl text-white/90 mb-10">
                    ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•˜ì„¸ìš”
                </p>
                <a href="/contact" class="inline-block bg-white text-purple-600 px-12 py-5 rounded-full text-lg font-medium shadow-xl hover:-translate-y-1 transition">
                    ë¬´ë£Œ ìƒë‹´ ì‹ ì²­
                </a>
            </div>
        </section>
    </body>
    </html>
  `));d.get("/resources",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë§ˆì¼€íŒ… ë¦¬ì†ŒìŠ¤ - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
          .gradient-purple {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
          }
          .resource-card:hover {
            transform: translateY(-4px);
          }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100 shadow-sm">
            <div class="max-w-7xl mx-auto px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <a href="/" class="flex items-center space-x-3">
                        <span class="text-xl font-bold text-gray-900">ìŠˆí¼í”Œë ˆì´ìŠ¤</span>
                    </a>
                    <div class="flex items-center space-x-6">
                        <a href="/dashboard" class="text-gray-600 hover:text-purple-600">ëŒ€ì‹œë³´ë“œ</a>
                        <a href="/resources" class="text-purple-600 font-medium">ë¦¬ì†ŒìŠ¤</a>
                        <a href="/success" class="text-gray-600 hover:text-purple-600">ì„±ê³µì‚¬ë¡€</a>
                        <a href="/about" class="text-gray-600 hover:text-purple-600">íšŒì‚¬ì†Œê°œ</a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Hero -->
        <div class="pt-24 pb-12 px-6 gradient-purple">
            <div class="max-w-7xl mx-auto text-center">
                <h1 class="text-4xl lg:text-5xl font-bold text-white mb-4">í•™ì› ë§ˆì¼€íŒ… ë¦¬ì†ŒìŠ¤</h1>
                <p class="text-xl text-white/90">ì‹¤ì „ì—ì„œ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì²´í¬ë¦¬ìŠ¤íŠ¸ì™€ ê°€ì´ë“œ</p>
            </div>
        </div>

        <!-- Resources Content -->
        <div class="py-12 px-6">
            <div class="max-w-7xl mx-auto">
                
                <!-- ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
                <section class="mb-16">
                    <h2 class="text-3xl font-bold text-gray-900 mb-8">ğŸ“ ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìµœì í™” ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
                    <div class="bg-white rounded-2xl p-8 border border-gray-200 resource-card transition">
                        <div class="grid md:grid-cols-2 gap-8">
                            <div>
                                <h3 class="text-xl font-bold text-purple-600 mb-4">ê¸°ë³¸ ì •ë³´ ì™„ì„±ë„</h3>
                                <ul class="space-y-3 text-gray-700">
                                    <li class="flex items-start">
                                        <span class="text-green-500 mr-2">âœ“</span>
                                        <span><strong>í•™ì›ëª…:</strong> ì§€ì—­ëª… + ê³¼ëª© í¬í•¨ (ì˜ˆ: ì¸ì²œì„œêµ¬ì˜ì–´í•™ì›)</span>
                                    </li>
                                    <li class="flex items-start">
                                        <span class="text-green-500 mr-2">âœ“</span>
                                        <span><strong>ì¹´í…Œê³ ë¦¬:</strong> ì •í™•í•œ ì—…ì¢… ë¶„ë¥˜ (í•™ì› > ì˜ì–´í•™ì›)</span>
                                    </li>
                                    <li class="flex items-start">
                                        <span class="text-green-500 mr-2">âœ“</span>
                                        <span><strong>ì˜ì—…ì‹œê°„:</strong> ì •í™•í•œ ì‹œê°„ëŒ€ ì…ë ¥ (ë³€ë™ ì‹œ ì¦‰ì‹œ ì—…ë°ì´íŠ¸)</span>
                                    </li>
                                    <li class="flex items-start">
                                        <span class="text-green-500 mr-2">âœ“</span>
                                        <span><strong>ì „í™”ë²ˆí˜¸:</strong> í´ë¦­ í†µí™” ê°€ëŠ¥í•œ ë²ˆí˜¸</span>
                                    </li>
                                    <li class="flex items-start">
                                        <span class="text-green-500 mr-2">âœ“</span>
                                        <span><strong>ì£¼ì†Œ:</strong> ì •í™•í•œ ì£¼ì†Œ + ìƒì„¸ ìœ„ì¹˜ (ê±´ë¬¼ëª…, ì¸µìˆ˜)</span>
                                    </li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-purple-600 mb-4">ì½˜í…ì¸  & ì´ë¯¸ì§€</h3>
                                <ul class="space-y-3 text-gray-700">
                                    <li class="flex items-start">
                                        <span class="text-green-500 mr-2">âœ“</span>
                                        <span><strong>ëŒ€í‘œ ì‚¬ì§„:</strong> ë°ê³  ê¹¨ë—í•œ í•™ì› ì „ê²½ (ìµœì†Œ 10ì¥)</span>
                                    </li>
                                    <li class="flex items-start">
                                        <span class="text-green-500 mr-2">âœ“</span>
                                        <span><strong>ê°•ì˜ì‹¤ ì‚¬ì§„:</strong> í•™ìŠµ í™˜ê²½ì´ ì˜ ë³´ì´ëŠ” ì‚¬ì§„</span>
                                    </li>
                                    <li class="flex items-start">
                                        <span class="text-green-500 mr-2">âœ“</span>
                                        <span><strong>ë©”ë‰´/ê°€ê²©:</strong> ê°•ì¢Œë³„ ìƒì„¸ ê°€ê²©í‘œ ë“±ë¡</span>
                                    </li>
                                    <li class="flex items-start">
                                        <span class="text-green-500 mr-2">âœ“</span>
                                        <span><strong>ì†Œê°œê¸€:</strong> 500ì ì´ìƒ, í‚¤ì›Œë“œ 3íšŒ ì´ìƒ í¬í•¨</span>
                                    </li>
                                    <li class="flex items-start">
                                        <span class="text-green-500 mr-2">âœ“</span>
                                        <span><strong>í¬ìŠ¤íŒ…:</strong> ì£¼ 2íšŒ ì´ìƒ ì—…ë°ì´íŠ¸</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="mt-8 p-6 bg-purple-50 rounded-xl">
                            <h4 class="font-bold text-purple-900 mb-3">ğŸ¯ ë¦¬ë·° ê´€ë¦¬ ì „ëµ</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li>â€¢ <strong>ë¦¬ë·° ìš”ì²­:</strong> ìˆ˜ì—… ì¢…ë£Œ í›„ ë§Œì¡±ë„ ë†’ì„ ë•Œ ìš”ì²­</li>
                                <li>â€¢ <strong>ë¹ ë¥¸ ë‹µë³€:</strong> ëª¨ë“  ë¦¬ë·°ì— 24ì‹œê°„ ë‚´ ë‹µë³€</li>
                                <li>â€¢ <strong>ë¶€ì • ë¦¬ë·°:</strong> ê°ì •ì  ëŒ€ì‘ ê¸ˆì§€, ê°œì„  ì˜ì§€ í‘œí˜„</li>
                                <li>â€¢ <strong>ëª©í‘œ:</strong> ì›” 5ê°œ ì´ìƒ ì‹ ê·œ ë¦¬ë·° í™•ë³´</li>
                            </ul>
                        </div>

                        <div class="mt-6 text-center">
                            <button onclick="downloadChecklist('naver')" class="bg-purple-600 text-white px-8 py-3 rounded-full font-medium hover:bg-purple-700 transition">
                                ì²´í¬ë¦¬ìŠ¤íŠ¸ ë‹¤ìš´ë¡œë“œ (PDF)
                            </button>
                        </div>
                    </div>
                </section>

                <!-- ë¸”ë¡œê·¸ í‚¤ì›Œë“œ -->
                <section class="mb-16">
                    <h2 class="text-3xl font-bold text-gray-900 mb-8">ğŸ“ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ… í‚¤ì›Œë“œ ì¶”ì²œ</h2>
                    <div class="grid md:grid-cols-2 gap-8">
                        <!-- ì˜ì–´í•™ì› í‚¤ì›Œë“œ -->
                        <div class="bg-white rounded-2xl p-8 border border-gray-200 resource-card transition">
                            <h3 class="text-xl font-bold text-orange-600 mb-4">ì˜ì–´í•™ì› í‚¤ì›Œë“œ</h3>
                            <div class="space-y-4">
                                <div>
                                    <div class="text-sm text-gray-600 mb-2">ğŸ”¥ í•« í‚¤ì›Œë“œ (ê²€ìƒ‰ëŸ‰ ë†’ìŒ)</div>
                                    <div class="flex flex-wrap gap-2">
                                        <span class="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm">ì´ˆë“±ì˜ì–´í•™ì›</span>
                                        <span class="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm">ì¤‘ë“±ì˜ì–´ë‚´ì‹ </span>
                                        <span class="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm">ì˜ì–´íšŒí™”í•™ì›</span>
                                        <span class="px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm">íŒŒë‹‰ìŠ¤</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="text-sm text-gray-600 mb-2">ğŸ’ ë¡±í…Œì¼ í‚¤ì›Œë“œ (ê²½ìŸ ë‚®ìŒ)</div>
                                    <div class="flex flex-wrap gap-2">
                                        <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm">ì¸ì²œì„œêµ¬ì˜ì–´í•™ì›ì¶”ì²œ</span>
                                        <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm">ì´ˆë“±ì˜ì–´ê³µë¶€ë²•</span>
                                        <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm">ì˜ì–´í•™ì›ì„ íƒê¸°ì¤€</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ìˆ˜í•™í•™ì› í‚¤ì›Œë“œ -->
                        <div class="bg-white rounded-2xl p-8 border border-gray-200 resource-card transition">
                            <h3 class="text-xl font-bold text-purple-600 mb-4">ìˆ˜í•™í•™ì› í‚¤ì›Œë“œ</h3>
                            <div class="space-y-4">
                                <div>
                                    <div class="text-sm text-gray-600 mb-2">ğŸ”¥ í•« í‚¤ì›Œë“œ (ê²€ìƒ‰ëŸ‰ ë†’ìŒ)</div>
                                    <div class="flex flex-wrap gap-2">
                                        <span class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm">ì´ˆë“±ìˆ˜í•™í•™ì›</span>
                                        <span class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm">ì¤‘ë“±ìˆ˜í•™ë‚´ì‹ </span>
                                        <span class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm">ê³ ë“±ìˆ˜í•™</span>
                                        <span class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm">ìˆ˜í•™í•™ì›ë¹„êµ</span>
                                    </div>
                                </div>
                                <div>
                                    <div class="text-sm text-gray-600 mb-2">ğŸ’ ë¡±í…Œì¼ í‚¤ì›Œë“œ (ê²½ìŸ ë‚®ìŒ)</div>
                                    <div class="flex flex-wrap gap-2">
                                        <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm">ìˆ˜í•™ê°œë…í•™ì›</span>
                                        <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm">ì´ˆë“±ìˆ˜í•™ë¬¸ì œì§‘ì¶”ì²œ</span>
                                        <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm">ìˆ˜í•™ì„ í–‰í•™ìŠµ</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- í•™ë¶€ëª¨ ì†Œí†µ ì˜ˆì‹œ -->
                <section class="mb-16">
                    <h2 class="text-3xl font-bold text-gray-900 mb-8">ğŸ’¬ í•™ë¶€ëª¨ ì†Œí†µ ì˜ˆì‹œ ë¬¸êµ¬</h2>
                    <div class="bg-white rounded-2xl p-8 border border-gray-200 resource-card transition">
                        <div class="grid md:grid-cols-3 gap-6">
                            <div class="p-6 bg-green-50 rounded-xl">
                                <h4 class="font-bold text-green-900 mb-3">ğŸ“ˆ ì„±ì  í–¥ìƒ ì‹œ</h4>
                                <p class="text-sm text-gray-700">"í•™ë¶€ëª¨ë‹˜, ì´ë²ˆ ëª¨ì˜ê³ ì‚¬ì—ì„œ ìˆ˜í•™ ë“±ê¸‰ì´ 3ë“±ê¸‰ì—ì„œ 1ë“±ê¸‰ìœ¼ë¡œ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤! ê¾¸ì¤€íˆ ë…¸ë ¥í•œ ê²°ê³¼ê°€ ë“œëŸ¬ë‚˜ê³  ìˆìŠµë‹ˆë‹¤."</p>
                            </div>
                            <div class="p-6 bg-blue-50 rounded-xl">
                                <h4 class="font-bold text-blue-900 mb-3">ğŸ¯ í•™ìŠµ íƒœë„ ê°œì„ </h4>
                                <p class="text-sm text-gray-700">"ìµœê·¼ ìˆ˜ì—… ì°¸ì—¬ë„ê°€ ëˆˆì— ë„ê²Œ ì¢‹ì•„ì¡ŒìŠµë‹ˆë‹¤. ì§ˆë¬¸ë„ ì ê·¹ì ìœ¼ë¡œ í•˜ê³ , ê³¼ì œ ì™„ì„±ë„ë„ ë†’ì•„ì¡Œì–´ìš”. ì´ëŒ€ë¡œë§Œ ê°€ë©´ ë‹¤ìŒ ì‹œí—˜ì—ì„œ ì¢‹ì€ ê²°ê³¼ ê¸°ëŒ€ë©ë‹ˆë‹¤!"</p>
                            </div>
                            <div class="p-6 bg-purple-50 rounded-xl">
                                <h4 class="font-bold text-purple-900 mb-3">ğŸ“š ì¶”ê°€ í•™ìŠµ ì œì•ˆ</h4>
                                <p class="text-sm text-gray-700">"ê¸°ì´ˆê°€ íƒ„íƒ„í•´ì ¸ì„œ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ë„ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì‹¬í™” ê³¼ì •ì„ ì¶”ì²œë“œë¦¬ë©°, ìì„¸í•œ ë‚´ìš©ì€ ìƒë‹´ ì‹œ ë§ì”€ë“œë¦¬ê² ìŠµë‹ˆë‹¤."</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ì›”ë³„ ë§ˆì¼€íŒ… ìº˜ë¦°ë” -->
                <section class="mb-16">
                    <h2 class="text-3xl font-bold text-gray-900 mb-8">ğŸ“… ì›”ë³„ í•™ì› ë§ˆì¼€íŒ… ìº˜ë¦°ë”</h2>
                    <div class="bg-white rounded-2xl p-8 border border-gray-200 resource-card transition">
                        <div class="space-y-6">
                            <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-xl">
                                <div class="w-20 text-center">
                                    <div class="text-2xl font-bold text-purple-600">1~2ì›”</div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-bold text-gray-900 mb-2">ê²¨ìš¸ë°©í•™ íŠ¹ê°• & ì‹ í•™ê¸° ì¤€ë¹„</h4>
                                    <p class="text-sm text-gray-700">â€¢ ê²¨ìš¸ë°©í•™ íŠ¹ê°• í™ë³´<br>â€¢ ì‹ í•™ê¸° ë“±ë¡ ì¡°ê¸° í• ì¸<br>â€¢ í•™ë¶€ëª¨ ì„¤ëª…íšŒ ê°œìµœ</p>
                                </div>
                            </div>

                            <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-xl">
                                <div class="w-20 text-center">
                                    <div class="text-2xl font-bold text-orange-600">3~4ì›”</div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-bold text-gray-900 mb-2">ì‹ í•™ê¸° ì§‘ì¤‘ ë§ˆì¼€íŒ…</h4>
                                    <p class="text-sm text-gray-700">â€¢ ì²« ì¤‘ê°„ê³ ì‚¬ ëŒ€ë¹„ë°˜ í™ë³´<br>â€¢ í•™ë¶€ëª¨ ê°„ë‹´íšŒ<br>â€¢ ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ë¦¬ë·° ì´ë²¤íŠ¸</p>
                                </div>
                            </div>

                            <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-xl">
                                <div class="w-20 text-center">
                                    <div class="text-2xl font-bold text-green-600">5~6ì›”</div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-bold text-gray-900 mb-2">ì¤‘ê°„ê³ ì‚¬ í›„ ì¬ë“±ë¡ ì§‘ì¤‘</h4>
                                    <p class="text-sm text-gray-700">â€¢ ì„±ì  í–¥ìƒ ì‚¬ë¡€ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…<br>â€¢ ê¸°ë§ê³ ì‚¬ ëŒ€ë¹„ë°˜ ì˜ˆì•½<br>â€¢ í˜•ì œ/ìë§¤ í• ì¸ í”„ë¡œëª¨ì…˜</p>
                                </div>
                            </div>

                            <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-xl">
                                <div class="w-20 text-center">
                                    <div class="text-2xl font-bold text-blue-600">7~8ì›”</div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-bold text-gray-900 mb-2">ì—¬ë¦„ë°©í•™ íŠ¹ê°• ì‹œì¦Œ</h4>
                                    <p class="text-sm text-gray-700">â€¢ ì—¬ë¦„ë°©í•™ ì§‘ì¤‘ ìº í”„<br>â€¢ 2í•™ê¸° ì„ í–‰ í•™ìŠµë°˜<br>â€¢ ì¶”ì²œ ì´ë²¤íŠ¸ (ì¹œêµ¬ ë°ë ¤ì˜¤ê¸°)</p>
                                </div>
                            </div>

                            <div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-xl">
                                <div class="w-20 text-center">
                                    <div class="text-2xl font-bold text-purple-600">11~12ì›”</div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-bold text-gray-900 mb-2">ìˆ˜ëŠ¥ & ê¸°ë§ê³ ì‚¬ ë§ˆì¼€íŒ…</h4>
                                    <p class="text-sm text-gray-700">â€¢ ìˆ˜ëŠ¥ ëŒ€ë°• ì´ë²¤íŠ¸<br>â€¢ ì—°ë§ ì¬ë“±ë¡ ì¡°ê¸° í• ì¸<br>â€¢ í•™ë¶€ëª¨ ê°ì‚¬ ì´ë²¤íŠ¸</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

            </div>
        </div>

        <script>
        function downloadChecklist(type) {
            if (type === 'naver') {
                alert('ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.\\n\\nì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” PDF íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë©ë‹ˆë‹¤.');
                // ì‹¤ì œë¡œëŠ” PDF íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë¡œì§ ì¶”ê°€
            }
        }
        <\/script>
    </body>
    </html>
  `));d.get("/dashboard",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ëŒ€ì‹œë³´ë“œ - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
          .gradient-purple {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
          }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100">
            <div class="max-w-7xl mx-auto px-6 lg:px-8">
                <div class="flex justify-between items-center h-20">
                    <div class="flex items-center space-x-3">
                        <span class="text-xl font-bold text-gray-900">í•™ì›ì¥ ëŒ€ì‹œë³´ë“œ</span>
                    </div>
                    <div class="flex items-center space-x-6">
                        <a href="/" class="flex items-center space-x-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white px-5 py-2.5 rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all shadow-md hover:shadow-lg font-medium">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                            </svg>
                            <span>ğŸ  í™ˆìœ¼ë¡œ</span>
                        </a>
                        <div id="smsNavDropdown" class="relative group hidden">
                            <button class="flex items-center space-x-1 text-gray-700 hover:text-purple-600 transition font-medium">
                                <span>ğŸ“± SMS</span>
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div class="hidden group-hover:block absolute top-full right-0 mt-2 w-56 bg-white rounded-lg shadow-xl border border-gray-100 py-2 z-50">
                                <a href="/sms/compose" class="block px-4 py-2 text-gray-700 hover:bg-purple-50 hover:text-purple-600 transition">
                                    âœï¸ ë¬¸ì ì‘ì„±
                                </a>
                                <a href="/sms/senders" class="block px-4 py-2 text-gray-700 hover:bg-purple-50 hover:text-purple-600 transition">
                                    ğŸ“ ë°œì‹ ë²ˆí˜¸ ê´€ë¦¬
                                </a>
                                <a href="/sms/logs" class="block px-4 py-2 text-gray-700 hover:bg-purple-50 hover:text-purple-600 transition">
                                    ğŸ“‹ ë°œì†¡ ë‚´ì—­
                                </a>
                                <a href="/sms/points" class="block px-4 py-2 text-gray-700 hover:bg-purple-50 hover:text-purple-600 transition">
                                    ğŸ’° í¬ì¸íŠ¸ ê´€ë¦¬
                                </a>
                            </div>
                        </div>
                        <span id="userName" class="text-gray-700 font-medium"></span>
                        <a href="/profile" class="text-gray-600 hover:text-purple-600 transition">í”„ë¡œí•„</a>
                        <a id="adminDashboardBtn" href="/admin/dashboard" class="hidden bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition font-medium">
                            ğŸ” ê´€ë¦¬ì ì „ìš© ëŒ€ì‹œë³´ë“œ
                        </a>
                        <button onclick="logout()" class="text-gray-600 hover:text-purple-600 transition">ë¡œê·¸ì•„ì›ƒ</button>
                    </div>
                </div>
            </div>
        </nav>

        <div class="pt-32 pb-24 px-6">
            <div class="max-w-7xl mx-auto">
                <div class="mb-10">
                    <h1 class="text-4xl font-bold text-gray-900 mb-2">ì•ˆë…•í•˜ì„¸ìš”, <span id="userNameDisplay"></span>ë‹˜!</h1>
                    <p class="text-xl text-gray-600">í•™ì› ë§ˆì¼€íŒ… í˜„í™©ì„ í™•ì¸í•˜ì„¸ìš”</p>
                </div>

                <!-- Stats Grid -->
                <div class="grid md:grid-cols-5 gap-6 mb-12">
                    <div class="bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl p-6 text-white shadow-lg">
                        <div class="flex items-center justify-between mb-4">
                            <div class="text-sm text-blue-100">ë³´ìœ  í¬ì¸íŠ¸</div>
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div class="text-4xl font-bold mb-3"><span id="userPoints">0</span>P</div>
                        <div class="space-y-2">
                            <button onclick="openDepositModal()" class="w-full bg-white text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50 transition font-medium text-sm">
                                ğŸ’° ì…ê¸ˆ ì‹ ì²­
                            </button>
                            <a href="/my-deposits" class="block w-full bg-blue-50 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-100 transition font-medium text-sm text-center">
                                ğŸ“‹ ì…ê¸ˆ ë‚´ì—­
                            </a>
                        </div>
                    </div>

                    <div class="bg-white rounded-2xl p-6 border border-gray-200">
                        <div class="flex items-center justify-between mb-4">
                            <div class="text-sm text-gray-600">ìˆ˜ê°• ì¤‘ì¸ í”„ë¡œê·¸ë¨</div>
                            <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                            </svg>
                        </div>
                        <div class="text-3xl font-bold text-gray-900">3ê°œ</div>
                    </div>

                    <div class="bg-white rounded-2xl p-6 border border-gray-200">
                        <div class="flex items-center justify-between mb-4">
                            <div class="text-sm text-gray-600">ì™„ë£Œí•œ ê³¼ì œ</div>
                            <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div class="text-3xl font-bold text-gray-900">12/15</div>
                    </div>

                    <div class="bg-white rounded-2xl p-6 border border-gray-200">
                        <div class="flex items-center justify-between mb-4">
                            <div class="text-sm text-gray-600">í•™ìŠµ ì§„í–‰ë¥ </div>
                            <svg class="w-8 h-8 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <div class="text-3xl font-bold text-gray-900">80%</div>
                    </div>

                    <div class="bg-white rounded-2xl p-6 border border-gray-200">
                        <div class="flex items-center justify-between mb-4">
                            <div class="text-sm text-gray-600">1:1 ì»¨ì„¤íŒ…</div>
                            <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                            </svg>
                        </div>
                        <div class="text-3xl font-bold text-gray-900">2íšŒ</div>
                    </div>
                </div>

                <!-- SMS Quick Access -->
                <div id="smsSection" class="mb-12">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-bold text-gray-900">ğŸ“± SMS ë¬¸ì ë°œì†¡</h2>
                        <a href="/sms/compose" class="bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-lg hover:from-green-700 hover:to-green-800 transition-all shadow-md hover:shadow-lg font-medium flex items-center space-x-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                            </svg>
                            <span>ë¬¸ì ì‘ì„±í•˜ê¸°</span>
                        </a>
                    </div>
                    <div class="grid md:grid-cols-4 gap-6">
                        <a href="/sms/compose" class="block bg-white rounded-xl p-6 border-2 border-gray-200 hover:border-green-500 hover:shadow-lg transition-all">
                            <div class="flex items-center gap-3 mb-3">
                                <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="font-bold text-gray-900">ë¬¸ì ì‘ì„±</h3>
                                    <p class="text-sm text-gray-500">SMS/LMS ë°œì†¡</p>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 leading-relaxed">
                                í•™ë¶€ëª¨ë‹˜ê»˜ ê³µì§€ì‚¬í•­, ìƒë‹´ ì•ˆë‚´, ìˆ˜ì—… ì•Œë¦¼ì„ ê°„í¸í•˜ê²Œ ë°œì†¡í•˜ì„¸ìš”
                            </p>
                        </a>

                        <a href="/sms/senders" class="block bg-white rounded-xl p-6 border-2 border-gray-200 hover:border-blue-500 hover:shadow-lg transition-all">
                            <div class="flex items-center gap-3 mb-3">
                                <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="font-bold text-gray-900">ë°œì‹ ë²ˆí˜¸</h3>
                                    <p class="text-sm text-gray-500">ë²ˆí˜¸ ê´€ë¦¬</p>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 leading-relaxed">
                                ë°œì‹ ë²ˆí˜¸ë¥¼ ë“±ë¡í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”. ì¸ì¦ëœ ë²ˆí˜¸ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤
                            </p>
                        </a>

                        <a href="/sms/logs" class="block bg-white rounded-xl p-6 border-2 border-gray-200 hover:border-purple-500 hover:shadow-lg transition-all">
                            <div class="flex items-center gap-3 mb-3">
                                <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="font-bold text-gray-900">ë°œì†¡ ë‚´ì—­</h3>
                                    <p class="text-sm text-gray-500">ì „ì†¡ ê¸°ë¡</p>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 leading-relaxed">
                                ë¬¸ì ë°œì†¡ ë‚´ì—­ê³¼ í†µê³„ë¥¼ í™•ì¸í•˜ê³  ì„±ê³µ/ì‹¤íŒ¨ ë‚´ì—­ì„ ê´€ë¦¬í•˜ì„¸ìš”
                            </p>
                        </a>

                        <a href="/sms/points" class="block bg-white rounded-xl p-6 border-2 border-gray-200 hover:border-orange-500 hover:shadow-lg transition-all">
                            <div class="flex items-center gap-3 mb-3">
                                <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg flex items-center justify-center">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="font-bold text-gray-900">í¬ì¸íŠ¸</h3>
                                    <p class="text-sm text-gray-500"><span id="dashboardPoints">0</span>P</p>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 leading-relaxed">
                                í¬ì¸íŠ¸ ì”ì•¡ í™•ì¸, ì¶©ì „, ì‚¬ìš© ë‚´ì—­ì„ ê´€ë¦¬í•˜ì„¸ìš”
                            </p>
                        </a>
                    </div>
                </div>

                <!-- Marketing Tools -->
                <div class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ¯ ë§ˆì¼€íŒ… ë„êµ¬</h2>
                    <div class="grid md:grid-cols-2 gap-6">
                        <a href="/tools/search-volume" class="block bg-gradient-to-br from-cyan-500 to-cyan-700 rounded-2xl p-8 hover:shadow-2xl transition-all hover:-translate-y-1">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-14 h-14 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-white">ë„¤ì´ë²„ ê²€ìƒ‰ëŸ‰ ì¡°íšŒ</h3>
                                    <p class="text-cyan-100 text-sm">ì‹¤ì‹œê°„ ê²€ìƒ‰ëŸ‰ ë¶„ì„</p>
                                </div>
                            </div>
                            <p class="text-white/90 leading-relaxed mb-4">
                                í‚¤ì›Œë“œ ê²€ìƒ‰ëŸ‰ê³¼ ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìˆœìœ„ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•˜ì„¸ìš”. ê²½ìŸì‚¬ ë¶„ì„ê³¼ ìµœì  í‚¤ì›Œë“œ ë°œêµ´ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                            </p>
                            <div class="flex items-center text-white font-medium">
                                <span>ë°”ë¡œ ì‚¬ìš©í•˜ê¸°</span>
                                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </div>
                        </a>

                        <a href="/tools/parent-message" class="block bg-gradient-to-br from-purple-500 to-purple-700 rounded-2xl p-8 hover:shadow-2xl transition-all hover:-translate-y-1">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-14 h-14 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-white">í•™ë¶€ëª¨ ì†Œí†µ ì‹œìŠ¤í…œ</h3>
                                    <p class="text-purple-100 text-sm">AI ë©”ì‹œì§€ ìë™ ìƒì„±</p>
                                </div>
                            </div>
                            <p class="text-white/90 leading-relaxed mb-4">
                                ê°„ë‹¨í•œ ë©”ëª¨ë§Œ ì‘ì„±í•˜ë©´ AIê°€ ë”°ëœ»í•œ ë©”ì‹œì§€ë¡œ ë³€í™˜í•´ë“œë¦½ë‹ˆë‹¤. í•™ë¶€ëª¨ë‹˜ê³¼ì˜ ì†Œí†µì´ ë”ìš± í¸ë¦¬í•´ì§‘ë‹ˆë‹¤.
                            </p>
                            <div class="flex items-center text-white font-medium">
                                <span>ë°”ë¡œ ì‚¬ìš©í•˜ê¸°</span>
                                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </div>
                        </a>

                        <a href="/tools/blog-writer" class="block bg-gradient-to-br from-orange-500 to-orange-700 rounded-2xl p-8 hover:shadow-2xl transition-all hover:-translate-y-1">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-14 h-14 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-white">ë¸”ë¡œê·¸ ì‘ì„± ë„êµ¬</h3>
                                    <p class="text-orange-100 text-sm">SEO ìµœì í™” ê¸€ ìƒì„±</p>
                                </div>
                            </div>
                            <p class="text-white/90 leading-relaxed mb-4">
                                ì£¼ì œë§Œ ì…ë ¥í•˜ë©´ ë„¤ì´ë²„ SEOì— ìµœì í™”ëœ ë¸”ë¡œê·¸ ê¸€ì„ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤. ìƒìœ„ë…¸ì¶œì„ ìœ„í•œ í•„ìˆ˜ ë„êµ¬ì…ë‹ˆë‹¤.
                            </p>
                            <div class="flex items-center text-white font-medium">
                                <span>ë°”ë¡œ ì‚¬ìš©í•˜ê¸°</span>
                                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </div>
                        </a>

                        <a href="/tools/landing-builder" class="block bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl p-8 hover:shadow-2xl transition-all hover:-translate-y-1">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-14 h-14 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-white">ëœë”©í˜ì´ì§€ ìƒì„±ê¸°</h3>
                                    <p class="text-blue-100 text-sm">AI ìë™ í˜ì´ì§€ ì œì‘</p>
                                </div>
                            </div>
                            <p class="text-white/90 leading-relaxed mb-4">
                                í•™ì› ì†Œê°œ, í”„ë¡œê·¸ë¨ í™ë³´, í•™ìƒ ë¦¬í¬íŠ¸ í˜ì´ì§€ë¥¼ ê°„ë‹¨í•œ ì…ë ¥ë§Œìœ¼ë¡œ ìë™ ìƒì„±í•©ë‹ˆë‹¤. ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ë°”ë¡œ ê³µìœ í•˜ì„¸ìš”.
                            </p>
                            <div class="flex items-center text-white font-medium">
                                <span>ë°”ë¡œ ì‚¬ìš©í•˜ê¸°</span>
                                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </div>
                        </a>

                        <a href="/tools/sms-sender" class="block bg-gradient-to-br from-green-500 to-green-700 rounded-2xl p-8 hover:shadow-2xl transition-all hover:-translate-y-1">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-14 h-14 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-white">ìë™ ë¬¸ì ë°œì†¡</h3>
                                    <p class="text-green-100 text-sm">í•™ë¶€ëª¨ ì¼ê´„ ë¬¸ì ë°œì†¡</p>
                                </div>
                            </div>
                            <p class="text-white/90 leading-relaxed mb-4">
                                ìˆ˜ì—… ê³µì§€, ê²°ì„ ì•ˆë‚´, ìƒë‹´ ìš”ì²­ì„ í…œí”Œë¦¿ìœ¼ë¡œ ê°„í¸í•˜ê²Œ ë°œì†¡í•˜ì„¸ìš”. ì˜ˆì•½ ë°œì†¡ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                            </p>
                            <div class="flex items-center text-white font-medium">
                                <span>ë°”ë¡œ ì‚¬ìš©í•˜ê¸°</span>
                                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </div>
                        </a>

                        <a href="/students" class="block bg-gradient-to-br from-indigo-500 to-indigo-700 rounded-2xl p-8 hover:shadow-2xl transition-all hover:-translate-y-1">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-14 h-14 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-white">í•™ìƒ ê´€ë¦¬</h3>
                                    <p class="text-indigo-100 text-sm">ì¶œê²°Â·ì„±ì Â·ìƒë‹´ ê¸°ë¡</p>
                                </div>
                            </div>
                            <p class="text-white/90 leading-relaxed mb-4">
                                í•™ìƒ ì •ë³´, ì¶œê²° ê´€ë¦¬, ì„±ì  ê¸°ë¡, ìƒë‹´ ë‚´ì—­ì„ í•œ ê³³ì—ì„œ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ì„¸ìš”.
                            </p>
                            <div class="flex items-center text-white font-medium">
                                <span>ë°”ë¡œ ì‚¬ìš©í•˜ê¸°</span>
                                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </div>
                        </a>

                        <a href="/tools/dashboard-analytics" class="block bg-gradient-to-br from-teal-500 to-teal-700 rounded-2xl p-8 hover:shadow-2xl transition-all hover:-translate-y-1">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-14 h-14 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-white">í†µí•© ë¶„ì„ ëŒ€ì‹œë³´ë“œ</h3>
                                    <p class="text-teal-100 text-sm">ë§¤ì¶œÂ·í•™ìƒÂ·ë§ˆì¼€íŒ… í†µê³„</p>
                                </div>
                            </div>
                            <p class="text-white/90 leading-relaxed mb-4">
                                í•™ì› ìš´ì˜ í˜„í™©ì„ í•œëˆˆì— íŒŒì•…í•˜ê³ , ë°ì´í„° ê¸°ë°˜ ì˜ì‚¬ê²°ì •ì„ í•˜ì„¸ìš”.
                            </p>
                            <div class="flex items-center text-white font-medium">
                                <span>ë°”ë¡œ ì‚¬ìš©í•˜ê¸°</span>
                                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </div>
                        </a>

                        <a href="/tools/ai-learning-report" class="block bg-gradient-to-br from-violet-500 to-fuchsia-700 rounded-2xl p-8 hover:shadow-2xl transition-all hover:-translate-y-1">
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-14 h-14 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center">
                                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                    </svg>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-white">AI í•™ìŠµ ë¶„ì„ ë¦¬í¬íŠ¸</h3>
                                    <p class="text-violet-100 text-sm">ê°œì¸ë³„ ë§ì¶¤ í•™ìŠµ ë¶„ì„</p>
                                </div>
                            </div>
                            <p class="text-white/90 leading-relaxed mb-4">
                                AIê°€ í•™ìƒì˜ ì„±ì , ì¶œì„, í•™ìŠµ íƒœë„ë¥¼ ì¢…í•© ë¶„ì„í•˜ì—¬ ë§ì¶¤í˜• ë¦¬í¬íŠ¸ë¥¼ ìë™ ìƒì„±í•©ë‹ˆë‹¤.
                            </p>
                            <div class="flex items-center text-white font-medium">
                                <span>ë°”ë¡œ ì‚¬ìš©í•˜ê¸°</span>
                                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </div>
                        </a>
                    </div>
                </div>

                <!-- My Landing Pages Section -->
                <div id="landingSection" class="mb-12">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-900">ğŸš€ ë‚´ ëœë”©í˜ì´ì§€</h2>
                        <div class="flex gap-3">
                            <a href="/tools/landing-builder" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium text-sm">
                                + ìƒˆ ëœë”©í˜ì´ì§€
                            </a>
                            <a href="/tools/landing-manager" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition font-medium text-sm">
                                ì „ì²´ ê´€ë¦¬
                            </a>
                        </div>
                    </div>
                    <div id="landingPagesContainer" class="grid md:grid-cols-3 gap-6">
                        <div class="col-span-3 text-center py-12 text-gray-500">
                            ë¡œë”© ì¤‘...
                        </div>
                    </div>
                </div>

                <!-- Content Grid -->
                <div class="grid lg:grid-cols-2 gap-8">
                    <!-- My Programs -->
                    <div class="bg-white rounded-2xl p-8 border border-gray-200">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">ìˆ˜ê°• ì¤‘ì¸ í”„ë¡œê·¸ë¨</h2>
                        <div class="space-y-4">
                            <div class="p-5 bg-purple-50 rounded-xl border border-purple-100">
                                <div class="flex justify-between items-start mb-3">
                                    <div>
                                        <div class="font-bold text-gray-900 mb-1">ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìƒìœ„ë…¸ì¶œ</div>
                                        <div class="text-sm text-gray-600">ì§„í–‰ë¥  90%</div>
                                    </div>
                                    <span class="px-3 py-1 bg-purple-600 text-white text-xs rounded-full">ì§„í–‰ì¤‘</span>
                                </div>
                                <div class="w-full bg-purple-200 rounded-full h-2">
                                    <div class="bg-purple-600 h-2 rounded-full" style="width: 90%"></div>
                                </div>
                            </div>

                            <div class="p-5 bg-orange-50 rounded-xl border border-orange-100">
                                <div class="flex justify-between items-start mb-3">
                                    <div>
                                        <div class="font-bold text-gray-900 mb-1">ë¸”ë¡œê·¸ ìƒìœ„ë…¸ì¶œ</div>
                                        <div class="text-sm text-gray-600">ì§„í–‰ë¥  75%</div>
                                    </div>
                                    <span class="px-3 py-1 bg-orange-500 text-white text-xs rounded-full">ì§„í–‰ì¤‘</span>
                                </div>
                                <div class="w-full bg-orange-200 rounded-full h-2">
                                    <div class="bg-orange-500 h-2 rounded-full" style="width: 75%"></div>
                                </div>
                            </div>

                            <div class="p-5 bg-purple-50 rounded-xl border border-purple-100">
                                <div class="flex justify-between items-start mb-3">
                                    <div>
                                        <div class="font-bold text-gray-900 mb-1">í¼ë„ ë§ˆì¼€íŒ…</div>
                                        <div class="text-sm text-gray-600">ì§„í–‰ë¥  60%</div>
                                    </div>
                                    <span class="px-3 py-1 bg-purple-600 text-white text-xs rounded-full">ì§„í–‰ì¤‘</span>
                                </div>
                                <div class="w-full bg-purple-200 rounded-full h-2">
                                    <div class="bg-purple-600 h-2 rounded-full" style="width: 60%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Links -->
                    <div class="bg-white rounded-2xl p-8 border border-gray-200">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">ë°”ë¡œê°€ê¸°</h2>
                        <div class="space-y-3">
                            <a href="/programs" class="flex items-center justify-between p-5 bg-gray-50 rounded-xl hover:bg-gray-100 transition">
                                <div class="flex items-center">
                                    <svg class="w-6 h-6 text-purple-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                    </svg>
                                    <span class="font-medium text-gray-900">êµìœ¡ í”„ë¡œê·¸ë¨</span>
                                </div>
                                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </a>

                            <a href="/success" class="flex items-center justify-between p-5 bg-gray-50 rounded-xl hover:bg-gray-100 transition">
                                <div class="flex items-center">
                                    <svg class="w-6 h-6 text-purple-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
                                    </svg>
                                    <span class="font-medium text-gray-900">ì„±ê³µ ì‚¬ë¡€</span>
                                </div>
                                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </a>

                            <a href="/resources" class="flex items-center justify-between p-5 bg-gradient-to-r from-purple-50 to-orange-50 rounded-xl hover:shadow-md transition border-2 border-purple-200">
                                <div class="flex items-center">
                                    <svg class="w-6 h-6 text-purple-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                                    </svg>
                                    <div>
                                        <div class="font-bold text-gray-900">ë§ˆì¼€íŒ… ë¦¬ì†ŒìŠ¤</div>
                                        <div class="text-xs text-gray-600">ì²´í¬ë¦¬ìŠ¤íŠ¸ & ê°€ì´ë“œ</div>
                                    </div>
                                </div>
                                <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </a>

                            <a href="/contact" class="flex items-center justify-between p-5 bg-gray-50 rounded-xl hover:bg-gray-100 transition">
                                <div class="flex items-center">
                                    <svg class="w-6 h-6 text-purple-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                                    </svg>
                                    <span class="font-medium text-gray-900">1:1 ìƒë‹´ ì‹ ì²­</span>
                                </div>
                                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </a>

                            <a href="/" class="flex items-center justify-between p-5 bg-gray-50 rounded-xl hover:bg-gray-100 transition">
                                <div class="flex items-center">
                                    <svg class="w-6 h-6 text-purple-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                                    </svg>
                                    <span class="font-medium text-gray-900">ë©”ì¸ í˜ì´ì§€</span>
                                </div>
                                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // Check authentication
            const user = JSON.parse(localStorage.getItem('user') || 'null')
            const isImpersonating = localStorage.getItem('is_impersonating') === 'true'
            
            if (!user) {
                window.location.href = '/login'
            } else {
                document.getElementById('userName').textContent = user.name
                document.getElementById('userNameDisplay').textContent = user.name
                
                // ê´€ë¦¬ìì¼ ê²½ìš° ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë²„íŠ¼ í‘œì‹œ
                if (user.role === 'admin') {
                    document.getElementById('adminDashboardBtn').classList.remove('hidden')
                }
                
                // Impersonating ì¤‘ì´ë©´ ë³µê·€ ë²„íŠ¼ í‘œì‹œ
                if (isImpersonating) {
                    const nav = document.querySelector('nav .flex.items-center.space-x-4')
                    if (nav) {
                        const returnBtn = document.createElement('button')
                        returnBtn.onclick = returnToAdmin
                        returnBtn.className = 'px-4 py-2 bg-red-500 text-white rounded-lg font-medium hover:bg-red-600 transition-all'
                        returnBtn.innerHTML = 'ğŸ”™ ê´€ë¦¬ìë¡œ ëŒì•„ê°€ê¸°'
                        nav.insertBefore(returnBtn, nav.firstChild)
                    }
                }
                
                // ê¶Œí•œ ì²´í¬ ë° UI í‘œì‹œ/ìˆ¨ê¹€
                checkPermissions()
            }
            
            // ê¶Œí•œ ì²´í¬ í•¨ìˆ˜
            async function checkPermissions() {
                try {
                    const response = await fetch('/api/user/permissions?userId=' + user.id)
                    const data = await response.json()
                    
                    console.log('ğŸ” checkPermissions - ê¶Œí•œ ì¡°íšŒ ê²°ê³¼:', data)
                    
                    if (data.success) {
                        const permissions = data.permissions
                        console.log('âœ… checkPermissions - í˜„ì¬ ê¶Œí•œ:', permissions)
                        
                        // ê´€ë¦¬ìëŠ” ëª¨ë“  ë„êµ¬ í‘œì‹œ
                        if (user.role === 'admin') {
                            console.log('âœ… ê´€ë¦¬ì ê³„ì • - ëª¨ë“  ë„êµ¬ í‘œì‹œ')
                            // ê´€ë¦¬ìëŠ” SMS ì„¹ì…˜ê³¼ ë„¤ë¹„ê²Œì´ì…˜ë„ ëª¨ë‘ í‘œì‹œ
                            const smsSection = document.getElementById('smsSection')
                            if (smsSection) smsSection.style.display = 'block'
                            const smsNavDropdown = document.getElementById('smsNavDropdown')
                            if (smsNavDropdown) smsNavDropdown.classList.remove('hidden')
                            return
                        }
                        
                        // ê° ë„êµ¬ë³„ ê¶Œí•œ ì²´í¬ ë° ìˆ¨ê¹€ ì²˜ë¦¬
                        const toolMapping = {
                            'search_volume': 'a[href="/tools/search-volume"]',
                            'parent_message': 'a[href="/tools/parent-message"]',
                            'blog_writer': 'a[href="/tools/blog-writer"]',
                            'landing_builder': 'a[href="/tools/landing-builder"]',
                            'sms_sender': 'a[href="/tools/sms-sender"]',
                            'student_management': 'a[href="/students"]',
                            'dashboard_analytics': 'a[href="/tools/dashboard-analytics"]',
                            'ai_learning_report': 'a[href="/tools/ai-learning-report"]',
                            'keyword_analyzer': 'a[href="/tools/keyword-analyzer"]',
                            'review_template': 'a[href="/tools/review-template"]',
                            'ad_copy_generator': 'a[href="/tools/ad-copy-generator"]',
                            'photo_optimizer': 'a[href="/tools/photo-optimizer"]',
                            'competitor_analysis': 'a[href="/tools/competitor-analysis"]',
                            'blog_checklist': 'a[href="/tools/blog-checklist"]',
                            'content_calendar': 'a[href="/tools/content-calendar"]',
                            'consultation_script': 'a[href="/tools/consultation-script"]',
                            'place_optimization': 'a[href="/tools/place-optimization"]',
                            'roi_calculator': 'a[href="/tools/roi-calculator"]'
                        }
                        
                        // ëª¨ë“  ë„êµ¬ ì¹´ë“œë¥¼ ë¨¼ì € ìˆ¨ê¹€
                        Object.values(toolMapping).forEach(selector => {
                            const elements = document.querySelectorAll(selector)
                            elements.forEach(el => {
                                el.style.display = 'none'
                            })
                        })
                        
                        // ê¶Œí•œì´ ìˆëŠ” ë„êµ¬ë§Œ í‘œì‹œ
                        Object.keys(permissions).forEach(permKey => {
                            if (permissions[permKey] && toolMapping[permKey]) {
                                const elements = document.querySelectorAll(toolMapping[permKey])
                                elements.forEach(el => {
                                    el.style.display = ''
                                })
                                console.log('âœ… ê¶Œí•œ ìˆìŒ:', permKey)
                            }
                        })
                        
                        // SMS ë„¤ë¹„ê²Œì´ì…˜ ë“œë¡­ë‹¤ìš´ ë° ì„¹ì…˜ (sms ë˜ëŠ” sms_sender ê¶Œí•œìœ¼ë¡œ ì²´í¬ - í˜¸í™˜ì„±)
                        if (permissions.sms || permissions.sms_sender) {
                            document.getElementById('smsNavDropdown')?.classList.remove('hidden')
                            document.getElementById('smsQuickAccess')?.classList.remove('hidden')
                            const smsSection = document.getElementById('smsSection')
                            if (smsSection) {
                                smsSection.style.display = 'block'
                            }
                            console.log('âœ… SMS ê¶Œí•œ ìˆìŒ (sms ë˜ëŠ” sms_sender)')
                        } else {
                            // SMS ê¶Œí•œì´ ì—†ìœ¼ë©´ ìˆ¨ê¹€
                            const smsSection = document.getElementById('smsSection')
                            if (smsSection) {
                                smsSection.style.display = 'none'
                            }
                            console.log('âŒ SMS ê¶Œí•œ ì—†ìŒ')
                        }
                    }
                } catch (err) {
                    console.error('ê¶Œí•œ ì¡°íšŒ ì‹¤íŒ¨:', err)
                    // ì—ëŸ¬ ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë‘ ìˆ¨ê¹€ (ê´€ë¦¬ìëŠ” ì œì™¸)
                    if (user.role !== 'admin') {
                        // ëª¨ë“  ë„êµ¬ ì¹´ë“œ ìˆ¨ê¸°ê¸°
                        const allTools = document.querySelectorAll('a[href^="/tools/"], a[href="/students"]')
                        allTools.forEach(tool => {
                            tool.style.display = 'none'
                        })
                    }
                }
            }
            
            // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
            checkUserPermissions()
            loadUserPoints()
            loadMyLandingPages()

            function returnToAdmin() {
                const originalAdmin = JSON.parse(localStorage.getItem('original_admin'))
                if (originalAdmin) {
                    localStorage.setItem('user', JSON.stringify(originalAdmin))
                    localStorage.removeItem('original_admin')
                    localStorage.removeItem('is_impersonating')
                    alert('ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ ë³µê·€í•©ë‹ˆë‹¤.')
                    window.location.href = '/admin/users.html'
                }
            }

            function logout() {
                localStorage.removeItem('user')
                localStorage.removeItem('original_admin')
                localStorage.removeItem('is_impersonating')
                window.location.href = '/'
            }

            // í¬ì¸íŠ¸ ì‹¤ì‹œê°„ ë¡œë“œ
            async function loadUserPoints() {
                const user = JSON.parse(localStorage.getItem('user'))
                if (user && user.id) {
                    try {
                        const response = await fetch('/api/users/' + user.id + '/points')
                        const data = await response.json()
                        if (data.success) {
                            const points = data.points || 0
                            document.getElementById('userPoints').textContent = points.toLocaleString()
                            // SMS ì„¹ì…˜ì˜ í¬ì¸íŠ¸ë„ ì—…ë°ì´íŠ¸
                            const dashboardPointsEl = document.getElementById('dashboardPoints')
                            if (dashboardPointsEl) {
                                dashboardPointsEl.textContent = points.toLocaleString()
                            }
                            
                            // localStorageë„ ì—…ë°ì´íŠ¸
                            user.points = points
                            localStorage.setItem('user', JSON.stringify(user))
                        }
                    } catch (err) {
                        console.error('í¬ì¸íŠ¸ ë¡œë“œ ì‹¤íŒ¨:', err)
                    }
                }
            }

            // ì‚¬ìš©ì ê¶Œí•œ í™•ì¸ ë° ë©”ë‰´ í‘œì‹œ/ìˆ¨ê¹€
            async function checkUserPermissions() {
                const user = JSON.parse(localStorage.getItem('user'))
                if (!user || !user.id) return
                
                try {
                    const response = await fetch('/api/user/permissions?userId=' + user.id)
                    const data = await response.json()
                    
                    console.log('ğŸ” ì‚¬ìš©ì ê¶Œí•œ ì¡°íšŒ ê²°ê³¼:', data)
                    
                    if (data.success && data.permissions) {
                        const permissions = data.permissions
                        console.log('âœ… í˜„ì¬ ì‚¬ìš©ì ê¶Œí•œ:', permissions)
                        
                        // search_volume ê¶Œí•œ ì²´í¬ - ë„¤ì´ë²„ ê²€ìƒ‰ëŸ‰ ì¡°íšŒ
                        const searchVolumeCard = document.querySelector('a[href="/tools/search-volume"]')
                        if (searchVolumeCard) {
                            if (!permissions.search_volume) {
                                searchVolumeCard.style.display = 'none'
                                console.log('âŒ search_volume ê¶Œí•œ ì—†ìŒ - ì¹´ë“œ ìˆ¨ê¹€')
                            } else {
                                console.log('âœ… search_volume ê¶Œí•œ ìˆìŒ - ì¹´ë“œ í‘œì‹œ')
                            }
                        }
                        
                        // sms ê¶Œí•œ ì²´í¬ - SMS ë¬¸ì ë°œì†¡ (sms ë˜ëŠ” sms_sender í˜¸í™˜ì„±)
                        const smsSection = document.getElementById('smsSection')
                        if (smsSection) {
                            if (!permissions.sms && !permissions.sms_sender) {
                                smsSection.style.display = 'none'
                                console.log('âŒ sms ê¶Œí•œ ì—†ìŒ - SMS ì„¹ì…˜ ìˆ¨ê¹€')
                            } else {
                                smsSection.style.display = 'block'
                                console.log('âœ… sms ê¶Œí•œ ìˆìŒ - SMS ì„¹ì…˜ í‘œì‹œ')
                            }
                        }
                        
                        // SMS ë„¤ë¹„ê²Œì´ì…˜ ë“œë¡­ë‹¤ìš´ë„ sms ë˜ëŠ” sms_sender ê¶Œí•œìœ¼ë¡œ ì²´í¬
                        const smsNavDropdown = document.getElementById('smsNavDropdown')
                        if (smsNavDropdown) {
                            if (!permissions.sms && !permissions.sms_sender) {
                                smsNavDropdown.style.display = 'none'
                                console.log('âŒ sms ê¶Œí•œ ì—†ìŒ - SMS ë„¤ë¹„ê²Œì´ì…˜ ë“œë¡­ë‹¤ìš´ ìˆ¨ê¹€')
                            } else {
                                smsNavDropdown.classList.remove('hidden')
                                console.log('âœ… sms ê¶Œí•œ ìˆìŒ - SMS ë„¤ë¹„ê²Œì´ì…˜ ë“œë¡­ë‹¤ìš´ í‘œì‹œ')
                            }
                        }
                        
                        // landing_builder ê¶Œí•œ ì²´í¬ - ëœë”©í˜ì´ì§€
                        const landingSection = document.getElementById('landingSection')
                        if (landingSection) {
                            if (!permissions.landing_builder) {
                                landingSection.style.display = 'none'
                            }
                        }
                        
                        // landing_builder ë„êµ¬ ì¹´ë“œë„ ìˆ¨ê¹€
                        const landingBuilderCard = document.querySelector('a[href="/tools/landing-builder"]')
                        if (landingBuilderCard) {
                            if (!permissions.landing_builder) {
                                landingBuilderCard.style.display = 'none'
                            }
                        }
                    }
                } catch (err) {
                    console.error('ê¶Œí•œ í™•ì¸ ì‹¤íŒ¨:', err)
                }
            }

            // ë‚´ ëœë”©í˜ì´ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
            async function loadMyLandingPages() {
                const user = JSON.parse(localStorage.getItem('user'))
                if (user && user.id) {
                    try {
                        const response = await fetch('/api/landing/my-pages?userId=' + user.id)
                        const data = await response.json()
                        
                        const container = document.getElementById('landingPagesContainer')
                        
                        if (data.success && data.pages && data.pages.length > 0) {
                            // ìµœê·¼ 3ê°œë§Œ í‘œì‹œ
                            const recentPages = data.pages.slice(0, 3)
                            container.innerHTML = recentPages.map(page => {
                                const pageUrl = window.location.origin + '/landing/' + page.slug
                                const statusBadge = page.status === 'active' 
                                    ? '<span class="px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full">í™œì„±</span>'
                                    : '<span class="px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full">ë¹„í™œì„±</span>'
                                
                                return '<div class="bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg transition">' +
                                    '<div class="flex justify-between items-start mb-3">' +
                                        '<h3 class="font-bold text-gray-900 text-lg">' + page.title + '</h3>' +
                                        statusBadge +
                                    '</div>' +
                                    '<div class="text-sm text-gray-600 mb-4">' +
                                        '<div class="flex items-center gap-2 mb-2">' +
                                            '<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>' +
                                            '<span>ì¡°íšŒìˆ˜: ' + (page.view_count || 0) + 'íšŒ</span>' +
                                        '</div>' +
                                        '<div class="text-xs text-gray-500">' +
                                            'ìƒì„±ì¼: ' + new Date(page.created_at).toLocaleDateString('ko-KR') +
                                        '</div>' +
                                    '</div>' +
                                    '<div class="flex gap-2">' +
                                        '<a href="' + pageUrl + '" target="_blank" class="flex-1 px-3 py-2 bg-purple-600 text-white text-sm rounded-lg hover:bg-purple-700 transition text-center">' +
                                            'ë¯¸ë¦¬ë³´ê¸°' +
                                        '</a>' +
                                        '<button onclick="copyUrl(' + "'" + pageUrl + "'" + ')" class="px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded-lg hover:bg-gray-200 transition">' +
                                            'ğŸ”—' +
                                        '</button>' +
                                    '</div>' +
                                '</div>'
                            }).join('')
                        } else {
                            container.innerHTML = '<div class="col-span-3 text-center py-12">' +
                                '<div class="text-gray-400 mb-4">' +
                                    '<svg class="w-16 h-16 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">' +
                                        '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>' +
                                    '</svg>' +
                                    '<p class="text-lg font-medium">ì•„ì§ ìƒì„±í•œ ëœë”©í˜ì´ì§€ê°€ ì—†ìŠµë‹ˆë‹¤</p>' +
                                '</div>' +
                                '<a href="/tools/landing-builder" class="inline-block px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium">' +
                                    'ì²« ëœë”©í˜ì´ì§€ ë§Œë“¤ê¸°' +
                                '</a>' +
                            '</div>'
                        }
                    } catch (err) {
                        console.error('ëœë”©í˜ì´ì§€ ë¡œë“œ ì‹¤íŒ¨:', err)
                        document.getElementById('landingPagesContainer').innerHTML = 
                            '<div class="col-span-3 text-center py-12 text-gray-500">ë¡œë”© ì‹¤íŒ¨</div>'
                    }
                }
            }

            // URL ë³µì‚¬
            function copyUrl(url) {
                navigator.clipboard.writeText(url).then(() => {
                    alert('URLì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ' + url)
                }).catch(err => {
                    alert('ë³µì‚¬ ì‹¤íŒ¨: ' + err)
                })
            }

            // 5ì´ˆë§ˆë‹¤ í¬ì¸íŠ¸ ìë™ ê°±ì‹ 
            setInterval(loadUserPoints, 5000)

            // ì…ê¸ˆ ì‹ ì²­ ëª¨ë‹¬ ì—´ê¸°
            function openDepositModal() {
                document.getElementById('depositModal').classList.remove('hidden')
            }

            // ì…ê¸ˆ ì‹ ì²­ ëª¨ë‹¬ ë‹«ê¸°
            function closeDepositModal() {
                document.getElementById('depositModal').classList.add('hidden')
            }

            // ê³„ì¢Œë²ˆí˜¸ ë³µì‚¬
            function copyAccountNumber() {
                const accountNumber = '746-910023-17004'
                navigator.clipboard.writeText(accountNumber).then(() => {
                    alert('ê³„ì¢Œë²ˆí˜¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ' + accountNumber)
                }).catch(err => {
                    alert('ë³µì‚¬ ì‹¤íŒ¨: ' + err)
                })
            }

            // ì…ê¸ˆ ì‹ ì²­
            async function submitDeposit() {
                const user = JSON.parse(localStorage.getItem('user'))
                const amount = document.getElementById('depositAmount').value
                const bankName = document.getElementById('bankName').value
                const accountNumber = document.getElementById('accountNumber').value
                const depositorName = document.getElementById('depositorName').value
                const message = document.getElementById('depositMessage').value

                if (!amount || amount <= 0) {
                    alert('ì…ê¸ˆ ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')
                    return
                }

                try {
                    const response = await fetch('/api/deposit/request', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            userId: user.id,
                            userName: user.name,
                            userEmail: user.email,
                            amount: parseInt(amount),
                            bankName,
                            accountNumber,
                            depositorName,
                            message
                        })
                    })

                    const data = await response.json()
                    if (data.success) {
                        alert('ì…ê¸ˆ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ê´€ë¦¬ì í™•ì¸ í›„ í¬ì¸íŠ¸ê°€ ì§€ê¸‰ë©ë‹ˆë‹¤.')
                        closeDepositModal()
                        // í¼ ì´ˆê¸°í™”
                        document.getElementById('depositAmount').value = ''
                        document.getElementById('bankName').value = ''
                        document.getElementById('accountNumber').value = ''
                        document.getElementById('depositorName').value = ''
                        document.getElementById('depositMessage').value = ''
                    } else {
                        alert('ì˜¤ë¥˜: ' + data.error)
                    }
                } catch (err) {
                    alert('ì…ê¸ˆ ì‹ ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')
                }
            }

            // í˜ì´ì§€ ë¡œë“œ ì‹œ ì¦‰ì‹œ í¬ì¸íŠ¸ ë¡œë“œ
            loadUserPoints()
            
            document.addEventListener('DOMContentLoaded', () => {
                loadUserPoints()
            })
        <\/script>

        <!-- ì…ê¸ˆ ì‹ ì²­ ëª¨ë‹¬ -->
        <div id="depositModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-8">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-900">ğŸ’° ì…ê¸ˆ ì‹ ì²­</h3>
                    <button onclick="closeDepositModal()" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>

                <!-- ê³„ì¢Œ ì •ë³´ -->
                <div class="bg-gradient-to-r from-blue-500 to-blue-700 rounded-xl p-5 mb-6 text-white">
                    <h4 class="font-bold mb-3 flex items-center gap-2">
                        <i class="fas fa-university"></i>
                        ì…ê¸ˆ ê³„ì¢Œ ì •ë³´
                    </h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between items-center">
                            <span class="text-blue-100">ì€í–‰</span>
                            <span class="font-bold">í•˜ë‚˜ì€í–‰</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-blue-100">ê³„ì¢Œë²ˆí˜¸</span>
                            <div class="flex items-center gap-2">
                                <span class="font-bold text-lg">746-910023-17004</span>
                                <button onclick="copyAccountNumber()" class="bg-white text-blue-600 px-3 py-1 rounded text-xs font-bold hover:bg-blue-50 transition">
                                    ë³µì‚¬
                                </button>
                            </div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-blue-100">ì˜ˆê¸ˆì£¼</span>
                            <span class="font-bold">ì£¼ì‹íšŒì‚¬ ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</span>
                        </div>
                    </div>
                </div>

                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì…ê¸ˆ ê¸ˆì•¡ *</label>
                        <input type="number" id="depositAmount" placeholder="10000" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì€í–‰ëª…</label>
                        <input type="text" id="bankName" placeholder="êµ­ë¯¼ì€í–‰" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ê³„ì¢Œë²ˆí˜¸</label>
                        <input type="text" id="accountNumber" placeholder="123-45-678901" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ì…ê¸ˆìëª…</label>
                        <input type="text" id="depositorName" placeholder="í™ê¸¸ë™" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ë©”ëª¨</label>
                        <textarea id="depositMessage" rows="3" placeholder="ì¶”ê°€ ë©”ì‹œì§€ (ì„ íƒì‚¬í•­)" 
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                    </div>

                    <div class="flex gap-3 pt-4">
                        <button onclick="closeDepositModal()" 
                                class="flex-1 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium">
                            ì·¨ì†Œ
                        </button>
                        <button onclick="submitDeposit()" 
                                class="flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium">
                            ì‹ ì²­í•˜ê¸°
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </body>
    </html>
  `));d.get("/tools/sms-sender",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ìë™ ë¬¸ì ë°œì†¡ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * { font-family: 'Pretendard Variable', sans-serif; }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100">
            <div class="max-w-7xl mx-auto px-6">
                <div class="flex justify-between items-center h-16">
                    <span class="text-xl font-bold text-gray-900">ìë™ ë¬¸ì ë°œì†¡</span>
                    <div class="flex gap-4">
                        <a href="/dashboard" class="text-gray-600 hover:text-purple-600">ëŒ€ì‹œë³´ë“œ</a>
                        <button onclick="logout()" class="text-gray-600 hover:text-red-600">ë¡œê·¸ì•„ì›ƒ</button>
                    </div>
                </div>
            </div>
        </nav>

        <div class="pt-24 pb-12 px-6">
            <div class="max-w-7xl mx-auto">
                <div class="mb-8">
                    <h1 class="text-4xl font-bold text-gray-900 mb-3">ğŸ“± ìë™ ë¬¸ì ë°œì†¡ ì‹œìŠ¤í…œ</h1>
                    <p class="text-lg text-gray-600">í…œí”Œë¦¿ì„ ì„ íƒí•˜ê³  í•™ë¶€ëª¨ë‹˜ê»˜ ë¬¸ìë¥¼ ë°œì†¡í•˜ì„¸ìš”</p>
                </div>

                <!-- í†µê³„ -->
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white rounded-xl p-6 border border-gray-200">
                        <div class="text-sm text-gray-600 mb-2">ì˜¤ëŠ˜ ë°œì†¡</div>
                        <div class="text-3xl font-bold text-gray-900" id="statToday">0</div>
                    </div>
                    <div class="bg-white rounded-xl p-6 border border-gray-200">
                        <div class="text-sm text-gray-600 mb-2">ì´ë²ˆ ë‹¬ ë°œì†¡</div>
                        <div class="text-3xl font-bold text-gray-900" id="statMonth">0</div>
                    </div>
                    <div class="bg-white rounded-xl p-6 border border-gray-200">
                        <div class="text-sm text-gray-600 mb-2">ëŒ€ê¸°ì¤‘</div>
                        <div class="text-3xl font-bold text-orange-600" id="statPending">0</div>
                    </div>
                </div>

                <div class="grid lg:grid-cols-2 gap-8">
                    <!-- ë¬¸ì ë°œì†¡ í¼ -->
                    <div class="bg-white rounded-xl p-8 border border-gray-200">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">ë¬¸ì ë°œì†¡</h2>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">í…œí”Œë¦¿ ì„ íƒ</label>
                                <select id="templateSelect" class="w-full px-4 py-3 border border-gray-300 rounded-xl" onchange="loadTemplate()">
                                    <option value="">í…œí”Œë¦¿ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ìˆ˜ì‹ ì ì´ë¦„</label>
                                <input type="text" id="recipientName" placeholder="í™ê¸¸ë™" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ìˆ˜ì‹ ì ì „í™”ë²ˆí˜¸</label>
                                <input type="tel" id="recipientPhone" placeholder="01012345678" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ë©”ì‹œì§€ ë‚´ìš©</label>
                                <textarea id="messageContent" rows="6" class="w-full px-4 py-3 border border-gray-300 rounded-xl" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                                <div class="text-sm text-gray-500 mt-2">
                                    <span id="charCount">0</span>/90ì (í•œê¸€ ê¸°ì¤€)
                                </div>
                            </div>

                            <div class="flex gap-3">
                                <button onclick="sendSMS()" class="flex-1 bg-green-600 text-white py-3 rounded-xl font-bold hover:bg-green-700 transition">
                                    ì¦‰ì‹œ ë°œì†¡
                                </button>
                                <button onclick="scheduleSMS()" class="flex-1 bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition">
                                    ì˜ˆì•½ ë°œì†¡
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- ë°œì†¡ ê¸°ë¡ -->
                    <div class="bg-white rounded-xl p-8 border border-gray-200">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">ìµœê·¼ ë°œì†¡ ê¸°ë¡</h2>
                        <div id="historyList" class="space-y-3 max-h-[600px] overflow-y-auto">
                            <div class="text-center text-gray-500 py-8">ë°œì†¡ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
        let templates = [];
        let user = null;

        // ë¡œê·¸ì¸ ì²´í¬
        const userData = localStorage.getItem('user');
        if (userData) {
            user = JSON.parse(userData);
        } else {
            user = { id: 1, name: 'ê²ŒìŠ¤íŠ¸' };
        }

        function logout() {
            localStorage.removeItem('user');
            window.location.href = '/';
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        async function init() {
            await loadTemplates();
            await loadStats();
            await loadHistory();
        }

        // í…œí”Œë¦¿ ë¡œë“œ
        async function loadTemplates() {
            try {
                const response = await fetch('/api/sms/templates');
                const data = await response.json();
                if (data.success) {
                    templates = data.templates;
                    const select = document.getElementById('templateSelect');
                    select.innerHTML = '<option value="">í…œí”Œë¦¿ì„ ì„ íƒí•˜ì„¸ìš”</option>';
                    data.templates.forEach(t => {
                        select.innerHTML += \`<option value="\${t.id}">\${t.name} (\${t.category})</option>\`;
                    });
                }
            } catch (err) {
                console.error('í…œí”Œë¦¿ ë¡œë“œ ì˜¤ë¥˜:', err);
            }
        }

        // í…œí”Œë¦¿ ì„ íƒ ì‹œ
        function loadTemplate() {
            const templateId = document.getElementById('templateSelect').value;
            if (!templateId) return;
            
            const template = templates.find(t => t.id == templateId);
            if (template) {
                document.getElementById('messageContent').value = template.content;
                updateCharCount();
            }
        }

        // ê¸€ì ìˆ˜ ì¹´ìš´íŠ¸
        document.getElementById('messageContent').addEventListener('input', updateCharCount);
        function updateCharCount() {
            const text = document.getElementById('messageContent').value;
            document.getElementById('charCount').textContent = text.length;
        }

        // í†µê³„ ë¡œë“œ
        async function loadStats() {
            try {
                const response = await fetch('/api/sms/stats');
                const data = await response.json();
                if (data.success) {
                    document.getElementById('statToday').textContent = data.stats.today;
                    document.getElementById('statMonth').textContent = data.stats.thisMonth;
                    const pending = data.stats.byStatus.find(s => s.status === 'pending' || s.status === 'scheduled');
                    document.getElementById('statPending').textContent = pending?.count || 0;
                }
            } catch (err) {
                console.error('í†µê³„ ë¡œë“œ ì˜¤ë¥˜:', err);
            }
        }

        // ë°œì†¡ ê¸°ë¡ ë¡œë“œ
        async function loadHistory() {
            try {
                const response = await fetch('/api/sms/history');
                const data = await response.json();
                if (data.success && data.history.length > 0) {
                    const list = document.getElementById('historyList');
                    list.innerHTML = data.history.slice(0, 10).map(h => \`
                        <div class="p-4 border border-gray-200 rounded-lg">
                            <div class="flex justify-between items-start mb-2">
                                <div class="font-medium text-gray-900">\${h.recipient_name || 'ì´ë¦„ì—†ìŒ'}</div>
                                <span class="px-2 py-1 text-xs rounded \${h.status === 'sent' ? 'bg-green-100 text-green-700' : h.status === 'scheduled' ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-700'}">\${h.status}</span>
                            </div>
                            <div class="text-sm text-gray-600 mb-2">\${h.recipient_phone}</div>
                            <div class="text-sm text-gray-800 line-clamp-2">\${h.message_content}</div>
                            <div class="text-xs text-gray-500 mt-2">\${new Date(h.created_at).toLocaleString('ko-KR')}</div>
                        </div>
                    \`).join('');
                }
            } catch (err) {
                console.error('ê¸°ë¡ ë¡œë“œ ì˜¤ë¥˜:', err);
            }
        }

        // ì¦‰ì‹œ ë°œì†¡
        async function sendSMS() {
            const name = document.getElementById('recipientName').value.trim();
            const phone = document.getElementById('recipientPhone').value.trim();
            const message = document.getElementById('messageContent').value.trim();
            const templateId = document.getElementById('templateSelect').value;

            if (!phone) {
                alert('ìˆ˜ì‹ ì ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”');
                return;
            }
            if (!message) {
                alert('ë©”ì‹œì§€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”');
                return;
            }

            try {
                const userDataStr = JSON.stringify(user);
                const userDataBase64 = btoa(unescape(encodeURIComponent(userDataStr)));

                const response = await fetch('/api/sms/send', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-User-Data-Base64': userDataBase64
                    },
                    body: JSON.stringify({
                        recipient_phone: phone,
                        recipient_name: name,
                        message_content: message,
                        template_id: templateId || null
                    })
                });

                const data = await response.json();
                if (data.success) {
                    alert('ë¬¸ìê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!\\n' + (data.note || ''));
                    document.getElementById('recipientName').value = '';
                    document.getElementById('recipientPhone').value = '';
                    document.getElementById('messageContent').value = '';
                    document.getElementById('templateSelect').value = '';
                    await loadStats();
                    await loadHistory();
                } else {
                    alert('ë°œì†¡ ì‹¤íŒ¨: ' + data.error);
                }
            } catch (err) {
                console.error('ë°œì†¡ ì˜¤ë¥˜:', err);
                alert('ë°œì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');
            }
        }

        // ì˜ˆì•½ ë°œì†¡
        function scheduleSMS() {
            const scheduledTime = prompt('ë°œì†¡ ì‹œê°„ì„ ì…ë ¥í•˜ì„¸ìš” (YYYY-MM-DD HH:MM í˜•ì‹)\\nì˜ˆ: 2024-12-20 14:00');
            if (!scheduledTime) return;

            alert('ì˜ˆì•½ ë°œì†¡ ê¸°ëŠ¥ì€ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤');
        }

        init();
        <\/script>
    </body>
    </html>
  `));d.get("/tools/parent-message",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í•™ë¶€ëª¨ ì†Œí†µ ì‹œìŠ¤í…œ - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
          .gradient-purple {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
          }
          .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
          }
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100 shadow-sm">
            <div class="max-w-7xl mx-auto px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <a href="/" class="flex items-center space-x-3">
                        <span class="text-xl font-bold text-gray-900">ìŠˆí¼í”Œë ˆì´ìŠ¤</span>
                    </a>
                    <div class="flex items-center space-x-6">
                        <a href="/dashboard" class="text-gray-600 hover:text-purple-600">ëŒ€ì‹œë³´ë“œ</a>
                        <a href="/tools/parent-message" class="text-purple-600 font-medium">í•™ë¶€ëª¨ ì†Œí†µ</a>
                        <a href="/tools/blog-writer" class="text-gray-600 hover:text-purple-600">ë¸”ë¡œê·¸ ì‘ì„±</a>
                        <a href="/logout" class="text-gray-600 hover:text-purple-600">ë¡œê·¸ì•„ì›ƒ</a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="pt-24 pb-12 px-6">
            <div class="max-w-5xl mx-auto">
                <div class="text-center mb-10">
                    <h1 class="text-4xl font-bold text-gray-900 mb-4">ğŸ“± í•™ë¶€ëª¨ ì†Œí†µ ì‹œìŠ¤í…œ</h1>
                    <p class="text-xl text-gray-600">ê°„ë‹¨í•œ ë©”ëª¨ë§Œ ì‘ì„±í•˜ë©´ AIê°€ ë”°ëœ»í•œ ë©”ì‹œì§€ë¡œ ë³€í™˜í•´ë“œë¦½ë‹ˆë‹¤</p>
                </div>

                <div class="grid lg:grid-cols-2 gap-8">
                    <!-- ì…ë ¥ í¼ -->
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">í•™ìƒ ì •ë³´ ì…ë ¥</h2>
                        
                        <form id="messageForm" class="space-y-6">
                            <!-- ê¸°ê°„ ì„ íƒ -->
                            <div class="bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4 mb-4">
                                <div class="text-sm font-medium text-blue-900 mb-3">ğŸ“… ì¡°íšŒ ê¸°ê°„ ì„¤ì •</div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="block text-xs font-medium text-blue-800 mb-1">ì‹œì‘ì¼</label>
                                        <input type="date" id="startDate" required
                                               class="w-full px-3 py-2 border border-blue-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-xs font-medium text-blue-800 mb-1">ì¢…ë£Œì¼</label>
                                        <input type="date" id="endDate" required
                                               class="w-full px-3 py-2 border border-blue-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                                    </div>
                                </div>
                                <div class="mt-3 flex gap-2">
                                    <button type="button" onclick="setDateRange(7)" class="flex-1 px-3 py-1 text-xs bg-white border border-blue-300 text-blue-700 rounded-lg hover:bg-blue-50">ìµœê·¼ 7ì¼</button>
                                    <button type="button" onclick="setDateRange(30)" class="flex-1 px-3 py-1 text-xs bg-white border border-blue-300 text-blue-700 rounded-lg hover:bg-blue-50">ìµœê·¼ 30ì¼</button>
                                    <button type="button" onclick="setDateRange(90)" class="flex-1 px-3 py-1 text-xs bg-white border border-blue-300 text-blue-700 rounded-lg hover:bg-blue-50">ìµœê·¼ 90ì¼</button>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">í•™ìƒ ì„ íƒ *</label>
                                <select id="studentSelect" required
                                        class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"
                                        onchange="loadStudentRecords()">
                                    <option value="">í•™ìƒì„ ì„ íƒí•˜ì„¸ìš”</option>
                                </select>
                                <p class="text-sm text-gray-500 mt-2">ğŸ’¡ í•™ìƒì„ ì„ íƒí•˜ë©´ ì„¤ì •í•œ ê¸°ê°„ì˜ í•™ìŠµ ê¸°ë¡ì„ ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤</p>
                            </div>

                            <div id="studentInfoDisplay" class="hidden bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4">
                                <div class="text-sm font-medium text-blue-900 mb-2">ğŸ“Š í•™ìƒ ì •ë³´</div>
                                <div id="studentDetails" class="text-sm text-blue-800"></div>
                            </div>

                            <div id="periodSummaryDisplay" class="hidden bg-purple-50 border-l-4 border-purple-500 rounded-lg p-4">
                                <div class="text-sm font-medium text-purple-900 mb-2">ğŸ“ˆ ì„ íƒ ê¸°ê°„ í†µê³„</div>
                                <div id="periodSummary" class="text-sm text-purple-800"></div>
                            </div>

                            <div id="recentRecordsDisplay" class="hidden">
                                <label class="block text-sm font-medium text-gray-900 mb-2">
                                    ì„ íƒ ê¸°ê°„ í•™ìŠµ ê¸°ë¡ (<span id="recordCount">0</span>ê±´)
                                </label>
                                <div id="recordsList" class="space-y-2 max-h-60 overflow-y-auto bg-gray-50 rounded-lg p-4"></div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì¶”ê°€ ë©”ëª¨ (ì„ íƒì‚¬í•­)</label>
                                <textarea id="shortMessage" rows="3"
                                          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none resize-none"
                                          placeholder="ì˜ˆ: ì´ë²ˆ ë‹¬ íŠ¹ë³„íˆ ì¹­ì°¬í•˜ê³  ì‹¶ì€ ì ì´ë‚˜ í•™ë¶€ëª¨ë‹˜ê»˜ ì¶”ê°€ë¡œ ì „ë‹¬í•  ë‚´ìš©ì„ ì‘ì„±í•˜ì„¸ìš”"></textarea>
                                <p class="text-sm text-gray-500 mt-2">ğŸ’¡ í•™ìƒì˜ ì„ íƒ ê¸°ê°„ ê¸°ë¡ì„ ë°”íƒ•ìœ¼ë¡œ ë©”ì‹œì§€ê°€ ìƒì„±ë©ë‹ˆë‹¤. ì¶”ê°€ë¡œ ì „ë‹¬í•  ë‚´ìš©ì´ ìˆìœ¼ë©´ ì…ë ¥í•˜ì„¸ìš”.</p>
                            </div>

                            <button type="submit" 
                                    class="w-full gradient-purple text-white py-4 rounded-xl text-lg font-medium hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                                    id="generateBtn"
                                    disabled>
                                <span id="btnText">âœ¨ AI ë©”ì‹œì§€ ìƒì„±í•˜ê¸°</span>
                                <span id="btnLoading" class="hidden items-center justify-center">
                                    <span class="loading mr-2"></span>
                                    ìƒì„± ì¤‘...
                                </span>
                            </button>
                        </form>
                    </div>

                    <!-- ìƒì„±ëœ ë©”ì‹œì§€ -->
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">ìƒì„±ëœ ë©”ì‹œì§€</h2>
                        
                        <div id="resultArea" class="hidden">
                            <div class="bg-purple-50 border-l-4 border-purple-600 rounded-lg p-6 mb-6">
                                <div class="flex items-start gap-3 mb-4">
                                    <div class="w-10 h-10 rounded-full bg-purple-600 flex items-center justify-center text-white flex-shrink-0">
                                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                    </div>
                                    <div class="flex-1">
                                        <div class="font-bold text-gray-900 mb-1" id="studentInfo"></div>
                                        <div class="text-sm text-gray-600" id="subjectInfo"></div>
                                    </div>
                                </div>
                                
                                <div id="generatedMessage" class="text-gray-800 leading-relaxed whitespace-pre-wrap"></div>
                            </div>

                            <div class="flex gap-3">
                                <button onclick="copyMessage()" 
                                        class="flex-1 bg-purple-600 text-white py-3 rounded-xl font-medium hover:bg-purple-700 transition">
                                    ğŸ“‹ ë³µì‚¬í•˜ê¸°
                                </button>
                                <button onclick="resetForm()" 
                                        class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-300 transition">
                                    ğŸ”„ ìƒˆë¡œ ì‘ì„±
                                </button>
                            </div>
                        </div>

                        <div id="emptyState" class="text-center py-16">
                            <div class="w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
                                </svg>
                            </div>
                            <p class="text-gray-500">ì™¼ìª½ í¼ì„ ì‘ì„±í•˜ê³ <br>ë©”ì‹œì§€ë¥¼ ìƒì„±í•´ë³´ì„¸ìš”</p>
                        </div>
                    </div>
                </div>

                <!-- ì‚¬ìš© ê°€ì´ë“œ -->
                <div class="mt-12 bg-gradient-to-br from-purple-50 to-blue-50 rounded-2xl p-8">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">ğŸ’¡ ì‚¬ìš© ê°€ì´ë“œ</h3>
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="bg-white rounded-xl p-6">
                            <div class="text-3xl mb-3">1ï¸âƒ£</div>
                            <h4 class="font-bold text-gray-900 mb-2">ê¸°ê°„ ë° í•™ìƒ ì„ íƒ</h4>
                            <p class="text-sm text-gray-600">ì¡°íšŒí•  ê¸°ê°„ì„ ì„¤ì •í•˜ê³  (ìµœê·¼ 7ì¼/30ì¼/90ì¼ ë˜ëŠ” ì§ì ‘ ì„ íƒ) í•™ìƒì„ ì„ íƒí•˜ì„¸ìš”</p>
                        </div>
                        <div class="bg-white rounded-xl p-6">
                            <div class="text-3xl mb-3">2ï¸âƒ£</div>
                            <h4 class="font-bold text-gray-900 mb-2">AIê°€ ìë™ ë¶„ì„</h4>
                            <p class="text-sm text-gray-600">ì„ íƒí•œ ê¸°ê°„ì˜ ì¶œì„ë¥ , ê³¼ì œ ì™„ì„±ë¥ , ì´í•´ë„, ì°¸ì—¬ë„ ë“±ì„ ìë™ìœ¼ë¡œ ë¶„ì„í•˜ê³  AIê°€ ë”°ëœ»í•œ ë©”ì‹œì§€ë¡œ ë³€í™˜í•©ë‹ˆë‹¤</p>
                        </div>
                        <div class="bg-white rounded-xl p-6">
                            <div class="text-3xl mb-3">3ï¸âƒ£</div>
                            <h4 class="font-bold text-gray-900 mb-2">ë³µì‚¬í•´ì„œ ì „ì†¡</h4>
                            <p class="text-sm text-gray-600">ìƒì„±ëœ ë©”ì‹œì§€ë¥¼ ë³µì‚¬í•´ì„œ ì¹´í†¡ì´ë‚˜ ë¬¸ìë¡œ í•™ë¶€ëª¨ë‹˜ê»˜ ì „ì†¡í•˜ì„¸ìš”</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            let generatedMessageText = '';
            let currentStudent = null;
            let recentRecords = [];
            let currentUser = null;

            // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‚¬ìš©ì í™•ì¸ ë° ì´ˆê¸°í™”
            function initPage() {
                const userData = localStorage.getItem('user');
                if (userData) {
                    currentUser = JSON.parse(userData);
                } else {
                    // ê²ŒìŠ¤íŠ¸ ëª¨ë“œ (í…ŒìŠ¤íŠ¸ìš©)
                    currentUser = { id: 1, name: 'ê²ŒìŠ¤íŠ¸', academy_id: 1 };
                }
                
                // ê¸°ë³¸ ê¸°ê°„ ì„¤ì • (ìµœê·¼ 30ì¼)
                setDateRange(30);
                
                // í•™ìƒ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
                loadStudents();
            }

            // ê¸°ê°„ ì„¤ì • í•¨ìˆ˜ (í•œêµ­ ì‹œê°„ëŒ€ KST ê¸°ì¤€)
            function setDateRange(days) {
                // í•œêµ­ ì‹œê°„ëŒ€(KST, UTC+9) í˜„ì¬ ë‚ ì§œ
                const now = new Date();
                const kstOffset = 9 * 60; // 9ì‹œê°„ì„ ë¶„ìœ¼ë¡œ ë³€í™˜
                const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
                const kstTime = new Date(utc + (kstOffset * 60000));
                
                // ì¢…ë£Œì¼: ì˜¤ëŠ˜ (í•œêµ­ ì‹œê°„ ê¸°ì¤€)
                const endDate = new Date(kstTime.getFullYear(), kstTime.getMonth(), kstTime.getDate());
                
                // ì‹œì‘ì¼: ì˜¤ëŠ˜ë¡œë¶€í„° Nì¼ ì „ (í•œêµ­ ì‹œê°„ ê¸°ì¤€)
                const startDate = new Date(kstTime.getFullYear(), kstTime.getMonth(), kstTime.getDate());
                startDate.setDate(startDate.getDate() - (days - 1)); // Nì¼ê°„ = ì˜¤ëŠ˜ í¬í•¨ Nì¼
                
                // YYYY-MM-DD í˜•ì‹ìœ¼ë¡œ ë³€í™˜
                const formatDate = (date) => {
                    const year = date.getFullYear();
                    const month = String(date.getMonth() + 1).padStart(2, '0');
                    const day = String(date.getDate()).padStart(2, '0');
                    return year + '-' + month + '-' + day;
                };
                
                document.getElementById('startDate').value = formatDate(startDate);
                document.getElementById('endDate').value = formatDate(endDate);
                
                console.log('ê¸°ê°„ ì„¤ì •: ' + formatDate(startDate) + ' ~ ' + formatDate(endDate) + ' (ìµœê·¼ ' + days + 'ì¼, í•œêµ­ ì‹œê°„ ê¸°ì¤€)');
                
                // í•™ìƒì´ ì´ë¯¸ ì„ íƒë˜ì–´ ìˆìœ¼ë©´ ê¸°ë¡ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ê¸°
                if (currentStudent) {
                    loadStudentRecords();
                }
            }

            // ì‚¬ìš©ìì˜ í•™ìƒ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
            async function loadStudents() {
                try {
                    const academyId = currentUser.academy_id || 1;
                    const response = await fetch('/api/students?academyId=' + academyId);
                    const data = await response.json();
                    
                    if (data.success) {
                        const select = document.getElementById('studentSelect');
                        select.innerHTML = '<option value="">í•™ìƒì„ ì„ íƒí•˜ì„¸ìš”</option>';
                        
                        data.students.forEach(student => {
                            const option = document.createElement('option');
                            option.value = student.id;
                            option.textContent = student.name + ' (' + student.grade + ', ' + (student.class_name || 'ë¯¸ë°°ì •') + ')';
                            option.dataset.student = JSON.stringify(student);
                            select.appendChild(option);
                        });
                    }
                } catch (err) {
                    console.error('Error loading students:', err);
                    alert('í•™ìƒ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            }

            // í•™ìƒ ì„ íƒ ì‹œ ê¸°ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
            async function loadStudentRecords() {
                const select = document.getElementById('studentSelect');
                const selectedOption = select.options[select.selectedIndex];
                
                if (!selectedOption.value) {
                    document.getElementById('studentInfoDisplay').classList.add('hidden');
                    document.getElementById('periodSummaryDisplay').classList.add('hidden');
                    document.getElementById('recentRecordsDisplay').classList.add('hidden');
                    document.getElementById('generateBtn').disabled = true;
                    return;
                }

                currentStudent = JSON.parse(selectedOption.dataset.student);
                
                // ê¸°ê°„ í™•ì¸
                const startDate = document.getElementById('startDate').value;
                const endDate = document.getElementById('endDate').value;
                
                if (!startDate || !endDate) {
                    alert('ì¡°íšŒ ê¸°ê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                // í•™ìƒ ì •ë³´ í‘œì‹œ
                document.getElementById('studentDetails').innerHTML = 
                    '<div><strong>ì´ë¦„:</strong> ' + currentStudent.name + '</div>' +
                    '<div><strong>í•™ë…„:</strong> ' + currentStudent.grade + '</div>' +
                    '<div><strong>ê³¼ëª©:</strong> ' + currentStudent.subjects + '</div>' +
                    '<div><strong>í•™ë¶€ëª¨:</strong> ' + currentStudent.parent_name + ' (' + currentStudent.parent_phone + ')</div>';
                document.getElementById('studentInfoDisplay').classList.remove('hidden');

                // ì„ íƒ ê¸°ê°„ ê¸°ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
                try {
                    const response = await fetch('/api/daily-records?studentId=' + currentStudent.id + '&startDate=' + startDate + '&endDate=' + endDate);
                    const data = await response.json();
                    
                    if (data.success) {
                        recentRecords = data.records || [];
                        displayRecords();
                        displayPeriodSummary();
                        document.getElementById('generateBtn').disabled = false;
                    }
                } catch (err) {
                    console.error('Error loading records:', err);
                    alert('í•™ìŠµ ê¸°ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                    document.getElementById('generateBtn').disabled = false;
                }
            }

            // ê¸°ê°„ í†µê³„ í‘œì‹œ
            function displayPeriodSummary() {
                if (recentRecords.length === 0) {
                    document.getElementById('periodSummaryDisplay').classList.add('hidden');
                    return;
                }

                const totalDays = recentRecords.length;
                const attendanceCount = recentRecords.filter(r => r.attendance === 'ì¶œì„').length;
                const homeworkCompleted = recentRecords.filter(r => r.homework_status === 'ì™„ë£Œ').length;
                
                const understandingScores = recentRecords.filter(r => r.understanding_level).map(r => r.understanding_level);
                const participationScores = recentRecords.filter(r => r.participation_level).map(r => r.participation_level);
                
                const avgUnderstanding = understandingScores.length > 0 
                    ? (understandingScores.reduce((a, b) => a + b, 0) / understandingScores.length).toFixed(1)
                    : 0;
                
                const avgParticipation = participationScores.length > 0
                    ? (participationScores.reduce((a, b) => a + b, 0) / participationScores.length).toFixed(1)
                    : 0;

                const attendanceRate = ((attendanceCount / totalDays) * 100).toFixed(0);
                const homeworkRate = totalDays > 0 ? ((homeworkCompleted / totalDays) * 100).toFixed(0) : 0;

                const startDate = document.getElementById('startDate').value;
                const endDate = document.getElementById('endDate').value;
                const daysDiff = Math.ceil((new Date(endDate) - new Date(startDate)) / (1000 * 60 * 60 * 24)) + 1;

                document.getElementById('periodSummary').innerHTML = 
                    '<div class="grid grid-cols-2 gap-2">' +
                        '<div><strong>ì¡°íšŒ ê¸°ê°„:</strong> ' + daysDiff + 'ì¼</div>' +
                        '<div><strong>ìˆ˜ì—… ì¼ìˆ˜:</strong> ' + totalDays + 'ì¼</div>' +
                        '<div><strong>ì¶œì„ë¥ :</strong> ' + attendanceRate + '%</div>' +
                        '<div><strong>ê³¼ì œ ì™„ì„±ë¥ :</strong> ' + homeworkRate + '%</div>' +
                        '<div><strong>í‰ê·  ì´í•´ë„:</strong> ' + avgUnderstanding + '/5ì </div>' +
                        '<div><strong>í‰ê·  ì°¸ì—¬ë„:</strong> ' + avgParticipation + '/5ì </div>' +
                    '</div>';

                document.getElementById('periodSummaryDisplay').classList.remove('hidden');
            }

            // ê¸°ë¡ í‘œì‹œ
            function displayRecords() {
                const recordsList = document.getElementById('recordsList');
                document.getElementById('recordCount').textContent = recentRecords.length;
                
                if (recentRecords.length === 0) {
                    recordsList.innerHTML = '<p class="text-gray-500 text-sm">ì„ íƒí•œ ê¸°ê°„ì— ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                    document.getElementById('recentRecordsDisplay').classList.remove('hidden');
                    return;
                }

                recordsList.innerHTML = recentRecords.map(record => {
                    let attendanceClass = 'bg-gray-100 text-gray-800';
                    if (record.attendance === 'ì¶œì„') attendanceClass = 'bg-green-100 text-green-800';
                    else if (record.attendance === 'ì§€ê°') attendanceClass = 'bg-yellow-100 text-yellow-800';
                    else if (record.attendance === 'ê²°ì„') attendanceClass = 'bg-red-100 text-red-800';
                    
                    let html = '<div class="bg-white border border-gray-200 rounded-lg p-3 text-sm">';
                    html += '<div class="flex justify-between items-start mb-2">';
                    html += '<span class="font-medium text-gray-900">' + record.record_date + '</span>';
                    html += '<span class="text-xs px-2 py-1 rounded-full ' + attendanceClass + '">' + (record.attendance || '-') + '</span>';
                    html += '</div>';
                    html += '<div class="space-y-1 text-gray-600">';
                    if (record.homework_status) html += '<div>ğŸ“ ê³¼ì œ: ' + record.homework_status + '</div>';
                    if (record.understanding_level) html += '<div>ğŸ’¡ ì´í•´ë„: ' + record.understanding_level + '/5</div>';
                    if (record.participation_level) html += '<div>ğŸ™‹ ì°¸ì—¬ë„: ' + record.participation_level + '/5</div>';
                    if (record.achievement) html += '<div>ğŸ¯ ì„±ê³¼: ' + record.achievement + '</div>';
                    if (record.memo) html += '<div class="text-gray-500">ğŸ“Œ ' + record.memo + '</div>';
                    html += '</div></div>';
                    return html;
                }).join('');

                document.getElementById('recentRecordsDisplay').classList.remove('hidden');
            }

            document.getElementById('messageForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                
                if (!currentStudent) {
                    alert('í•™ìƒì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }

                const startDate = document.getElementById('startDate').value;
                const endDate = document.getElementById('endDate').value;
                const additionalMessage = document.getElementById('shortMessage').value;

                // ë²„íŠ¼ ë¡œë”© ìƒíƒœ
                const btn = document.getElementById('generateBtn');
                const btnText = document.getElementById('btnText');
                const btnLoading = document.getElementById('btnLoading');
                
                btn.disabled = true;
                btnText.classList.add('hidden');
                btnLoading.classList.remove('hidden');
                btnLoading.classList.add('flex');

                try {
                    const response = await fetch('/api/generate-parent-message-from-records', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            studentId: currentStudent.id,
                            studentName: currentStudent.name,
                            grade: currentStudent.grade,
                            subjects: currentStudent.subjects,
                            parentName: currentStudent.parent_name,
                            records: recentRecords,
                            additionalMessage,
                            startDate,
                            endDate
                        })
                    });

                    const data = await response.json();

                    if (data.success) {
                        generatedMessageText = data.message;
                        
                        // ê²°ê³¼ í‘œì‹œ
                        const daysDiff = Math.ceil((new Date(endDate) - new Date(startDate)) / (1000 * 60 * 60 * 24)) + 1;
                        document.getElementById('studentInfo').textContent = currentStudent.name + ' í•™ìƒ';
                        document.getElementById('subjectInfo').textContent = currentStudent.grade + ' Â· ' + currentStudent.subjects + ' Â· ' + daysDiff + 'ì¼ê°„ (' + recentRecords.length + 'ê°œ ê¸°ë¡)';
                        document.getElementById('generatedMessage').textContent = data.message;
                        
                        document.getElementById('emptyState').classList.add('hidden');
                        document.getElementById('resultArea').classList.remove('hidden');
                    } else {
                        alert('ì˜¤ë¥˜: ' + data.error);
                    }
                } catch (err) {
                    console.error('Error:', err);
                    alert('ë©”ì‹œì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                } finally {
                    btn.disabled = false;
                    btnText.classList.remove('hidden');
                    btnLoading.classList.add('hidden');
                }
            });

            function copyMessage() {
                navigator.clipboard.writeText(generatedMessageText).then(() => {
                    alert('âœ… ë©”ì‹œì§€ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\\n\\nì¹´í†¡ì´ë‚˜ ë¬¸ìë¡œ í•™ë¶€ëª¨ë‹˜ê»˜ ì „ì†¡í•˜ì„¸ìš”.');
                });
            }

            function resetForm() {
                document.getElementById('messageForm').reset();
                document.getElementById('studentInfoDisplay').classList.add('hidden');
                document.getElementById('periodSummaryDisplay').classList.add('hidden');
                document.getElementById('recentRecordsDisplay').classList.add('hidden');
                document.getElementById('emptyState').classList.remove('hidden');
                document.getElementById('resultArea').classList.add('hidden');
                document.getElementById('generateBtn').disabled = true;
                currentStudent = null;
                recentRecords = [];
                generatedMessageText = '';
                // ê¸°ë³¸ ê¸°ê°„ ì¬ì„¤ì •
                setDateRange(30);
            }

            // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
            window.addEventListener('DOMContentLoaded', function() {
                initPage();
            });
        <\/script>
    </body>
    </html>
  `));d.get("/tools/blog-writer",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë¸”ë¡œê·¸ ì‘ì„± ë„êµ¬ - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
          .gradient-purple {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
          }
          .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
          }
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100 shadow-sm">
            <div class="max-w-7xl mx-auto px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <a href="/" class="flex items-center space-x-3">
                        <span class="text-xl font-bold text-gray-900">ìŠˆí¼í”Œë ˆì´ìŠ¤</span>
                    </a>
                    <div class="flex items-center space-x-6">
                        <a href="/dashboard" class="text-gray-600 hover:text-purple-600">ëŒ€ì‹œë³´ë“œ</a>
                        <a href="/tools/parent-message" class="text-gray-600 hover:text-purple-600">í•™ë¶€ëª¨ ì†Œí†µ</a>
                        <a href="/tools/blog-writer" class="text-purple-600 font-medium">ë¸”ë¡œê·¸ ì‘ì„±</a>
                        <a href="/logout" class="text-gray-600 hover:text-purple-600">ë¡œê·¸ì•„ì›ƒ</a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="pt-24 pb-12 px-6">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-10">
                    <h1 class="text-4xl font-bold text-gray-900 mb-4">âœï¸ AI ë¸”ë¡œê·¸ ì‘ì„± ë„êµ¬</h1>
                    <p class="text-xl text-gray-600">ì£¼ì œë§Œ ì…ë ¥í•˜ë©´ SEO ìµœì í™”ëœ ë¸”ë¡œê·¸ ê¸€ì„ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤</p>
                </div>

                <div class="grid lg:grid-cols-3 gap-8">
                    <!-- ì…ë ¥ í¼ -->
                    <div class="lg:col-span-1">
                        <div class="bg-white rounded-2xl shadow-lg p-8 sticky top-24">
                            <h2 class="text-2xl font-bold text-gray-900 mb-6">ê¸€ ì •ë³´ ì…ë ¥</h2>
                            
                            <form id="blogForm" class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-900 mb-2">ì£¼ì œ *</label>
                                    <input type="text" id="topic" required 
                                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"
                                           placeholder="ì˜ˆ: ì´ˆë“± ì˜ì–´ í•™ìŠµë²•">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-900 mb-2">í‚¤ì›Œë“œ (ì„ íƒ)</label>
                                    <input type="text" id="keywords"
                                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none"
                                           placeholder="ì˜ˆ: ì˜ì–´í•™ì›, ì´ˆë“±ì˜ì–´">
                                    <p class="text-xs text-gray-500 mt-1">ì‰¼í‘œë¡œ êµ¬ë¶„</p>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-900 mb-2">í†¤ ì•¤ ë§¤ë„ˆ</label>
                                    <select id="tone"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none">
                                        <option value="ì¹œê·¼í•˜ê³  ì „ë¬¸ì ì¸">ì¹œê·¼í•˜ê³  ì „ë¬¸ì ì¸</option>
                                        <option value="ë”°ëœ»í•˜ê³  ê³µê°í•˜ëŠ”">ë”°ëœ»í•˜ê³  ê³µê°í•˜ëŠ”</option>
                                        <option value="ì „ë¬¸ì ì´ê³  ì‹ ë¢°ê° ìˆëŠ”">ì „ë¬¸ì ì´ê³  ì‹ ë¢°ê° ìˆëŠ”</option>
                                        <option value="ìœ ë¨¸ëŸ¬ìŠ¤í•˜ê³  ì¬ë¯¸ìˆëŠ”">ìœ ë¨¸ëŸ¬ìŠ¤í•˜ê³  ì¬ë¯¸ìˆëŠ”</option>
                                    </select>
                                </div>

                                <button type="submit" 
                                        class="w-full gradient-purple text-white py-4 rounded-xl text-lg font-medium hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed"
                                        id="generateBtn">
                                    <span id="btnText">âœ¨ ë¸”ë¡œê·¸ ê¸€ ìƒì„±í•˜ê¸°</span>
                                    <span id="btnLoading" class="hidden items-center justify-center">
                                        <span class="loading mr-2"></span>
                                        ìƒì„± ì¤‘... (30ì´ˆ ì†Œìš”)
                                    </span>
                                </button>

                                <div class="bg-blue-50 rounded-xl p-4 text-sm text-blue-800">
                                    ğŸ’¡ AIê°€ ì œëª©, ì„œë¡ , ë³¸ë¡ , ê²°ë¡ ì„ í¬í•¨í•œ ì™„ì„±ëœ ë¸”ë¡œê·¸ ê¸€ì„ ì‘ì„±í•©ë‹ˆë‹¤
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- ìƒì„±ëœ ë¸”ë¡œê·¸ ê¸€ -->
                    <div class="lg:col-span-2">
                        <div class="bg-white rounded-2xl shadow-lg p-8 min-h-[600px]">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-2xl font-bold text-gray-900">ìƒì„±ëœ ë¸”ë¡œê·¸ ê¸€</h2>
                                <div id="wordCount" class="hidden text-sm text-gray-500"></div>
                            </div>
                            
                            <div id="resultArea" class="hidden">
                                <div id="generatedBlog" class="prose max-w-none">
                                    <!-- ìƒì„±ëœ ë¸”ë¡œê·¸ ë‚´ìš© -->
                                </div>

                                <div class="mt-8 flex gap-3">
                                    <button onclick="copyBlog()" 
                                            class="flex-1 bg-purple-600 text-white py-3 rounded-xl font-medium hover:bg-purple-700 transition">
                                        ğŸ“‹ ì „ì²´ ë³µì‚¬í•˜ê¸°
                                    </button>
                                    <button onclick="resetForm()" 
                                            class="bg-gray-200 text-gray-700 px-6 py-3 rounded-xl font-medium hover:bg-gray-300 transition">
                                        ğŸ”„ ìƒˆë¡œ ì‘ì„±
                                    </button>
                                </div>
                            </div>

                            <div id="emptyState" class="text-center py-24">
                                <div class="w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                    </svg>
                                </div>
                                <p class="text-gray-500 text-lg">ì£¼ì œë¥¼ ì…ë ¥í•˜ê³ <br>ë¸”ë¡œê·¸ ê¸€ì„ ìƒì„±í•´ë³´ì„¸ìš”</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ë¸”ë¡œê·¸ ì‘ì„± íŒ -->
                <div class="mt-12 bg-gradient-to-br from-orange-50 to-yellow-50 rounded-2xl p-8">
                    <h3 class="text-2xl font-bold text-gray-900 mb-6">ğŸ“ ë¸”ë¡œê·¸ SEO íŒ</h3>
                    <div class="grid md:grid-cols-4 gap-6">
                        <div class="bg-white rounded-xl p-6">
                            <div class="text-3xl mb-3">ğŸ¯</div>
                            <h4 class="font-bold text-gray-900 mb-2">í‚¤ì›Œë“œ ì„ íƒ</h4>
                            <p class="text-sm text-gray-600">ê²€ìƒ‰ëŸ‰ì´ ë§ì€ í‚¤ì›Œë“œë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ 3-5íšŒ ë°˜ë³µ</p>
                        </div>
                        <div class="bg-white rounded-xl p-6">
                            <div class="text-3xl mb-3">ğŸ“</div>
                            <h4 class="font-bold text-gray-900 mb-2">ì ì ˆí•œ ê¸¸ì´</h4>
                            <p class="text-sm text-gray-600">1500-2000ìê°€ SEOì— ê°€ì¥ íš¨ê³¼ì </p>
                        </div>
                        <div class="bg-white rounded-xl p-6">
                            <div class="text-3xl mb-3">ğŸ–¼ï¸</div>
                            <h4 class="font-bold text-gray-900 mb-2">ì´ë¯¸ì§€ ì¶”ê°€</h4>
                            <p class="text-sm text-gray-600">2-3ì¥ì˜ ê´€ë ¨ ì´ë¯¸ì§€ë¡œ ê°€ë…ì„± í–¥ìƒ</p>
                        </div>
                        <div class="bg-white rounded-xl p-6">
                            <div class="text-3xl mb-3">â°</div>
                            <h4 class="font-bold text-gray-900 mb-2">ê¾¸ì¤€í•œ í¬ìŠ¤íŒ…</h4>
                            <p class="text-sm text-gray-600">ì£¼ 2-3íšŒ ê·œì¹™ì ì¸ ì—…ë¡œë“œê°€ ì¤‘ìš”</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            let generatedBlogText = '';

            document.getElementById('blogForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const topic = document.getElementById('topic').value;
                const keywords = document.getElementById('keywords').value;
                const tone = document.getElementById('tone').value;

                // ë²„íŠ¼ ë¡œë”© ìƒíƒœ
                const btn = document.getElementById('generateBtn');
                const btnText = document.getElementById('btnText');
                const btnLoading = document.getElementById('btnLoading');
                
                btn.disabled = true;
                btnText.classList.add('hidden');
                btnLoading.classList.remove('hidden');
                btnLoading.classList.add('flex');

                try {
                    const response = await fetch('/api/generate-blog-post', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            topic,
                            keywords,
                            tone
                        })
                    });

                    const data = await response.json();

                    if (data.success) {
                        generatedBlogText = data.content;
                        
                        // ê²°ê³¼ í‘œì‹œ (ì¤„ë°”ê¿ˆì„ <br>ë¡œ ë³€í™˜)
                        const formattedContent = data.content
                            .replace(/\\n\\n/g, '</p><p class="mb-4">')
                            .replace(/\\n/g, '<br>');
                        
                        document.getElementById('generatedBlog').innerHTML = 
                            '<div class="text-gray-800 leading-relaxed"><p class="mb-4">' + 
                            formattedContent + 
                            '</p></div>';
                        
                        document.getElementById('wordCount').textContent = 
                            'ì´ ' + data.metadata.wordCount + 'ì';
                        document.getElementById('wordCount').classList.remove('hidden');
                        
                        document.getElementById('emptyState').classList.add('hidden');
                        document.getElementById('resultArea').classList.remove('hidden');

                        // ìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤
                        document.getElementById('resultArea').scrollIntoView({ behavior: 'smooth', block: 'start' });
                    } else {
                        alert('ì˜¤ë¥˜: ' + data.error);
                    }
                } catch (err) {
                    console.error('Error:', err);
                    alert('ë¸”ë¡œê·¸ ê¸€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                } finally {
                    btn.disabled = false;
                    btnText.classList.remove('hidden');
                    btnLoading.classList.add('hidden');
                }
            });

            function copyBlog() {
                navigator.clipboard.writeText(generatedBlogText).then(() => {
                    alert('âœ… ë¸”ë¡œê·¸ ê¸€ì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\\n\\në„¤ì´ë²„ ë¸”ë¡œê·¸ì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”.');
                });
            }

            function resetForm() {
                document.getElementById('blogForm').reset();
                document.getElementById('emptyState').classList.remove('hidden');
                document.getElementById('resultArea').classList.add('hidden');
                document.getElementById('wordCount').classList.add('hidden');
                generatedBlogText = '';
            }
        <\/script>
    </body>
    </html>
  `));d.get("/tools/landing-builder",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ëœë”©í˜ì´ì§€ ìƒì„±ê¸° - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * { font-family: 'Pretendard Variable', sans-serif; }
          .gradient-purple { background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100">
            <div class="max-w-7xl mx-auto px-6">
                <div class="flex justify-between items-center h-16">
                    <span class="text-xl font-bold text-gray-900">ëœë”©í˜ì´ì§€ ìƒì„±ê¸°</span>
                    <div class="flex gap-4">
                        <a href="/dashboard" class="text-gray-600 hover:text-purple-600">ëŒ€ì‹œë³´ë“œ</a>
                        <a href="/tools/landing-manager" class="text-gray-600 hover:text-purple-600">ë‚´ ëœë”©í˜ì´ì§€</a>
                        <button onclick="logout()" class="text-gray-600 hover:text-red-600">ë¡œê·¸ì•„ì›ƒ</button>
                    </div>
                </div>
            </div>
        </nav>

        <div class="pt-24 pb-12 px-6">
            <div class="max-w-4xl mx-auto">
                <div class="mb-8">
                    <h1 class="text-4xl font-bold text-gray-900 mb-3">ğŸ¨ AI ëœë”©í˜ì´ì§€ ìƒì„±ê¸°</h1>
                    <p class="text-lg text-gray-600">ê°„ë‹¨í•œ ì •ë³´ë§Œ ì…ë ¥í•˜ë©´ ì™„ì„±ëœ ëœë”©í˜ì´ì§€ë¥¼ ë§Œë“¤ì–´ë“œë¦½ë‹ˆë‹¤</p>
                </div>

                <!-- í…œí”Œë¦¿ ì„ íƒ -->
                <div class="bg-white rounded-xl p-8 border border-gray-200 mb-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">1ï¸âƒ£ í…œí”Œë¦¿ ì„ íƒ</h2>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <button onclick="selectTemplate('academy-intro', event)" class="template-btn p-6 border-2 border-gray-200 rounded-xl hover:border-purple-600 transition text-left">
                            <div class="text-3xl mb-3">ğŸ«</div>
                            <div class="font-bold text-lg mb-2">í•™ì› ì†Œê°œ í˜ì´ì§€</div>
                            <p class="text-sm text-gray-600">í•™ì›ì˜ ê°•ì ê³¼ íŠ¹ì§•ì„ íš¨ê³¼ì ìœ¼ë¡œ í™ë³´</p>
                        </button>
                        <button onclick="selectTemplate('program-promo', event)" class="template-btn p-6 border-2 border-gray-200 rounded-xl hover:border-purple-600 transition text-left">
                            <div class="text-3xl mb-3">ğŸ“š</div>
                            <div class="font-bold text-lg mb-2">í”„ë¡œê·¸ë¨ í™ë³´</div>
                            <p class="text-sm text-gray-600">íŠ¹ì • í”„ë¡œê·¸ë¨ ë“±ë¡ì„ ìœ ë„í•˜ëŠ” í˜ì´ì§€</p>
                        </button>
                        <button onclick="selectTemplate('event-promo', event)" class="template-btn p-6 border-2 border-gray-200 rounded-xl hover:border-purple-600 transition text-left">
                            <div class="text-3xl mb-3">ğŸ‰</div>
                            <div class="font-bold text-lg mb-2">ì´ë²¤íŠ¸ í”„ë¡œëª¨ì…˜</div>
                            <p class="text-sm text-gray-600">ê¸´ê¸‰ê° ìˆëŠ” í•œì • ì´ë²¤íŠ¸ í˜ì´ì§€</p>
                        </button>
                        <button onclick="selectTemplate('student-report', event)" class="template-btn p-6 border-2 border-gray-200 rounded-xl hover:border-purple-600 transition text-left">
                            <div class="text-3xl mb-3">ğŸ“Š</div>
                            <div class="font-bold text-lg mb-2">í•™ìƒ ì„±ê³¼ ë¦¬í¬íŠ¸</div>
                            <p class="text-sm text-gray-600">ì›”ê°„ í•™ìŠµ ë¦¬í¬íŠ¸ ê³µìœ  í˜ì´ì§€</p>
                        </button>
                        <button onclick="selectTemplate('admission-info', event)" class="template-btn p-6 border-2 border-gray-200 rounded-xl hover:border-purple-600 transition text-left">
                            <div class="text-3xl mb-3">ğŸ“</div>
                            <div class="font-bold text-lg mb-2">ì…í•™ ì„¤ëª…íšŒ</div>
                            <p class="text-sm text-gray-600">ì„¤ëª…íšŒ ì•ˆë‚´ ë° ì°¸ì„ ìœ ë„ í˜ì´ì§€</p>
                        </button>
                        <button onclick="selectTemplate('academy-stats', event)" class="template-btn p-6 border-2 border-gray-200 rounded-xl hover:border-purple-600 transition text-left">
                            <div class="text-3xl mb-3">ğŸ“ˆ</div>
                            <div class="font-bold text-lg mb-2">í•™ì› ì„±ê³¼ í†µê³„</div>
                            <p class="text-sm text-gray-600">ì‹¤ì ê³¼ ì„±ê³¼ë¥¼ ìˆ˜ì¹˜ë¡œ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€</p>
                        </button>
                        <button onclick="selectTemplate('teacher-intro', event)" class="template-btn p-6 border-2 border-gray-200 rounded-xl hover:border-purple-600 transition text-left">
                            <div class="text-3xl mb-3">ğŸ‘¨â€ğŸ«</div>
                            <div class="font-bold text-lg mb-2">ì„ ìƒë‹˜ ì†Œê°œ</div>
                            <p class="text-sm text-gray-600">ê°•ì‚¬ì§„ì˜ ê²½ë ¥ê³¼ ì „ë¬¸ì„±ì„ ì†Œê°œ</p>
                        </button>
                    </div>
                </div>

                <!-- ì…ë ¥ í¼ ì˜ì—­ -->
                <div id="formArea" class="hidden">
                    <div class="bg-white rounded-xl p-8 border border-gray-200 mb-6">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">2ï¸âƒ£ ì •ë³´ ì…ë ¥</h2>
                        <form id="landingForm" class="space-y-6"></form>
                    </div>

                    <!-- í´ë” ì„ íƒ -->
                    <div class="bg-white rounded-xl p-8 border border-gray-200 mb-6">
                        <h2 class="text-2xl font-bold text-gray-900 mb-3">3ï¸âƒ£ í´ë” ì„ íƒ (ì„ íƒì‚¬í•­)</h2>
                        <p class="text-sm text-gray-600 mb-4">ëœë”©í˜ì´ì§€ë¥¼ ì €ì¥í•  í´ë”ë¥¼ ì„ íƒí•˜ì„¸ìš”</p>
                        <div class="space-y-4">
                            <div class="flex gap-3">
                                <select id="folderSelect" class="flex-1 px-4 py-3 border border-gray-300 rounded-xl">
                                    <option value="">í´ë” ì—†ìŒ (ë£¨íŠ¸ì— ì €ì¥)</option>
                                </select>
                                <button type="button" onclick="showNewFolderInput()" class="px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:shadow-lg transition">
                                    + ìƒˆ í´ë”
                                </button>
                            </div>
                            <div id="newFolderInput" class="hidden">
                                <div class="flex gap-3">
                                    <input type="text" id="newFolderName" placeholder="ìƒˆ í´ë” ì´ë¦„ ì…ë ¥" class="flex-1 px-4 py-3 border border-gray-300 rounded-xl">
                                    <button type="button" onclick="createFolder()" class="px-6 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 transition">
                                        ìƒì„±
                                    </button>
                                    <button type="button" onclick="hideNewFolderInput()" class="px-6 py-3 bg-gray-300 text-gray-700 rounded-xl hover:bg-gray-400 transition">
                                        ì·¨ì†Œ
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ì¸ë„¤ì¼ ì—…ë¡œë“œ -->
                    <div class="bg-white rounded-xl p-8 border border-gray-200 mb-6">
                        <h2 class="text-2xl font-bold text-gray-900 mb-3">4ï¸âƒ£ ì¸ë„¤ì¼ ì„¤ì • (ì„ íƒì‚¬í•­)</h2>
                        <p class="text-sm text-gray-600 mb-6">ì¹´ì¹´ì˜¤í†¡, í˜ì´ìŠ¤ë¶ ë“±ì—ì„œ ë§í¬ ê³µìœ  ì‹œ ë³´ì—¬ì§ˆ ì´ë¯¸ì§€ë¥¼ ì„¤ì •í•˜ì„¸ìš”</p>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì¸ë„¤ì¼ ì´ë¯¸ì§€ URL</label>
                                <input type="text" id="thumbnailUrl" placeholder="https://example.com/image.jpg (ì„ íƒì‚¬í•­)" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                                <p class="text-xs text-gray-500 mt-2">ğŸ’¡ ì´ë¯¸ì§€ URLì„ ì…ë ¥í•˜ê±°ë‚˜, íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš” (ê¶Œì¥ í¬ê¸°: 1200x630px)</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ë˜ëŠ” íŒŒì¼ ì—…ë¡œë“œ</label>
                                <input type="file" id="thumbnailFile" accept="image/*" class="w-full px-4 py-3 border border-gray-300 rounded-xl" onchange="handleThumbnailUpload(event)">
                            </div>
                            <div id="thumbnailPreview" class="hidden">
                                <p class="text-sm font-medium text-gray-900 mb-2">ë¯¸ë¦¬ë³´ê¸°</p>
                                <img id="thumbnailPreviewImg" src="" alt="ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸°" class="w-full max-w-md rounded-lg border border-gray-300 shadow-sm">
                            </div>
                        </div>
                    </div>

                    <!-- ê³µìœ  ì‹œ í‘œì‹œë  ì œëª©/ì„¤ëª… ì„¤ì • -->
                    <div class="bg-white rounded-xl p-8 border border-gray-200 mb-6">
                        <h2 class="text-2xl font-bold text-gray-900 mb-3">5ï¸âƒ£ ê³µìœ  ì‹œ í‘œì‹œ ë‚´ìš© (ì„ íƒì‚¬í•­)</h2>
                        <p class="text-sm text-gray-600 mb-6">ì¹´ì¹´ì˜¤í†¡, í˜ì´ìŠ¤ë¶ ë“±ì—ì„œ ë§í¬ ê³µìœ  ì‹œ ë³´ì—¬ì§ˆ ì œëª©ê³¼ ì„¤ëª…ì„ ì„¤ì •í•˜ì„¸ìš”</p>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">í° ê¸€ì (ì œëª©)</label>
                                <input type="text" id="ogTitle" placeholder="ì˜ˆ: ê¾¸ë©”ë•…í•™ì› ê²¨ìš¸ë°©í•™ íŠ¹ê°• ëª¨ì§‘" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                                <p class="text-xs text-gray-500 mt-1">ğŸ’¡ ë¹„ì›Œë‘ë©´ ëœë”©í˜ì´ì§€ ì œëª©ì´ ìë™ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì‘ì€ ê¸€ì (ì„¤ëª…)</label>
                                <textarea id="ogDescription" rows="2" placeholder="ì˜ˆ: ì¤‘ë“± ì˜ì–´/ìˆ˜í•™ ì§‘ì¤‘ ì¼€ì–´! ì„ ì°©ìˆœ 20ëª… í•œì • í• ì¸ ì¤‘" class="w-full px-4 py-3 border border-gray-300 rounded-xl"></textarea>
                                <p class="text-xs text-gray-500 mt-1">ğŸ’¡ ë¹„ì›Œë‘ë©´ ê¸°ë³¸ ì„¤ëª…ì´ ì‚¬ìš©ë©ë‹ˆë‹¤</p>
                            </div>
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <p class="text-sm text-blue-800">
                                    <strong>ğŸ“± ì¹´ì¹´ì˜¤í†¡ ë¯¸ë¦¬ë³´ê¸°</strong><br>
                                    <span class="text-base font-bold text-gray-900" id="previewOgTitle">ê¾¸ë©”ë•…í•™ì› ê²¨ìš¸ë°©í•™ íŠ¹ê°• ëª¨ì§‘</span><br>
                                    <span class="text-sm text-gray-600" id="previewOgDescription">ì¤‘ë“± ì˜ì–´/ìˆ˜í•™ ì§‘ì¤‘ ì¼€ì–´! ì„ ì°©ìˆœ 20ëª… í•œì • í• ì¸ ì¤‘</span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <button onclick="generateLanding()" class="w-full gradient-purple text-white py-4 rounded-xl text-lg font-bold hover:shadow-xl transition">
                        ğŸš€ ëœë”©í˜ì´ì§€ ìƒì„±í•˜ê¸°
                    </button>
                    
                    <a href="https://developers.kakao.com/tool/debugger/sharing" target="_blank" class="block w-full text-center bg-yellow-500 hover:bg-yellow-600 text-white py-4 rounded-xl text-lg font-bold hover:shadow-xl transition mt-4">
                        ğŸ”„ ì¹´ì¹´ì˜¤í†¡ ìºì‹œ ì´ˆê¸°í™”í•˜ê¸°
                    </a>
                </div>

                <!-- ê²°ê³¼ ì˜ì—­ -->
                <div id="resultArea" class="hidden">
                    <div class="bg-white rounded-xl p-8 border-2 border-green-500">
                        <h2 class="text-2xl font-bold text-green-600 mb-4">âœ… ëœë”©í˜ì´ì§€ ìƒì„± ì™„ë£Œ!</h2>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ê³µìœ  ë§í¬</label>
                                <div class="flex gap-2">
                                    <input type="text" id="shareUrl" readonly class="flex-1 px-4 py-3 border border-gray-300 rounded-lg bg-gray-50">
                                    <button onclick="copyUrl()" class="px-6 py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700">
                                        ğŸ“‹ ë³µì‚¬
                                    </button>
                                </div>
                            </div>
                            <div class="flex gap-3">
                                <a id="previewBtn" href="#" target="_blank" class="flex-1 text-center py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700">
                                    ğŸ‘ï¸ ë¯¸ë¦¬ë³´ê¸°
                                </a>
                                <a href="/tools/landing-manager" class="flex-1 text-center py-3 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700">
                                    ğŸ“ ê´€ë¦¬ í˜ì´ì§€
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
        let selectedTemplate = '';
        let user = null;
        let userFolders = [];

        // ë¡œê·¸ì¸ ì²´í¬ (ì„ íƒì )
        const userData = localStorage.getItem('user');
        if (userData) {
            user = JSON.parse(userData);
            // ì‚¬ìš©ì í´ë” ëª©ë¡ ë¡œë“œ
            loadUserFolders();
        } else {
            // ë¡œê·¸ì¸ ì—†ì´ë„ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•˜ë„ë¡ ê¸°ë³¸ ì‚¬ìš©ì ì„¤ì •
            user = { id: 1, name: 'ê²ŒìŠ¤íŠ¸' };
            console.warn('ë¡œê·¸ì¸í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê²ŒìŠ¤íŠ¸ ëª¨ë“œë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.');
            loadUserFolders();
        }

        // ì‚¬ìš©ì í´ë” ëª©ë¡ ë¡œë“œ
        async function loadUserFolders() {
            try {
                const response = await fetch('/api/landing/folders?userId=' + user.id);
                const result = await response.json();
                if (result.success) {
                    userFolders = result.folders || [];
                    updateFolderSelect();
                }
            } catch (err) {
                console.error('í´ë” ë¡œë“œ ì‹¤íŒ¨:', err);
            }
        }

        // í´ë” ì„ íƒ ë“œë¡­ë‹¤ìš´ ì—…ë°ì´íŠ¸
        function updateFolderSelect() {
            const select = document.getElementById('folderSelect');
            if (!select) return;
            
            // ê¸°ì¡´ ì˜µì…˜ ì œê±° (ì²« ë²ˆì§¸ "í´ë” ì—†ìŒ" ì œì™¸)
            while (select.options.length > 1) {
                select.remove(1);
            }
            
            // í´ë” ëª©ë¡ ì¶”ê°€
            userFolders.forEach(folder => {
                const option = document.createElement('option');
                option.value = folder.id;
                option.textContent = folder.name;
                select.appendChild(option);
            });
            
            // ë§ˆì§€ë§‰ ì„ íƒí•œ í´ë”ê°€ ìˆìœ¼ë©´ ìë™ ì„ íƒ
            const lastFolderId = localStorage.getItem('lastSelectedFolder');
            if (lastFolderId) {
                select.value = lastFolderId;
            }
        }

        // ìƒˆ í´ë” ì…ë ¥ì°½ í‘œì‹œ
        function showNewFolderInput() {
            document.getElementById('newFolderInput').classList.remove('hidden');
            document.getElementById('newFolderName').focus();
        }

        // ìƒˆ í´ë” ì…ë ¥ì°½ ìˆ¨ê¸°ê¸°
        function hideNewFolderInput() {
            document.getElementById('newFolderInput').classList.add('hidden');
            document.getElementById('newFolderName').value = '';
        }

        // ìƒˆ í´ë” ìƒì„±
        async function createFolder() {
            const folderName = document.getElementById('newFolderName').value.trim();
            if (!folderName) {
                alert('í´ë” ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            try {
                const response = await fetch('/api/landing/folders', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        userId: user.id,
                        name: folderName
                    })
                });

                const result = await response.json();
                if (result.success) {
                    alert('âœ… í´ë” "' + folderName + '"ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    hideNewFolderInput();
                    await loadUserFolders();
                    // ìƒˆë¡œ ìƒì„±í•œ í´ë” ìë™ ì„ íƒ
                    document.getElementById('folderSelect').value = result.folderId;
                } else {
                    alert('í´ë” ìƒì„± ì‹¤íŒ¨: ' + result.error);
                }
            } catch (err) {
                console.error('í´ë” ìƒì„± ì˜¤ë¥˜:', err);
                alert('í´ë” ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function logout() {
            localStorage.removeItem('user');
            window.location.href = '/';
        }

        function selectTemplate(type, event) {
            selectedTemplate = type;
            document.querySelectorAll('.template-btn').forEach(btn => {
                btn.classList.remove('border-purple-600', 'bg-purple-50');
            });
            event.target.closest('.template-btn').classList.add('border-purple-600', 'bg-purple-50');
            
            showForm(type);
        }

        function showForm(type) {
            const forms = {
                'academy-intro': \`
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">í•™ì›ëª… *</label>
                            <input type="text" name="academyName" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ìœ„ì¹˜ *</label>
                            <input type="text" name="location" placeholder="ì˜ˆ: ì¸ì²œ ì„œêµ¬ ì²­ë¼ë™" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">í•œ ì¤„ ì†Œê°œ *</label>
                            <input type="text" name="features" placeholder="ì˜ˆ: 1:1 ë§ì¶¤ êµìœ¡ìœ¼ë¡œ ì„±ì  í–¥ìƒì„ ì±…ì„ì§‘ë‹ˆë‹¤" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">íŠ¹ë³„í•œ ê°•ì  (1ê°œë‹¹ í•œ ì¤„, ìµœëŒ€ 4ê°œ) *</label>
                            <textarea name="specialties" rows="4" placeholder="10ë…„ ê²½ë ¥ì˜ ì „ë¬¸ ê°•ì‚¬ì§„&#10;ì†Œê·œëª¨ ê·¸ë£¹ ìˆ˜ì—…ìœ¼ë¡œ ì§‘ì¤‘ ì¼€ì–´&#10;ì…ì‹œ ì „ë¬¸ ì»¨ì„¤íŒ… ë¬´ë£Œ ì œê³µ&#10;ë‚´ì‹  í‰ê·  2ë“±ê¸‰ í–¥ìƒ ì‹¤ì " required class="w-full px-4 py-3 border border-gray-300 rounded-xl"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì—°ë½ì²˜ *</label>
                            <input type="text" name="contact" placeholder="ì˜ˆ: 010-1234-5678" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                    </div>
                \`,
                'program-promo': \`
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">í”„ë¡œê·¸ë¨ëª… *</label>
                            <input type="text" name="programName" placeholder="ì˜ˆ: ì¤‘ë“± ì˜ì–´ íŠ¹ê°•ë°˜" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ëŒ€ìƒ *</label>
                            <input type="text" name="target" placeholder="ì˜ˆ: ì¤‘1~ì¤‘3" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">íŠ¹ì§• (1ê°œë‹¹ í•œ ì¤„) *</label>
                            <textarea name="features" rows="3" placeholder="ë‚´ì‹  ëŒ€ë¹„ ì™„ë²½ ì¤€ë¹„&#10;ë¬¸ë²•ë¶€í„° ë…í•´ê¹Œì§€ ì²´ê³„ì  í•™ìŠµ&#10;ì£¼ 3íšŒ ì†Œê·¸ë£¹ ìˆ˜ì—…" required class="w-full px-4 py-3 border border-gray-300 rounded-xl"></textarea>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ê°€ê²© *</label>
                                <input type="text" name="price" placeholder="ì˜ˆ: 350,000" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ê¸°ê°„ *</label>
                                <input type="text" name="duration" placeholder="ì˜ˆ: 3ê°œì›” ê³¼ì •" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì‹ ì²­ ë§í¬ ë˜ëŠ” ì „í™”ë²ˆí˜¸</label>
                            <input type="text" name="cta" placeholder="ì˜ˆ: 010-1234-5678 ë˜ëŠ” URL" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                    </div>
                \`,
                'event-promo': \`
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì´ë²¤íŠ¸ëª… *</label>
                            <input type="text" name="eventName" placeholder="ì˜ˆ: ê²¨ìš¸ë°©í•™ íŠ¹ê°• ì¡°ê¸°ë“±ë¡ ì´ë²¤íŠ¸" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ê¸°ê°„ *</label>
                            <input type="text" name="period" placeholder="ì˜ˆ: 12ì›” 20ì¼ ~ 12ì›” 31ì¼" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ê¸´ê¸‰ê° ë¬¸êµ¬ *</label>
                            <input type="text" name="urgency" placeholder="ì˜ˆ: ì„ ì°©ìˆœ 20ëª… í•œì •" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">í˜œíƒ (1ê°œë‹¹ í•œ ì¤„) *</label>
                            <textarea name="benefits" rows="3" placeholder="ë“±ë¡ë¹„ 50% í• ì¸&#10;êµì¬ë¹„ ì „ì•¡ ë¬´ë£Œ&#10;1:1 ë ˆë²¨ í…ŒìŠ¤íŠ¸ ë¬´ë£Œ ì œê³µ" required class="w-full px-4 py-3 border border-gray-300 rounded-xl"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì‹ ì²­ ë§í¬ ë˜ëŠ” ì „í™”ë²ˆí˜¸</label>
                            <input type="text" name="cta" placeholder="ì˜ˆ: 010-1234-5678" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                    </div>
                \`,
                'student-report': \`
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">í•™ìƒ ì´ë¦„ *</label>
                                <input type="text" name="studentName" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì›” *</label>
                                <input type="text" name="month" placeholder="ì˜ˆ: 2024ë…„ 12ì›”" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì‚¬ìš© êµì¬ (1ê°œë‹¹ í•œ ì¤„)</label>
                            <textarea name="textbooks" rows="2" placeholder="ì¤‘ë“± ìˆ˜í•™ 2-1&#10;ë¬¸ë²•ì´ ì“°ê¸°ë‹¤&#10;ì˜ë‹¨ì–´ ì•”ê¸°ì¥ LEVEL 3" class="w-full px-4 py-3 border border-gray-300 rounded-xl"></textarea>
                            <p class="text-xs text-gray-500 mt-1">ğŸ’¡ ë¹„ì›Œë‘ë©´ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤</p>
                        </div>
                        <div class="grid grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì¶œì„ë¥  (%)</label>
                                <input type="number" name="attendanceRate" placeholder="95" min="0" max="100" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì¶œì„ ì¼ìˆ˜</label>
                                <input type="number" name="attendanceDays" placeholder="19" min="0" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì´ ì¼ìˆ˜</label>
                                <input type="number" name="totalDays" placeholder="20" min="0" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì´ë‹¬ì˜ ì„±ê³¼ (1ê°œë‹¹ í•œ ì¤„) *</label>
                            <textarea name="achievements" rows="3" placeholder="ì¤‘ê°„ê³ ì‚¬ ì˜ì–´ 90ì  ë‹¬ì„±&#10;ë‹¨ì–´ ì•”ê¸° 500ê°œ ì™„ë£Œ&#10;ëª¨ì˜ê³ ì‚¬ 3ë“±ê¸‰ì—ì„œ 2ë“±ê¸‰ í–¥ìƒ" required class="w-full px-4 py-3 border border-gray-300 rounded-xl"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„ (1ê°œë‹¹ í•œ ì¤„)</label>
                            <textarea name="improvements" rows="2" placeholder="ë…í•´ ì†ë„ í–¥ìƒ í•„ìš”&#10;ë¬¸ë²• ì‹¬í™” í•™ìŠµ ê¶Œì¥" class="w-full px-4 py-3 border border-gray-300 rounded-xl"></textarea>
                            <p class="text-xs text-gray-500 mt-1">ğŸ’¡ ë¹„ì›Œë‘ë©´ í‘œì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ë‹¤ìŒ ë‹¬ ëª©í‘œ (1ê°œë‹¹ í•œ ì¤„) *</label>
                            <textarea name="nextGoals" rows="2" placeholder="ê¸°ë§ê³ ì‚¬ 95ì  ëª©í‘œ&#10;ë“£ê¸° í‰ê°€ ë§Œì  ë„ì „" required class="w-full px-4 py-3 border border-gray-300 rounded-xl"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ë‹´ë‹¹ ì„ ìƒë‹˜</label>
                            <input type="text" name="teacherName" placeholder="ì˜ˆ: ê¹€ì˜í¬ ì„ ìƒë‹˜" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                    </div>
                \`,
                'admission-info': \`
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì„¤ëª…íšŒ ì œëª© *</label>
                            <input type="text" name="eventTitle" placeholder="ì˜ˆ: 2025í•™ë…„ë„ ì‹ ì…ìƒ ëª¨ì§‘ ì„¤ëª…íšŒ" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ë‚ ì§œ *</label>
                                <input type="text" name="eventDate" placeholder="ì˜ˆ: 2024ë…„ 12ì›” 28ì¼" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì‹œê°„ *</label>
                                <input type="text" name="eventTime" placeholder="ì˜ˆ: ì˜¤í›„ 2ì‹œ" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì¥ì†Œ *</label>
                            <input type="text" name="location" placeholder="ì˜ˆ: ê¾¸ë©”ë•…í•™ì› 2ì¸µ ì„¸ë¯¸ë‚˜ì‹¤" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ëŒ€ìƒ í•™ë…„</label>
                            <input type="text" name="targetGrade" placeholder="ì˜ˆ: ì˜ˆë¹„ ì´ˆ1~ì´ˆ6" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì„¤ëª…íšŒ ì•ˆë‚´ (1ê°œë‹¹ í•œ ì¤„) *</label>
                            <textarea name="agenda" rows="4" placeholder="í•™ì› êµìœ¡ ì² í•™ ì†Œê°œ&#10;ê°•ì‚¬ì§„ ì†Œê°œ ë° ì»¤ë¦¬í˜ëŸ¼ ì•ˆë‚´&#10;ì…í•™ ì ˆì°¨ ë° ë“±ë¡ ë°©ë²•&#10;ì§ˆì˜ì‘ë‹µ ì‹œê°„" required class="w-full px-4 py-3 border border-gray-300 rounded-xl"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì°¸ì„ í˜œíƒ (1ê°œë‹¹ í•œ ì¤„) *</label>
                            <textarea name="benefits" rows="3" placeholder="ë“±ë¡ë¹„ 50% í• ì¸ ì¿ í°&#10;êµì¬ë¹„ ì „ì•¡ ë¬´ë£Œ&#10;ë ˆë²¨ í…ŒìŠ¤íŠ¸ ë¬´ë£Œ" required class="w-full px-4 py-3 border border-gray-300 rounded-xl"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì—°ë½ì²˜ *</label>
                            <input type="text" name="contact" placeholder="ì˜ˆ: 032-123-4567" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                    </div>
                \`,
                'academy-stats': \`
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">í•™ì›ëª… *</label>
                            <input type="text" name="academyName" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ê¸°ê°„ *</label>
                            <input type="text" name="period" placeholder="ì˜ˆ: 2024ë…„ 2í•™ê¸°" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì´ ì¬í•™ìƒ ìˆ˜</label>
                                <input type="text" name="totalStudents" placeholder="ì˜ˆ: 150" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">í‰ê·  ì„±ì  í–¥ìƒ</label>
                                <input type="text" name="gradeImprovement" placeholder="ì˜ˆ: 2ë“±ê¸‰" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì£¼ìš” ì„±ê³¼ (1ê°œë‹¹ í•œ ì¤„) *</label>
                            <textarea name="achievements" rows="4" placeholder="ì „êµ­ ëª¨ì˜ê³ ì‚¬ 1ë“±ê¸‰ ë‹¬ì„± 10ëª…&#10;ë‚´ì‹  í‰ê·  2ë“±ê¸‰ ì´ìƒ í–¥ìƒ&#10;ëª…ë¬¸ëŒ€ í•©ê²©ë¥  85%&#10;í•™ë¶€ëª¨ ë§Œì¡±ë„ 95%" required class="w-full px-4 py-3 border border-gray-300 rounded-xl"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">í•™ë¶€ëª¨ í›„ê¸° (1ê°œë‹¹ í•œ ì¤„) *</label>
                            <textarea name="testimonials" rows="3" placeholder="ì•„ì´ ì„±ì ì´ 2ë“±ê¸‰ì´ë‚˜ ì˜¬ëì–´ìš”!&#10;ì„ ìƒë‹˜ë“¤ì´ ì •ë§ ì¹œì ˆí•˜ê³  ì—´ì •ì ì…ë‹ˆë‹¤&#10;ì²´ê³„ì ì¸ ê´€ë¦¬ ë•ë¶„ì— ì•ˆì‹¬í•˜ê³  ë§¡ê¹ë‹ˆë‹¤" required class="w-full px-4 py-3 border border-gray-300 rounded-xl"></textarea>
                        </div>
                    </div>
                \`,
                'teacher-intro': \`
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì„ ìƒë‹˜ ì´ë¦„ *</label>
                            <input type="text" name="teacherName" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì „ë¬¸ ê³¼ëª© *</label>
                                <input type="text" name="subject" placeholder="ì˜ˆ: ì˜ì–´" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ê²½ë ¥ (ë…„) *</label>
                                <input type="text" name="experience" placeholder="ì˜ˆ: 10" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">í•™ë ¥ *</label>
                            <input type="text" name="education" placeholder="ì˜ˆ: ì„œìš¸ëŒ€í•™êµ ì˜ì–´êµìœ¡ê³¼ ì¡¸ì—…" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì „ë¬¸ ë¶„ì•¼ *</label>
                            <input type="text" name="specialty" placeholder="ì˜ˆ: ìˆ˜ëŠ¥ ì˜ì–´, ë‚´ì‹  ëŒ€ë¹„, ì˜ë¬¸ë²• íŠ¹í™”" required class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì£¼ìš” ì‹¤ì  (1ê°œë‹¹ í•œ ì¤„) *</label>
                            <textarea name="achievements" rows="3" placeholder="ìˆ˜ëŠ¥ 1ë“±ê¸‰ í•™ìƒ 50ëª… ì´ìƒ ë°°ì¶œ&#10;í•™ìƒ í‰ê·  2ë“±ê¸‰ í–¥ìƒ ë‹¬ì„±&#10;í•™ë¶€ëª¨ ë§Œì¡±ë„ 98%" required class="w-full px-4 py-3 border border-gray-300 rounded-xl"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ìˆ˜ì—… ë°©ì‹ *</label>
                            <textarea name="teachingStyle" rows="3" placeholder="ê°œì¸ë³„ ë§ì¶¤ ì§„ë„, ì²´ê³„ì ì¸ ì˜¤ë‹µ ê´€ë¦¬, ì‹¤ì „ ë¬¸ì œ í’€ì´ ì¤‘ì‹¬" required class="w-full px-4 py-3 border border-gray-300 rounded-xl"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì—°ë½ì²˜</label>
                            <input type="text" name="contact" placeholder="ì˜ˆ: 032-123-4567" class="w-full px-4 py-3 border border-gray-300 rounded-xl">
                        </div>
                    </div>
                \`
            };

            document.getElementById('landingForm').innerHTML = forms[type];
            document.getElementById('formArea').classList.remove('hidden');
            document.getElementById('formArea').scrollIntoView({ behavior: 'smooth' });
        }

        // ì¸ë„¤ì¼ ì—…ë¡œë“œ ì²˜ë¦¬
        async function handleThumbnailUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // íŒŒì¼ íƒ€ì… ì²´í¬
            if (!file.type.startsWith('image/')) {
                alert('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                event.target.value = '';
                return;
            }

            // ë¡œë”© í‘œì‹œ
            alert('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ì…ë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...');

            try {
                // ì´ë¯¸ì§€ë¥¼ ë¦¬ì‚¬ì´ì§•í•˜ì—¬ Base64ë¡œ ë³€í™˜
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    let width = img.width;
                    let height = img.height;
                    
                    // ìµœëŒ€ í¬ê¸°: 1200x630 (OG ì´ë¯¸ì§€ ê¶Œì¥ ì‚¬ì´ì¦ˆ)
                    const maxWidth = 1200;
                    const maxHeight = 630;
                    
                    if (width > maxWidth || height > maxHeight) {
                        const ratio = Math.min(maxWidth / width, maxHeight / height);
                        width = Math.floor(width * ratio);
                        height = Math.floor(height * ratio);
                    }
                    
                    canvas.width = width;
                    canvas.height = height;
                    
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    // JPEGë¡œ ì••ì¶• (í’ˆì§ˆ 0.85)
                    canvas.toBlob(async function(blob) {
                        // imgbb APIë¡œ ì—…ë¡œë“œ
                        const formData = new FormData();
                        formData.append('image', blob);
                        
                        try {
                            // imgbb ë¬´ë£Œ API í‚¤
                            const apiKey = 'a6acb7467153b3cf20cff3f57aa812a8';
                            
                            const response = await fetch(\`https://api.imgbb.com/1/upload?key=\${apiKey}\`, {
                                method: 'POST',
                                body: formData
                            });
                            
                            const result = await response.json();
                            
                            if (result.success && result.data && result.data.url) {
                                const imageUrl = result.data.url;
                                
                                // UI ì—…ë°ì´íŠ¸
                                document.getElementById('thumbnailUrl').value = imageUrl;
                                document.getElementById('thumbnailPreviewImg').src = imageUrl;
                                document.getElementById('thumbnailPreview').classList.remove('hidden');
                                
                                alert('âœ… ì´ë¯¸ì§€ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!\\n\\nURL: ' + imageUrl);
                            } else {
                                // imgbb ì‹¤íŒ¨ ì‹œ Base64ë¡œ í´ë°±
                                const dataUrl = canvas.toDataURL('image/jpeg', 0.85);
                                
                                document.getElementById('thumbnailUrl').value = dataUrl;
                                document.getElementById('thumbnailPreviewImg').src = dataUrl;
                                document.getElementById('thumbnailPreview').classList.remove('hidden');
                                
                                alert('âœ… ì´ë¯¸ì§€ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
                            }
                        } catch (err) {
                            console.error('imgbb ì—…ë¡œë“œ ì˜¤ë¥˜:', err);
                            
                            // API ì‹¤íŒ¨ ì‹œ Base64ë¡œ í´ë°±
                            const dataUrl = canvas.toDataURL('image/jpeg', 0.85);
                            
                            document.getElementById('thumbnailUrl').value = dataUrl;
                            document.getElementById('thumbnailPreviewImg').src = dataUrl;
                            document.getElementById('thumbnailPreview').classList.remove('hidden');
                            
                            alert('âœ… ì´ë¯¸ì§€ê°€ ë¡œì»¬ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                        }
                    }, 'image/jpeg', 0.85);
                };
                
                img.onerror = function() {
                    alert('âŒ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    event.target.value = '';
                };
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
                
            } catch (err) {
                console.error('ì—…ë¡œë“œ ì˜¤ë¥˜:', err);
                alert('âŒ ì´ë¯¸ì§€ ì—…ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.\\n\\nì´ë¯¸ì§€ URLì„ ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                event.target.value = '';
            }
        }

        // OG ì œëª©/ì„¤ëª… ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°
        document.addEventListener('DOMContentLoaded', function() {
            const ogTitleInput = document.getElementById('ogTitle');
            const ogDescInput = document.getElementById('ogDescription');
            const previewTitle = document.getElementById('previewOgTitle');
            const previewDesc = document.getElementById('previewOgDescription');

            if (ogTitleInput && previewTitle) {
                ogTitleInput.addEventListener('input', function() {
                    previewTitle.textContent = this.value || 'ê¾¸ë©”ë•…í•™ì› ê²¨ìš¸ë°©í•™ íŠ¹ê°• ëª¨ì§‘';
                });
            }

            if (ogDescInput && previewDesc) {
                ogDescInput.addEventListener('input', function() {
                    previewDesc.textContent = this.value || 'ì¤‘ë“± ì˜ì–´/ìˆ˜í•™ ì§‘ì¤‘ ì¼€ì–´! ì„ ì°©ìˆœ 20ëª… í•œì • í• ì¸ ì¤‘';
                });
            }
        });

        async function generateLanding() {
            if (!selectedTemplate) {
                alert('í…œí”Œë¦¿ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            const formData = new FormData(document.getElementById('landingForm'));
            const data = Object.fromEntries(formData);

            // ì¸ë„¤ì¼ URL ê°€ì ¸ì˜¤ê¸°
            const thumbnailUrl = document.getElementById('thumbnailUrl').value || '';
            
            // OG ì œëª©/ì„¤ëª… ê°€ì ¸ì˜¤ê¸°
            const ogTitle = document.getElementById('ogTitle').value || '';
            const ogDescription = document.getElementById('ogDescription').value || '';
            
            // ì„ íƒëœ í´ë” ê°€ì ¸ì˜¤ê¸°
            const folderId = document.getElementById('folderSelect').value || null;
            
            // ì„ íƒëœ í´ë”ë¥¼ localStorageì— ì €ì¥ (ë‹¤ìŒë²ˆì— ìë™ ì„ íƒ)
            if (folderId) {
                localStorage.setItem('lastSelectedFolder', folderId);
            } else {
                localStorage.removeItem('lastSelectedFolder');
            }

            // ë°°ì—´ë¡œ ë³€í™˜ì´ í•„ìš”í•œ í•„ë“œë“¤
            if (data.specialties) data.specialties = data.specialties.split('\\n').filter(s => s.trim());
            if (data.features) data.features = data.features.split('\\n').filter(s => s.trim());
            if (data.benefits) data.benefits = data.benefits.split('\\n').filter(s => s.trim());
            if (data.achievements) data.achievements = data.achievements.split('\\n').filter(s => s.trim());
            if (data.improvements) data.improvements = data.improvements.split('\\n').filter(s => s.trim());
            if (data.nextGoals) data.nextGoals = data.nextGoals.split('\\n').filter(s => s.trim());
            if (data.textbooks) data.textbooks = data.textbooks.split('\\n').filter(s => s.trim());

            // ì œëª© ìƒì„±
            let title = '';
            if (selectedTemplate === 'academy-intro') title = data.academyName + ' ì†Œê°œ';
            else if (selectedTemplate === 'program-promo') title = data.programName;
            else if (selectedTemplate === 'event-promo') title = data.eventName;
            else if (selectedTemplate === 'student-report') title = data.studentName + ' ' + data.month + ' ë¦¬í¬íŠ¸';
            else if (selectedTemplate === 'admission-info') title = data.eventTitle;
            else if (selectedTemplate === 'academy-stats') title = data.academyName + ' ' + data.period + ' ì„±ê³¼';
            else if (selectedTemplate === 'teacher-intro') title = data.teacherName + ' ì„ ìƒë‹˜';

            // ë°°ì—´ í•„ë“œ ì²˜ë¦¬ - ìƒˆë¡œìš´ í…œí”Œë¦¿ í¬í•¨
            if (data.agenda) data.agenda = data.agenda.split('\\n').filter(s => s.trim());
            if (data.testimonials) data.testimonials = data.testimonials.split('\\n').filter(s => s.trim());

            try {
                // ë””ë²„ê¹…: ì „ì†¡í•  ë°ì´í„° í™•ì¸
                console.log('ğŸ” ì „ì†¡í•  ë°ì´í„°:', {
                    title,
                    template_type: selectedTemplate,
                    thumbnail_url: thumbnailUrl,
                    og_title: ogTitle,
                    og_description: ogDescription,
                    folder_id: folderId
                });
                
                // í•œê¸€ í¬í•¨ëœ ì‚¬ìš©ì ë°ì´í„°ë¥¼ Base64ë¡œ ì¸ì½”ë”©
                const userDataStr = JSON.stringify(user || {id: 1});
                const userDataBase64 = btoa(unescape(encodeURIComponent(userDataStr)));
                
                const response = await fetch('/api/landing/create', {
                    method: 'POST',
                    headers: { 
                        'Content-Type': 'application/json',
                        'X-User-Data-Base64': userDataBase64
                    },
                    body: JSON.stringify({
                        title,
                        template_type: selectedTemplate,
                        input_data: data,
                        thumbnail_url: thumbnailUrl,
                        og_title: ogTitle,
                        og_description: ogDescription,
                        folder_id: folderId
                    })
                });

                const result = await response.json();
                if (result.success) {
                    const fullUrl = window.location.origin + result.url;
                    document.getElementById('shareUrl').value = fullUrl;
                    document.getElementById('previewBtn').href = result.url;
                    document.getElementById('resultArea').classList.remove('hidden');
                    document.getElementById('resultArea').scrollIntoView({ behavior: 'smooth' });
                } else {
                    alert('ì˜¤ë¥˜: ' + result.error);
                }
            } catch (err) {
                console.error('ëœë”©í˜ì´ì§€ ìƒì„± ì—ëŸ¬:', err);
                alert('ëœë”©í˜ì´ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•˜ì„¸ìš”: ' + error.message);
            }
        }

        function copyUrl() {
            const input = document.getElementById('shareUrl');
            input.select();
            document.execCommand('copy');
            alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
        <\/script>
    </body>
    </html>
  `));d.get("/tools/landing-manager",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë‚´ ëœë”©í˜ì´ì§€ - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * { font-family: 'Pretendard Variable', sans-serif; }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100">
            <div class="max-w-7xl mx-auto px-6">
                <div class="flex justify-between items-center h-16">
                    <span class="text-xl font-bold text-gray-900">ë‚´ ëœë”©í˜ì´ì§€</span>
                    <div class="flex gap-4">
                        <a href="/dashboard" class="text-gray-600 hover:text-purple-600">ëŒ€ì‹œë³´ë“œ</a>
                        <a href="/tools/landing-builder" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">+ ìƒˆë¡œ ë§Œë“¤ê¸°</a>
                        <button onclick="logout()" class="text-gray-600 hover:text-red-600">ë¡œê·¸ì•„ì›ƒ</button>
                    </div>
                </div>
            </div>
        </nav>

        <div class="pt-24 pb-12 px-6">
            <div class="max-w-6xl mx-auto">
                <div class="mb-8 flex justify-between items-start">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900 mb-2">ğŸ“ ë‚´ ëœë”©í˜ì´ì§€</h1>
                        <p class="text-gray-600">ìƒì„±í•œ ëœë”©í˜ì´ì§€ë¥¼ í´ë”ë¡œ ì •ë¦¬í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”</p>
                    </div>
                    <button onclick="openFolderModal()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium">
                        + ìƒˆ í´ë”
                    </button>
                </div>

                <!-- Folders -->
                <div class="mb-8">
                    <div class="flex gap-3 overflow-x-auto pb-4" id="foldersList">
                        <button onclick="selectFolder(null)" id="folder-all" class="folder-btn px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 whitespace-nowrap">
                            ğŸ“ ì „ì²´ (0)
                        </button>
                    </div>
                </div>

                <!-- Pages List -->
                <div id="pagesList" class="space-y-4">
                    <div class="text-center py-12 text-gray-500">ë¡œë”©ì¤‘...</div>
                </div>
            </div>
        </div>

        <!-- Folder Modal -->
        <div id="folderModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ìƒˆ í´ë” ë§Œë“¤ê¸°</h2>
                <input type="text" id="folderName" placeholder="í´ë” ì´ë¦„ (ì˜ˆ: í•™ë¶€ëª¨ ê³µìœ ìš©)" 
                       class="w-full px-4 py-3 border border-gray-300 rounded-xl mb-6">
                <div class="flex gap-3">
                    <button onclick="closeFolderModal()" class="flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200">
                        ì·¨ì†Œ
                    </button>
                    <button onclick="createFolder()" class="flex-1 px-4 py-3 bg-purple-600 text-white rounded-xl hover:bg-purple-700">
                        ìƒì„±
                    </button>
                </div>
            </div>
        </div>

        <!-- Move to Folder Modal -->
        <div id="moveFolderModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">í´ë”ë¡œ ì´ë™</h2>
                <div id="folderSelectList" class="space-y-2 mb-6 max-h-96 overflow-y-auto">
                    <!-- í´ë” ëª©ë¡ -->
                </div>
                <button onclick="closeMoveFolderModal()" class="w-full px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200">
                    ì·¨ì†Œ
                </button>
            </div>
        </div>

        <script>
        let user = null;
        let currentFolder = null;
        let allFolders = [];
        let currentPageToMove = null;

        const userData = localStorage.getItem('user');
        if (!userData) {
            alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
            window.location.href = '/login';
        } else {
            user = JSON.parse(userData);
            loadFolders();
            loadPages();
        }

        function logout() {
            localStorage.removeItem('user');
            window.location.href = '/';
        }

        // í´ë” ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadFolders() {
            try {
                const response = await fetch('/api/landing/folders?userId=' + user.id);
                const result = await response.json();
                
                if (result.success && result.folders) {
                    allFolders = result.folders;
                    const foldersHtml = allFolders.map(f => 
                        '<button onclick="selectFolder(' + f.id + ')" id="folder-' + f.id + '" class="folder-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 whitespace-nowrap">' +
                            'ğŸ“ ' + f.name + ' (' + (f.page_count || 0) + ')' +
                        '</button>'
                    ).join('');
                    
                    document.getElementById('foldersList').innerHTML = 
                        '<button onclick="selectFolder(null)" id="folder-all" class="folder-btn px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 whitespace-nowrap">' +
                            'ğŸ“ ì „ì²´ (' + (result.totalPages || 0) + ')' +
                        '</button>' + foldersHtml;
                }
            } catch (err) {
                console.error('í´ë” ë¡œë“œ ì‹¤íŒ¨:', err);
            }
        }

        // í´ë” ì„ íƒ
        function selectFolder(folderId) {
            currentFolder = folderId;
            
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.folder-btn').forEach(btn => {
                btn.className = 'folder-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 whitespace-nowrap';
            });
            
            const selectedBtn = document.getElementById('folder-' + (folderId || 'all'));
            if (selectedBtn) {
                selectedBtn.className = 'folder-btn px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 whitespace-nowrap';
            }
            
            loadPages();
        }

        // í˜ì´ì§€ ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadPages() {
            try {
                let url = '/api/landing/my-pages?userId=' + user.id;
                if (currentFolder) {
                    url += '&folderId=' + currentFolder;
                }
                
                const response = await fetch(url);
                const result = await response.json();
                
                if (result.success && result.pages.length > 0) {
                    const html = result.pages.map(p => {
                        const typeNames = {
                            'academy-intro': 'ğŸ« í•™ì› ì†Œê°œ',
                            'program-promo': 'ğŸ“š í”„ë¡œê·¸ë¨ í™ë³´',
                            'event-promo': 'ğŸ‰ ì´ë²¤íŠ¸',
                            'student-report': 'ğŸ“Š í•™ìƒ ë¦¬í¬íŠ¸'
                        };
                        const url = window.location.origin + '/landing/' + p.slug;
                        const safeUrl = url.replace(/'/g, "\\'");
                        return '<div class="bg-white rounded-xl p-6 border border-gray-200 hover:shadow-lg transition">' +
                                '<div class="flex items-start justify-between">' +
                                    '<div class="flex-1">' +
                                        '<div class="flex items-center gap-3 mb-2">' +
                                            '<span class="px-3 py-1 bg-purple-100 text-purple-700 text-xs rounded-full font-medium">' +
                                                (typeNames[p.template_type] || p.template_type) +
                                            '</span>' +
                                            '<span class="text-sm text-gray-500">ì¡°íšŒìˆ˜: ' + p.view_count + '</span>' +
                                        '</div>' +
                                        '<h3 class="text-xl font-bold text-gray-900 mb-3">' + p.title + '</h3>' +
                                        '<div class="flex items-center gap-2 mb-3">' +
                                            '<input type="text" value="' + url + '" readonly class="flex-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-sm">' +
                                            '<button onclick="copyUrl(' + "'" + safeUrl + "'" + ')" class="px-4 py-2 bg-gray-600 text-white rounded-lg text-sm hover:bg-gray-700">ë³µì‚¬</button>' +
                                        '</div>' +
                                        '<p class="text-sm text-gray-500">ìƒì„±ì¼: ' + new Date(p.created_at).toLocaleString('ko-KR') + '</p>' +
                                    '</div>' +
                                    '<div class="flex flex-col gap-2 ml-4">' +
                                        '<a href="/landing/' + p.slug + '" target="_blank" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm text-center">ë¯¸ë¦¬ë³´ê¸°</a>' +
                                        '<button onclick="openMoveFolderModal(' + p.id + ')" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm">í´ë” ì´ë™</button>' +
                                        '<button onclick="deletePage(' + p.id + ')" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm">ì‚­ì œ</button>' +
                                    '</div>' +
                                '</div>' +
                            '</div>';
                    }).join('');
                    document.getElementById('pagesList').innerHTML = html;
                } else {
                    document.getElementById('pagesList').innerHTML = '<div class="text-center py-12">' +
                            '<p class="text-gray-500 mb-4">ëœë”©í˜ì´ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>' +
                            '<a href="/tools/landing-builder" class="inline-block px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700">ì²« ëœë”©í˜ì´ì§€ ë§Œë“¤ê¸°</a>' +
                        '</div>';
                }
            } catch (err) {
                document.getElementById('pagesList').innerHTML = '<div class="text-center py-12 text-red-500">ë¡œë”© ì‹¤íŒ¨</div>';
            }
        }

        function copyUrl(url) {
            navigator.clipboard.writeText(url).then(() => {
                alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }

        // í´ë” ëª¨ë‹¬
        function openFolderModal() {
            document.getElementById('folderModal').classList.remove('hidden');
        }

        function closeFolderModal() {
            document.getElementById('folderModal').classList.add('hidden');
            document.getElementById('folderName').value = '';
        }

        async function createFolder() {
            const name = document.getElementById('folderName').value.trim();
            if (!name) {
                alert('í´ë” ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }

            try {
                const response = await fetch('/api/landing/folders', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ userId: user.id, name })
                });
                const result = await response.json();
                
                if (result.success) {
                    alert('í´ë”ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    closeFolderModal();
                    loadFolders();
                } else {
                    alert('í´ë” ìƒì„± ì‹¤íŒ¨: ' + result.error);
                }
            } catch (err) {
                alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // í´ë” ì´ë™ ëª¨ë‹¬
        function openMoveFolderModal(pageId) {
            currentPageToMove = pageId;
            
            const foldersHtml = allFolders.map(f =>
                '<button onclick="moveToFolder(' + f.id + ')" class="w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg text-left border border-gray-200">' +
                    'ğŸ“ ' + f.name +
                '</button>'
            ).join('');
            
            document.getElementById('folderSelectList').innerHTML = 
                '<button onclick="moveToFolder(null)" class="w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg text-left border border-gray-200">' +
                    'ğŸ“ í´ë” ì—†ìŒ (ì „ì²´)' +
                '</button>' + foldersHtml;
            
            document.getElementById('moveFolderModal').classList.remove('hidden');
        }

        function closeMoveFolderModal() {
            document.getElementById('moveFolderModal').classList.add('hidden');
            currentPageToMove = null;
        }

        async function moveToFolder(folderId) {
            try {
                const response = await fetch('/api/landing/move-to-folder', {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        pageId: currentPageToMove, 
                        folderId: folderId 
                    })
                });
                const result = await response.json();
                
                if (result.success) {
                    alert('í´ë”ë¡œ ì´ë™ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    closeMoveFolderModal();
                    loadFolders();
                    loadPages();
                } else {
                    alert('ì´ë™ ì‹¤íŒ¨: ' + result.error);
                }
            } catch (err) {
                alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        async function deletePage(id) {
            if (!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            try {
                const response = await fetch('/api/landing/' + id, {
                    method: 'DELETE',
                    headers: { 'X-User-Data': JSON.stringify(user) }
                });
                const result = await response.json();
                if (result.success) {
                    alert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    loadFolders();
                    loadPages();
                } else {
                    alert('ì‚­ì œ ì‹¤íŒ¨: ' + result.error);
                }
            } catch (err) {
                alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }
        <\/script>
    </body>
    </html>
  `));d.get("/about",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>íšŒì‚¬ ì†Œê°œ - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
          .gradient-purple {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
          }
        </style>
    </head>
    <body class="bg-white">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100">
            <div class="max-w-7xl mx-auto px-6 lg:px-8">
                <div class="flex justify-between items-center h-20">
                    <a href="/" class="flex items-center space-x-3">
                        <span class="text-xl font-bold text-gray-900">ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</span>
                    </a>
                    <div class="hidden md:flex items-center space-x-10">
                        <a href="/" class="text-gray-700 hover:text-purple-600 font-medium">í™ˆ</a>
                        <a href="/programs" class="text-gray-700 hover:text-purple-600 font-medium">êµìœ¡ í”„ë¡œê·¸ë¨</a>
                        <a href="/success" class="text-gray-700 hover:text-purple-600 font-medium">ì„±ê³µ ì‚¬ë¡€</a>
                        <a href="/about" class="text-purple-600 font-medium">íšŒì‚¬ ì†Œê°œ</a>
                        <a href="/contact" class="text-gray-700 hover:text-purple-600 font-medium">ë¬¸ì˜í•˜ê¸°</a>
                        <a href="/login" class="gradient-purple text-white px-6 py-2.5 rounded-full font-medium">ë¡œê·¸ì¸</a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="pt-32 pb-20 px-6 bg-gradient-to-br from-purple-50 to-white">
            <div class="max-w-7xl mx-auto text-center">
                <h1 class="text-5xl lg:text-6xl font-bold text-gray-900 mb-6">
                    ìš°ë¦¬ëŠ”<br>
                    <span class="text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</span>
                </h1>
                <p class="text-xl lg:text-2xl text-gray-600 max-w-3xl mx-auto leading-relaxed">
                    í˜„ì—… í•™ì›ì¥ì´ ì§ì ‘ ìš´ì˜í•˜ë©°<br>
                    ì „êµ­ 500ê°œ í•™ì›ì˜ ì„±ê³µì„ í•¨ê»˜í•œ<br>
                    <span class="font-bold text-gray-900">í•™ì› ë§ˆì¼€íŒ… ì „ë¬¸ êµìœ¡ ê¸°ì—…</span>ì…ë‹ˆë‹¤
                </p>
            </div>
        </section>

        <!-- Story Section -->
        <section class="py-20 px-6">
            <div class="max-w-7xl mx-auto">
                <div class="grid lg:grid-cols-2 gap-16 items-center">
                    <div>
                        <h2 class="text-4xl font-bold text-gray-900 mb-6">ìš°ë¦¬ì˜ ì‹œì‘</h2>
                        <div class="space-y-4 text-lg text-gray-600 leading-relaxed">
                            <p>
                                ì¸ì²œ ì„œêµ¬ì—ì„œ <strong class="text-gray-900">ê¾¸ë©”ë•…í•™ì›</strong>ì„ ìš´ì˜í•˜ë˜ ìš°ë¦¬ ë¶€ë¶€ëŠ” 
                                ì²˜ìŒì—ëŠ” í•™ìƒ ëª¨ì§‘ì— í° ì–´ë ¤ì›€ì„ ê²ªì—ˆìŠµë‹ˆë‹¤.
                            </p>
                            <p>
                                í•˜ì§€ë§Œ ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìµœì í™”, ë¸”ë¡œê·¸ ë§ˆì¼€íŒ…, í¼ë„ ì‹œìŠ¤í…œì„ 
                                ì§ì ‘ ê³µë¶€í•˜ê³  ì ìš©í•˜ë©´ì„œ <strong class="text-purple-600">ë†€ë¼ìš´ ë³€í™”</strong>ë¥¼ ê²½í—˜í–ˆìŠµë‹ˆë‹¤.
                            </p>
                            <p>
                                3ê°œì›” ë§Œì— ì‹ ê·œ ë¬¸ì˜ê°€ 2ë°° ì¦ê°€í–ˆê³ ,<br>
                                1ë…„ ë§Œì— í•™ì› ê·œëª¨ê°€ 3ë°°ë¡œ ì„±ì¥í–ˆìŠµë‹ˆë‹¤.
                            </p>
                            <p class="text-gray-900 font-bold">
                                "ì´ ë…¸í•˜ìš°ë¥¼ ë‹¤ë¥¸ í•™ì›ì¥ë‹˜ë“¤ê³¼ ë‚˜ëˆ„ê³  ì‹¶ë‹¤"<br>
                                ê·¸ë ‡ê²Œ 'ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤'ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.
                            </p>
                        </div>
                    </div>
                    <div class="bg-purple-50 rounded-3xl p-12">
                        <div class="space-y-8">
                            <div class="flex items-start gap-4">
                                <div class="w-12 h-12 rounded-full gradient-purple flex items-center justify-center text-white font-bold flex-shrink-0">1</div>
                                <div>
                                    <h3 class="font-bold text-gray-900 mb-2">2015ë…„</h3>
                                    <p class="text-gray-600">ê¾¸ë©”ë•…í•™ì› ê°œì›, í•™ìƒ ëª¨ì§‘ ì–´ë ¤ì›€</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-4">
                                <div class="w-12 h-12 rounded-full gradient-purple flex items-center justify-center text-white font-bold flex-shrink-0">2</div>
                                <div>
                                    <h3 class="font-bold text-gray-900 mb-2">2020ë…„</h3>
                                    <p class="text-gray-600">í”Œë ˆì´ìŠ¤ ë§ˆì¼€íŒ… ë…í•™, 1ìœ„ ë‹¬ì„±</p>
                                </div>
                            </div>
                            <div class="flex items-start gap-4">
                                <div class="w-12 h-12 rounded-full gradient-purple flex items-center justify-center text-white font-bold flex-shrink-0">3</div>
                                <div>
                                    <h3 class="font-bold text-gray-900 mb-2">2021ë…„</h3>
                                    <p class="text-gray-600">ì˜¤í”ˆì±„íŒ…ë°© ì‹œì‘, ë…¸í•˜ìš° ê³µìœ </p>
                                </div>
                            </div>
                            <div class="flex items-start gap-4">
                                <div class="w-12 h-12 rounded-full gradient-purple flex items-center justify-center text-white font-bold flex-shrink-0">4</div>
                                <div>
                                    <h3 class="font-bold text-gray-900 mb-2">2022ë…„~í˜„ì¬</h3>
                                    <p class="text-gray-600">ì „êµ­ 500ê°œ í•™ì› êµìœ¡ ì§„í–‰</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Values Section -->
        <section class="py-20 px-6 bg-gray-50">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold text-gray-900 mb-4">ìš°ë¦¬ì˜ ê°€ì¹˜</h2>
                    <p class="text-xl text-gray-600">ìŠˆí¼í”Œë ˆì´ìŠ¤ë¥¼ ë§Œë“œëŠ” 3ê°€ì§€ ì›ì¹™</p>
                </div>

                <div class="grid md:grid-cols-3 gap-8">
                    <div class="bg-white rounded-3xl p-10 text-center">
                        <div class="w-20 h-20 gradient-purple rounded-2xl flex items-center justify-center mx-auto mb-6">
                            <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-4">ì‹¤ì „ ê²½í—˜</h3>
                        <p class="text-gray-600 leading-relaxed">
                            ì´ë¡ ì´ ì•„ë‹Œ ìš°ë¦¬ê°€ ì§ì ‘ í•™ì›ì„ ìš´ì˜í•˜ë©° ê²€ì¦í•œ 
                            ì‹¤ì „ ë§ˆì¼€íŒ… ë…¸í•˜ìš°ë§Œ ì „ë‹¬í•©ë‹ˆë‹¤
                        </p>
                    </div>

                    <div class="bg-white rounded-3xl p-10 text-center">
                        <div class="w-20 h-20 bg-orange-500 rounded-2xl flex items-center justify-center mx-auto mb-6">
                            <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-4">ì»¤ë®¤ë‹ˆí‹°</h3>
                        <p class="text-gray-600 leading-relaxed">
                            ì˜¤í”ˆì±„íŒ…ë°©ê³¼ ì˜¤í”„ë¼ì¸ ëª¨ì„ì„ í†µí•´ 
                            ì „êµ­ í•™ì›ì¥ë‹˜ë“¤ê³¼ í•¨ê»˜ ì„±ì¥í•©ë‹ˆë‹¤
                        </p>
                    </div>

                    <div class="bg-white rounded-3xl p-10 text-center">
                        <div class="w-20 h-20 gradient-purple rounded-2xl flex items-center justify-center mx-auto mb-6">
                            <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-4">ì§€ì† ì„±ì¥</h3>
                        <p class="text-gray-600 leading-relaxed">
                            ì¼íšŒì„± êµìœ¡ì´ ì•„ë‹Œ ì§€ì†ì ì¸ ì½˜í…ì¸  ì—…ë°ì´íŠ¸ì™€ 
                            ì‹¤ì‹œê°„ Q&Aë¡œ ê³„ì† í•¨ê»˜í•©ë‹ˆë‹¤
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Achievements Section -->
        <section class="py-20 px-6">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold text-gray-900 mb-4">ìš°ë¦¬ì˜ ì„±ê³¼</h2>
                    <p class="text-xl text-gray-600">ìˆ«ìë¡œ ì¦ëª…í•˜ëŠ” ì‹¤ì „ ë…¸í•˜ìš°</p>
                </div>

                <div class="grid md:grid-cols-4 gap-8">
                    <div class="text-center">
                        <div class="text-5xl font-bold text-purple-600 mb-3">500+</div>
                        <div class="text-lg text-gray-700 font-medium">êµìœ¡ ìˆ˜ë£Œ í•™ì›</div>
                        <div class="text-sm text-gray-500 mt-2">ì „êµ­ ê°ì§€ì˜ í•™ì›</div>
                    </div>
                    <div class="text-center">
                        <div class="text-5xl font-bold text-orange-500 mb-3">95%</div>
                        <div class="text-lg text-gray-700 font-medium">ë§Œì¡±ë„</div>
                        <div class="text-sm text-gray-500 mt-2">ì‹¤ì œ íš¨ê³¼ ì²´ê°</div>
                    </div>
                    <div class="text-center">
                        <div class="text-5xl font-bold text-purple-600 mb-3">24/7</div>
                        <div class="text-lg text-gray-700 font-medium">ì»¤ë®¤ë‹ˆí‹° ìš´ì˜</div>
                        <div class="text-sm text-gray-500 mt-2">ì‹¤ì‹œê°„ ì§ˆì˜ì‘ë‹µ</div>
                    </div>
                    <div class="text-center">
                        <div class="text-5xl font-bold text-orange-500 mb-3">4ë…„+</div>
                        <div class="text-lg text-gray-700 font-medium">ìš´ì˜ ê²½í—˜</div>
                        <div class="text-sm text-gray-500 mt-2">ì¶•ì ëœ ë…¸í•˜ìš°</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Team Section -->
        <section class="py-20 px-6 bg-gradient-to-br from-purple-50 to-blue-50">
            <div class="max-w-7xl mx-auto">
                <div class="text-center mb-16">
                    <h2 class="text-4xl font-bold text-gray-900 mb-4">ëŒ€í‘œ ì†Œê°œ</h2>
                    <p class="text-xl text-gray-600">í˜„ì—… í•™ì›ì¥ì´ ì§ì ‘ ê°€ë¥´ì¹©ë‹ˆë‹¤</p>
                </div>

                <div class="grid md:grid-cols-2 gap-12 max-w-5xl mx-auto">
                    <div class="bg-white rounded-3xl p-10">
                        <div class="w-64 h-64 mx-auto mb-6 rounded-3xl overflow-hidden">
                            <img src="/static/images/ceo-ko-heejun.jpg" 
                                 alt="ê³ í¬ì¤€ ëŒ€í‘œì´ì‚¬" 
                                 class="w-full h-full object-cover">
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 text-center mb-3">ê³ í¬ì¤€ ëŒ€í‘œì´ì‚¬</h3>
                        <p class="text-center text-purple-600 font-medium mb-6">CEO Â· ì¸ë¬¸í•™ ë°•ì‚¬</p>
                        <div class="space-y-3 text-gray-600">
                            <p>âœ“ 2005~ ê³µë¶€ë°© ì‹œì‘</p>
                            <p>âœ“ 2012~ ì¸ë¬¸í•™ ë°•ì‚¬ ì·¨ë“</p>
                            <p>âœ“ 2015~ ê¾¸ë©”ë•…í•™ì› ì°½ë¦½</p>
                            <p>âœ“ 2022~ (ì£¼)ë§˜ìŠ¤ì˜¨ ëŒ€í‘œì´ì‚¬</p>
                            <p>âœ“ 2022~ í‚¹í´ë˜ìŠ¤ í•™ì›ì¥ì†Œí†µ ì˜¤í”ˆ</p>
                            <p>âœ“ 2024~ í•œêµ­í•™ì›ëŒ€í•™êµ í˜‘ì—…</p>
                            <p>âœ“ 2025~ (ì£¼)ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤ ëŒ€í‘œì´ì‚¬</p>
                        </div>
                    </div>

                    <div class="bg-white rounded-3xl p-10">
                        <div class="w-64 h-64 mx-auto mb-6 rounded-3xl overflow-hidden">
                            <img src="/static/images/team-ko-sunwoo.jpg" 
                                 alt="ê³ ì„ ìš° ë§ˆì¼€íŒ… 1íŒ€ì¥" 
                                 class="w-full h-full object-cover">
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900 text-center mb-3">ê³ ì„ ìš° ë§ˆì¼€íŒ… 1íŒ€ì¥</h3>
                        <p class="text-center text-orange-600 font-medium mb-6">Marketing Team Leader</p>
                        <div class="space-y-3 text-gray-600">
                            <p>âœ“ ìë™í™” í¼ë„ ì „ë¬¸ê°€</p>
                            <p>âœ“ ì¸ìŠ¤íƒ€ê·¸ë¨ ë°”ì´ëŸ´ ì˜ìƒ ì œì‘</p>
                            <p>âœ“ ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìƒìœ„ë…¸ì¶œ</p>
                            <p>âœ“ ëœë”©í˜ì´ì§€ ì œì‘ ë° ê°œë°œ</p>
                            <p>âœ“ ë¸”ë¡œê·¸ ìƒìœ„ë…¸ì¶œ ê¸€ ì‘ì„±</p>
                            <p>âœ“ AI ì»¨ì„¤í„´íŠ¸ ì „ë¬¸ê°€</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="py-20 px-6 gradient-purple">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-4xl lg:text-5xl font-bold text-white mb-8">
                    í•¨ê»˜ ì„±ì¥í•˜ëŠ” í•™ì›ì„<br>
                    ë§Œë“¤ì–´ê°€ì‹¤ ì¤€ë¹„ê°€ ë˜ì…¨ë‚˜ìš”?
                </h2>
                <p class="text-xl text-white/90 mb-12">
                    ìš°ë¦¬ì˜ ê²½í—˜ê³¼ ë…¸í•˜ìš°ê°€ ì—¬ëŸ¬ë¶„ì˜ í•™ì› ì„±ê³µì— ë„ì›€ì´ ë˜ê¸¸ ë°”ëë‹ˆë‹¤
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="/contact" class="bg-white text-purple-600 px-12 py-5 rounded-full text-lg font-medium shadow-xl hover:shadow-2xl hover:-translate-y-1 transition-all">
                        ë¬´ë£Œ ìƒë‹´ ì‹ ì²­í•˜ê¸°
                    </a>
                    <a href="/programs" class="bg-white/10 backdrop-blur-sm border-2 border-white/40 text-white px-12 py-5 rounded-full text-lg font-medium hover:bg-white hover:text-purple-600 transition-all">
                        êµìœ¡ í”„ë¡œê·¸ë¨ ë³´ê¸°
                    </a>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-gray-50 text-gray-600 py-20 px-6 border-t border-gray-100">
            <div class="max-w-7xl mx-auto">
                <div class="grid md:grid-cols-4 gap-12 mb-16">
                    <div>
                        <div class="flex items-center space-x-2 mb-4">
                            <span class="text-xl font-bold text-gray-900">ìŠˆí¼í”Œë ˆì´ìŠ¤</span>
                        </div>
                        <p class="text-gray-500 text-sm leading-relaxed">
                            í•™ì› ë§ˆì¼€íŒ…ì˜ ìƒˆë¡œìš´ ê¸°ì¤€
                        </p>
                    </div>
                    <div>
                        <h4 class="font-bold text-gray-900 mb-4">ì„œë¹„ìŠ¤</h4>
                        <ul class="space-y-3 text-sm">
                            <li><a href="/programs" class="hover:text-purple-600 transition">êµìœ¡ í”„ë¡œê·¸ë¨</a></li>
                            <li><a href="/success" class="hover:text-purple-600 transition">ì„±ê³µ ì‚¬ë¡€</a></li>
                            <li><a href="/contact" class="hover:text-purple-600 transition">ë¬¸ì˜í•˜ê¸°</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-gray-900 mb-4">íšŒì‚¬</h4>
                        <ul class="space-y-3 text-sm">
                            <li><a href="/about" class="hover:text-purple-600 transition">íšŒì‚¬ ì†Œê°œ</a></li>
                            <li><a href="#" class="hover:text-purple-600 transition">ì´ìš©ì•½ê´€</a></li>
                            <li><a href="#" class="hover:text-purple-600 transition">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-gray-900 mb-4">ì—°ë½ì²˜</h4>
                        <ul class="space-y-3 text-sm">
                            <li>ì¸ì²œê´‘ì—­ì‹œ ì„œêµ¬</li>
                            <li>contact@superplace.kr</li>
                            <li>ë¬¸ì˜ ì–‘ì‹ ì´ìš© ê°€ëŠ¥</li>
                        </ul>
                    </div>
                </div>
                <div class="border-t border-gray-200 pt-8 text-center text-gray-500 text-sm">
                    <p>&copy; 2024 ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </body>
    </html>
  `));d.get("/landing/:slug",async e=>{try{const t=e.req.param("slug"),r=await e.env.DB.prepare("SELECT * FROM landing_pages WHERE slug = ? AND status = ?").bind(t,"active").first();if(!r)return e.html("<h1>í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</h1>",404);await e.env.DB.prepare("UPDATE landing_pages SET view_count = view_count + 1 WHERE slug = ?").bind(t).run();let a=r.html_content;const n=`${e.req.header("origin")||"https://superplace-academy.pages.dev"}/landing/${t}`,l=r.thumbnail_url||"https://via.placeholder.com/1200x630.png?text=Super+Place+Academy",o=r.og_title||r.title||"ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤",i=r.og_description||"ê¾¸ë©”ë•…í•™ì›ì˜ ì „ë¬¸ì ì¸ êµìœ¡ ì„œë¹„ìŠ¤ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”",c=`
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="${n}">
    <meta property="og:title" content="${o}">
    <meta property="og:description" content="${i}">
    <meta property="og:image" content="${l}">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="${n}">
    <meta property="twitter:title" content="${o}">
    <meta property="twitter:description" content="${i}">
    <meta property="twitter:image" content="${l}">
    `;return a=a.replace("</head>",`${c}</head>`),e.html(a)}catch{return e.html("<h1>ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</h1>",500)}});async function Bs(e,t,s,r,a,n){const l=new FormData;l.append("key",s),l.append("user_id",r),l.append("sender",a),l.append("receiver",e),l.append("msg",t),l.append("testmode_yn",n==="Y"?"N":"Y");try{return await(await fetch("https://apis.aligo.in/send/",{method:"POST",body:l})).json()}catch(o){return console.error("Aligo SMS error:",o),{result_code:-1,message:"SMS ë°œì†¡ ì‹¤íŒ¨"}}}d.get("/api/sms/templates",async e=>{try{const{results:t}=await e.env.DB.prepare(`
      SELECT * FROM sms_templates WHERE is_active = 1 ORDER BY category, name
    `).all();return e.json({success:!0,templates:t})}catch(t){return console.error("Get templates error:",t),e.json({success:!1,error:"í…œí”Œë¦¿ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.post("/api/sms/templates",async e=>{try{const{name:t,category:s,content:r,variables:a}=await e.req.json(),n=JSON.parse(e.req.header("X-User-Data-Base64")?decodeURIComponent(escape(atob(e.req.header("X-User-Data-Base64")||""))):'{"id":1}'),l=await e.env.DB.prepare(`
      INSERT INTO sms_templates (name, category, content, variables, created_by)
      VALUES (?, ?, ?, ?, ?)
    `).bind(t,s,r,JSON.stringify(a||[]),n.id).run();return e.json({success:!0,message:"í…œí”Œë¦¿ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.",id:l.meta.last_row_id})}catch(t){return console.error("Add template error:",t),e.json({success:!1,error:"í…œí”Œë¦¿ ì¶”ê°€ ì‹¤íŒ¨"},500)}});d.post("/api/sms/send",async e=>{var t;try{const{recipient_phone:s,recipient_name:r,message_content:a,template_id:n}=await e.req.json(),l=JSON.parse(e.req.header("X-User-Data-Base64")?decodeURIComponent(escape(atob(e.req.header("X-User-Data-Base64")||""))):'{"id":1}'),o=e.env.ALIGO_API_KEY||"",i=e.env.ALIGO_USER_ID||"",c=e.env.ALIGO_SENDER||"01012345678",p=e.env.SMS_REAL_MODE||"N";let m=null,g="sent",x=null,v=null;o&&i&&(m=await Bs(s,a,o,i,c,p),x=((t=m.result_code)==null?void 0:t.toString())||null,v=m.message||null,m.result_code!==1&&(g="failed"));const w=await e.env.DB.prepare(`
      INSERT INTO sms_history (template_id, recipient_name, recipient_phone, message_content, status, sent_at, result_code, result_message, created_by)
      VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP, ?, ?, ?)
    `).bind(n||null,r,s,a,g,x,v,l.id).run();return e.json({success:g!=="failed",message:g==="failed"?"SMS ë°œì†¡ ì‹¤íŒ¨: "+v:"SMSê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.",id:w.meta.last_row_id,note:o?p==="Y"?"ì‹¤ì œ ë°œì†¡ ì™„ë£Œ":"í…ŒìŠ¤íŠ¸ ëª¨ë“œ (ì‹¤ì œ ë°œì†¡ ì•ˆë¨)":"API í‚¤ë¥¼ ì„¤ì •í•˜ë©´ ì‹¤ì œ ë°œì†¡ë©ë‹ˆë‹¤.",smsResult:m})}catch(s){return console.error("Send SMS error:",s),e.json({success:!1,error:"SMS ë°œì†¡ ì‹¤íŒ¨"},500)}});d.post("/api/sms/schedule",async e=>{try{const{recipient_phone:t,recipient_name:s,message_content:r,template_id:a,scheduled_at:n}=await e.req.json(),l=JSON.parse(e.req.header("X-User-Data-Base64")?decodeURIComponent(escape(atob(e.req.header("X-User-Data-Base64")||""))):'{"id":1}'),o=await e.env.DB.prepare(`
      INSERT INTO sms_history (template_id, recipient_name, recipient_phone, message_content, status, scheduled_at, created_by)
      VALUES (?, ?, ?, ?, 'scheduled', ?, ?)
    `).bind(a||null,s,t,r,n,l.id).run();return e.json({success:!0,message:"SMSê°€ ì˜ˆì•½ë˜ì—ˆìŠµë‹ˆë‹¤.",id:o.meta.last_row_id})}catch(t){return console.error("Schedule SMS error:",t),e.json({success:!1,error:"SMS ì˜ˆì•½ ì‹¤íŒ¨"},500)}});d.get("/api/sms/history",async e=>{try{const{results:t}=await e.env.DB.prepare(`
      SELECT 
        sh.*,
        st.name as template_name
      FROM sms_history sh
      LEFT JOIN sms_templates st ON sh.template_id = st.id
      ORDER BY sh.created_at DESC
      LIMIT 100
    `).all();return e.json({success:!0,history:t})}catch(t){return console.error("Get SMS history error:",t),e.json({success:!1,error:"ë°œì†¡ ê¸°ë¡ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.get("/api/sms/stats",async e=>{try{const t=await e.env.DB.prepare(`
      SELECT COUNT(*) as count FROM sms_history 
      WHERE DATE(created_at) = DATE('now')
    `).first(),s=await e.env.DB.prepare(`
      SELECT COUNT(*) as count FROM sms_history 
      WHERE strftime('%Y-%m', created_at) = strftime('%Y-%m', 'now')
    `).first(),r=await e.env.DB.prepare(`
      SELECT status, COUNT(*) as count FROM sms_history 
      GROUP BY status
    `).all();return e.json({success:!0,stats:{today:(t==null?void 0:t.count)||0,thisMonth:(s==null?void 0:s.count)||0,byStatus:r.results||[]}})}catch(t){return console.error("Get SMS stats error:",t),e.json({success:!1,error:"í†µê³„ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.get("/api/students",async e=>{try{const t=JSON.parse(e.req.header("X-User-Data-Base64")?decodeURIComponent(escape(atob(e.req.header("X-User-Data-Base64")||""))):'{"id":1}'),{results:s}=await e.env.DB.prepare(`
      SELECT * FROM students WHERE academy_id = ? AND status = 'active' ORDER BY name
    `).bind(t.id).all();return e.json({success:!0,students:s})}catch(t){return console.error("Get students error:",t),e.json({success:!1,error:"í•™ìƒ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.post("/api/students",async e=>{try{const{name:t,phone:s,grade:r,school:a,subjects:n,parent_name:l,parent_phone:o,notes:i}=await e.req.json(),c=JSON.parse(e.req.header("X-User-Data-Base64")?decodeURIComponent(escape(atob(e.req.header("X-User-Data-Base64")||""))):'{"id":1}');if(!t||!r||!l||!o)return e.json({success:!1,error:"í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const p=await e.env.DB.prepare(`
      INSERT INTO students (name, phone, grade, school, subjects, parent_name, parent_phone, academy_id, enrollment_date, notes, status)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, DATE('now'), ?, 'active')
    `).bind(t,s||null,r,a||null,n||"",l,o,c.id,i||null).run();return e.json({success:!0,message:"í•™ìƒì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.",id:p.meta.last_row_id})}catch(t){return console.error("Add student error:",t),e.json({success:!1,error:"í•™ìƒ ì¶”ê°€ ì‹¤íŒ¨"},500)}});d.get("/tools/student-management",e=>e.redirect("/students"));d.get("/tools/ai-learning-report",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>AI í•™ìŠµ ë¶„ì„ ë¦¬í¬íŠ¸ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
    </head>
    <body class="bg-gradient-to-br from-purple-50 to-pink-50 min-h-screen">
        <div class="max-w-7xl mx-auto p-8">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-4xl font-bold text-gray-900">ğŸ¤– AI í•™ìŠµ ë¶„ì„ ë¦¬í¬íŠ¸</h1>
                <a href="/dashboard" class="px-6 py-3 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition">
                    ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°
                </a>
            </div>

            <!-- ì•ˆë‚´ ì¹´ë“œ -->
            <div class="bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-8 text-white mb-8">
                <h2 class="text-2xl font-bold mb-4">âœ¨ AIê°€ ìë™ìœ¼ë¡œ í•™ìŠµ ë¶„ì„ ë¦¬í¬íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤</h2>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="bg-white/20 backdrop-blur-sm rounded-xl p-4">
                        <div class="text-3xl mb-2">ğŸ“Š</div>
                        <div class="font-bold mb-1">ì„±ì  ë¶„ì„</div>
                        <div class="text-sm text-white/90">ê³¼ëª©ë³„ ì„±ì  ì¶”ì´ì™€ ê°•ì•½ì  íŒŒì•…</div>
                    </div>
                    <div class="bg-white/20 backdrop-blur-sm rounded-xl p-4">
                        <div class="text-3xl mb-2">ğŸ“ˆ</div>
                        <div class="font-bold mb-1">í•™ìŠµ íŒ¨í„´</div>
                        <div class="text-sm text-white/90">ì¶œì„ë¥ , í•™ìŠµ íƒœë„ ì¢…í•© ë¶„ì„</div>
                    </div>
                    <div class="bg-white/20 backdrop-blur-sm rounded-xl p-4">
                        <div class="text-3xl mb-2">ğŸ’¡</div>
                        <div class="font-bold mb-1">ë§ì¶¤ ì¶”ì²œ</div>
                        <div class="text-sm text-white/90">ê°œì¸ë³„ í•™ìŠµ ì „ëµ ì œì‹œ</div>
                    </div>
                </div>
            </div>

            <!-- ë¦¬í¬íŠ¸ ìƒì„± ì„¹ì…˜ -->
            <div class="bg-white rounded-2xl p-8 border border-gray-200 mb-8">
                <h2 class="text-2xl font-bold mb-6">ğŸ“ ë¦¬í¬íŠ¸ ìƒì„±</h2>
                
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">í•™ìƒ ì„ íƒ</label>
                        <select id="studentSelect" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="">í•™ìƒì„ ì„ íƒí•˜ì„¸ìš”</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ë¦¬í¬íŠ¸ ì›”</label>
                        <input type="month" id="reportMonth" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                </div>

                <button onclick="generateReport()" class="w-full px-6 py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl font-bold text-lg hover:from-purple-700 hover:to-pink-700 transition-all">
                    ğŸ¤– AI ë¦¬í¬íŠ¸ ìë™ ìƒì„±
                </button>

                <div id="generateResult" class="mt-4"></div>
            </div>

            <!-- ìƒì„±ëœ ë¦¬í¬íŠ¸ ëª©ë¡ -->
            <div class="bg-white rounded-2xl p-8 border border-gray-200">
                <h2 class="text-2xl font-bold mb-6">ğŸ“š ìƒì„±ëœ ë¦¬í¬íŠ¸</h2>
                <div id="reportsList" class="space-y-4">
                    <p class="text-gray-500 text-center py-12">ë¦¬í¬íŠ¸ë¥¼ ìƒì„±í•˜ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                </div>
            </div>

            <!-- ë¦¬í¬íŠ¸ ìƒì„¸ ëª¨ë‹¬ -->
            <div id="reportModal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
                <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center">
                        <h3 class="text-2xl font-bold">í•™ìŠµ ë¶„ì„ ë¦¬í¬íŠ¸</h3>
                        <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    <div id="reportDetail" class="p-6"></div>
                </div>
            </div>
        </div>

        <script>
            let currentUser = null;

            // ë¡œê·¸ì¸ ì²´í¬
            window.addEventListener('DOMContentLoaded', () => {
                const userData = localStorage.getItem('user');
                if (!userData) {
                    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    window.location.href = '/login';
                    return;
                }
                currentUser = JSON.parse(userData);
                loadStudents();
                setDefaultMonth();
            });

            // ê¸°ë³¸ ì›” ì„¤ì • (ì´ë²ˆ ë‹¬)
            function setDefaultMonth() {
                const now = new Date();
                const month = String(now.getMonth() + 1).padStart(2, '0');
                const year = now.getFullYear();
                document.getElementById('reportMonth').value = \`\${year}-\${month}\`;
            }

            // í•™ìƒ ëª©ë¡ ë¡œë“œ
            async function loadStudents() {
                try {
                    const userDataBase64 = btoa(unescape(encodeURIComponent(JSON.stringify(currentUser))));
                    const response = await fetch('/api/students', {
                        headers: {
                            'X-User-Data-Base64': userDataBase64
                        }
                    });
                    const data = await response.json();
                    
                    const select = document.getElementById('studentSelect');
                    select.innerHTML = '<option value="">í•™ìƒì„ ì„ íƒí•˜ì„¸ìš”</option>';
                    
                    if (data.success && data.students) {
                        data.students.forEach(student => {
                            const option = document.createElement('option');
                            option.value = student.id;
                            option.textContent = \`\${student.name} (\${student.grade})\`;
                            select.appendChild(option);
                        });
                    }
                } catch (err) {
                    console.error('í•™ìƒ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', err);
                }
            }

            // AI ë¦¬í¬íŠ¸ ìƒì„±
            async function generateReport() {
                const studentId = document.getElementById('studentSelect').value;
                const reportMonth = document.getElementById('reportMonth').value;
                const resultDiv = document.getElementById('generateResult');

                if (!studentId) {
                    resultDiv.innerHTML = '<div class="p-4 bg-red-50 text-red-600 rounded-xl">í•™ìƒì„ ì„ íƒí•´ì£¼ì„¸ìš”.</div>';
                    return;
                }

                if (!reportMonth) {
                    resultDiv.innerHTML = '<div class="p-4 bg-red-50 text-red-600 rounded-xl">ë¦¬í¬íŠ¸ ì›”ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</div>';
                    return;
                }

                resultDiv.innerHTML = '<div class="p-4 bg-blue-50 text-blue-600 rounded-xl">ğŸ¤– AIê°€ ë¦¬í¬íŠ¸ë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>';

                try {
                    const response = await fetch('/api/learning-reports/generate', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            student_id: studentId,
                            report_month: reportMonth
                        })
                    });

                    const data = await response.json();

                    if (data.success) {
                        resultDiv.innerHTML = \`
                            <div class="p-6 bg-green-50 border-2 border-green-200 rounded-xl">
                                <div class="text-green-600 font-bold text-lg mb-3">âœ… AI ë¦¬í¬íŠ¸ ìƒì„± ì™„ë£Œ!</div>
                                <div class="grid grid-cols-3 gap-4 text-sm">
                                    <div>
                                        <div class="text-gray-600 mb-1">í‰ê·  ì ìˆ˜</div>
                                        <div class="text-2xl font-bold text-green-600">\${data.preview.overall_score}ì </div>
                                    </div>
                                    <div>
                                        <div class="text-gray-600 mb-1">ì¶œì„ë¥ </div>
                                        <div class="text-2xl font-bold text-blue-600">\${data.preview.attendance_rate}%</div>
                                    </div>
                                    <div>
                                        <div class="text-gray-600 mb-1">í•™ìŠµ íƒœë„</div>
                                        <div class="text-2xl font-bold text-purple-600">\${data.preview.study_attitude}</div>
                                    </div>
                                </div>
                                <button onclick="viewReport(\${data.report_id})" class="mt-4 w-full px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 transition">
                                    ğŸ“„ ë¦¬í¬íŠ¸ ìì„¸íˆ ë³´ê¸°
                                </button>
                            </div>
                        \`;
                        loadReportsForStudent(studentId);
                    } else {
                        resultDiv.innerHTML = \`<div class="p-4 bg-red-50 text-red-600 rounded-xl">\${data.error}</div>\`;
                    }
                } catch (err) {
                    console.error('ë¦¬í¬íŠ¸ ìƒì„± ì‹¤íŒ¨:', err);
                    resultDiv.innerHTML = '<div class="p-4 bg-red-50 text-red-600 rounded-xl">ë¦¬í¬íŠ¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</div>';
                }
            }

            // í•™ìƒë³„ ë¦¬í¬íŠ¸ ëª©ë¡ ë¡œë“œ
            async function loadReportsForStudent(studentId) {
                try {
                    const response = await fetch(\`/api/learning-reports/\${studentId}\`);
                    const data = await response.json();

                    const listDiv = document.getElementById('reportsList');
                    
                    if (data.success && data.reports && data.reports.length > 0) {
                        listDiv.innerHTML = data.reports.map(report => \`
                            <div class="p-6 border-2 border-gray-200 rounded-xl hover:border-purple-400 transition cursor-pointer" onclick="viewReport(\${report.id})">
                                <div class="flex justify-between items-start mb-4">
                                    <div>
                                        <div class="text-lg font-bold text-gray-900">\${report.report_month} ë¦¬í¬íŠ¸</div>
                                        <div class="text-sm text-gray-600">\${new Date(report.created_at).toLocaleDateString('ko-KR')}</div>
                                    </div>
                                    <span class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium">\${report.study_attitude}</span>
                                </div>
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div class="text-gray-600">í‰ê·  ì ìˆ˜: <span class="font-bold text-gray-900">\${report.overall_score}ì </span></div>
                                    <div class="text-gray-600">ìƒì„±ì¼: <span class="font-bold text-gray-900">\${new Date(report.created_at).toLocaleDateString('ko-KR')}</span></div>
                                </div>
                            </div>
                        \`).join('');
                    }
                } catch (err) {
                    console.error('ë¦¬í¬íŠ¸ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', err);
                }
            }

            // ë¦¬í¬íŠ¸ ìƒì„¸ ë³´ê¸°
            async function viewReport(reportId) {
                try {
                    const response = await fetch(\`/api/learning-reports/detail/\${reportId}\`);
                    const data = await response.json();

                    if (data.success && data.report) {
                        const report = data.report;
                        document.getElementById('reportDetail').innerHTML = \`
                            <div class="space-y-6">
                                <div class="bg-gradient-to-r from-purple-100 to-pink-100 p-6 rounded-xl">
                                    <div class="text-sm text-gray-600 mb-2">\${report.report_month}</div>
                                    <div class="text-2xl font-bold text-gray-900 mb-2">\${report.student_name} í•™ìƒ í•™ìŠµ ë¶„ì„ ë¦¬í¬íŠ¸</div>
                                    <div class="flex gap-4 text-sm">
                                        <span class="px-3 py-1 bg-purple-500 text-white rounded-full">\${report.study_attitude}</span>
                                        <span class="px-3 py-1 bg-pink-500 text-white rounded-full">í‰ê·  \${report.overall_score}ì </span>
                                    </div>
                                </div>

                                <div class="border-l-4 border-green-500 pl-4">
                                    <div class="text-sm text-gray-600 mb-1">ğŸ’ª ê°•ì </div>
                                    <div class="text-gray-900">\${report.strengths}</div>
                                </div>

                                <div class="border-l-4 border-yellow-500 pl-4">
                                    <div class="text-sm text-gray-600 mb-1">ğŸ¯ ê°œì„  í•„ìš”</div>
                                    <div class="text-gray-900">\${report.weaknesses}</div>
                                </div>

                                <div class="border-l-4 border-blue-500 pl-4">
                                    <div class="text-sm text-gray-600 mb-1">ğŸ“ ê°œì„ ì‚¬í•­</div>
                                    <div class="text-gray-900">\${report.improvements}</div>
                                </div>

                                <div class="border-l-4 border-purple-500 pl-4">
                                    <div class="text-sm text-gray-600 mb-1">ğŸ’¡ ì„ ìƒë‹˜ì˜ ì¶”ì²œ</div>
                                    <div class="text-gray-900">\${report.recommendations}</div>
                                </div>

                                <div class="border-l-4 border-pink-500 pl-4">
                                    <div class="text-sm text-gray-600 mb-1">ğŸ¯ ë‹¤ìŒ ë‹¬ ëª©í‘œ</div>
                                    <div class="text-gray-900">\${report.next_month_goals}</div>
                                </div>

                                <div class="bg-gray-50 p-6 rounded-xl">
                                    <div class="text-sm text-gray-600 mb-2">ğŸ¤– AI ì¢…í•© ë¶„ì„</div>
                                    <div class="text-gray-900 whitespace-pre-line">\${report.ai_analysis}</div>
                                </div>

                                <div class="bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-xl border-2 border-purple-200">
                                    <div class="text-sm text-gray-600 mb-2">ğŸ’Œ í•™ë¶€ëª¨ë‹˜ê»˜ ë³´ë‚¼ ë©”ì‹œì§€</div>
                                    <div id="parentMessage\${report.id}" class="text-gray-900 whitespace-pre-line text-sm leading-relaxed">\${report.parent_message}</div>
                                    <button onclick="copyMessageById('parentMessage\${report.id}')" class="mt-4 px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition">
                                        ğŸ“‹ ë©”ì‹œì§€ ë³µì‚¬í•˜ê¸°
                                    </button>
                                </div>
                            </div>
                        \`;
                        document.getElementById('reportModal').classList.remove('hidden');
                    }
                } catch (err) {
                    console.error('ë¦¬í¬íŠ¸ ìƒì„¸ ì¡°íšŒ ì‹¤íŒ¨:', err);
                    alert('ë¦¬í¬íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            // ëª¨ë‹¬ ë‹«ê¸°
            function closeModal() {
                document.getElementById('reportModal').classList.add('hidden');
            }

            // ë©”ì‹œì§€ ë³µì‚¬
            function copyMessageById(elementId) {
                const element = document.getElementById(elementId);
                if (element) {
                    const message = element.textContent;
                    navigator.clipboard.writeText(message).then(() => {
                        alert('ë©”ì‹œì§€ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    }).catch(err => {
                        console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
                    });
                }
            }
        <\/script>
    </body>
    </html>
  `));d.get("/tools/search-volume",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ê²€ìƒ‰ëŸ‰ ì¡°íšŒ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
        </style>
    </head>
    <body class="bg-gray-50">
        <div class="max-w-7xl mx-auto p-8">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-4xl font-bold text-gray-900">ğŸ” ê²€ìƒ‰ëŸ‰ ì¡°íšŒ</h1>
                <a href="/dashboard" class="px-6 py-3 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition">
                    ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°
                </a>
            </div>

            <!-- ê²€ìƒ‰ ì…ë ¥ ì„¹ì…˜ -->
            <div class="bg-white rounded-2xl p-8 shadow-lg mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">í‚¤ì›Œë“œ ë¶„ì„</h2>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ë¶„ì„ í‚¤ì›Œë“œ</label>
                        <input type="text" id="keyword" placeholder="ì˜ˆ: ì¸ì²œì˜ì–´í•™ì›" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        <p class="text-sm text-red-600 font-bold mt-2">âš ï¸ ì¤‘ìš”: ë„ì–´ì“°ê¸° ì—†ì´ ì…ë ¥í•´ì£¼ì„¸ìš”! (ì˜ˆ: ê²€ë‹¨ì˜ì–´í•™ì› â­• / ê²€ë‹¨ ì˜ì–´í•™ì› âŒ)</p>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ URL (ì„ íƒ)</label>
                        <input type="text" id="placeUrl" placeholder="https://m.place.naver.com/..." 
                               class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        <p class="text-sm text-gray-500 mt-2">â€» ë³¸ì¸ í•™ì›ì˜ ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ URLì„ ì…ë ¥í•˜ë©´ ìˆœìœ„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
                    </div>

                    <button onclick="analyzeKeyword()" 
                            class="w-full bg-gradient-to-r from-purple-600 to-purple-700 text-white px-8 py-4 rounded-xl hover:from-purple-700 hover:to-purple-800 transition-all shadow-lg hover:shadow-xl font-bold text-lg">
                        ğŸ” ë¶„ì„ ì‹œì‘
                    </button>
                </div>
            </div>

            <!-- ë¡œë”© ìƒíƒœ -->
            <div id="loading" class="hidden bg-white rounded-2xl p-12 shadow-lg text-center">
                <div class="animate-spin rounded-full h-16 w-16 border-b-4 border-purple-600 mx-auto mb-4"></div>
                <p class="text-gray-600 text-lg">ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”</p>
                <p class="text-gray-500 text-sm mt-2">ë„¤ì´ë²„ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  ìˆìŠµë‹ˆë‹¤</p>
            </div>

            <!-- ê²€ìƒ‰ëŸ‰ ê²°ê³¼ -->
            <div id="searchVolumeResult" class="hidden bg-white rounded-2xl p-8 shadow-lg mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ“Š ê²€ìƒ‰ëŸ‰ ë¶„ì„ ê²°ê³¼</h2>
                <div class="grid md:grid-cols-3 gap-6 mb-6">
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 border border-blue-200">
                        <div class="text-sm text-blue-700 mb-2">ì›” í‰ê·  ê²€ìƒ‰ëŸ‰</div>
                        <div class="text-4xl font-bold text-blue-900" id="monthlyVolume">-</div>
                        <div class="text-xs text-blue-600 mt-2" id="searchDetails">PC: - / ëª¨ë°”ì¼: -</div>
                    </div>
                    <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6 border border-green-200">
                        <div class="text-sm text-green-700 mb-2">ê²½ìŸ ê°•ë„</div>
                        <div class="text-4xl font-bold text-green-900" id="competition">-</div>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 border border-purple-200">
                        <div class="text-sm text-purple-700 mb-2">ì¶”ì²œë„</div>
                        <div class="text-4xl font-bold text-purple-900" id="recommendation">-</div>
                    </div>
                </div>
                
                <!-- í´ë¦­ë¥  ì •ë³´ -->
                <div class="bg-yellow-50 rounded-xl p-6 border border-yellow-200">
                    <h3 class="text-lg font-bold text-yellow-900 mb-4">ğŸ–±ï¸ í‰ê·  í´ë¦­ë¥  (CTR)</h3>
                    <div class="grid md:grid-cols-3 gap-4">
                        <div>
                            <div class="text-sm text-yellow-700 mb-1">ì „ì²´ í‰ê· </div>
                            <div class="text-2xl font-bold text-yellow-900" id="averageCtr">-</div>
                        </div>
                        <div>
                            <div class="text-sm text-yellow-700 mb-1">PC í´ë¦­ë¥ </div>
                            <div class="text-2xl font-bold text-yellow-900" id="pcCtr">-</div>
                        </div>
                        <div>
                            <div class="text-sm text-yellow-700 mb-1">ëª¨ë°”ì¼ í´ë¦­ë¥ </div>
                            <div class="text-2xl font-bold text-yellow-900" id="mobileCtr">-</div>
                        </div>
                    </div>
                    <p class="text-xs text-yellow-700 mt-3">ğŸ’¡ í´ë¦­ë¥ ì´ ë†’ì„ìˆ˜ë¡ ê´‘ê³  íš¨ê³¼ê°€ ì¢‹ìŠµë‹ˆë‹¤</p>
                </div>
            </div>

            <!-- ê´€ë ¨ í‚¤ì›Œë“œ ê²°ê³¼ -->
            <div id="relatedKeywordsResult" class="hidden bg-white rounded-2xl p-8 shadow-lg mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ”‘ ê´€ë ¨ í‚¤ì›Œë“œ TOP 10</h2>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b-2 border-gray-200">
                                <th class="text-left p-3 text-gray-700 font-bold">ìˆœìœ„</th>
                                <th class="text-left p-3 text-gray-700 font-bold">í‚¤ì›Œë“œ</th>
                                <th class="text-right p-3 text-gray-700 font-bold">ì›” ê²€ìƒ‰ëŸ‰</th>
                                <th class="text-right p-3 text-gray-700 font-bold">í‰ê·  CTR</th>
                                <th class="text-center p-3 text-gray-700 font-bold">ê²½ìŸë„</th>
                            </tr>
                        </thead>
                        <tbody id="relatedKeywordsList">
                            <!-- ê´€ë ¨ í‚¤ì›Œë“œ ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                        </tbody>
                    </table>
                </div>
            </div>
            </div>

            <!-- ìˆœìœ„ ê²°ê³¼ -->
            <div id="rankingResult" class="hidden bg-white rounded-2xl p-8 shadow-lg mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ† í”Œë ˆì´ìŠ¤ ìˆœìœ„</h2>
                <div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-xl p-6 text-white mb-6">
                    <div class="text-lg mb-2">ë‚´ ìˆœìœ„ (ê´‘ê³  ì œì™¸)</div>
                    <div class="text-5xl font-bold" id="myRanking">-</div>
                </div>
                
                <h3 class="text-xl font-bold text-gray-900 mb-4">ê²½ìŸì‚¬ ìˆœìœ„</h3>
                <div id="competitorList" class="space-y-3">
                    <!-- ê²½ìŸì‚¬ ëª©ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>

            <!-- í‚¤ì›Œë“œ ë¶„ì„ ê²°ê³¼ -->
            <div id="keywordResult" class="hidden bg-white rounded-2xl p-8 shadow-lg">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ·ï¸ ê²½ìŸì‚¬ í‚¤ì›Œë“œ ë¶„ì„</h2>
                <div id="competitorKeywords" class="grid md:grid-cols-2 gap-6">
                    <!-- í‚¤ì›Œë“œ ë¶„ì„ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>

            <!-- ì•ˆë‚´ ë©”ì‹œì§€ -->
            <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-6 mt-8">
                <h3 class="text-lg font-bold text-yellow-900 mb-3">âš ï¸ ì‚¬ìš© ì•ˆë‚´</h3>
                <ul class="space-y-2 text-yellow-800 text-sm">
                    <li>â€¢ ê²€ìƒ‰ëŸ‰ ë°ì´í„°ëŠ” ë„¤ì´ë²„ ê´‘ê³  APIë¥¼ í†µí•´ ì œê³µë©ë‹ˆë‹¤</li>
                    <li>â€¢ ìˆœìœ„ ì¡°íšŒëŠ” ì‹¤ì‹œê°„ í¬ë¡¤ë§ìœ¼ë¡œ ì§„í–‰ë˜ë©°, 2-3ë¶„ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
                    <li>â€¢ ì •í™•í•œ ë¶„ì„ì„ ìœ„í•´ ì •í™•í•œ í”Œë ˆì´ìŠ¤ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”</li>
                    <li>â€¢ ì¼ì¼ ì¡°íšŒ í•œë„: 100íšŒ (í¬ì¸íŠ¸ ì°¨ê° ì—†ìŒ)</li>
                </ul>
            </div>
        </div>

        <script>
            async function analyzeKeyword() {
                const keyword = document.getElementById('keyword').value.trim();
                const placeUrl = document.getElementById('placeUrl').value.trim();

                if (!keyword) {
                    alert('ë¶„ì„í•  í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                // placeUrlì€ ì„ íƒì‚¬í•­ìœ¼ë¡œ ë³€ê²½

                // ë¡œë”© í‘œì‹œ
                document.getElementById('loading').classList.remove('hidden');
                document.getElementById('searchVolumeResult').classList.add('hidden');
                document.getElementById('relatedKeywordsResult').classList.add('hidden');
                document.getElementById('rankingResult').classList.add('hidden');
                document.getElementById('keywordResult').classList.add('hidden');

                try {
                    const user = JSON.parse(localStorage.getItem('user'));
                    
                    const response = await fetch('/api/search-analysis', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            userId: user?.id,
                            keyword: keyword,
                            placeUrl: placeUrl
                        })
                    });

                    const data = await response.json();

                    if (data.success) {
                        // ê²€ìƒ‰ëŸ‰ ê²°ê³¼ í‘œì‹œ (ê¸°ë³¸)
                        document.getElementById('monthlyVolume').textContent = 
                            data.searchVolume?.monthlyAvg?.toLocaleString() || 'ì§‘ê³„ì¤‘';
                        document.getElementById('competition').textContent = 
                            data.searchVolume?.competition || 'ë³´í†µ';
                        document.getElementById('recommendation').textContent = 
                            data.searchVolume?.recommendation || 'ë¶„ì„ì¤‘';
                        
                        // í™•ì¥ ë°ì´í„° í‘œì‹œ (CTR í¬í•¨)
                        if (data.searchVolumeExtended) {
                            const ext = data.searchVolumeExtended;
                            const pcSearch = ext.monthlyPcSearch?.toLocaleString() || 0;
                            const mobileSearch = ext.monthlyMobileSearch?.toLocaleString() || 0;
                            document.getElementById('searchDetails').textContent = 
                                'PC: ' + pcSearch + ' / ëª¨ë°”ì¼: ' + mobileSearch;
                            document.getElementById('averageCtr').textContent = 
                                ((ext.averageCtr || 0) * 100).toFixed(2) + '%';
                            document.getElementById('pcCtr').textContent = 
                                ((ext.pcCtr || 0) * 100).toFixed(2) + '%';
                            document.getElementById('mobileCtr').textContent = 
                                ((ext.mobileCtr || 0) * 100).toFixed(2) + '%';
                        }
                        
                        document.getElementById('searchVolumeResult').classList.remove('hidden');
                        
                        // ê´€ë ¨ í‚¤ì›Œë“œ í‘œì‹œ
                        if (data.relatedKeywords && data.relatedKeywords.length > 0) {
                            const keywordsHtml = data.relatedKeywords.map((kw, idx) => {
                                const compClass = kw.competition === 'ë‚®ìŒ' ? 'bg-green-100 text-green-700' :
                                                 kw.competition === 'ë³´í†µ' ? 'bg-yellow-100 text-yellow-700' :
                                                 kw.competition === 'ë†’ìŒ' ? 'bg-orange-100 text-orange-700' :
                                                 'bg-red-100 text-red-700';
                                return '<tr class="border-b border-gray-100 hover:bg-gray-50">' +
                                    '<td class="p-3 text-gray-600 font-bold">' + (idx + 1) + '</td>' +
                                    '<td class="p-3 text-gray-900 font-medium">' + kw.keyword + '</td>' +
                                    '<td class="p-3 text-right text-blue-600 font-bold">' + (kw.monthlySearchVolume?.toLocaleString() || 0) + '</td>' +
                                    '<td class="p-3 text-right text-green-600 font-bold">' + ((kw.averageCtr || 0) * 100).toFixed(2) + '%</td>' +
                                    '<td class="p-3 text-center">' +
                                    '<span class="px-3 py-1 rounded-full text-xs font-bold ' + compClass + '">' + kw.competition + '</span>' +
                                    '</td>' +
                                    '</tr>';
                            }).join('');
                            document.getElementById('relatedKeywordsList').innerHTML = keywordsHtml;
                            document.getElementById('relatedKeywordsResult').classList.remove('hidden');
                        }

                        // ìˆœìœ„ ê²°ê³¼ í‘œì‹œ
                        if (data.ranking) {
                            document.getElementById('myRanking').textContent = 
                                data.ranking.myRank ? data.ranking.myRank + 'ìœ„' : 'ìˆœìœ„ê¶Œ ë°–';
                            
                            // ê²½ìŸì‚¬ ëª©ë¡ í‘œì‹œ
                            const competitorHtml = data.ranking.competitors.map((comp, idx) => \`
                                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-200">
                                    <div class="flex items-center gap-4">
                                        <div class="text-2xl font-bold text-gray-400">\${idx + 1}</div>
                                        <div>
                                            <div class="font-bold text-gray-900">\${comp.name}</div>
                                            <div class="text-sm text-gray-600">\${comp.category || 'ì—…ì¢… ì •ë³´ ì—†ìŒ'}</div>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-sm text-gray-600">ë¦¬ë·°</div>
                                        <div class="font-bold text-gray-900">\${comp.reviewCount || 0}ê°œ</div>
                                    </div>
                                </div>
                            \`).join('');
                            document.getElementById('competitorList').innerHTML = competitorHtml;
                            document.getElementById('rankingResult').classList.remove('hidden');
                        }

                        // í‚¤ì›Œë“œ ë¶„ì„ ê²°ê³¼ í‘œì‹œ
                        if (data.keywords && data.keywords.length > 0) {
                            const keywordHtml = data.keywords.map(item => \`
                                <div class="bg-gray-50 rounded-xl p-6 border border-gray-200">
                                    <div class="font-bold text-gray-900 mb-3">\${item.businessName}</div>
                                    <div class="flex flex-wrap gap-2">
                                        \${item.keywords.map(kw => \`
                                            <span class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm">
                                                \${kw}
                                            </span>
                                        \`).join('')}
                                    </div>
                                </div>
                            \`).join('');
                            document.getElementById('competitorKeywords').innerHTML = keywordHtml;
                            document.getElementById('keywordResult').classList.remove('hidden');
                        }
                    } else {
                        alert('ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + (data.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'));
                    }
                } catch (err) {
                    console.error('ë¶„ì„ ì˜¤ë¥˜:', err);
                    alert('ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                } finally {
                    document.getElementById('loading').classList.add('hidden');
                }
            }

            // ì—”í„° í‚¤ë¡œ ê²€ìƒ‰
            document.getElementById('keyword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') analyzeKeyword();
            });
            document.getElementById('placeUrl').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') analyzeKeyword();
            });
        <\/script>
    </body>
    </html>
  `));d.get("/tools/dashboard-analytics",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í†µí•© ë¶„ì„ ëŒ€ì‹œë³´ë“œ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"><\/script>
    </head>
    <body class="bg-gradient-to-br from-teal-50 to-blue-50 min-h-screen">
        <div class="max-w-7xl mx-auto p-8">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-4xl font-bold text-gray-900">ğŸ“Š í†µí•© ë¶„ì„ ëŒ€ì‹œë³´ë“œ</h1>
                <a href="/dashboard" class="px-6 py-3 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition">
                    ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°
                </a>
            </div>

            <div class="grid md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-2xl p-6 border-2 border-green-200">
                    <div class="text-sm text-gray-600 mb-2">ì´ë²ˆ ë‹¬ ë§¤ì¶œ</div>
                    <div class="text-3xl font-bold text-green-600">â‚©0</div>
                </div>
                <div class="bg-white rounded-2xl p-6 border-2 border-blue-200">
                    <div class="text-sm text-gray-600 mb-2">ì‹ ê·œ í•™ìƒ</div>
                    <div class="text-3xl font-bold text-blue-600">0ëª…</div>
                </div>
                <div class="bg-white rounded-2xl p-6 border-2 border-purple-200">
                    <div class="text-sm text-gray-600 mb-2">ì „ì²´ í•™ìƒ</div>
                    <div class="text-3xl font-bold text-purple-600">0ëª…</div>
                </div>
                <div class="bg-white rounded-2xl p-6 border-2 border-orange-200">
                    <div class="text-sm text-gray-600 mb-2">í‰ê·  ì¶œì„ë¥ </div>
                    <div class="text-3xl font-bold text-orange-600">0%</div>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white rounded-2xl p-8 border border-gray-200">
                    <h2 class="text-xl font-bold mb-4">ì›”ë³„ ë§¤ì¶œ ì¶”ì´</h2>
                    <canvas id="revenueChart" height="200"></canvas>
                </div>

                <div class="bg-white rounded-2xl p-8 border border-gray-200">
                    <h2 class="text-xl font-bold mb-4">í•™ìƒ í˜„í™©</h2>
                    <canvas id="studentChart" height="200"></canvas>
                </div>
            </div>
        </div>

        <script>
            // ë§¤ì¶œ ì¶”ì´ ì°¨íŠ¸
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”'],
                    datasets: [{
                        label: 'ë§¤ì¶œ (ë§Œì›)',
                        data: [0, 0, 0, 0, 0, 0],
                        borderColor: 'rgb(34, 197, 94)',
                        backgroundColor: 'rgba(34, 197, 94, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });

            // í•™ìƒ í˜„í™© ì°¨íŠ¸
            const studentCtx = document.getElementById('studentChart').getContext('2d');
            new Chart(studentCtx, {
                type: 'doughnut',
                data: {
                    labels: ['ìˆ˜ê°• ì¤‘', 'ì¼ì‹œì •ì§€', 'ì¡¸ì—…'],
                    datasets: [{
                        data: [0, 0, 0],
                        backgroundColor: [
                            'rgb(34, 197, 94)',
                            'rgb(234, 179, 8)',
                            'rgb(156, 163, 175)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        <\/script>
    </body>
    </html>
  `));d.get("/api/learning-reports/:student_id",async e=>{try{const t=e.req.param("student_id"),{results:s}=await e.env.DB.prepare(`
      SELECT * FROM learning_reports 
      WHERE student_id = ? 
      ORDER BY report_month DESC
    `).bind(t).all();return e.json({success:!0,reports:s})}catch(t){return console.error("Get learning reports error:",t),e.json({success:!1,error:"ë¦¬í¬íŠ¸ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.post("/api/learning-reports/generate",async e=>{var t,s;try{const{student_id:r,report_month:a}=await e.req.json(),n=await e.env.DB.prepare(`
      SELECT * FROM students WHERE id = ?
    `).bind(r).first();if(!n)return e.json({success:!1,error:"í•™ìƒì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);const{results:l}=await e.env.DB.prepare(`
      SELECT * FROM grades 
      WHERE student_id = ? 
      AND strftime('%Y-%m', test_date) = ?
      ORDER BY test_date DESC
    `).bind(r,a).all(),{results:o}=await e.env.DB.prepare(`
      SELECT status, COUNT(*) as count
      FROM attendance 
      WHERE student_id = ? 
      AND strftime('%Y-%m', attendance_date) = ?
      GROUP BY status
    `).bind(r,a).all(),{results:i}=await e.env.DB.prepare(`
      SELECT * FROM counseling 
      WHERE student_id = ? 
      AND strftime('%Y-%m', counseling_date) = ?
      ORDER BY counseling_date DESC
      LIMIT 3
    `).bind(r,a).all(),c=o.reduce((T,S)=>T+(S.count||0),0),p=((t=o.find(T=>T.status==="present"))==null?void 0:t.count)||0,m=c>0?(p/c*100).toFixed(1):0,g=l.length>0?(l.reduce((T,S)=>T+S.score/S.max_score*100,0)/l.length).toFixed(1):0;let x="ì–‘í˜¸";m>=95&&g>=85?x="ë§¤ìš° ìš°ìˆ˜":m>=90&&g>=80?x="ìš°ìˆ˜":(m<85||g<70)&&(x="ê°œì„  í•„ìš”");const v=l.length>0?l.reduce((T,S)=>S.score/S.max_score>T.score/T.max_score?S:T):null,w=v?v.subject+" ê³¼ëª©ì—ì„œ "+(v.score/v.max_score*100).toFixed(1)+"ì ìœ¼ë¡œ ìš°ìˆ˜í•œ ì„±ì ì„ ë³´ì˜€ìŠµë‹ˆë‹¤. ê¾¸ì¤€í•œ ë…¸ë ¥ì´ ë‹ë³´ì…ë‹ˆë‹¤.":"ê¸°ë³¸ê¸°ê°€ íƒ„íƒ„í•˜ë©°, ìˆ˜ì—… ì°¸ì—¬ë„ê°€ ë†’ìŠµë‹ˆë‹¤.",b=l.length>0?l.reduce((T,S)=>S.score/S.max_score<T.score/T.max_score?S:T):null,E=b&&b.score/b.max_score*100<75?b.subject+" ê³¼ëª©ì—ì„œ "+(b.score/b.max_score*100).toFixed(1)+"ì ìœ¼ë¡œ ë³´ì™„ì´ í•„ìš”í•©ë‹ˆë‹¤.":"ì „ë°˜ì ìœ¼ë¡œ ê· í˜•ì¡íŒ í•™ìŠµì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤.",_=m<90?"ì¶œì„ë¥  ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤. ê·œì¹™ì ì¸ ìˆ˜ì—… ì°¸ì—¬ê°€ ì„±ì  í–¥ìƒì˜ ê¸°ë³¸ì…ë‹ˆë‹¤.":g<80?"ê¸°ë³¸ ê°œë… ë³µìŠµì— ë” ë§ì€ ì‹œê°„ì„ íˆ¬ìí•˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.":"í˜„ì¬ í•™ìŠµ íŒ¨í„´ì„ ìœ ì§€í•˜ë©´ì„œ ì‹¬í™” í•™ìŠµìœ¼ë¡œ ë‚˜ì•„ê°€ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.",U=g>=85?"ìƒìœ„ê¶Œ ìœ ì§€ë¥¼ ìœ„í•´ ì‹¬í™” ë¬¸ì œ í’€ì´ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤. ê²½ì‹œëŒ€íšŒ ì¤€ë¹„ë„ ê³ ë ¤í•´ë³¼ ë§Œí•©ë‹ˆë‹¤.":g>=75?"ê¸°ë³¸ê¸° ê°•í™”ì™€ í•¨ê»˜ ë¬¸ì œ í’€ì´ ì†ë„ë¥¼ ë†’ì´ëŠ” ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤.":"ê°œë… ì´í•´ë¥¼ ìœ„í•œ 1:1 ë³´ì¶© ìˆ˜ì—…ì„ ì¶”ì²œí•©ë‹ˆë‹¤. ê¸°ì´ˆë¶€í„° ì°¨ê·¼ì°¨ê·¼ ë‹¤ì ¸ê°€ë©´ ì¶©ë¶„íˆ ì„±ì ì´ ì˜¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",I=g>=85?"í˜„ì¬ í‰ê·  "+g+"ì  ìˆ˜ì¤€ì„ ìœ ì§€í•˜ë©´ì„œ, "+((b==null?void 0:b.subject)||"ì·¨ì•½ ê³¼ëª©")+"ì—ì„œ 5ì  ì´ìƒ í–¥ìƒ ëª©í‘œ":"í‰ê·  ì ìˆ˜ "+g+"ì ì—ì„œ "+Math.min(100,parseFloat(g)+10).toFixed(0)+"ì ìœ¼ë¡œ í–¥ìƒ, ì¶œì„ë¥  "+m+"%ì—ì„œ 95% ì´ìƒ ë‹¬ì„±",j="["+n.name+"] í•™ìƒì€ ì´ë²ˆ ë‹¬ í‰ê·  "+g+"ì ì˜ ì„±ì ì„ ê¸°ë¡í–ˆìœ¼ë©°, ì¶œì„ë¥ ì€ "+m+"%ì…ë‹ˆë‹¤. "+(x==="ë§¤ìš° ìš°ìˆ˜"||x==="ìš°ìˆ˜"?"ì „ë°˜ì ìœ¼ë¡œ ì„±ì‹¤í•˜ê²Œ í•™ì—…ì— ì„í•˜ê³  ìˆìœ¼ë©°, ì§€ì†ì ì¸ ì„±ì¥ì´ ê¸°ëŒ€ë©ë‹ˆë‹¤.":"í•™ìŠµ íƒœë„ì™€ ì¶œì„ ê´€ë¦¬ì— ë” ë§ì€ ê´€ì‹¬ì´ í•„ìš”í•©ë‹ˆë‹¤.")+(v?" íŠ¹íˆ "+v.subject+" ê³¼ëª©ì—ì„œ ê°•ì ì„ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤.":"")+" ê¾¸ì¤€í•œ ë…¸ë ¥ìœ¼ë¡œ ë”ìš± ë°œì „í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",$="í•™ë¶€ëª¨ë‹˜, ì•ˆë…•í•˜ì„¸ìš”.\\n\\n"+n.name+" í•™ìƒì˜ "+a+" í•™ìŠµ ë¶„ì„ ë¦¬í¬íŠ¸ë¥¼ ì „ë‹¬ë“œë¦½ë‹ˆë‹¤.\\n\\nğŸ“Š ì´ë²ˆ ë‹¬ ì„±ê³¼\\n- í‰ê·  ì ìˆ˜: "+g+"ì \\n- ì¶œì„ë¥ : "+m+"%\\n- í•™ìŠµ íƒœë„: "+x+"\\n\\nğŸ’ª ê°•ì \\n"+w+"\\n\\nğŸ¯ ê°œì„  í•„ìš” ì‚¬í•­\\n"+E+"\\n\\nğŸ“ ì„ ìƒë‹˜ì˜ ì¶”ì²œ\\n"+U+"\\n\\në‹¤ìŒ ë‹¬ ëª©í‘œ: "+I+"\\n\\nì•ìœ¼ë¡œë„ "+n.name+" í•™ìƒì´ ë”ìš± ì„±ì¥í•  ìˆ˜ ìˆë„ë¡ ìµœì„ ì„ ë‹¤í•˜ê² ìŠµë‹ˆë‹¤.\\nê¶ê¸ˆí•˜ì‹  ì ì€ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”!\\n\\n- ê¾¸ë©”ë•…í•™ì› "+(((s=i[0])==null?void 0:s.counselor_name)||"ì„ ìƒë‹˜"),M=await e.env.DB.prepare(`
      INSERT INTO learning_reports 
      (student_id, report_month, overall_score, study_attitude, strengths, weaknesses, improvements, recommendations, next_month_goals, ai_analysis, parent_message)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `).bind(r,a,g,x,w,E,_,U,I,j,$).run();return e.json({success:!0,message:"AI í•™ìŠµ ë¶„ì„ ë¦¬í¬íŠ¸ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.",report_id:M.meta.last_row_id,preview:{overall_score:g,attendance_rate:m,study_attitude:x}})}catch(r){return console.error("Generate learning report error:",r),e.json({success:!1,error:"AI ë¦¬í¬íŠ¸ ìƒì„± ì‹¤íŒ¨"},500)}});d.get("/api/learning-reports/detail/:report_id",async e=>{try{const t=e.req.param("report_id"),s=await e.env.DB.prepare(`
      SELECT lr.*, s.name as student_name, s.parent_name, s.parent_phone
      FROM learning_reports lr
      JOIN students s ON lr.student_id = s.id
      WHERE lr.id = ?
    `).bind(t).first();return s?e.json({success:!0,report:s}):e.json({success:!1,error:"ë¦¬í¬íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404)}catch(t){return console.error("Get report detail error:",t),e.json({success:!1,error:"ë¦¬í¬íŠ¸ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.get("/profile",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í”„ë¡œí•„ ìˆ˜ì • - ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
          .gradient-purple {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
          }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100">
            <div class="max-w-7xl mx-auto px-6">
                <div class="flex justify-between items-center h-16">
                    <a href="/dashboard" class="text-xl font-bold text-purple-600">ìš°ë¦¬ëŠ” ìŠˆí¼í”Œë ˆì´ìŠ¤ë‹¤</a>
                    <div class="flex items-center space-x-4">
                        <a href="/dashboard" class="text-gray-600 hover:text-purple-600">ëŒ€ì‹œë³´ë“œ</a>
                        <a href="/profile" class="text-purple-600 font-medium">í”„ë¡œí•„</a>
                        <button onclick="logout()" class="text-red-600 hover:text-red-700">ë¡œê·¸ì•„ì›ƒ</button>
                    </div>
                </div>
            </div>
        </nav>

        <div class="pt-24 pb-12 px-6">
            <div class="max-w-4xl mx-auto">
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">í”„ë¡œí•„ ìˆ˜ì •</h1>
                    <p class="text-gray-600">íšŒì› ì •ë³´ë¥¼ ìˆ˜ì •í•˜ê³  ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- í”„ë¡œí•„ ì •ë³´ ìˆ˜ì • -->
                    <div class="bg-white rounded-2xl border border-gray-200 p-8">
                        <h2 class="text-xl font-bold text-gray-900 mb-6">ğŸ“ ê¸°ë³¸ ì •ë³´</h2>
                        <form id="profileForm" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì´ë©”ì¼</label>
                                <input type="email" id="email" readonly class="w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-50 text-gray-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì›ì¥ë‹˜ ì„±í•¨ <span class="text-red-500">*</span></label>
                                <input type="text" id="name" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì—°ë½ì²˜ <span class="text-red-500">*</span></label>
                                <input type="tel" id="phone" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">í•™ì› ì´ë¦„ <span class="text-red-500">*</span></label>
                                <input type="text" id="academy_name" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">í•™ì› ìœ„ì¹˜ <span class="text-red-500">*</span></label>
                                <input type="text" id="academy_location" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition">
                            </div>
                            <button type="submit" class="w-full gradient-purple text-white py-3 rounded-xl font-medium hover:shadow-xl transition-all">
                                í”„ë¡œí•„ ì €ì¥
                            </button>
                            <div id="profileMessage" class="hidden mt-4 p-4 rounded-xl"></div>
                        </form>
                    </div>

                    <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ -->
                    <div class="bg-white rounded-2xl border border-gray-200 p-8">
                        <h2 class="text-xl font-bold text-gray-900 mb-6">ğŸ” ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h2>
                        <form id="passwordForm" class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ <span class="text-red-500">*</span></label>
                                <input type="password" id="current_password" required class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ìƒˆ ë¹„ë°€ë²ˆí˜¸ <span class="text-red-500">*</span></label>
                                <input type="password" id="new_password" required minlength="6" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition">
                                <p class="text-xs text-gray-500 mt-1">ìµœì†Œ 6ì ì´ìƒ</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸ <span class="text-red-500">*</span></label>
                                <input type="password" id="new_password_confirm" required minlength="6" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition">
                            </div>
                            <button type="submit" class="w-full bg-orange-500 text-white py-3 rounded-xl font-medium hover:bg-orange-600 transition-all">
                                ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
                            </button>
                            <div id="passwordMessage" class="hidden mt-4 p-4 rounded-xl"></div>
                        </form>
                    </div>
                </div>

                <!-- ê°€ì… ì •ë³´ -->
                <div class="mt-6 bg-white rounded-2xl border border-gray-200 p-6">
                    <h2 class="text-lg font-bold text-gray-900 mb-4">â„¹ï¸ ê³„ì • ì •ë³´</h2>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <span class="text-gray-600">ê°€ì…ì¼:</span>
                            <span id="created_at" class="ml-2 font-medium text-gray-900"></span>
                        </div>
                        <div>
                            <span class="text-gray-600">íšŒì› ë“±ê¸‰:</span>
                            <span id="role" class="ml-2 font-medium text-purple-600"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
        const user = JSON.parse(localStorage.getItem('user') || 'null')
        if (!user) {
            alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.')
            window.location.href = '/login'
        }

        function logout() {
            localStorage.removeItem('user')
            window.location.href = '/'
        }

        // í”„ë¡œí•„ ë¡œë“œ
        async function loadProfile() {
            try {
                const res = await fetch('/api/user/profile', {
                    headers: { 'X-User-Id': user.id }
                })
                const data = await res.json()
                if (data.success) {
                    document.getElementById('email').value = data.user.email
                    document.getElementById('name').value = data.user.name
                    document.getElementById('phone').value = data.user.phone || ''
                    document.getElementById('academy_name').value = data.user.academy_name || ''
                    document.getElementById('academy_location').value = data.user.academy_location || ''
                    document.getElementById('created_at').textContent = new Date(data.user.created_at).toLocaleDateString()
                    document.getElementById('role').textContent = data.user.role === 'admin' ? 'ê´€ë¦¬ì' : 'ì¼ë°˜ íšŒì›'
                }
            } catch (err) {
                console.error('í”„ë¡œí•„ ë¡œë“œ ì‹¤íŒ¨:', err)
            }
        }

        // í”„ë¡œí•„ ìˆ˜ì •
        document.getElementById('profileForm').addEventListener('submit', async (e) => {
            e.preventDefault()
            
            const data = {
                name: document.getElementById('name').value,
                phone: document.getElementById('phone').value,
                academy_name: document.getElementById('academy_name').value,
                academy_location: document.getElementById('academy_location').value
            }

            try {
                const res = await fetch('/api/user/profile', {
                    method: 'PUT',
                    headers: { 
                        'Content-Type': 'application/json',
                        'X-User-Id': user.id
                    },
                    body: JSON.stringify(data)
                })
                const result = await res.json()
                const messageEl = document.getElementById('profileMessage')
                messageEl.classList.remove('hidden')

                if (result.success) {
                    messageEl.className = 'mt-4 p-4 rounded-xl bg-green-50 text-green-800 border border-green-200'
                    messageEl.textContent = result.message
                    
                    // localStorage ì—…ë°ì´íŠ¸
                    user.name = data.name
                    user.academy_name = data.academy_name
                    localStorage.setItem('user', JSON.stringify(user))
                } else {
                    messageEl.className = 'mt-4 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200'
                    messageEl.textContent = result.error
                }
            } catch (err) {
                const messageEl = document.getElementById('profileMessage')
                messageEl.classList.remove('hidden')
                messageEl.className = 'mt-4 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200'
                messageEl.textContent = 'í”„ë¡œí•„ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
            }
        })

        // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
        document.getElementById('passwordForm').addEventListener('submit', async (e) => {
            e.preventDefault()
            
            const current_password = document.getElementById('current_password').value
            const new_password = document.getElementById('new_password').value
            const new_password_confirm = document.getElementById('new_password_confirm').value

            if (new_password !== new_password_confirm) {
                const messageEl = document.getElementById('passwordMessage')
                messageEl.classList.remove('hidden')
                messageEl.className = 'mt-4 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200'
                messageEl.textContent = 'ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'
                return
            }

            try {
                const res = await fetch('/api/user/change-password', {
                    method: 'PUT',
                    headers: { 
                        'Content-Type': 'application/json',
                        'X-User-Id': user.id
                    },
                    body: JSON.stringify({ current_password, new_password })
                })
                const result = await res.json()
                const messageEl = document.getElementById('passwordMessage')
                messageEl.classList.remove('hidden')

                if (result.success) {
                    messageEl.className = 'mt-4 p-4 rounded-xl bg-green-50 text-green-800 border border-green-200'
                    messageEl.textContent = result.message
                    document.getElementById('passwordForm').reset()
                } else {
                    messageEl.className = 'mt-4 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200'
                    messageEl.textContent = result.error
                }
            } catch (err) {
                const messageEl = document.getElementById('passwordMessage')
                messageEl.classList.remove('hidden')
                messageEl.className = 'mt-4 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200'
                messageEl.textContent = 'ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
            }
        })

        loadProfile()
        <\/script>
    </body>
    </html>
  `));d.get("/api/user/profile",async e=>{try{const t=e.req.header("X-User-Id");if(!t)return e.json({success:!1,error:"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."},401);const s=await e.env.DB.prepare(`
      SELECT id, email, name, phone, academy_name, academy_location, role, created_at
      FROM users WHERE id = ?
    `).bind(t).first();return s?e.json({success:!0,user:s}):e.json({success:!1,error:"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404)}catch(t){return console.error("Get profile error:",t),e.json({success:!1,error:"í”„ë¡œí•„ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.put("/api/user/profile",async e=>{try{const t=e.req.header("X-User-Id");if(!t)return e.json({success:!1,error:"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."},401);const{name:s,phone:r,academy_name:a,academy_location:n}=await e.req.json();return!s||!r||!a||!n?e.json({success:!1,error:"ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400):(await e.env.DB.prepare(`
      UPDATE users 
      SET name = ?, phone = ?, academy_name = ?, academy_location = ?, updated_at = CURRENT_TIMESTAMP
      WHERE id = ?
    `).bind(s,r,a,n,t).run(),e.json({success:!0,message:"í”„ë¡œí•„ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤."}))}catch(t){return console.error("Update profile error:",t),e.json({success:!1,error:"í”„ë¡œí•„ ìˆ˜ì • ì‹¤íŒ¨"},500)}});d.put("/api/user/change-password",async e=>{try{const t=e.req.header("X-User-Id");if(!t)return e.json({success:!1,error:"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."},401);const{current_password:s,new_password:r}=await e.req.json();return!s||!r?e.json({success:!1,error:"í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ì™€ ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."},400):r.length<6?e.json({success:!1,error:"ìƒˆ ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤."},400):await e.env.DB.prepare(`
      SELECT id FROM users WHERE id = ? AND password = ?
    `).bind(t,s).first()?(await e.env.DB.prepare(`
      UPDATE users SET password = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?
    `).bind(r,t).run(),e.json({success:!0,message:"ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤."})):e.json({success:!1,error:"í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."},400)}catch(t){return console.error("Change password error:",t),e.json({success:!1,error:"ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì‹¤íŒ¨"},500)}});d.post("/api/admin/impersonate",async e=>{try{const t=e.req.header("X-User-Id");if(!t)return e.json({success:!1,error:"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."},401);if(!await e.env.DB.prepare(`
      SELECT role FROM users WHERE id = ? AND role = 'admin'
    `).bind(t).first())return e.json({success:!1,error:"ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤."},403);const{user_id:r}=await e.req.json(),a=await e.env.DB.prepare(`
      SELECT id, email, name, role, academy_name FROM users WHERE id = ?
    `).bind(r).first();return a?e.json({success:!0,message:"ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.",user:a,is_impersonating:!0,original_admin_id:t}):e.json({success:!1,error:"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404)}catch(t){return console.error("Impersonate error:",t),e.json({success:!1,error:"ì‚¬ìš©ì ë¡œê·¸ì¸ ì‹¤íŒ¨"},500)}});d.get("/programs/naver-place",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ë§ˆì¼€íŒ… ë„êµ¬ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"><\/script>
    </head>
    <body class="bg-gray-50">
        <!-- í—¤ë” -->
        <nav class="bg-white shadow-sm sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-8">
                        <a href="/programs" class="text-2xl font-bold text-blue-600">ğŸ—ºï¸ ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ë„êµ¬</a>
                        <div class="hidden md:flex gap-6">
                            <a href="#keyword" class="text-gray-600 hover:text-blue-600">í‚¤ì›Œë“œ ë¶„ì„</a>
                            <a href="#competitor" class="text-gray-600 hover:text-blue-600">ê²½ìŸì‚¬ ë¶„ì„</a>
                            <a href="#review" class="text-gray-600 hover:text-blue-600">ë¦¬ë·° ê´€ë¦¬</a>
                            <a href="#optimization" class="text-gray-600 hover:text-blue-600">ìµœì í™”</a>
                        </div>
                    </div>
                    <div class="flex gap-3">
                        <button onclick="history.back()" class="px-4 py-2 text-gray-600 hover:text-gray-900">
                            <i class="fas fa-arrow-left mr-2"></i>ë’¤ë¡œ
                        </button>
                        <a href="/programs" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            í”„ë¡œê·¸ë¨ ëª©ë¡
                        </a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            
            <!-- 1. í‚¤ì›Œë“œ ê²€ìƒ‰ëŸ‰ ë¶„ì„ -->
            <section id="keyword" class="mb-12">
                <div class="bg-white rounded-2xl shadow-sm p-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">
                        <i class="fas fa-search text-blue-600 mr-3"></i>
                        í‚¤ì›Œë“œ ê²€ìƒ‰ëŸ‰ ë¶„ì„
                    </h2>
                    <p class="text-gray-600 mb-6">ìš°ë¦¬ í•™ì›ì´ íƒ€ê²Ÿí•´ì•¼ í•  ì§€ì—­ + ì—…ì¢… í‚¤ì›Œë“œì˜ ì˜ˆìƒ ê²€ìƒ‰ëŸ‰ì„ í™•ì¸í•˜ì„¸ìš”</p>
                    
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ì§€ì—­ ì„ íƒ</label>
                            <input type="text" id="location" placeholder="ì˜ˆ: ì¸ì²œ ì„œêµ¬, ê°•ë‚¨êµ¬, ëª©ë™" 
                                   class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ì—…ì¢…/í‚¤ì›Œë“œ</label>
                            <input type="text" id="keyword" placeholder="ì˜ˆ: ì˜ì–´í•™ì›, ìˆ˜í•™í•™ì›, ì½”ë”©í•™ì›" 
                                   class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                    
                    <button onclick="analyzeKeyword()" class="w-full md:w-auto px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold">
                        <i class="fas fa-chart-line mr-2"></i>ê²€ìƒ‰ëŸ‰ ë¶„ì„í•˜ê¸°
                    </button>
                    
                    <div id="keywordResult" class="hidden mt-8">
                        <div class="bg-blue-50 border-l-4 border-blue-600 p-6 rounded-lg">
                            <h3 class="text-xl font-bold text-gray-900 mb-4">ë¶„ì„ ê²°ê³¼</h3>
                            <div class="grid md:grid-cols-3 gap-6">
                                <div class="bg-white p-4 rounded-lg">
                                    <div class="text-sm text-gray-600 mb-1">ì›”í‰ê·  ê²€ìƒ‰ëŸ‰</div>
                                    <div class="text-3xl font-bold text-blue-600" id="searchVolume">-</div>
                                    <div class="text-xs text-gray-500 mt-1">ì§€ì—­ ë‚´ ê²€ìƒ‰ ì¶”ì •ì¹˜</div>
                                </div>
                                <div class="bg-white p-4 rounded-lg">
                                    <div class="text-sm text-gray-600 mb-1">ê²½ìŸ ê°•ë„</div>
                                    <div class="text-3xl font-bold" id="competition">-</div>
                                    <div class="text-xs text-gray-500 mt-1">ë‚®ì„ìˆ˜ë¡ ìœ ë¦¬</div>
                                </div>
                                <div class="bg-white p-4 rounded-lg">
                                    <div class="text-sm text-gray-600 mb-1">ì¶”ì²œ ì ìˆ˜</div>
                                    <div class="text-3xl font-bold text-green-600" id="score">-</div>
                                    <div class="text-xs text-gray-500 mt-1">/100ì </div>
                                </div>
                            </div>
                            <div class="mt-6 p-4 bg-white rounded-lg">
                                <h4 class="font-semibold text-gray-900 mb-3">ì¶”ì²œ í‚¤ì›Œë“œ ì¡°í•©</h4>
                                <div id="keywordSuggestions" class="space-y-2"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 2. ê²½ìŸì‚¬ ë¶„ì„ -->
            <section id="competitor" class="mb-12">
                <div class="bg-white rounded-2xl shadow-sm p-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">
                        <i class="fas fa-users text-purple-600 mr-3"></i>
                        ê²½ìŸì‚¬ ë²¤ì¹˜ë§ˆí‚¹
                    </h2>
                    <p class="text-gray-600 mb-6">ì£¼ë³€ ê²½ìŸ í•™ì›ê³¼ ìš°ë¦¬ í•™ì›ì„ ë¹„êµ ë¶„ì„í•˜ì„¸ìš”</p>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ìš°ë¦¬ í•™ì› ì •ë³´</label>
                        <div class="grid md:grid-cols-3 gap-4">
                            <input type="text" id="myAcademy" placeholder="í•™ì›ëª…" class="px-4 py-3 border rounded-lg">
                            <input type="number" id="myReviews" placeholder="ë¦¬ë·° ìˆ˜" class="px-4 py-3 border rounded-lg">
                            <input type="number" id="myRating" placeholder="í‰ì  (1-5)" step="0.1" max="5" class="px-4 py-3 border rounded-lg">
                        </div>
                    </div>
                    
                    <button onclick="analyzeCompetitor()" class="w-full md:w-auto px-8 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-semibold">
                        <i class="fas fa-chart-bar mr-2"></i>ê²½ìŸë ¥ ë¶„ì„í•˜ê¸°
                    </button>
                    
                    <div id="competitorResult" class="hidden mt-8">
                        <div class="bg-purple-50 border-l-4 border-purple-600 p-6 rounded-lg">
                            <h3 class="text-xl font-bold text-gray-900 mb-4">ë²¤ì¹˜ë§ˆí‚¹ ê²°ê³¼</h3>
                            <canvas id="competitorChart" class="max-w-2xl mx-auto"></canvas>
                            <div class="mt-6 grid md:grid-cols-2 gap-4">
                                <div class="bg-white p-4 rounded-lg">
                                    <h4 class="font-semibold mb-3 text-green-600">ğŸ’ª ìš°ë¦¬ì˜ ê°•ì </h4>
                                    <ul id="strengths" class="space-y-2 text-sm"></ul>
                                </div>
                                <div class="bg-white p-4 rounded-lg">
                                    <h4 class="font-semibold mb-3 text-orange-600">ğŸ“ˆ ê°œì„  í¬ì¸íŠ¸</h4>
                                    <ul id="improvements" class="space-y-2 text-sm"></ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 3. ë¦¬ë·° ì‘ë‹µ í…œí”Œë¦¿ ìƒì„±ê¸° -->
            <section id="review" class="mb-12">
                <div class="bg-white rounded-2xl shadow-sm p-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">
                        <i class="fas fa-star text-yellow-500 mr-3"></i>
                        ë¦¬ë·° ì‘ë‹µ ìë™ ìƒì„±ê¸°
                    </h2>
                    <p class="text-gray-600 mb-6">ê³ ê° ë¦¬ë·°ì— ë§ì¶¤í˜• ì‘ë‹µì„ ìë™ìœ¼ë¡œ ìƒì„±í•˜ì„¸ìš”</p>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ë¦¬ë·° ìœ í˜• ì„ íƒ</label>
                        <select id="reviewType" class="w-full px-4 py-3 border rounded-lg">
                            <option value="positive">ê¸ì •ì  ë¦¬ë·° (â­â­â­â­â­)</option>
                            <option value="neutral">ë³´í†µ ë¦¬ë·° (â­â­â­)</option>
                            <option value="negative">ë¶€ì •ì  ë¦¬ë·° (â­â­)</option>
                        </select>
                    </div>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">ë¦¬ë·° ë‚´ìš© (ì„ íƒ)</label>
                        <textarea id="reviewContent" rows="3" placeholder="ì˜ˆ: ì„ ìƒë‹˜ì´ ì¹œì ˆí•˜ì‹œê³  ì„¤ëª…ì„ ì˜í•´ì£¼ì…”ì„œ ì•„ì´ê°€ ì¢‹ì•„í•©ë‹ˆë‹¤" 
                                  class="w-full px-4 py-3 border rounded-lg"></textarea>
                    </div>
                    
                    <button onclick="generateReviewResponse()" class="w-full md:w-auto px-8 py-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 font-semibold">
                        <i class="fas fa-magic mr-2"></i>ì‘ë‹µ ìƒì„±í•˜ê¸°
                    </button>
                    
                    <div id="reviewResponse" class="hidden mt-8">
                        <div class="bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded-lg">
                            <h3 class="text-xl font-bold text-gray-900 mb-4">ì¶”ì²œ ì‘ë‹µ</h3>
                            <div class="bg-white p-6 rounded-lg mb-4">
                                <p id="responseText" class="text-gray-800 leading-relaxed whitespace-pre-wrap"></p>
                            </div>
                            <button onclick="copyResponse()" class="px-6 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600">
                                <i class="fas fa-copy mr-2"></i>ë³µì‚¬í•˜ê¸°
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 4. í”Œë ˆì´ìŠ¤ ìµœì í™” ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
            <section id="optimization" class="mb-12">
                <div class="bg-white rounded-2xl shadow-sm p-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">
                        <i class="fas fa-check-circle text-green-600 mr-3"></i>
                        í”Œë ˆì´ìŠ¤ ìµœì í™” ì²´í¬ë¦¬ìŠ¤íŠ¸
                    </h2>
                    <p class="text-gray-600 mb-6">ìƒìœ„ë…¸ì¶œì„ ìœ„í•œ í•„ìˆ˜ ì²´í¬ í¬ì¸íŠ¸ë¥¼ í™•ì¸í•˜ì„¸ìš”</p>
                    
                    <div class="space-y-4">
                        <div class="flex items-start gap-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <input type="checkbox" id="check1" class="w-6 h-6 mt-1 text-green-600 rounded">
                            <label for="check1" class="flex-1 cursor-pointer">
                                <div class="font-semibold text-gray-900">ì •í™•í•œ ì¹´í…Œê³ ë¦¬ ì„¤ì •</div>
                                <div class="text-sm text-gray-600">ì—…ì¢…ì— ë§ëŠ” ì •í™•í•œ ì¹´í…Œê³ ë¦¬ë¥¼ 1ìˆœìœ„ë¡œ ì„¤ì •í–ˆë‚˜ìš”?</div>
                            </label>
                        </div>
                        
                        <div class="flex items-start gap-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <input type="checkbox" id="check2" class="w-6 h-6 mt-1 text-green-600 rounded">
                            <label for="check2" class="flex-1 cursor-pointer">
                                <div class="font-semibold text-gray-900">ìƒì„¸ ì •ë³´ 100% ì…ë ¥</div>
                                <div class="text-sm text-gray-600">ì˜ì—…ì‹œê°„, ì „í™”ë²ˆí˜¸, ì£¼ì†Œ, í™ˆí˜ì´ì§€ ë“± ëª¨ë“  ì •ë³´ë¥¼ ì…ë ¥í–ˆë‚˜ìš”?</div>
                            </label>
                        </div>
                        
                        <div class="flex items-start gap-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <input type="checkbox" id="check3" class="w-6 h-6 mt-1 text-green-600 rounded">
                            <label for="check3" class="flex-1 cursor-pointer">
                                <div class="font-semibold text-gray-900">ê³ í€„ë¦¬í‹° ì‚¬ì§„ ë“±ë¡</div>
                                <div class="text-sm text-gray-600">ë‚´ë¶€/ì™¸ë¶€ ì‚¬ì§„ 10ì¥ ì´ìƒ, í•´ìƒë„ ë†’ì€ ì‚¬ì§„ì„ ë“±ë¡í–ˆë‚˜ìš”?</div>
                            </label>
                        </div>
                        
                        <div class="flex items-start gap-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <input type="checkbox" id="check4" class="w-6 h-6 mt-1 text-green-600 rounded">
                            <label for="check4" class="flex-1 cursor-pointer">
                                <div class="font-semibold text-gray-900">ì •ê¸°ì ì¸ ê²Œì‹œê¸€ ì—…ë¡œë“œ</div>
                                <div class="text-sm text-gray-600">ì£¼ 2-3íšŒ ì´ìƒ ì†Œì‹, ì´ë²¤íŠ¸, ìˆ˜ì—… í›„ê¸° ë“±ì„ ì˜¬ë¦¬ê³  ìˆë‚˜ìš”?</div>
                            </label>
                        </div>
                        
                        <div class="flex items-start gap-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <input type="checkbox" id="check5" class="w-6 h-6 mt-1 text-green-600 rounded">
                            <label for="check5" class="flex-1 cursor-pointer">
                                <div class="font-semibold text-gray-900">ë¦¬ë·° ê´€ë¦¬ (ì‘ë‹µë¥  80% ì´ìƒ)</div>
                                <div class="text-sm text-gray-600">ëª¨ë“  ë¦¬ë·°ì— 24ì‹œê°„ ë‚´ ì •ì„±ìŠ¤ëŸ¬ìš´ ë‹µë³€ì„ ë‹¬ê³  ìˆë‚˜ìš”?</div>
                            </label>
                        </div>
                        
                        <div class="flex items-start gap-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <input type="checkbox" id="check6" class="w-6 h-6 mt-1 text-green-600 rounded">
                            <label for="check6" class="flex-1 cursor-pointer">
                                <div class="font-semibold text-gray-900">ì˜ˆì•½ / ë¬¸ì˜ ê¸°ëŠ¥ í™œì„±í™”</div>
                                <div class="text-sm text-gray-600">ë„¤ì´ë²„ ì˜ˆì•½ ë˜ëŠ” í†¡í†¡ ìƒë‹´ì„ ì¼œë‘ì—ˆë‚˜ìš”?</div>
                            </label>
                        </div>
                        
                        <div class="flex items-start gap-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <input type="checkbox" id="check7" class="w-6 h-6 mt-1 text-green-600 rounded">
                            <label for="check7" class="flex-1 cursor-pointer">
                                <div class="font-semibold text-gray-900">ë©”ë‰´/ê°€ê²© ì •ë³´ ê³µê°œ</div>
                                <div class="text-sm text-gray-600">ìˆ˜ì—…ë£Œ, ìˆ˜ê°• í”„ë¡œê·¸ë¨ ë“± íˆ¬ëª…í•œ ê°€ê²© ì •ë³´ë¥¼ ì œê³µí•˜ë‚˜ìš”?</div>
                            </label>
                        </div>
                        
                        <div class="flex items-start gap-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <input type="checkbox" id="check8" class="w-6 h-6 mt-1 text-green-600 rounded">
                            <label for="check8" class="flex-1 cursor-pointer">
                                <div class="font-semibold text-gray-900">í‚¤ì›Œë“œ ìì—°ìŠ¤ëŸ½ê²Œ í¬í•¨</div>
                                <div class="text-sm text-gray-600">ì†Œê°œê¸€ê³¼ ê²Œì‹œê¸€ì— ì§€ì—­+ì—…ì¢… í‚¤ì›Œë“œê°€ ìì—°ìŠ¤ëŸ½ê²Œ ë“¤ì–´ê°€ ìˆë‚˜ìš”?</div>
                            </label>
                        </div>
                    </div>
                    
                    <div class="mt-8 p-6 bg-green-50 rounded-lg">
                        <div class="flex items-center justify-between mb-3">
                            <span class="text-lg font-semibold text-gray-900">ìµœì í™” ì ìˆ˜</span>
                            <span id="optimizationScore" class="text-3xl font-bold text-green-600">0/8</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div id="optimizationBar" class="bg-green-600 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
                        </div>
                        <p class="text-sm text-gray-600 mt-3">ğŸ’¡ 8ê°œ í•­ëª©ì„ ëª¨ë‘ ì²´í¬í•˜ë©´ ìƒìœ„ë…¸ì¶œ í™•ë¥ ì´ í¬ê²Œ ë†’ì•„ì§‘ë‹ˆë‹¤!</p>
                    </div>
                </div>
            </section>

            <!-- 5. ìµœì  ì˜ì—…ì‹œê°„ ì¶”ì²œ -->
            <section class="mb-12">
                <div class="bg-white rounded-2xl shadow-sm p-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">
                        <i class="fas fa-clock text-indigo-600 mr-3"></i>
                        ìµœì  ì˜ì—…ì‹œê°„ & ê²Œì‹œ ì‹œê°„ ì¶”ì²œ
                    </h2>
                    <p class="text-gray-600 mb-6">í•™ì› ì—…ì¢… íŠ¹ì„±ì— ë§ëŠ” ìµœì ì˜ ìš´ì˜ ì‹œê°„ì„ ì¶”ì²œí•©ë‹ˆë‹¤</p>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="p-6 bg-indigo-50 rounded-lg">
                            <h3 class="font-bold text-gray-900 mb-4">ğŸ“Œ ì¶”ì²œ ì˜ì—…ì‹œê°„</h3>
                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between">
                                    <span class="text-gray-600">í‰ì¼</span>
                                    <span class="font-semibold">14:00 - 22:00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600">ì£¼ë§</span>
                                    <span class="font-semibold">09:00 - 18:00</span>
                                </div>
                                <p class="text-xs text-gray-500 mt-3">* í•™ì› ì—…ì¢…ì€ ë°©ê³¼ í›„ ~ ì €ë… ì‹œê°„ëŒ€ ì§‘ì¤‘ ë…¸ì¶œì´ ìœ ë¦¬í•©ë‹ˆë‹¤</p>
                            </div>
                        </div>
                        
                        <div class="p-6 bg-indigo-50 rounded-lg">
                            <h3 class="font-bold text-gray-900 mb-4">ğŸ“± ì¶”ì²œ ê²Œì‹œê¸€ ì—…ë¡œë“œ ì‹œê°„</h3>
                            <div class="space-y-3 text-sm">
                                <div class="flex items-center gap-2">
                                    <span class="w-24 text-gray-600">í‰ì¼ ì˜¤ì „</span>
                                    <span class="font-semibold">10:00 - 11:00</span>
                                    <span class="text-xs text-gray-500">(í•™ë¶€ëª¨ í™œë™ ì‹œê°„)</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-24 text-gray-600">í‰ì¼ ì €ë…</span>
                                    <span class="font-semibold">19:00 - 20:00</span>
                                    <span class="text-xs text-gray-500">(í‡´ê·¼ í›„ ê²€ìƒ‰)</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-24 text-gray-600">ì£¼ë§</span>
                                    <span class="font-semibold">11:00 - 13:00</span>
                                    <span class="text-xs text-gray-500">(ì£¼ë§ í•™ì› ê²€ìƒ‰)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <script>
            // í‚¤ì›Œë“œ ë¶„ì„
            function analyzeKeyword() {
                const location = document.getElementById('location').value.trim();
                const keyword = document.getElementById('keyword').value.trim();
                
                if (!location || !keyword) {
                    alert('ì§€ì—­ê³¼ í‚¤ì›Œë“œë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”');
                    return;
                }
                
                // ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„°
                const searchVolume = Math.floor(Math.random() * 1500) + 500;
                const competition = ['ë‚®ìŒ', 'ë³´í†µ', 'ë†’ìŒ'][Math.floor(Math.random() * 3)];
                const score = Math.floor(Math.random() * 30) + 70;
                
                document.getElementById('searchVolume').textContent = searchVolume.toLocaleString();
                document.getElementById('competition').textContent = competition;
                document.getElementById('competition').className = 'text-3xl font-bold ' + 
                    (competition === 'ë‚®ìŒ' ? 'text-green-600' : competition === 'ë³´í†µ' ? 'text-yellow-600' : 'text-red-600');
                document.getElementById('score').textContent = score;
                
                // ì¶”ì²œ í‚¤ì›Œë“œ
                const suggestions = [
                    \`\${location} \${keyword}\`,
                    \`\${location} \${keyword} ì¶”ì²œ\`,
                    \`\${location} \${keyword} ê°€ê²©\`,
                    \`\${location} ì´ˆë“± \${keyword}\`,
                    \`\${location} ì¤‘ë“± \${keyword}\`,
                ];
                
                const suggestionsHTML = suggestions.map(s => 
                    \`<div class="flex items-center gap-3 text-sm">
                        <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full font-medium">\${s}</span>
                        <span class="text-gray-500">ê²€ìƒ‰ëŸ‰: \${Math.floor(Math.random() * 500) + 100}</span>
                    </div>\`
                ).join('');
                
                document.getElementById('keywordSuggestions').innerHTML = suggestionsHTML;
                document.getElementById('keywordResult').classList.remove('hidden');
                
                // ìŠ¤í¬ë¡¤
                document.getElementById('keywordResult').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
            
            // ê²½ìŸì‚¬ ë¶„ì„
            let competitorChart = null;
            
            function analyzeCompetitor() {
                const myAcademy = document.getElementById('myAcademy').value.trim();
                const myReviews = parseInt(document.getElementById('myReviews').value) || 0;
                const myRating = parseFloat(document.getElementById('myRating').value) || 0;
                
                if (!myAcademy) {
                    alert('í•™ì›ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
                    return;
                }
                
                // ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„°
                const competitors = [
                    { name: 'ê²½ìŸì‚¬ A', reviews: Math.floor(Math.random() * 100) + 50, rating: (Math.random() * 1 + 4).toFixed(1) },
                    { name: 'ê²½ìŸì‚¬ B', reviews: Math.floor(Math.random() * 100) + 50, rating: (Math.random() * 1 + 4).toFixed(1) },
                    { name: 'ê²½ìŸì‚¬ C', reviews: Math.floor(Math.random() * 100) + 50, rating: (Math.random() * 1 + 4).toFixed(1) },
                ];
                
                const avgReviews = Math.floor((competitors.reduce((sum, c) => sum + c.reviews, 0)) / 3);
                const avgRating = (competitors.reduce((sum, c) => sum + parseFloat(c.rating), 0) / 3).toFixed(1);
                
                // ì°¨íŠ¸ ìƒì„±
                const ctx = document.getElementById('competitorChart');
                if (competitorChart) competitorChart.destroy();
                
                competitorChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: [myAcademy, ...competitors.map(c => c.name), 'í‰ê· '],
                        datasets: [{
                            label: 'ë¦¬ë·° ìˆ˜',
                            data: [myReviews, ...competitors.map(c => c.reviews), avgReviews],
                            backgroundColor: ['#3B82F6', '#E5E7EB', '#E5E7EB', '#E5E7EB', '#FCD34D'],
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: { y: { beginAtZero: true } }
                    }
                });
                
                // ê°•ì /ê°œì„ ì 
                const strengths = [];
                const improvements = [];
                
                if (myReviews > avgReviews) strengths.push('ë¦¬ë·° ìˆ˜ê°€ í‰ê· ë³´ë‹¤ ë§ìŠµë‹ˆë‹¤');
                else improvements.push(\`ë¦¬ë·°ë¥¼ \${avgReviews - myReviews}ê°œ ë” í™•ë³´í•˜ì„¸ìš”\`);
                
                if (myRating >= parseFloat(avgRating)) strengths.push('í‰ì ì´ í‰ê·  ì´ìƒì…ë‹ˆë‹¤');
                else improvements.push('í‰ì ì„ ë†’ì´ê¸° ìœ„í•´ ì„œë¹„ìŠ¤ í’ˆì§ˆ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤');
                
                if (myReviews < 50) improvements.push('ë¦¬ë·° 50ê°œ ì´ìƒ í™•ë³´ë¥¼ ëª©í‘œë¡œ í•˜ì„¸ìš”');
                if (myRating < 4.5) improvements.push('4.5ì  ì´ìƒ í‰ì  ìœ ì§€ë¥¼ ìœ„í•´ ë…¸ë ¥í•˜ì„¸ìš”');
                
                document.getElementById('strengths').innerHTML = strengths.map(s => 
                    \`<li class="flex items-start gap-2"><span class="text-green-600">âœ“</span><span>\${s}</span></li>\`
                ).join('') || '<li class="text-gray-500">ë¶„ì„ ê²°ê³¼ ì—†ìŒ</li>';
                
                document.getElementById('improvements').innerHTML = improvements.map(s => 
                    \`<li class="flex items-start gap-2"><span class="text-orange-600">â†’</span><span>\${s}</span></li>\`
                ).join('') || '<li class="text-gray-500">ë¶„ì„ ê²°ê³¼ ì—†ìŒ</li>';
                
                document.getElementById('competitorResult').classList.remove('hidden');
                document.getElementById('competitorResult').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
            
            // ë¦¬ë·° ì‘ë‹µ ìƒì„±
            function generateReviewResponse() {
                const type = document.getElementById('reviewType').value;
                const content = document.getElementById('reviewContent').value.trim();
                
                const responses = {
                    positive: [
                        "ì†Œì¤‘í•œ ë¦¬ë·° ì •ë§ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤! ğŸ˜Š\\n{name} í•™ë¶€ëª¨ë‹˜ì˜ ë”°ëœ»í•œ ë§ì”€ì— ì €í¬ ëª¨ë“  ì„ ìƒë‹˜ë“¤ì´ í° í˜ì„ ì–»ìŠµë‹ˆë‹¤.\\nì•ìœ¼ë¡œë„ í•™ìƒì˜ ì„±ì¥ì„ ìœ„í•´ ìµœì„ ì„ ë‹¤í•˜ëŠ” {academy}ì´ ë˜ê² ìŠµë‹ˆë‹¤.\\ní•­ìƒ ê°ì‚¬í•©ë‹ˆë‹¤! ğŸ™",
                        "ë¦¬ë·° ë‚¨ê²¨ì£¼ì…”ì„œ ì§„ì‹¬ìœ¼ë¡œ ê°ì‚¬í•©ë‹ˆë‹¤! â¤ï¸\\ní•™ìƒì´ ì¦ê²ê²Œ ê³µë¶€í•˜ëŠ” ëª¨ìŠµì„ ë³´ë‹ˆ ì €í¬ë„ ì •ë§ ë¿Œë“¯í•©ë‹ˆë‹¤.\\në” ë‚˜ì€ ìˆ˜ì—…, ë” ì¢‹ì€ ê²°ê³¼ë¡œ ë³´ë‹µí•˜ê² ìŠµë‹ˆë‹¤.\\nì–¸ì œë“ ì§€ ê¶ê¸ˆí•œ ì  ìˆìœ¼ì‹œë©´ í¸í•˜ê²Œ ì—°ë½ì£¼ì„¸ìš”! ğŸ˜Š"
                    ],
                    neutral: [
                        "ì†Œì¤‘í•œ ì˜ê²¬ ê°ì‚¬í•©ë‹ˆë‹¤.\\në” ë‚˜ì€ ìˆ˜ì—… í™˜ê²½ì„ ë§Œë“¤ê¸° ìœ„í•´ ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤.\\ní˜¹ì‹œ ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„ì´ ìˆë‹¤ë©´ ì–¸ì œë“  ë§ì”€í•´ ì£¼ì„¸ìš”!\\n{name} í•™ìƒì˜ ë°œì „ì„ ìœ„í•´ ìµœì„ ì„ ë‹¤í•˜ê² ìŠµë‹ˆë‹¤. ğŸ™",
                        "ë¦¬ë·° ë‚¨ê²¨ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤!\\ní•™ë¶€ëª¨ë‹˜ì˜ ì˜ê²¬ì„ ë°˜ì˜í•˜ì—¬ ë” ë‚˜ì€ í•™ì›ì´ ë˜ë„ë¡ ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤.\\nì•ìœ¼ë¡œë„ ë§ì€ ê´€ì‹¬ ë¶€íƒë“œë¦½ë‹ˆë‹¤. ğŸ˜Š"
                    ],
                    negative: [
                        "ë¶ˆí¸ì„ ë“œë ¤ ì •ë§ ì£„ì†¡í•©ë‹ˆë‹¤. ğŸ˜”\\në§ì”€í•´ì£¼ì‹  ë¶€ë¶„ì€ ì¦‰ì‹œ ê°œì„ í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\\ní•™ë¶€ëª¨ë‹˜ê³¼ ì§ì ‘ í†µí™”í•˜ì—¬ ìì„¸í•œ ì´ì•¼ê¸°ë¥¼ ë‚˜ëˆ„ê³  ì‹¶ìŠµë‹ˆë‹¤.\\ní•™ì›ìœ¼ë¡œ ì—°ë½ ì£¼ì‹œë©´ ì„±ì‹¬ì„±ì˜ê» í•´ê²°í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\\në‹¤ì‹œ í•œë²ˆ ì£„ì†¡í•˜ë‹¤ëŠ” ë§ì”€ ë“œë¦½ë‹ˆë‹¤.",
                        "ê·€í•œ ì˜ê²¬ ê°ì‚¬ë“œë¦¬ë©°, ë¶ˆí¸ì„ ë“œë¦° ì  ì§„ì‹¬ìœ¼ë¡œ ì‚¬ê³¼ë“œë¦½ë‹ˆë‹¤.\\nì¦‰ì‹œ ë¬¸ì œë¥¼ íŒŒì•…í•˜ì—¬ ê°œì„  ì¡°ì¹˜ë¥¼ ì·¨í•˜ê² ìŠµë‹ˆë‹¤.\\nì§ì ‘ ì°¾ì•„ëµ™ê³  ë§ì”€ë“œë¦¬ê³  ì‹¶ìŠµë‹ˆë‹¤.\\ní•™ì›ìœ¼ë¡œ ì—°ë½ ë¶€íƒë“œë¦½ë‹ˆë‹¤. ğŸ™"
                    ]
                };
                
                const templates = responses[type];
                const response = templates[Math.floor(Math.random() * templates.length)]
                    .replace('{name}', 'í•™ìƒ')
                    .replace('{academy}', 'í•™ì›');
                
                document.getElementById('responseText').textContent = response;
                document.getElementById('reviewResponse').classList.remove('hidden');
                document.getElementById('reviewResponse').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
            
            function copyResponse() {
                const text = document.getElementById('responseText').textContent;
                navigator.clipboard.writeText(text).then(() => {
                    alert('âœ… ì‘ë‹µì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                });
            }
            
            // ìµœì í™” ì²´í¬ë¦¬ìŠ¤íŠ¸
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', updateOptimizationScore);
            });
            
            function updateOptimizationScore() {
                const total = 8;
                const checked = document.querySelectorAll('input[type="checkbox"]:checked').length;
                const percentage = Math.round((checked / total) * 100);
                
                document.getElementById('optimizationScore').textContent = \`\${checked}/\${total}\`;
                document.getElementById('optimizationBar').style.width = percentage + '%';
            }
        <\/script>
    </body>
    </html>
  \`)
})
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë¸”ë¡œê·¸ ìƒìœ„ë…¸ì¶œ êµìœ¡ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <meta name="description" content="ë„¤ì´ë²„ ë¸”ë¡œê·¸ ê²€ìƒ‰ ìµœìƒìœ„ ì§„ì…ì„ ìœ„í•œ SEO ìµœì í™” ì‹¤ì „ êµìœ¡">
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-orange { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Navigation -->
        <nav class="bg-white shadow-sm fixed w-full top-0 z-50">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold gradient-orange bg-clip-text text-transparent">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <div class="hidden md:flex space-x-8">
                        <a href="/" class="text-gray-600 hover:text-orange-500">í™ˆ</a>
                        <a href="/about" class="text-gray-600 hover:text-orange-500">íšŒì‚¬ ì†Œê°œ</a>
                        <a href="/contact" class="text-gray-600 hover:text-orange-500">ëŒ€í–‰ ë¬¸ì˜</a>
                    </div>
                </div>
            </div>
        </nav>

        <div class="pt-24 pb-20">
            <!-- Hero Section -->
            <section class="bg-gradient-to-br from-pink-50 to-white py-20 px-6">
                <div class="max-w-4xl mx-auto text-center">
                    <div class="w-20 h-20 gradient-orange rounded-3xl flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-blog text-3xl text-white"></i>
                    </div>
                    <h1 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-6">
                        ë¸”ë¡œê·¸ ìƒìœ„ë…¸ì¶œ
                    </h1>
                    <p class="text-xl text-gray-600 mb-8">
                        ë„¤ì´ë²„ ë¸”ë¡œê·¸ ê²€ìƒ‰ ìµœìƒìœ„ ì§„ì… ì „ëµ<br>
                        SEO ìµœì í™”ì™€ ì½˜í…ì¸  ê¸°íšì˜ ëª¨ë“  ê²ƒ
                    </p>
                    <div class="flex flex-wrap justify-center gap-4">
                        <a href="/contact" class="px-8 py-4 gradient-orange text-white rounded-full font-bold hover:shadow-lg transition-all">
                            êµìœ¡ ì‹ ì²­í•˜ê¸°
                        </a>
                        <a href="/" class="px-8 py-4 bg-white text-gray-700 rounded-full font-bold border-2 border-gray-200 hover:border-pink-500 transition-all">
                            ëŒì•„ê°€ê¸°
                        </a>
                    </div>
                </div>
            </section>

            <!-- êµìœ¡ ë‚´ìš© -->
            <section class="py-20 px-6">
                <div class="max-w-6xl mx-auto">
                    <h2 class="text-3xl font-bold text-gray-900 mb-12 text-center">ë¬´ì—‡ì„ ë°°ìš°ë‚˜ìš”?</h2>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="bg-white rounded-2xl p-8 shadow-sm">
                            <div class="w-12 h-12 bg-pink-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-brain text-pink-600 text-xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900 mb-3">ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜ ì™„ë²½ ì´í•´</h3>
                            <ul class="space-y-2 text-gray-600">
                                <li>âœ“ ë„¤ì´ë²„ ê²€ìƒ‰ ë¡œì§ ë¶„ì„</li>
                                <li>âœ“ ìƒìœ„ë…¸ì¶œ í•µì‹¬ ìš”ì†Œ</li>
                                <li>âœ“ C-Rank, DA ì ìˆ˜ ì´í•´</li>
                                <li>âœ“ ì•Œê³ ë¦¬ì¦˜ ë³€í™” ëŒ€ì‘ë²•</li>
                            </ul>
                        </div>

                        <div class="bg-white rounded-2xl p-8 shadow-sm">
                            <div class="w-12 h-12 bg-pink-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-pen text-pink-600 text-xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900 mb-3">SEO ìµœì í™” ê¸€ì“°ê¸°</h3>
                            <ul class="space-y-2 text-gray-600">
                                <li>âœ“ í‚¤ì›Œë“œ ë¦¬ì„œì¹˜ ë°©ë²•</li>
                                <li>âœ“ ì œëª©/ë³¸ë¬¸ ìµœì í™”</li>
                                <li>âœ“ ì´ë¯¸ì§€ SEO ì „ëµ</li>
                                <li>âœ“ ë‚´ë¶€ë§í¬ í™œìš©ë²•</li>
                            </ul>
                        </div>

                        <div class="bg-white rounded-2xl p-8 shadow-sm">
                            <div class="w-12 h-12 bg-pink-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-lightbulb text-pink-600 text-xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900 mb-3">ì½˜í…ì¸  ê¸°íš ì „ëµ</h3>
                            <ul class="space-y-2 text-gray-600">
                                <li>âœ“ í•™ì›ì—… íŠ¹í™” ì£¼ì œ ë°œêµ´</li>
                                <li>âœ“ ì‹œë¦¬ì¦ˆ ì½˜í…ì¸  ê¸°íš</li>
                                <li>âœ“ ê³„ì ˆë³„ ì½˜í…ì¸  ì „ëµ</li>
                                <li>âœ“ ë°”ì´ëŸ´ ì½˜í…ì¸  ì œì‘</li>
                            </ul>
                        </div>

                        <div class="bg-white rounded-2xl p-8 shadow-sm">
                            <div class="w-12 h-12 bg-pink-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-rocket text-pink-600 text-xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900 mb-3">ì§€ì† ì„±ì¥ ì „ëµ</h3>
                            <ul class="space-y-2 text-gray-600">
                                <li>âœ“ í¬ìŠ¤íŒ… ì£¼ê¸° ê´€ë¦¬</li>
                                <li>âœ“ ì´ì›ƒ ê´€ë¦¬ ë…¸í•˜ìš°</li>
                                <li>âœ“ ê³µê°/ëŒ“ê¸€ ì „ëµ</li>
                                <li>âœ“ í†µê³„ ë¶„ì„ ë° ê°œì„ </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ì‹¤ì œ ì„±ê³¼ -->
            <section class="py-20 px-6 bg-white">
                <div class="max-w-4xl mx-auto text-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-12">ì‹¤ì œ ì„±ê³¼</h2>
                    <div class="grid md:grid-cols-3 gap-8">
                        <div>
                            <div class="text-5xl font-bold text-pink-600 mb-2">Top 3</div>
                            <div class="text-gray-600">í‰ê·  ë‹¬ì„± ê¸°ê°„<br>1-2ê°œì›”</div>
                        </div>
                        <div>
                            <div class="text-5xl font-bold text-pink-600 mb-2">500%</div>
                            <div class="text-gray-600">í‰ê·  ë°©ë¬¸ì ì¦ê°€ìœ¨</div>
                        </div>
                        <div>
                            <div class="text-5xl font-bold text-pink-600 mb-2">50+</div>
                            <div class="text-gray-600">ì›”í‰ê·  ì‹ ê·œ ë¬¸ì˜</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CTA -->
            <section class="py-20 px-6 gradient-orange">
                <div class="max-w-4xl mx-auto text-center">
                    <h2 class="text-4xl font-bold text-white mb-8">
                        ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•˜ì„¸ìš”
                    </h2>
                    <p class="text-xl text-white/90 mb-12">
                        ê²€ìƒ‰ 1í˜ì´ì§€ ì§„ì…, ë” ì´ìƒ ì–´ë µì§€ ì•ŠìŠµë‹ˆë‹¤
                    </p>
                    <a href="/contact" class="inline-block px-12 py-5 bg-white text-pink-600 rounded-full font-bold text-lg hover:shadow-2xl transition-all">
                        êµìœ¡ ì‹ ì²­í•˜ê¸° â†’
                    </a>
                </div>
            </section>
        </div>
    </body>
    </html>
  `));d.get("/programs/funnel",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í¼ë„ ë§ˆì¼€íŒ… êµìœ¡ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <meta name="description" content="ìë™í™” í¼ë„ë¡œ 24ì‹œê°„ í•™ìƒ ëª¨ì§‘ ì‹œìŠ¤í…œ êµ¬ì¶• ì‹¤ì „ êµìœ¡">
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Navigation -->
        <nav class="bg-white shadow-sm fixed w-full top-0 z-50">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold gradient-purple bg-clip-text text-transparent">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <div class="hidden md:flex space-x-8">
                        <a href="/" class="text-gray-600 hover:text-purple-600">í™ˆ</a>
                        <a href="/about" class="text-gray-600 hover:text-purple-600">íšŒì‚¬ ì†Œê°œ</a>
                        <a href="/contact" class="text-gray-600 hover:text-purple-600">ëŒ€í–‰ ë¬¸ì˜</a>
                    </div>
                </div>
            </div>
        </nav>

        <div class="pt-24 pb-20">
            <!-- Hero Section -->
            <section class="bg-gradient-to-br from-purple-50 to-white py-20 px-6">
                <div class="max-w-4xl mx-auto text-center">
                    <div class="w-20 h-20 gradient-purple rounded-3xl flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-filter text-3xl text-white"></i>
                    </div>
                    <h1 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-6">
                        í¼ë„ ë§ˆì¼€íŒ…
                    </h1>
                    <p class="text-xl text-gray-600 mb-8">
                        ìë™í™” í¼ë„ë¡œ 24ì‹œê°„ í•™ìƒ ëª¨ì§‘<br>
                        ëœë”©í˜ì´ì§€ë¶€í„° ì „í™˜ê¹Œì§€ ì™„ë²½í•œ ì‹œìŠ¤í…œ êµ¬ì¶•
                    </p>
                    <div class="flex flex-wrap justify-center gap-4">
                        <a href="/contact" class="px-8 py-4 gradient-purple text-white rounded-full font-bold hover:shadow-lg transition-all">
                            êµìœ¡ ì‹ ì²­í•˜ê¸°
                        </a>
                        <a href="/" class="px-8 py-4 bg-white text-gray-700 rounded-full font-bold border-2 border-gray-200 hover:border-purple-600 transition-all">
                            ëŒì•„ê°€ê¸°
                        </a>
                    </div>
                </div>
            </section>

            <!-- êµìœ¡ ë‚´ìš© -->
            <section class="py-20 px-6">
                <div class="max-w-6xl mx-auto">
                    <h2 class="text-3xl font-bold text-gray-900 mb-12 text-center">ë¬´ì—‡ì„ ë°°ìš°ë‚˜ìš”?</h2>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="bg-white rounded-2xl p-8 shadow-sm">
                            <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-file-alt text-purple-600 text-xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900 mb-3">ëœë”©í˜ì´ì§€ ì œì‘</h3>
                            <ul class="space-y-2 text-gray-600">
                                <li>âœ“ ê³ ì „í™˜ ëœë”©í˜ì´ì§€ ì„¤ê³„</li>
                                <li>âœ“ ì¹´í”¼ë¼ì´íŒ… ê¸°ë²•</li>
                                <li>âœ“ CTA ìµœì í™” ì „ëµ</li>
                                <li>âœ“ ë¬´ë£Œ ë„êµ¬ í™œìš©ë²•</li>
                            </ul>
                        </div>

                        <div class="bg-white rounded-2xl p-8 shadow-sm">
                            <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-ad text-purple-600 text-xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900 mb-3">ê´‘ê³  ìš´ì˜ ì „ëµ</h3>
                            <ul class="space-y-2 text-gray-600">
                                <li>âœ“ ë„¤ì´ë²„/êµ¬ê¸€ ê´‘ê³  ì„¸íŒ…</li>
                                <li>âœ“ íƒ€ê²ŸíŒ… ìµœì í™”</li>
                                <li>âœ“ ì˜ˆì‚° ê´€ë¦¬ ë…¸í•˜ìš°</li>
                                <li>âœ“ A/B í…ŒìŠ¤íŠ¸ ë°©ë²•</li>
                            </ul>
                        </div>

                        <div class="bg-white rounded-2xl p-8 shadow-sm">
                            <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-robot text-purple-600 text-xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900 mb-3">ìë™í™” ì‹œìŠ¤í…œ êµ¬ì¶•</h3>
                            <ul class="space-y-2 text-gray-600">
                                <li>âœ“ ì±—ë´‡ ìƒë‹´ ì‹œìŠ¤í…œ</li>
                                <li>âœ“ ìë™ SMS/ì´ë©”ì¼</li>
                                <li>âœ“ CRM ë„êµ¬ í™œìš©</li>
                                <li>âœ“ ë¦¬íƒ€ê²ŒíŒ… ì „ëµ</li>
                            </ul>
                        </div>

                        <div class="bg-white rounded-2xl p-8 shadow-sm">
                            <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-chart-pie text-purple-600 text-xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-gray-900 mb-3">ì „í™˜ìœ¨ ìµœì í™”</h3>
                            <ul class="space-y-2 text-gray-600">
                                <li>âœ“ ê³ ê° ì—¬ì • ì„¤ê³„</li>
                                <li>âœ“ ë°ì´í„° ë¶„ì„ ë° ê°œì„ </li>
                                <li>âœ“ ì „í™˜ í¬ì¸íŠ¸ ìµœì í™”</li>
                                <li>âœ“ ROI ê·¹ëŒ€í™” ì „ëµ</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ì‹¤ì œ ì„±ê³¼ -->
            <section class="py-20 px-6 bg-white">
                <div class="max-w-4xl mx-auto text-center">
                    <h2 class="text-3xl font-bold text-gray-900 mb-12">ì‹¤ì œ ì„±ê³¼</h2>
                    <div class="grid md:grid-cols-3 gap-8">
                        <div>
                            <div class="text-5xl font-bold text-purple-600 mb-2">24ì‹œê°„</div>
                            <div class="text-gray-600">ìë™ ìƒë‹´ ì‹œìŠ¤í…œ<br>ìš´ì˜</div>
                        </div>
                        <div>
                            <div class="text-5xl font-bold text-purple-600 mb-2">800%</div>
                            <div class="text-gray-600">í‰ê·  ROI<br>ê´‘ê³ ë¹„ ëŒ€ë¹„</div>
                        </div>
                        <div>
                            <div class="text-5xl font-bold text-purple-600 mb-2">70%</div>
                            <div class="text-gray-600">í‰ê·  ì „í™˜ìœ¨<br>ë¬¸ì˜â†’ë“±ë¡</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CTA -->
            <section class="py-20 px-6 gradient-purple">
                <div class="max-w-4xl mx-auto text-center">
                    <h2 class="text-4xl font-bold text-white mb-8">
                        ì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•˜ì„¸ìš”
                    </h2>
                    <p class="text-xl text-white/90 mb-12">
                        ìëŠ” ë™ì•ˆì—ë„ í•™ìƒì´ ëª¨ì§‘ë˜ëŠ” ì‹œìŠ¤í…œì„ ë§Œë“œì„¸ìš”
                    </p>
                    <a href="/contact" class="inline-block px-12 py-5 bg-white text-purple-600 rounded-full font-bold text-lg hover:shadow-2xl transition-all">
                        êµìœ¡ ì‹ ì²­í•˜ê¸° â†’
                    </a>
                </div>
            </section>
        </div>
    </body>
    </html>
  `));d.get("/programs/sns",e=>e.html('<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>SNS ë§ˆì¼€íŒ… - ìŠˆí¼í”Œë ˆì´ìŠ¤</title><script src="https://cdn.tailwindcss.com"><\/script><link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet"></head><body class="bg-gray-50"><nav class="bg-white shadow-sm border-b sticky top-0 z-50"><div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"><a href="/" class="text-2xl font-bold text-blue-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a><div class="flex gap-4"><button onclick="history.back()" class="px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200"><i class="fas fa-arrow-left mr-2"></i>ë’¤ë¡œ ê°€ê¸°</button><a href="/programs" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">í”„ë¡œê·¸ë¨ ëª©ë¡</a></div></div></nav><main class="max-w-5xl mx-auto px-6 py-16"><div class="text-center mb-12"><div class="text-6xl mb-4">ğŸ“±</div><h1 class="text-4xl font-bold text-gray-900 mb-4">SNS ë§ˆì¼€íŒ…</h1><p class="text-xl text-gray-600">ì¸ìŠ¤íƒ€ê·¸ë¨, í˜ì´ìŠ¤ë¶ìœ¼ë¡œ í•™ìƒ ëª¨ì§‘</p></div><div class="bg-white rounded-2xl p-8 shadow-sm mb-8"><h2 class="text-2xl font-bold mb-6">ğŸ¯ í”„ë¡œê·¸ë¨ ì§„í–‰ì¤‘</h2><p class="text-gray-600 text-center py-8">ì´ í”„ë¡œê·¸ë¨ì€ í˜„ì¬ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br>ìì„¸í•œ ë‚´ìš©ì€ êµìœ¡ ì‹ ì²­ í›„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div><div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl p-12 text-center text-white"><h2 class="text-3xl font-bold mb-4">í”„ë¡œê·¸ë¨ ì‹œì‘í•˜ê¸°</h2><p class="text-xl mb-8">SNS ë§ˆì¼€íŒ…ìœ¼ë¡œ í•™ì›ì„ ì„±ì¥ì‹œí‚¤ì„¸ìš”</p><a href="/contact" class="inline-block px-8 py-4 bg-white text-blue-600 rounded-lg font-semibold hover:shadow-lg">êµìœ¡ ì‹ ì²­í•˜ê¸° â†’</a></div></main></body></html>'));d.get("/programs/video",e=>e.html('<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ì˜ìƒ ë§ˆì¼€íŒ… - ìŠˆí¼í”Œë ˆì´ìŠ¤</title><script src="https://cdn.tailwindcss.com"><\/script><link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet"></head><body class="bg-gray-50"><nav class="bg-white shadow-sm border-b sticky top-0 z-50"><div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"><a href="/" class="text-2xl font-bold text-red-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a><div class="flex gap-4"><button onclick="history.back()" class="px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200"><i class="fas fa-arrow-left mr-2"></i>ë’¤ë¡œ ê°€ê¸°</button><a href="/programs" class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">í”„ë¡œê·¸ë¨ ëª©ë¡</a></div></div></nav><main class="max-w-5xl mx-auto px-6 py-16"><div class="text-center mb-12"><div class="text-6xl mb-4">ğŸ¥</div><h1 class="text-4xl font-bold text-gray-900 mb-4">ì˜ìƒ ë§ˆì¼€íŒ…</h1><p class="text-xl text-gray-600">ìœ íŠœë¸Œ, ìˆí¼ìœ¼ë¡œ í•™ì› í™ë³´</p></div><div class="bg-white rounded-2xl p-8 shadow-sm mb-8"><h2 class="text-2xl font-bold mb-6">ğŸ¯ í”„ë¡œê·¸ë¨ ì§„í–‰ì¤‘</h2><p class="text-gray-600 text-center py-8">ì´ í”„ë¡œê·¸ë¨ì€ í˜„ì¬ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br>ìì„¸í•œ ë‚´ìš©ì€ êµìœ¡ ì‹ ì²­ í›„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div><div class="bg-gradient-to-r from-red-600 to-red-700 rounded-2xl p-12 text-center text-white"><h2 class="text-3xl font-bold mb-4">í”„ë¡œê·¸ë¨ ì‹œì‘í•˜ê¸°</h2><p class="text-xl mb-8">ì˜ìƒ ë§ˆì¼€íŒ…ìœ¼ë¡œ í•™ì›ì„ ì„±ì¥ì‹œí‚¤ì„¸ìš”</p><a href="/contact" class="inline-block px-8 py-4 bg-white text-red-600 rounded-lg font-semibold hover:shadow-lg">êµìœ¡ ì‹ ì²­í•˜ê¸° â†’</a></div></main></body></html>'));d.get("/programs/ad",e=>e.html('<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ì˜¨ë¼ì¸ ê´‘ê³  - ìŠˆí¼í”Œë ˆì´ìŠ¤</title><script src="https://cdn.tailwindcss.com"><\/script><link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet"></head><body class="bg-gray-50"><nav class="bg-white shadow-sm border-b sticky top-0 z-50"><div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"><a href="/" class="text-2xl font-bold text-green-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a><div class="flex gap-4"><button onclick="history.back()" class="px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200"><i class="fas fa-arrow-left mr-2"></i>ë’¤ë¡œ ê°€ê¸°</button><a href="/programs" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">í”„ë¡œê·¸ë¨ ëª©ë¡</a></div></div></nav><main class="max-w-5xl mx-auto px-6 py-16"><div class="text-center mb-12"><div class="text-6xl mb-4">ğŸ’°</div><h1 class="text-4xl font-bold text-gray-900 mb-4">ì˜¨ë¼ì¸ ê´‘ê³ </h1><p class="text-xl text-gray-600">ë„¤ì´ë²„, êµ¬ê¸€ ê´‘ê³  ìš´ì˜ ì „ëµ</p></div><div class="bg-white rounded-2xl p-8 shadow-sm mb-8"><h2 class="text-2xl font-bold mb-6">ğŸ¯ í”„ë¡œê·¸ë¨ ì§„í–‰ì¤‘</h2><p class="text-gray-600 text-center py-8">ì´ í”„ë¡œê·¸ë¨ì€ í˜„ì¬ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br>ìì„¸í•œ ë‚´ìš©ì€ êµìœ¡ ì‹ ì²­ í›„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div><div class="bg-gradient-to-r from-green-600 to-green-700 rounded-2xl p-12 text-center text-white"><h2 class="text-3xl font-bold mb-4">í”„ë¡œê·¸ë¨ ì‹œì‘í•˜ê¸°</h2><p class="text-xl mb-8">ì˜¨ë¼ì¸ ê´‘ê³ ìœ¼ë¡œ í•™ì›ì„ ì„±ì¥ì‹œí‚¤ì„¸ìš”</p><a href="/contact" class="inline-block px-8 py-4 bg-white text-green-600 rounded-lg font-semibold hover:shadow-lg">êµìœ¡ ì‹ ì²­í•˜ê¸° â†’</a></div></main></body></html>'));d.get("/programs/community",e=>e.html('<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ì»¤ë®¤ë‹ˆí‹° ë§ˆì¼€íŒ… - ìŠˆí¼í”Œë ˆì´ìŠ¤</title><script src="https://cdn.tailwindcss.com"><\/script><link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet"></head><body class="bg-gray-50"><nav class="bg-white shadow-sm border-b sticky top-0 z-50"><div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"><a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a><div class="flex gap-4"><button onclick="history.back()" class="px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200"><i class="fas fa-arrow-left mr-2"></i>ë’¤ë¡œ ê°€ê¸°</button><a href="/programs" class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">í”„ë¡œê·¸ë¨ ëª©ë¡</a></div></div></nav><main class="max-w-5xl mx-auto px-6 py-16"><div class="text-center mb-12"><div class="text-6xl mb-4">ğŸ‘¥</div><h1 class="text-4xl font-bold text-gray-900 mb-4">ì»¤ë®¤ë‹ˆí‹° ë§ˆì¼€íŒ…</h1><p class="text-xl text-gray-600">í•™ë¶€ëª¨ ì»¤ë®¤ë‹ˆí‹° í™œì„±í™” ì „ëµ</p></div><div class="bg-white rounded-2xl p-8 shadow-sm mb-8"><h2 class="text-2xl font-bold mb-6">ğŸ¯ í”„ë¡œê·¸ë¨ ì§„í–‰ì¤‘</h2><p class="text-gray-600 text-center py-8">ì´ í”„ë¡œê·¸ë¨ì€ í˜„ì¬ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br>ìì„¸í•œ ë‚´ìš©ì€ êµìœ¡ ì‹ ì²­ í›„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div><div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-2xl p-12 text-center text-white"><h2 class="text-3xl font-bold mb-4">í”„ë¡œê·¸ë¨ ì‹œì‘í•˜ê¸°</h2><p class="text-xl mb-8">ì»¤ë®¤ë‹ˆí‹° ë§ˆì¼€íŒ…ìœ¼ë¡œ í•™ì›ì„ ì„±ì¥ì‹œí‚¤ì„¸ìš”</p><a href="/contact" class="inline-block px-8 py-4 bg-white text-purple-600 rounded-lg font-semibold hover:shadow-lg">êµìœ¡ ì‹ ì²­í•˜ê¸° â†’</a></div></main></body></html>'));d.get("/programs/branding",e=>e.html('<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ë¸Œëœë”© - ìŠˆí¼í”Œë ˆì´ìŠ¤</title><script src="https://cdn.tailwindcss.com"><\/script><link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet"></head><body class="bg-gray-50"><nav class="bg-white shadow-sm border-b sticky top-0 z-50"><div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"><a href="/" class="text-2xl font-bold text-pink-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a><div class="flex gap-4"><button onclick="history.back()" class="px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200"><i class="fas fa-arrow-left mr-2"></i>ë’¤ë¡œ ê°€ê¸°</button><a href="/programs" class="px-6 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700">í”„ë¡œê·¸ë¨ ëª©ë¡</a></div></div></nav><main class="max-w-5xl mx-auto px-6 py-16"><div class="text-center mb-12"><div class="text-6xl mb-4">ğŸ¨</div><h1 class="text-4xl font-bold text-gray-900 mb-4">ë¸Œëœë”©</h1><p class="text-xl text-gray-600">í•™ì› ë¸Œëœë“œ ì•„ì´ë´í‹°í‹° êµ¬ì¶•</p></div><div class="bg-white rounded-2xl p-8 shadow-sm mb-8"><h2 class="text-2xl font-bold mb-6">ğŸ¯ í”„ë¡œê·¸ë¨ ì§„í–‰ì¤‘</h2><p class="text-gray-600 text-center py-8">ì´ í”„ë¡œê·¸ë¨ì€ í˜„ì¬ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br>ìì„¸í•œ ë‚´ìš©ì€ êµìœ¡ ì‹ ì²­ í›„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div><div class="bg-gradient-to-r from-pink-600 to-pink-700 rounded-2xl p-12 text-center text-white"><h2 class="text-3xl font-bold mb-4">í”„ë¡œê·¸ë¨ ì‹œì‘í•˜ê¸°</h2><p class="text-xl mb-8">ë¸Œëœë”©ìœ¼ë¡œ í•™ì›ì„ ì„±ì¥ì‹œí‚¤ì„¸ìš”</p><a href="/contact" class="inline-block px-8 py-4 bg-white text-pink-600 rounded-lg font-semibold hover:shadow-lg">êµìœ¡ ì‹ ì²­í•˜ê¸° â†’</a></div></main></body></html>'));d.get("/programs/data",e=>e.redirect("/tools/search-volume"));d.get("/programs/carrot",e=>e.html('<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ë‹¹ê·¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë§ˆì¼€íŒ… - ìŠˆí¼í”Œë ˆì´ìŠ¤</title><script src="https://cdn.tailwindcss.com"><\/script><link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet"></head><body class="bg-gray-50"><nav class="bg-white shadow-sm border-b sticky top-0 z-50"><div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"><a href="/" class="text-2xl font-bold text-orange-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a><div class="flex gap-4"><button onclick="history.back()" class="px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200"><i class="fas fa-arrow-left mr-2"></i>ë’¤ë¡œ ê°€ê¸°</button><a href="/programs" class="px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700">í”„ë¡œê·¸ë¨ ëª©ë¡</a></div></div></nav><main class="max-w-5xl mx-auto px-6 py-16"><div class="text-center mb-12"><div class="text-6xl mb-4">ğŸ¥•</div><h1 class="text-4xl font-bold text-gray-900 mb-4">ë‹¹ê·¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë§ˆì¼€íŒ…</h1><p class="text-xl text-gray-600">ì§€ì—­ ê¸°ë°˜ ë‹¹ê·¼ë§ˆì¼“ í™œìš© ì „ëµ</p></div><div class="bg-white rounded-2xl p-8 shadow-sm mb-8"><h2 class="text-2xl font-bold mb-6">ğŸ¯ í”„ë¡œê·¸ë¨ ì§„í–‰ì¤‘</h2><p class="text-gray-600 text-center py-8">ì´ í”„ë¡œê·¸ë¨ì€ í˜„ì¬ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br>ìì„¸í•œ ë‚´ìš©ì€ êµìœ¡ ì‹ ì²­ í›„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div><div class="bg-gradient-to-r from-orange-600 to-orange-700 rounded-2xl p-12 text-center text-white"><h2 class="text-3xl font-bold mb-4">í”„ë¡œê·¸ë¨ ì‹œì‘í•˜ê¸°</h2><p class="text-xl mb-8">ë‹¹ê·¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë§ˆì¼€íŒ…ìœ¼ë¡œ í•™ì›ì„ ì„±ì¥ì‹œí‚¤ì„¸ìš”</p><a href="/contact" class="inline-block px-8 py-4 bg-white text-orange-600 rounded-lg font-semibold hover:shadow-lg">êµìœ¡ ì‹ ì²­í•˜ê¸° â†’</a></div></main></body></html>'));d.get("/programs/meta",e=>e.html('<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ë©”íƒ€ ê´‘ê³  - ìŠˆí¼í”Œë ˆì´ìŠ¤</title><script src="https://cdn.tailwindcss.com"><\/script><link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet"></head><body class="bg-gray-50"><nav class="bg-white shadow-sm border-b sticky top-0 z-50"><div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"><a href="/" class="text-2xl font-bold text-blue-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a><div class="flex gap-4"><button onclick="history.back()" class="px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200"><i class="fas fa-arrow-left mr-2"></i>ë’¤ë¡œ ê°€ê¸°</button><a href="/programs" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">í”„ë¡œê·¸ë¨ ëª©ë¡</a></div></div></nav><main class="max-w-5xl mx-auto px-6 py-16"><div class="text-center mb-12"><div class="text-6xl mb-4">ğŸ“˜</div><h1 class="text-4xl font-bold text-gray-900 mb-4">ë©”íƒ€ ê´‘ê³ </h1><p class="text-xl text-gray-600">Facebook/Instagram ê´‘ê³  ìš´ì˜</p></div><div class="bg-white rounded-2xl p-8 shadow-sm mb-8"><h2 class="text-2xl font-bold mb-6">ğŸ¯ í”„ë¡œê·¸ë¨ ì§„í–‰ì¤‘</h2><p class="text-gray-600 text-center py-8">ì´ í”„ë¡œê·¸ë¨ì€ í˜„ì¬ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br>ìì„¸í•œ ë‚´ìš©ì€ êµìœ¡ ì‹ ì²­ í›„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div><div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-2xl p-12 text-center text-white"><h2 class="text-3xl font-bold mb-4">í”„ë¡œê·¸ë¨ ì‹œì‘í•˜ê¸°</h2><p class="text-xl mb-8">ë©”íƒ€ ê´‘ê³ ìœ¼ë¡œ í•™ì›ì„ ì„±ì¥ì‹œí‚¤ì„¸ìš”</p><a href="/contact" class="inline-block px-8 py-4 bg-white text-blue-600 rounded-lg font-semibold hover:shadow-lg">êµìœ¡ ì‹ ì²­í•˜ê¸° â†’</a></div></main></body></html>'));d.get("/programs/youtube-ad",e=>e.html('<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ìœ íŠœë¸Œ ê´‘ê³  - ìŠˆí¼í”Œë ˆì´ìŠ¤</title><script src="https://cdn.tailwindcss.com"><\/script><link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet"></head><body class="bg-gray-50"><nav class="bg-white shadow-sm border-b sticky top-0 z-50"><div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"><a href="/" class="text-2xl font-bold text-red-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a><div class="flex gap-4"><button onclick="history.back()" class="px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200"><i class="fas fa-arrow-left mr-2"></i>ë’¤ë¡œ ê°€ê¸°</button><a href="/programs" class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">í”„ë¡œê·¸ë¨ ëª©ë¡</a></div></div></nav><main class="max-w-5xl mx-auto px-6 py-16"><div class="text-center mb-12"><div class="text-6xl mb-4">ğŸ“º</div><h1 class="text-4xl font-bold text-gray-900 mb-4">ìœ íŠœë¸Œ ê´‘ê³ </h1><p class="text-xl text-gray-600">ìœ íŠœë¸Œ ê´‘ê³  ìº í˜ì¸ ìš´ì˜</p></div><div class="bg-white rounded-2xl p-8 shadow-sm mb-8"><h2 class="text-2xl font-bold mb-6">ğŸ¯ í”„ë¡œê·¸ë¨ ì§„í–‰ì¤‘</h2><p class="text-gray-600 text-center py-8">ì´ í”„ë¡œê·¸ë¨ì€ í˜„ì¬ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br>ìì„¸í•œ ë‚´ìš©ì€ êµìœ¡ ì‹ ì²­ í›„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div><div class="bg-gradient-to-r from-red-600 to-red-700 rounded-2xl p-12 text-center text-white"><h2 class="text-3xl font-bold mb-4">í”„ë¡œê·¸ë¨ ì‹œì‘í•˜ê¸°</h2><p class="text-xl mb-8">ìœ íŠœë¸Œ ê´‘ê³ ìœ¼ë¡œ í•™ì›ì„ ì„±ì¥ì‹œí‚¤ì„¸ìš”</p><a href="/contact" class="inline-block px-8 py-4 bg-white text-red-600 rounded-lg font-semibold hover:shadow-lg">êµìœ¡ ì‹ ì²­í•˜ê¸° â†’</a></div></main></body></html>'));d.get("/programs/threads",e=>e.html('<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ì“°ë ˆë“œ ë§ˆì¼€íŒ… - ìŠˆí¼í”Œë ˆì´ìŠ¤</title><script src="https://cdn.tailwindcss.com"><\/script><link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet"></head><body class="bg-gray-50"><nav class="bg-white shadow-sm border-b sticky top-0 z-50"><div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"><a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a><div class="flex gap-4"><button onclick="history.back()" class="px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200"><i class="fas fa-arrow-left mr-2"></i>ë’¤ë¡œ ê°€ê¸°</button><a href="/programs" class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">í”„ë¡œê·¸ë¨ ëª©ë¡</a></div></div></nav><main class="max-w-5xl mx-auto px-6 py-16"><div class="text-center mb-12"><div class="text-6xl mb-4">ğŸ§µ</div><h1 class="text-4xl font-bold text-gray-900 mb-4">ì“°ë ˆë“œ ë§ˆì¼€íŒ…</h1><p class="text-xl text-gray-600">Meta Threads í™œìš© ì „ëµ</p></div><div class="bg-white rounded-2xl p-8 shadow-sm mb-8"><h2 class="text-2xl font-bold mb-6">ğŸ¯ í”„ë¡œê·¸ë¨ ì§„í–‰ì¤‘</h2><p class="text-gray-600 text-center py-8">ì´ í”„ë¡œê·¸ë¨ì€ í˜„ì¬ í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br>ìì„¸í•œ ë‚´ìš©ì€ êµìœ¡ ì‹ ì²­ í›„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p></div><div class="bg-gradient-to-r from-purple-600 to-purple-700 rounded-2xl p-12 text-center text-white"><h2 class="text-3xl font-bold mb-4">í”„ë¡œê·¸ë¨ ì‹œì‘í•˜ê¸°</h2><p class="text-xl mb-8">ì“°ë ˆë“œ ë§ˆì¼€íŒ…ìœ¼ë¡œ í•™ì›ì„ ì„±ì¥ì‹œí‚¤ì„¸ìš”</p><a href="/contact" class="inline-block px-8 py-4 bg-white text-purple-600 rounded-lg font-semibold hover:shadow-lg">êµìœ¡ ì‹ ì²­í•˜ê¸° â†’</a></div></main></body></html>'));d.get("/contact",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ëŒ€í–‰ ë¬¸ì˜ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <meta name="description" content="í•™ì› ë§ˆì¼€íŒ… ëŒ€í–‰ ë° êµìœ¡ ë¬¸ì˜">
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Navigation -->
        <nav class="bg-white shadow-sm fixed w-full top-0 z-50">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold gradient-purple bg-clip-text text-transparent">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <div class="hidden md:flex space-x-8">
                        <a href="/" class="text-gray-600 hover:text-purple-600">í™ˆ</a>
                        <a href="/about" class="text-gray-600 hover:text-purple-600">íšŒì‚¬ ì†Œê°œ</a>
                        <a href="/contact" class="text-purple-600 font-bold">ëŒ€í–‰ ë¬¸ì˜</a>
                    </div>
                </div>
            </div>
        </nav>

        <div class="pt-24 pb-20">
            <!-- Hero Section -->
            <section class="bg-gradient-to-br from-purple-50 to-white py-20 px-6">
                <div class="max-w-4xl mx-auto text-center">
                    <h1 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-6">
                        ëŒ€í–‰ ë¬¸ì˜
                    </h1>
                    <p class="text-xl text-gray-600 mb-8">
                        í•™ì› ë§ˆì¼€íŒ… êµìœ¡ ë° ëŒ€í–‰ ì„œë¹„ìŠ¤ ë¬¸ì˜<br>
                        24ì‹œê°„ ë‚´ì— ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤
                    </p>
                </div>
            </section>

            <!-- ë¬¸ì˜ ì–‘ì‹ -->
            <section class="py-20 px-6">
                <div class="max-w-3xl mx-auto">
                    <div class="bg-white rounded-3xl shadow-lg p-8 md:p-12">
                        <form id="contactForm" class="space-y-6">
                            <!-- ë¬¸ì˜ ìœ í˜• -->
                            <div>
                                <label class="block text-gray-700 font-bold mb-3">ë¬¸ì˜ ìœ í˜• *</label>
                                <div class="grid md:grid-cols-2 gap-4">
                                    <label class="flex items-center p-4 border-2 border-gray-200 rounded-xl cursor-pointer hover:border-purple-600">
                                        <input type="radio" name="type" value="êµìœ¡" required class="mr-3">
                                        <span>êµìœ¡ í”„ë¡œê·¸ë¨ ë¬¸ì˜</span>
                                    </label>
                                    <label class="flex items-center p-4 border-2 border-gray-200 rounded-xl cursor-pointer hover:border-purple-600">
                                        <input type="radio" name="type" value="ëŒ€í–‰" required class="mr-3">
                                        <span>ë§ˆì¼€íŒ… ëŒ€í–‰ ë¬¸ì˜</span>
                                    </label>
                                </div>
                            </div>

                            <!-- í•™ì›ëª… -->
                            <div>
                                <label class="block text-gray-700 font-bold mb-3">í•™ì›ëª… *</label>
                                <input type="text" name="academy" required 
                                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-600 focus:outline-none"
                                    placeholder="ì˜ˆ: ê¾¸ë©”ë•…í•™ì›">
                            </div>

                            <!-- ì›ì¥ë‹˜ ì„±í•¨ -->
                            <div>
                                <label class="block text-gray-700 font-bold mb-3">ì›ì¥ë‹˜ ì„±í•¨ *</label>
                                <input type="text" name="name" required 
                                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-600 focus:outline-none"
                                    placeholder="ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”">
                            </div>

                            <!-- ì—°ë½ì²˜ -->
                            <div>
                                <label class="block text-gray-700 font-bold mb-3">ì—°ë½ì²˜ *</label>
                                <input type="tel" name="phone" required 
                                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-600 focus:outline-none"
                                    placeholder="010-0000-0000">
                            </div>

                            <!-- ì´ë©”ì¼ -->
                            <div>
                                <label class="block text-gray-700 font-bold mb-3">ì´ë©”ì¼</label>
                                <input type="email" name="email" 
                                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-600 focus:outline-none"
                                    placeholder="academy@example.com">
                            </div>

                            <!-- ê´€ì‹¬ í”„ë¡œê·¸ë¨ -->
                            <div>
                                <label class="block text-gray-700 font-bold mb-3">ê´€ì‹¬ í”„ë¡œê·¸ë¨</label>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" name="program" value="ë„¤ì´ë²„í”Œë ˆì´ìŠ¤" class="mr-2">
                                        <span>ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìƒìœ„ë…¸ì¶œ</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="program" value="ë¸”ë¡œê·¸" class="mr-2">
                                        <span>ë¸”ë¡œê·¸ ìƒìœ„ë…¸ì¶œ</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" name="program" value="í¼ë„" class="mr-2">
                                        <span>í¼ë„ ë§ˆì¼€íŒ…</span>
                                    </label>
                                </div>
                            </div>

                            <!-- ë¬¸ì˜ ë‚´ìš© -->
                            <div>
                                <label class="block text-gray-700 font-bold mb-3">ë¬¸ì˜ ë‚´ìš© *</label>
                                <textarea name="message" required rows="6"
                                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-600 focus:outline-none"
                                    placeholder="ê¶ê¸ˆí•˜ì‹  ë‚´ìš©ì„ ììœ ë¡­ê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”"></textarea>
                            </div>

                            <!-- ì œì¶œ ë²„íŠ¼ -->
                            <button type="submit" 
                                class="w-full py-4 gradient-purple text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all">
                                ë¬¸ì˜í•˜ê¸°
                            </button>

                            <p class="text-center text-sm text-gray-500">
                                * í‘œì‹œëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤
                            </p>
                        </form>

                        <!-- ì„±ê³µ ë©”ì‹œì§€ (ìˆ¨ê¹€) -->
                        <div id="successMessage" class="hidden text-center py-12">
                            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                                <i class="fas fa-check text-3xl text-green-600"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-gray-900 mb-4">ë¬¸ì˜ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤!</h3>
                            <p class="text-gray-600 mb-8">
                                ë¹ ë¥¸ ì‹œê°„ ë‚´ì— ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.<br>
                                ê°ì‚¬í•©ë‹ˆë‹¤.
                            </p>
                            <a href="/" class="inline-block px-8 py-3 gradient-purple text-white rounded-full font-bold hover:shadow-lg transition-all">
                                í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ì—°ë½ì²˜ ì •ë³´ -->
            <section class="py-20 px-6 bg-white">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-3xl font-bold text-gray-900 mb-12 text-center">ì—°ë½ì²˜</h2>
                    <div class="grid md:grid-cols-3 gap-8">
                        <div class="text-center">
                            <div class="w-16 h-16 bg-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-phone text-purple-600 text-2xl"></i>
                            </div>
                            <h3 class="font-bold text-gray-900 mb-2">ì „í™” ë¬¸ì˜</h3>
                            <p class="text-gray-600">032-1234-5678</p>
                        </div>
                        <div class="text-center">
                            <div class="w-16 h-16 bg-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-envelope text-purple-600 text-2xl"></i>
                            </div>
                            <h3 class="font-bold text-gray-900 mb-2">ì´ë©”ì¼</h3>
                            <p class="text-gray-600">contact@superplace.kr</p>
                        </div>
                        <div class="text-center">
                            <div class="w-16 h-16 bg-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-map-marker-alt text-purple-600 text-2xl"></i>
                            </div>
                            <h3 class="font-bold text-gray-900 mb-2">ìœ„ì¹˜</h3>
                            <p class="text-gray-600">ì¸ì²œ ì„œêµ¬ ê²€ë‹¨ë™</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <script>
            document.getElementById('contactForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const formData = new FormData(e.target);
                const data = {
                    type: formData.get('type'),
                    academy: formData.get('academy'),
                    name: formData.get('name'),
                    phone: formData.get('phone'),
                    email: formData.get('email'),
                    programs: formData.getAll('program'),
                    message: formData.get('message')
                };

                try {
                    const response = await fetch('/api/contact', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });

                    if (response.ok) {
                        document.getElementById('contactForm').classList.add('hidden');
                        document.getElementById('successMessage').classList.remove('hidden');
                    } else {
                        alert('ë¬¸ì˜ ì ‘ìˆ˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                    }
                } catch (err) {
                    alert('ë¬¸ì˜ ì ‘ìˆ˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                }
            });
        <\/script>
    </body>
    </html>
  `));d.get("/tools/keyword-analyzer",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ í‚¤ì›Œë“œ ë¶„ì„ê¸° - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-5xl mx-auto px-6 py-12">
            <div class="text-center mb-12">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">ğŸ” ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ í‚¤ì›Œë“œ ë¶„ì„ê¸°</h1>
                <p class="text-xl text-gray-600">í•™ì› ì£¼ë³€ ê²½ìŸ í‚¤ì›Œë“œë¥¼ ë¶„ì„í•˜ê³  ìµœì ì˜ í‚¤ì›Œë“œë¥¼ ì°¾ì•„ë³´ì„¸ìš”</p>
            </div>

            <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
                <form id="keywordForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-900 mb-2">ì§€ì—­ ì…ë ¥</label>
                        <input type="text" id="location" placeholder="ì˜ˆ: ì¸ì²œ ì„œêµ¬ ê²€ë‹¨ë™" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-900 mb-2">í•™ì› ì¢…ë¥˜</label>
                        <input type="text" id="type" placeholder="ì˜ˆ: ì˜ì–´í•™ì›, ìˆ˜í•™í•™ì›" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                    </div>
                    <button type="submit" class="w-full gradient-purple text-white py-4 rounded-xl font-bold hover:shadow-xl transition">
                        í‚¤ì›Œë“œ ë¶„ì„í•˜ê¸°
                    </button>
                </form>
            </div>

            <div id="results" class="hidden bg-white rounded-2xl shadow-lg p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ë¶„ì„ ê²°ê³¼</h2>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="p-4 bg-purple-50 rounded-xl">
                        <h3 class="font-bold text-purple-900 mb-2">ì¶”ì²œ í‚¤ì›Œë“œ</h3>
                        <ul id="recommendedKeywords" class="space-y-2 text-sm"></ul>
                    </div>
                    <div class="p-4 bg-orange-50 rounded-xl">
                        <h3 class="font-bold text-orange-900 mb-2">ê²½ìŸ ë¶„ì„</h3>
                        <ul id="competition" class="space-y-2 text-sm"></ul>
                    </div>
                </div>
            </div>
        </div>

        <script>
            document.getElementById('keywordForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                const location = document.getElementById('location').value;
                const type = document.getElementById('type').value;
                
                const results = document.getElementById('results');
                results.classList.remove('hidden');
                
                const recommended = [
                    location + ' ' + type,
                    location + ' ' + type + ' ì¶”ì²œ',
                    location + ' ' + type + ' ì˜í•˜ëŠ”ê³³',
                    type + ' ' + location + ' í‰ì ë†’ì€',
                    'ì´ˆë“± ' + type + ' ' + location
                ];
                
                const recommendedEl = document.getElementById('recommendedKeywords');
                recommendedEl.innerHTML = recommended.map(k => 
                    '<li class="flex items-center"><i class="fas fa-check-circle text-purple-600 mr-2"></i>' + k + '</li>'
                ).join('');
                
                const competitionEl = document.getElementById('competition');
                competitionEl.innerHTML = \`
                    <li>ê²½ìŸ í•™ì› ìˆ˜: <span class="font-bold">12ê°œ</span></li>
                    <li>í‰ê·  ë¦¬ë·° ìˆ˜: <span class="font-bold">23ê°œ</span></li>
                    <li>í‰ê·  í‰ì : <span class="font-bold">4.5ì </span></li>
                    <li>ê²½ìŸ ê°•ë„: <span class="font-bold text-orange-600">ì¤‘ê°„</span></li>
                \`;
            });
        <\/script>
    </body>
    </html>
  `));d.get("/tools/review-template",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë¦¬ë·° ì‘ë‹µ í…œí”Œë¦¿ ìƒì„±ê¸° - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>.gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }</style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-5xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4 text-center">ğŸ’¬ ë¦¬ë·° ì‘ë‹µ í…œí”Œë¦¿ ìƒì„±ê¸°</h1>
            <p class="text-xl text-gray-600 text-center mb-12">ê³ ê° ë¦¬ë·°ì— ë§ì¶¤í˜• ë‹µë³€ì„ ìë™ ìƒì„±í•©ë‹ˆë‹¤</p>

            <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-900 mb-2">ë¦¬ë·° ìœ í˜• ì„ íƒ</label>
                        <select id="reviewType" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                            <option value="positive">ê¸ì • ë¦¬ë·°</option>
                            <option value="negative">ë¶€ì • ë¦¬ë·°</option>
                            <option value="neutral">ì¤‘ë¦½ ë¦¬ë·°</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-900 mb-2">ë¦¬ë·° ë‚´ìš©</label>
                        <textarea id="reviewContent" rows="4" placeholder="ê³ ê°ì´ ë‚¨ê¸´ ë¦¬ë·° ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none"></textarea>
                    </div>
                    <button onclick="generateTemplate()" class="w-full gradient-purple text-white py-4 rounded-xl font-bold hover:shadow-xl transition">
                        ì‘ë‹µ í…œí”Œë¦¿ ìƒì„±
                    </button>
                </div>
            </div>

            <div id="templateResult" class="hidden bg-white rounded-2xl shadow-lg p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-4">ìƒì„±ëœ ì‘ë‹µ</h2>
                <div class="p-6 bg-gray-50 rounded-xl mb-4">
                    <p id="generatedResponse" class="text-gray-800 whitespace-pre-wrap"></p>
                </div>
                <button onclick="copyResponse()" class="gradient-purple text-white px-6 py-3 rounded-xl font-medium hover:shadow-lg transition">
                    ğŸ“‹ ë³µì‚¬í•˜ê¸°
                </button>
            </div>
        </div>

        <script>
            function generateTemplate() {
                const type = document.getElementById('reviewType').value;
                const content = document.getElementById('reviewContent').value;
                
                let response = '';
                if(type === 'positive') {
                    response = content + '\\n\\nì†Œì¤‘í•œ ë¦¬ë·° ê°ì‚¬í•©ë‹ˆë‹¤! ğŸ˜Š\\nì•ìœ¼ë¡œë„ ë” ë‚˜ì€ êµìœ¡ìœ¼ë¡œ ë³´ë‹µí•˜ê² ìŠµë‹ˆë‹¤.\\ní•­ìƒ ì‘ì›í•´ì£¼ì„¸ìš”!\\n\\n- ê¾¸ë©”ë•…í•™ì› ì›ì¥ ë“œë¦¼';
                } else if(type === 'negative') {
                    response = 'ì†Œì¤‘í•œ ì˜ê²¬ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤.\\në§ì”€í•´ì£¼ì‹  ë¶€ë¶„ì— ëŒ€í•´ ê¹Šì´ ë°˜ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤.\\nì¦‰ì‹œ ê°œì„ í•˜ì—¬ ë” ë‚˜ì€ ì„œë¹„ìŠ¤ë¡œ ë³´ë‹µí•˜ê² ìŠµë‹ˆë‹¤.\\në‹¤ì‹œ í•œ ë²ˆ ì£„ì†¡í•©ë‹ˆë‹¤.\\n\\n- ê¾¸ë©”ë•…í•™ì› ì›ì¥ ë“œë¦¼';
                } else {
                    response = 'ë¦¬ë·° ë‚¨ê²¨ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.\\në” ì¢‹ì€ êµìœ¡ í™˜ê²½ì„ ë§Œë“¤ê¸° ìœ„í•´ ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤.\\nê°ì‚¬í•©ë‹ˆë‹¤.\\n\\n- ê¾¸ë©”ë•…í•™ì› ì›ì¥ ë“œë¦¼';
                }
                
                document.getElementById('generatedResponse').textContent = response;
                document.getElementById('templateResult').classList.remove('hidden');
            }
            
            function copyResponse() {
                const text = document.getElementById('generatedResponse').textContent;
                navigator.clipboard.writeText(text);
                alert('ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        <\/script>
    </body>
    </html>
  `));d.get("/tools/ad-copy-generator",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í•™ì› í™ë³´ ë¬¸êµ¬ ìƒì„±ê¸° - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>.gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }</style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-5xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4 text-center">âœ¨ í•™ì› í™ë³´ ë¬¸êµ¬ ìƒì„±ê¸°</h1>
            <p class="text-xl text-gray-600 text-center mb-12">íš¨ê³¼ì ì¸ í•™ì› ê´‘ê³  ë¬¸êµ¬ë¥¼ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ë“œë¦½ë‹ˆë‹¤</p>

            <div class="bg-white rounded-2xl shadow-lg p-8">
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-900 mb-2">í•™ì›ëª…</label>
                        <input type="text" id="academyName" placeholder="ì˜ˆ: ê¾¸ë©”ë•…í•™ì›" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-900 mb-2">ê³¼ëª©</label>
                        <input type="text" id="subject" placeholder="ì˜ˆ: ì˜ì–´, ìˆ˜í•™" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-900 mb-2">ê°•ì </label>
                        <input type="text" id="strength" placeholder="ì˜ˆ: ì†Œìˆ˜ì •ì˜ˆ, 1:1 ë§ì¶¤" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                    </div>
                    <button onclick="generateAdCopy()" class="w-full gradient-purple text-white py-4 rounded-xl font-bold hover:shadow-xl transition">
                        í™ë³´ ë¬¸êµ¬ ìƒì„±
                    </button>
                </div>

                <div id="copyResults" class="hidden mt-8 space-y-4">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">ìƒì„±ëœ í™ë³´ ë¬¸êµ¬ (5ê°œ)</h2>
                    <div id="copyList"></div>
                </div>
            </div>
        </div>

        <script>
            function generateAdCopy() {
                const name = document.getElementById('academyName').value;
                const subject = document.getElementById('subject').value;
                const strength = document.getElementById('strength').value;
                
                const copies = [
                    name + 'ì—ì„œ ' + subject + ' ì‹¤ë ¥ì„ ì™„ì„±í•˜ì„¸ìš”! ' + strength + ' ìˆ˜ì—…ìœ¼ë¡œ ì„±ì  UP! ğŸ“ˆ',
                    subject + ' ê³ ë¯¼ë˜ì‹œì£ ? ' + name + 'ì˜ ' + strength + ' ì‹œìŠ¤í…œì´ ë‹µì…ë‹ˆë‹¤! ğŸ¯',
                    'ìš°ë¦¬ ì•„ì´ ' + subject + ' ì„±ì , ' + name + 'ì—ì„œ ì±…ì„ì§‘ë‹ˆë‹¤! ' + strength + ' êµìœ¡ ğŸ’ª',
                    name + ' | ' + subject + ' ì „ë¬¸ | ' + strength + ' | ì§€ê¸ˆ ìƒë‹´ ì‹ ì²­í•˜ì„¸ìš”! â˜ï¸',
                    strength + 'ë¡œ ì°¨ë³„í™”ëœ ' + subject + ' êµìœ¡, ' + name + 'ì…ë‹ˆë‹¤! âœ¨'
                ];
                
                const listEl = document.getElementById('copyList');
                listEl.innerHTML = copies.map((copy, i) => \`
                    <div class="p-4 bg-purple-50 rounded-xl">
                        <div class="flex justify-between items-start">
                            <p class="text-gray-800 flex-1">\${i+1}. \${copy}</p>
                            <button onclick="copySingle('\${copy}')" class="ml-4 text-purple-600 hover:text-purple-700">
                                ğŸ“‹
                            </button>
                        </div>
                    </div>
                \`).join('');
                
                document.getElementById('copyResults').classList.remove('hidden');
            }
            
            function copySingle(text) {
                navigator.clipboard.writeText(text);
                alert('ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        <\/script>
    </body>
    </html>
  `));d.get("/tools/photo-optimizer",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í”Œë ˆì´ìŠ¤ ì‚¬ì§„ ìµœì í™” ê°€ì´ë“œ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>.gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }</style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-5xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4 text-center">ğŸ“¸ í”Œë ˆì´ìŠ¤ ì‚¬ì§„ ìµœì í™” ê°€ì´ë“œ</h1>
            <p class="text-xl text-gray-600 text-center mb-12">í´ë¦­ë¥ ì„ ë†’ì´ëŠ” ì‚¬ì§„ ì´¬ì˜ ê°€ì´ë“œ</p>

            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white rounded-2xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-green-600 mb-6">âœ… ì¢‹ì€ ì‚¬ì§„</h2>
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <span class="text-2xl mr-3">ğŸ“</span>
                            <div>
                                <div class="font-bold text-gray-900">ì •ë°©í˜• (1:1) ë¹„ìœ¨</div>
                                <div class="text-sm text-gray-600">í”Œë ˆì´ìŠ¤ì—ì„œ ê°€ì¥ ì˜ ë³´ì´ëŠ” ë¹„ìœ¨</div>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="text-2xl mr-3">â˜€ï¸</span>
                            <div>
                                <div class="font-bold text-gray-900">ë°ê³  ì„ ëª…í•œ ì¡°ëª…</div>
                                <div class="text-sm text-gray-600">ìì—°ê´‘ì´ë‚˜ ë°ì€ ì‹¤ë‚´</div>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="text-2xl mr-3">ğŸ¯</span>
                            <div>
                                <div class="font-bold text-gray-900">í¬ì¸íŠ¸ê°€ ëª…í™•</div>
                                <div class="text-sm text-gray-600">êµì‹¤, í•™ìŠµìë£Œ, ìˆ˜ì—… ì¥ë©´</div>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="text-2xl mr-3">ğŸ§¹</span>
                            <div>
                                <div class="font-bold text-gray-900">ê¹”ë”í•œ ì •ë¦¬ ìƒíƒœ</div>
                                <div class="text-sm text-gray-600">ë¶ˆí•„ìš”í•œ ë¬¼ê±´ ì œê±°</div>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="bg-white rounded-2xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-red-600 mb-6">âŒ í”¼í•´ì•¼ í•  ì‚¬ì§„</h2>
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <span class="text-2xl mr-3">ğŸŒ‘</span>
                            <div>
                                <div class="font-bold text-gray-900">ì–´ë‘¡ê³  íë¦¿í•¨</div>
                                <div class="text-sm text-gray-600">ë…¸ì¶œ ë¶€ì¡±, ì´ˆì  ë¶ˆëŸ‰</div>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="text-2xl mr-3">ğŸ¤³</span>
                            <div>
                                <div class="font-bold text-gray-900">ì‚¬ëŒ ì–¼êµ´ ë…¸ì¶œ</div>
                                <div class="text-sm text-gray-600">ì´ˆìƒê¶Œ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥</div>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="text-2xl mr-3">ğŸ“±</span>
                            <div>
                                <div class="font-bold text-gray-900">ìŠ¤í¬ë¦°ìƒ·ì´ë‚˜ ìº¡ì²˜</div>
                                <div class="text-sm text-gray-600">ì§ì ‘ ì´¬ì˜í•œ ì‚¬ì§„ ì‚¬ìš©</div>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="text-2xl mr-3">ğŸ—‘ï¸</span>
                            <div>
                                <div class="font-bold text-gray-900">ì–´ì§€ëŸ¬ìš´ ë°°ê²½</div>
                                <div class="text-sm text-gray-600">ì£¼ëª©ë„ ë–¨ì–´ì§</div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="mt-8 bg-gradient-to-br from-purple-50 to-white rounded-2xl p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ“‹ ì¶”ì²œ ì‚¬ì§„ êµ¬ì„± (ì´ 10ì¥)</h2>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="p-4 bg-white rounded-xl border border-purple-200">
                        <div class="font-bold text-purple-600 mb-2">1. ì™¸ë¶€ ì „ê²½ (2ì¥)</div>
                        <div class="text-sm text-gray-600">ê±´ë¬¼ ì™¸ê´€, ê°„íŒ</div>
                    </div>
                    <div class="p-4 bg-white rounded-xl border border-purple-200">
                        <div class="font-bold text-purple-600 mb-2">2. êµì‹¤ ë‚´ë¶€ (3ì¥)</div>
                        <div class="text-sm text-gray-600">ì±…ìƒ ë°°ì¹˜, ì¹ íŒ, í•™ìŠµ í™˜ê²½</div>
                    </div>
                    <div class="p-4 bg-white rounded-xl border border-purple-200">
                        <div class="font-bold text-purple-600 mb-2">3. ìˆ˜ì—… ìë£Œ (2ì¥)</div>
                        <div class="text-sm text-gray-600">êµì¬, í•™ìŠµ ë„êµ¬</div>
                    </div>
                    <div class="p-4 bg-white rounded-xl border border-purple-200">
                        <div class="font-bold text-purple-600 mb-2">4. ë¶€ëŒ€ì‹œì„¤ (2ì¥)</div>
                        <div class="text-sm text-gray-600">ìƒë‹´ì‹¤, ëŒ€ê¸°ì‹¤, í™”ì¥ì‹¤</div>
                    </div>
                    <div class="p-4 bg-white rounded-xl border border-purple-200">
                        <div class="font-bold text-purple-600 mb-2">5. ì´ë²¤íŠ¸/ì„±ê³¼ (1ì¥)</div>
                        <div class="text-sm text-gray-600">ìˆ˜ìƒ ë‚´ì—­, íŠ¹ë³„ í”„ë¡œê·¸ë¨</div>
                    </div>
                </div>
            </div>
        </div>
    </body>
    </html>
  `));d.get("/tools/competitor-analysis",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ê²½ìŸ í•™ì› ë¶„ì„ ë„êµ¬ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>.gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }</style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-5xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4 text-center">ğŸ” ê²½ìŸ í•™ì› ë¶„ì„ ë„êµ¬</h1>
            <p class="text-xl text-gray-600 text-center mb-12">ì£¼ë³€ ê²½ìŸ í•™ì›ì„ ë¶„ì„í•˜ê³  ì°¨ë³„í™” ì „ëµì„ ìˆ˜ë¦½í•˜ì„¸ìš”</p>

            <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ë¶„ì„ ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
                <div class="space-y-6">
                    <div class="p-6 bg-purple-50 rounded-xl">
                        <h3 class="font-bold text-purple-900 mb-4">1. ê¸°ë³¸ ì •ë³´ ì¡°ì‚¬</h3>
                        <div class="space-y-2 text-sm">
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">í•™ì›ëª…ê³¼ ìœ„ì¹˜ í™•ì¸</label>
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">ìš´ì˜ ì‹œê°„ ë° ìš”ì¼ í™•ì¸</label>
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">ê³¼ëª© ë° í”„ë¡œê·¸ë¨ ì¢…ë¥˜</label>
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">í•™ì› ê·œëª¨ (ê°•ì‚¬ ìˆ˜, êµì‹¤ ìˆ˜)</label>
                        </div>
                    </div>

                    <div class="p-6 bg-orange-50 rounded-xl">
                        <h3 class="font-bold text-orange-900 mb-4">2. ì˜¨ë¼ì¸ í‰íŒ ë¶„ì„</h3>
                        <div class="space-y-2 text-sm">
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ í‰ì </label>
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">ë¦¬ë·° ê°œìˆ˜ ë° ìµœê·¼ ë¦¬ë·°</label>
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">ë¦¬ë·° ì‘ë‹µë¥ </label>
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">ë¸”ë¡œê·¸ ìš´ì˜ í˜„í™©</label>
                        </div>
                    </div>

                    <div class="p-6 bg-green-50 rounded-xl">
                        <h3 class="font-bold text-green-900 mb-4">3. ë§ˆì¼€íŒ… ì „ëµ íŒŒì•…</h3>
                        <div class="space-y-2 text-sm">
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">í™ˆí˜ì´ì§€/SNS í™œë™</label>
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">í”„ë¡œëª¨ì…˜ ë° ì´ë²¤íŠ¸</label>
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">ìˆ˜ê°•ë£Œ ì •ì±…</label>
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">ë¬´ë£Œ ì²´í—˜ ì œê³µ ì—¬ë¶€</label>
                        </div>
                    </div>

                    <div class="p-6 bg-blue-50 rounded-xl">
                        <h3 class="font-bold text-blue-900 mb-4">4. ì°¨ë³„í™” í¬ì¸íŠ¸ ì°¾ê¸°</h3>
                        <div class="space-y-2 text-sm">
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">ê²½ìŸì‚¬ì˜ ì•½ì  íŒŒì•…</label>
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">ìš°ë¦¬ë§Œì˜ ê°•ì  ì •ë¦¬</label>
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">í‹ˆìƒˆì‹œì¥ ë°œê²¬</label>
                            <label class="flex items-center"><input type="checkbox" class="mr-3 w-4 h-4">ì°¨ë³„í™” ë©”ì‹œì§€ ì‘ì„±</label>
                        </div>
                    </div>
                </div>

                <div class="mt-8 p-6 bg-gradient-to-br from-purple-100 to-orange-100 rounded-xl">
                    <h3 class="font-bold text-gray-900 mb-3">ğŸ’¡ ë¶„ì„ í›„ ì‹¤í–‰ TIP</h3>
                    <ul class="space-y-2 text-sm text-gray-700">
                        <li>âœ… ê²½ìŸì‚¬ë³´ë‹¤ ë¹ ë¥¸ ë¦¬ë·° ì‘ë‹µ</li>
                        <li>âœ… ì°¨ë³„í™”ëœ í”„ë¡œê·¸ë¨ í™ë³´</li>
                        <li>âœ… ì •ê¸°ì ì¸ ë¸”ë¡œê·¸/SNS ì—…ë°ì´íŠ¸</li>
                        <li>âœ… ê³ ê° ë§ì¶¤ ìƒë‹´ ì‹œìŠ¤í…œ êµ¬ì¶•</li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
    </html>
  `));d.get("/tools/blog-checklist",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë¸”ë¡œê·¸ í¬ìŠ¤íŒ… ì²´í¬ë¦¬ìŠ¤íŠ¸ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>.gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }</style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-5xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4 text-center">ğŸ“ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ… ì²´í¬ë¦¬ìŠ¤íŠ¸</h1>
            <p class="text-xl text-gray-600 text-center mb-12">SEO ìµœì í™”ëœ ë¸”ë¡œê·¸ ê¸€ ì‘ì„± ê°€ì´ë“œ</p>

            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white rounded-2xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-purple-600 mb-6">âœï¸ ì‘ì„± ì „ ì¤€ë¹„</h2>
                    <div class="space-y-3">
                        <label class="flex items-start p-3 hover:bg-purple-50 rounded-lg cursor-pointer">
                            <input type="checkbox" class="mt-1 mr-3 w-5 h-5">
                            <div>
                                <div class="font-bold text-gray-900">í‚¤ì›Œë“œ ì„ ì •</div>
                                <div class="text-sm text-gray-600">ê²€ìƒ‰ëŸ‰ ë§ì€ í‚¤ì›Œë“œ 3-5ê°œ</div>
                            </div>
                        </label>
                        <label class="flex items-start p-3 hover:bg-purple-50 rounded-lg cursor-pointer">
                            <input type="checkbox" class="mt-1 mr-3 w-5 h-5">
                            <div>
                                <div class="font-bold text-gray-900">ëª©ì°¨ êµ¬ì„±</div>
                                <div class="text-sm text-gray-600">ì„œë¡ -ë³¸ë¡ -ê²°ë¡  3ë‹¨ êµ¬ì„±</div>
                            </div>
                        </label>
                        <label class="flex items-start p-3 hover:bg-purple-50 rounded-lg cursor-pointer">
                            <input type="checkbox" class="mt-1 mr-3 w-5 h-5">
                            <div>
                                <div class="font-bold text-gray-900">ì´ë¯¸ì§€ ì¤€ë¹„</div>
                                <div class="text-sm text-gray-600">2-3ì¥ì˜ ê³ í’ˆì§ˆ ì´ë¯¸ì§€</div>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-orange-600 mb-6">âœ… ì‘ì„± ì¤‘ ì²´í¬</h2>
                    <div class="space-y-3">
                        <label class="flex items-start p-3 hover:bg-orange-50 rounded-lg cursor-pointer">
                            <input type="checkbox" class="mt-1 mr-3 w-5 h-5">
                            <div>
                                <div class="font-bold text-gray-900">ì œëª© ìµœì í™”</div>
                                <div class="text-sm text-gray-600">í‚¤ì›Œë“œ í¬í•¨, 25ì ì´ë‚´</div>
                            </div>
                        </label>
                        <label class="flex items-start p-3 hover:bg-orange-50 rounded-lg cursor-pointer">
                            <input type="checkbox" class="mt-1 mr-3 w-5 h-5">
                            <div>
                                <div class="font-bold text-gray-900">ì ì ˆí•œ ê¸¸ì´</div>
                                <div class="text-sm text-gray-600">1500-2000ì ì‘ì„±</div>
                            </div>
                        </label>
                        <label class="flex items-start p-3 hover:bg-orange-50 rounded-lg cursor-pointer">
                            <input type="checkbox" class="mt-1 mr-3 w-5 h-5">
                            <div>
                                <div class="font-bold text-gray-900">ì†Œì œëª© í™œìš©</div>
                                <div class="text-sm text-gray-600">3-4ê°œì˜ ì†Œì œëª©</div>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-green-600 mb-6">ğŸ¨ í¸ì§‘ ë° ë””ìì¸</h2>
                    <div class="space-y-3">
                        <label class="flex items-start p-3 hover:bg-green-50 rounded-lg cursor-pointer">
                            <input type="checkbox" class="mt-1 mr-3 w-5 h-5">
                            <div>
                                <div class="font-bold text-gray-900">ë‹¨ë½ êµ¬ë¶„</div>
                                <div class="text-sm text-gray-600">3-4ì¤„ë§ˆë‹¤ ë‹¨ë½ ë‚˜ëˆ„ê¸°</div>
                            </div>
                        </label>
                        <label class="flex items-start p-3 hover:bg-green-50 rounded-lg cursor-pointer">
                            <input type="checkbox" class="mt-1 mr-3 w-5 h-5">
                            <div>
                                <div class="font-bold text-gray-900">ê°•ì¡° í‘œì‹œ</div>
                                <div class="text-sm text-gray-600">ì¤‘ìš” ë‚´ìš© ë³¼ë“œ/ì»¬ëŸ¬</div>
                            </div>
                        </label>
                        <label class="flex items-start p-3 hover:bg-green-50 rounded-lg cursor-pointer">
                            <input type="checkbox" class="mt-1 mr-3 w-5 h-5">
                            <div>
                                <div class="font-bold text-gray-900">ì´ë¯¸ì§€ ALT</div>
                                <div class="text-sm text-gray-600">ì´ë¯¸ì§€ ì„¤ëª… í…ìŠ¤íŠ¸ ì¶”ê°€</div>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-blue-600 mb-6">ğŸš€ ë°œí–‰ í›„ ê´€ë¦¬</h2>
                    <div class="space-y-3">
                        <label class="flex items-start p-3 hover:bg-blue-50 rounded-lg cursor-pointer">
                            <input type="checkbox" class="mt-1 mr-3 w-5 h-5">
                            <div>
                                <div class="font-bold text-gray-900">SNS ê³µìœ </div>
                                <div class="text-sm text-gray-600">ì¹´ì¹´ì˜¤í†¡, ë°´ë“œ, ì¸ìŠ¤íƒ€</div>
                            </div>
                        </label>
                        <label class="flex items-start p-3 hover:bg-blue-50 rounded-lg cursor-pointer">
                            <input type="checkbox" class="mt-1 mr-3 w-5 h-5">
                            <div>
                                <div class="font-bold text-gray-900">ëŒ“ê¸€ í™•ì¸</div>
                                <div class="text-sm text-gray-600">24ì‹œê°„ ë‚´ ëŒ“ê¸€ ì‘ë‹µ</div>
                            </div>
                        </label>
                        <label class="flex items-start p-3 hover:bg-blue-50 rounded-lg cursor-pointer">
                            <input type="checkbox" class="mt-1 mr-3 w-5 h-5">
                            <div>
                                <div class="font-bold text-gray-900">ì¡°íšŒìˆ˜ ëª¨ë‹ˆí„°ë§</div>
                                <div class="text-sm text-gray-600">ì¼ì£¼ì¼ê°„ í†µê³„ í™•ì¸</div>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <div class="mt-8 bg-gradient-to-br from-purple-50 to-orange-50 rounded-2xl p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-4">ğŸ¯ ê¸€ê° ì¶”ì²œ TOP 10</h2>
                <div class="grid md:grid-cols-2 gap-3">
                    <div class="p-3 bg-white rounded-lg">1. ìš°ë¦¬ í•™ì› ì†Œê°œ ë° íŠ¹ì§•</div>
                    <div class="p-3 bg-white rounded-lg">2. ìˆ˜ì—… ì»¤ë¦¬í˜ëŸ¼ ì•ˆë‚´</div>
                    <div class="p-3 bg-white rounded-lg">3. í•™ìƒ ì„±ê³µ ì‚¬ë¡€ (ì„±ì  í–¥ìƒ)</div>
                    <div class="p-3 bg-white rounded-lg">4. í•™ë¶€ëª¨ í›„ê¸° ë° ì¸í„°ë·°</div>
                    <div class="p-3 bg-white rounded-lg">5. íš¨ê³¼ì ì¸ í•™ìŠµë²• íŒ</div>
                    <div class="p-3 bg-white rounded-lg">6. êµì¬ ë° í•™ìŠµ ìë£Œ ì†Œê°œ</div>
                    <div class="p-3 bg-white rounded-lg">7. í•™ì› ì‹œì„¤ ë° í™˜ê²½ ì†Œê°œ</div>
                    <div class="p-3 bg-white rounded-lg">8. ê°•ì‚¬ ì†Œê°œ ë° ê²½ë ¥</div>
                    <div class="p-3 bg-white rounded-lg">9. ì´ë²¤íŠ¸ ë° í”„ë¡œëª¨ì…˜ ì•ˆë‚´</div>
                    <div class="p-3 bg-white rounded-lg">10. ì§€ì—­ë³„ êµìœ¡ ì •ë³´</div>
                </div>
            </div>
        </div>
    </body>
    </html>
  `));d.get("/tools/content-calendar",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>SNS ì½˜í…ì¸  ìº˜ë¦°ë” - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>.gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }</style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-6xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4 text-center">ğŸ“… SNS ì½˜í…ì¸  ìº˜ë¦°ë”</h1>
            <p class="text-xl text-gray-600 text-center mb-12">í•œ ë‹¬ ì½˜í…ì¸ ë¥¼ ë¯¸ë¦¬ ê³„íší•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”</p>

            <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ì£¼ê°„ ì½˜í…ì¸  ì¶”ì²œ (ì˜ˆì‹œ)</h2>
                <div class="grid md:grid-cols-7 gap-2">
                    <div class="p-4 bg-purple-50 rounded-xl">
                        <div class="font-bold text-purple-900 mb-2">ì›”ìš”ì¼</div>
                        <div class="text-sm text-gray-700">ë™ê¸°ë¶€ì—¬ ëª…ì–¸</div>
                    </div>
                    <div class="p-4 bg-blue-50 rounded-xl">
                        <div class="font-bold text-blue-900 mb-2">í™”ìš”ì¼</div>
                        <div class="text-sm text-gray-700">í•™ìŠµ íŒ ê³µìœ </div>
                    </div>
                    <div class="p-4 bg-green-50 rounded-xl">
                        <div class="font-bold text-green-900 mb-2">ìˆ˜ìš”ì¼</div>
                        <div class="text-sm text-gray-700">í•™ì› ì¼ìƒ</div>
                    </div>
                    <div class="p-4 bg-yellow-50 rounded-xl">
                        <div class="font-bold text-yellow-900 mb-2">ëª©ìš”ì¼</div>
                        <div class="text-sm text-gray-700">êµì¬/ìë£Œ ì†Œê°œ</div>
                    </div>
                    <div class="p-4 bg-orange-50 rounded-xl">
                        <div class="font-bold text-orange-900 mb-2">ê¸ˆìš”ì¼</div>
                        <div class="text-sm text-gray-700">í•™ìƒ ì„±ê³¼ ì†Œì‹</div>
                    </div>
                    <div class="p-4 bg-red-50 rounded-xl">
                        <div class="font-bold text-red-900 mb-2">í† ìš”ì¼</div>
                        <div class="text-sm text-gray-700">ì´ë²¤íŠ¸ ì•ˆë‚´</div>
                    </div>
                    <div class="p-4 bg-pink-50 rounded-xl">
                        <div class="font-bold text-pink-900 mb-2">ì¼ìš”ì¼</div>
                        <div class="text-sm text-gray-700">íœ´ì‹ & ê³µê°</div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ì›”ê°„ ì½˜í…ì¸  ì•„ì´ë””ì–´ (30ê°œ)</h2>
                <div class="grid md:grid-cols-3 gap-4">
                    ${Array.from({length:30},(t,s)=>`
                        <div class="p-4 bg-gray-50 rounded-xl hover:bg-purple-50 transition cursor-pointer">
                            <div class="font-bold text-purple-600">${s+1}ì¼ì°¨</div>
                            <div class="text-sm text-gray-700 mt-1">
                                ${["í•™ì› ì†Œê°œ","ìˆ˜ì—… í˜„ì¥","í•™ìŠµ íŒ","ëª…ì–¸","ì´ë²¤íŠ¸","í›„ê¸°","ì‹œì„¤ ì•ˆë‚´","ê°•ì‚¬ ì†Œê°œ","ì„±ì  í–¥ìƒ","í”„ë¡œëª¨ì…˜"][s%10]}
                            </div>
                        </div>
                    `).join("")}
                </div>
            </div>

            <div class="bg-gradient-to-br from-purple-50 to-orange-50 rounded-2xl p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ¯ ì½˜í…ì¸  ì œì‘ TIP</h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-bold text-purple-900 mb-3">âœ… ì¸ìŠ¤íƒ€ê·¸ë¨</h3>
                        <ul class="space-y-2 text-sm text-gray-700">
                            <li>â€¢ ì •ë°©í˜•(1:1) ì´ë¯¸ì§€ ì‚¬ìš©</li>
                            <li>â€¢ í•´ì‹œíƒœê·¸ 10-15ê°œ</li>
                            <li>â€¢ ìŠ¤í† ë¦¬ ë§¤ì¼ 1-2ê°œ</li>
                            <li>â€¢ ë¦´ìŠ¤ ì£¼ 2-3íšŒ</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-bold text-orange-900 mb-3">âœ… ë¸”ë¡œê·¸</h3>
                        <ul class="space-y-2 text-sm text-gray-700">
                            <li>â€¢ ì£¼ 2-3íšŒ ì •ê¸° í¬ìŠ¤íŒ…</li>
                            <li>â€¢ 1500ì ì´ìƒ ì‘ì„±</li>
                            <li>â€¢ ì´ë¯¸ì§€ 2-3ì¥ í¬í•¨</li>
                            <li>â€¢ í‚¤ì›Œë“œ ìì—°ìŠ¤ëŸ½ê²Œ ë°°ì¹˜</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </body>
    </html>
  `));d.get("/tools/consultation-script",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í•™ì› ìƒë‹´ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±ê¸° - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>.gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }</style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-5xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4 text-center">ğŸ’¬ í•™ì› ìƒë‹´ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±ê¸°</h1>
            <p class="text-xl text-gray-600 text-center mb-12">íš¨ê³¼ì ì¸ í•™ë¶€ëª¨ ìƒë‹´ ëŒ€ë³¸ì„ ë§Œë“¤ì–´ë“œë¦½ë‹ˆë‹¤</p>

            <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
                <div class="space-y-8">
                    <div class="p-6 bg-purple-50 rounded-xl">
                        <h3 class="font-bold text-purple-900 mb-4 text-lg">1ë‹¨ê³„: ì¸ì‚¬ ë° ê´€ì‹¬ í™•ì¸</h3>
                        <div class="p-4 bg-white rounded-lg text-gray-700">
                            "ì•ˆë…•í•˜ì„¸ìš”, [í•™ì›ëª…]ì…ë‹ˆë‹¤. ë¬¸ì˜ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ğŸ˜Š<br>
                            í˜¹ì‹œ ì–´ë–¤ ê³¼ëª©ì— ê´€ì‹¬ì´ ìˆìœ¼ì‹ ê°€ìš”?<br>
                            ì•„ì´ì˜ í˜„ì¬ í•™ë…„ê³¼ í•™ìŠµ ëª©í‘œë¥¼ ë§ì”€í•´ì£¼ì‹œë©´<br>
                            ë§ì¶¤ ìƒë‹´ì„ ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤."
                        </div>
                    </div>

                    <div class="p-6 bg-blue-50 rounded-xl">
                        <h3 class="font-bold text-blue-900 mb-4 text-lg">2ë‹¨ê³„: ë‹ˆì¦ˆ íŒŒì•…</h3>
                        <div class="p-4 bg-white rounded-lg text-gray-700">
                            "í˜„ì¬ í•™ìŠµì—ì„œ ê°€ì¥ ì–´ë ¤ìš´ ë¶€ë¶„ì€ ë¬´ì—‡ì¸ê°€ìš”?<br><br>
                            <strong>ì£¼ìš” ì§ˆë¬¸ ì˜ˆì‹œ:</strong><br>
                            â€¢ ì„±ì  í–¥ìƒì´ ëª©í‘œì´ì‹ ê°€ìš”?<br>
                            â€¢ ë‚´ì‹  ëŒ€ë¹„ì¸ê°€ìš”, ìˆ˜ëŠ¥ ëŒ€ë¹„ì¸ê°€ìš”?<br>
                            â€¢ í•™ìŠµ ìŠµê´€ ê°œì„ ì´ í•„ìš”í•˜ì‹ ê°€ìš”?<br>
                            â€¢ íŠ¹ì • ë‹¨ì›ì´ë‚˜ ì˜ì—­ì— ì•½ì ì´ ìˆë‚˜ìš”?"
                        </div>
                    </div>

                    <div class="p-6 bg-green-50 rounded-xl">
                        <h3 class="font-bold text-green-900 mb-4 text-lg">3ë‹¨ê³„: í•™ì› ê°•ì  ì†Œê°œ</h3>
                        <div class="p-4 bg-white rounded-lg text-gray-700">
                            "ì €í¬ í•™ì›ì˜ <strong>[ì°¨ë³„í™” í¬ì¸íŠ¸]</strong>ë¥¼ ì†Œê°œí•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.<br><br>
                            <strong>ì˜ˆì‹œ:</strong><br>
                            âœ… ì†Œìˆ˜ì •ì˜ˆ ë§ì¶¤ ìˆ˜ì—… (í•™ìƒ 1:4 ë¹„ìœ¨)<br>
                            âœ… ë§¤ì£¼ í•™ìŠµ ë¦¬í¬íŠ¸ ì œê³µ<br>
                            âœ… 20ë…„ ê²½ë ¥ ì „ë¬¸ ê°•ì‚¬ì§„<br>
                            âœ… ì²´ê³„ì ì¸ ë ˆë²¨ í…ŒìŠ¤íŠ¸<br>
                            âœ… í•™ë¶€ëª¨ ìƒë‹´ ì›” 1íšŒ ì§„í–‰"
                        </div>
                    </div>

                    <div class="p-6 bg-orange-50 rounded-xl">
                        <h3 class="font-bold text-orange-900 mb-4 text-lg">4ë‹¨ê³„: í–‰ë™ ìœ ë„ (CTA)</h3>
                        <div class="p-4 bg-white rounded-lg text-gray-700">
                            "ë¬´ë£Œ ë ˆë²¨ í…ŒìŠ¤íŠ¸ì™€ 1íšŒ ì²´í—˜ ìˆ˜ì—…ì„ ì œê³µí•´ë“œë¦¬ê³  ìˆìŠµë‹ˆë‹¤.<br>
                            ì´ë²ˆ ì£¼ ì¤‘ ë°©ë¬¸ ê°€ëŠ¥í•˜ì‹  ë‚ ì§œê°€ ìˆìœ¼ì‹ ê°€ìš”?<br><br>
                            <strong>ìƒë‹´ ì˜ˆì•½ ê°€ëŠ¥ ì‹œê°„:</strong><br>
                            â€¢ í‰ì¼: ì˜¤í›„ 3ì‹œ~8ì‹œ<br>
                            â€¢ í† ìš”ì¼: ì˜¤ì „ 10ì‹œ~ì˜¤í›„ 5ì‹œ<br><br>
                            í¸í•˜ì‹  ì‹œê°„ì— ë°©ë¬¸í•´ì£¼ì‹œë©´<br>
                            ìì„¸í•œ ì»¤ë¦¬í˜ëŸ¼ê³¼ ìˆ˜ê°•ë£Œë¥¼ ì•ˆë‚´í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤."
                        </div>
                    </div>

                    <div class="p-6 bg-pink-50 rounded-xl">
                        <h3 class="font-bold text-pink-900 mb-4 text-lg">5ë‹¨ê³„: ë§ˆë¬´ë¦¬</h3>
                        <div class="p-4 bg-white rounded-lg text-gray-700">
                            "ì¶”ê°€ë¡œ ê¶ê¸ˆí•˜ì‹  ì ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“  ì—°ë½ ì£¼ì„¸ìš”!<br>
                            ì¹´ì¹´ì˜¤í†¡/ì „í™” ìƒë‹´ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤. ğŸ˜Š<br><br>
                            <strong>ì—°ë½ì²˜:</strong><br>
                            ğŸ“ ì „í™”: 010-XXXX-XXXX<br>
                            ğŸ’¬ ì¹´í†¡: [ì¹´ì¹´ì˜¤í†¡ ID]<br>
                            ğŸ“§ ì´ë©”ì¼: [ì´ë©”ì¼ ì£¼ì†Œ]<br><br>
                            ê°ì‚¬í•©ë‹ˆë‹¤!"
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-gradient-to-br from-purple-50 to-blue-50 rounded-2xl p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ¯ ìƒë‹´ ì„±ê³µ TIP</h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-bold text-purple-900 mb-3">âœ… í•´ì•¼ í•  ê²ƒ</h3>
                        <ul class="space-y-2 text-sm text-gray-700">
                            <li>â€¢ í•™ë¶€ëª¨ ì´ë¦„ìœ¼ë¡œ í˜¸ì¹­í•˜ê¸°</li>
                            <li>â€¢ ê²½ì²­í•˜ê³  ê³µê° í‘œí˜„í•˜ê¸°</li>
                            <li>â€¢ êµ¬ì²´ì ì¸ ìˆ«ì/ì‚¬ë¡€ ì œì‹œ</li>
                            <li>â€¢ ê¸ì •ì ì¸ í†¤ ìœ ì§€í•˜ê¸°</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-bold text-red-900 mb-3">âŒ í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ</h3>
                        <ul class="space-y-2 text-sm text-gray-700">
                            <li>â€¢ ë‹¤ë¥¸ í•™ì› ë¹„ë°©í•˜ê¸°</li>
                            <li>â€¢ ê³¼ë„í•œ ì•½ì†í•˜ê¸°</li>
                            <li>â€¢ ê°•ì••ì ì¸ ë“±ë¡ ìœ ë„</li>
                            <li>â€¢ ì¼ë°©ì ìœ¼ë¡œ ë§í•˜ê¸°</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </body>
    </html>
  `));d.get("/tools/place-optimization",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í”Œë ˆì´ìŠ¤ ìµœì í™” ì ê²€í‘œ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>.gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }</style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-5xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4 text-center">âœ… ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìµœì í™” ì ê²€í‘œ</h1>
            <p class="text-xl text-gray-600 text-center mb-12">100ì  ë§Œì  í”Œë ˆì´ìŠ¤ ë§Œë“¤ê¸°</p>

            <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
                <div class="mb-6 p-4 bg-purple-50 rounded-xl text-center">
                    <div class="text-4xl font-bold text-purple-600" id="score">0</div>
                    <div class="text-gray-600 mt-2">í˜„ì¬ ì ìˆ˜ / 100ì </div>
                </div>

                <div class="space-y-6">
                    <div class="p-6 bg-gray-50 rounded-xl">
                        <h3 class="font-bold text-gray-900 mb-4">ê¸°ë³¸ ì •ë³´ (30ì )</h3>
                        <div class="space-y-3">
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="5">
                                <span class="flex-1">ì •í™•í•œ í•™ì›ëª… (5ì )</span>
                            </label>
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="5">
                                <span class="flex-1">ì •í™•í•œ ì£¼ì†Œ ë° ì§€ë„ ìœ„ì¹˜ (5ì )</span>
                            </label>
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="5">
                                <span class="flex-1">ì „í™”ë²ˆí˜¸ ë“±ë¡ (5ì )</span>
                            </label>
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="5">
                                <span class="flex-1">ìš´ì˜ ì‹œê°„ ì •í™•íˆ ì…ë ¥ (5ì )</span>
                            </label>
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="5">
                                <span class="flex-1">ìƒì„¸í•œ ì†Œê°œê¸€ ì‘ì„± (5ì )</span>
                            </label>
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="5">
                                <span class="flex-1">í‚¤ì›Œë“œ 3ê°œ ì´ìƒ ì„¤ì • (5ì )</span>
                            </label>
                        </div>
                    </div>

                    <div class="p-6 bg-gray-50 rounded-xl">
                        <h3 class="font-bold text-gray-900 mb-4">ì‚¬ì§„ ê´€ë¦¬ (25ì )</h3>
                        <div class="space-y-3">
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="10">
                                <span class="flex-1">ì‚¬ì§„ 10ì¥ ì´ìƒ ë“±ë¡ (10ì )</span>
                            </label>
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="5">
                                <span class="flex-1">ê³ í’ˆì§ˆ ì‚¬ì§„ (ë°ê³  ì„ ëª…) (5ì )</span>
                            </label>
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="5">
                                <span class="flex-1">ë‹¤ì–‘í•œ ê°ë„ ì´¬ì˜ (5ì )</span>
                            </label>
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="5">
                                <span class="flex-1">ì •ê¸°ì  ì—…ë°ì´íŠ¸ (ì›” 1íšŒ) (5ì )</span>
                            </label>
                        </div>
                    </div>

                    <div class="p-6 bg-gray-50 rounded-xl">
                        <h3 class="font-bold text-gray-900 mb-4">ë¦¬ë·° ê´€ë¦¬ (30ì )</h3>
                        <div class="space-y-3">
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="10">
                                <span class="flex-1">ë¦¬ë·° 10ê°œ ì´ìƒ (10ì )</span>
                            </label>
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="10">
                                <span class="flex-1">í‰ê·  í‰ì  4.5ì  ì´ìƒ (10ì )</span>
                            </label>
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="10">
                                <span class="flex-1">ëª¨ë“  ë¦¬ë·°ì— ì‘ë‹µ (10ì )</span>
                            </label>
                        </div>
                    </div>

                    <div class="p-6 bg-gray-50 rounded-xl">
                        <h3 class="font-bold text-gray-900 mb-4">í™œë™ì„± (15ì )</h3>
                        <div class="space-y-3">
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="5">
                                <span class="flex-1">ì†Œì‹ ì£¼ 1íšŒ ì—…ë°ì´íŠ¸ (5ì )</span>
                            </label>
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="5">
                                <span class="flex-1">ì´ë²¤íŠ¸/í”„ë¡œëª¨ì…˜ ë“±ë¡ (5ì )</span>
                            </label>
                            <label class="flex items-center p-3 hover:bg-white rounded-lg cursor-pointer transition">
                                <input type="checkbox" class="score-checkbox mr-3 w-5 h-5" data-score="5">
                                <span class="flex-1">ë©”ë‰´/ì„œë¹„ìŠ¤ ì •ë³´ ìƒì„¸ (5ì )</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="mt-8 p-6 rounded-xl" id="result">
                    <div class="text-center">
                        <button onclick="location.reload()" class="gradient-purple text-white px-8 py-3 rounded-xl font-bold hover:shadow-xl transition">
                            ë‹¤ì‹œ ì²´í¬í•˜ê¸°
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            const checkboxes = document.querySelectorAll('.score-checkbox');
            const scoreEl = document.getElementById('score');
            const resultEl = document.getElementById('result');
            
            checkboxes.forEach(cb => {
                cb.addEventListener('change', updateScore);
            });
            
            function updateScore() {
                let total = 0;
                checkboxes.forEach(cb => {
                    if(cb.checked) {
                        total += parseInt(cb.dataset.score);
                    }
                });
                
                scoreEl.textContent = total;
                
                let resultHTML = '';
                let bgColor = '';
                
                if(total >= 90) {
                    bgColor = 'bg-green-50 border border-green-200';
                    resultHTML = '<div class="text-green-800 text-center"><div class="text-2xl font-bold mb-2">ğŸ‰ ì™„ë²½í•©ë‹ˆë‹¤!</div><div>í”Œë ˆì´ìŠ¤ê°€ ìµœì í™”ë˜ì—ˆìŠµë‹ˆë‹¤!</div></div>';
                } else if(total >= 70) {
                    bgColor = 'bg-blue-50 border border-blue-200';
                    resultHTML = '<div class="text-blue-800 text-center"><div class="text-2xl font-bold mb-2">ğŸ‘ ì¢‹ìŠµë‹ˆë‹¤!</div><div>ì¡°ê¸ˆë§Œ ë” ë³´ì™„í•˜ë©´ ì™„ë²½í•´ìš”!</div></div>';
                } else if(total >= 50) {
                    bgColor = 'bg-orange-50 border border-orange-200';
                    resultHTML = '<div class="text-orange-800 text-center"><div class="text-2xl font-bold mb-2">ğŸ’ª ê´œì°®ìŠµë‹ˆë‹¤!</div><div>ì²´í¬ ì•ˆ ëœ í•­ëª©ë“¤ì„ ë³´ì™„í•´ë³´ì„¸ìš”!</div></div>';
                } else if(total > 0) {
                    bgColor = 'bg-red-50 border border-red-200';
                    resultHTML = '<div class="text-red-800 text-center"><div class="text-2xl font-bold mb-2">âš ï¸ ê°œì„  í•„ìš”!</div><div>ê¸°ë³¸ í•­ëª©ë¶€í„° ì°¨ê·¼ì°¨ê·¼ ì§„í–‰í•˜ì„¸ìš”!</div></div>';
                }
                
                resultEl.className = 'mt-8 p-6 rounded-xl ' + bgColor;
                if(total > 0) {
                    resultEl.innerHTML = resultHTML + '<div class="text-center mt-4"><button onclick="location.reload()" class="gradient-purple text-white px-8 py-3 rounded-xl font-bold hover:shadow-xl transition">ë‹¤ì‹œ ì²´í¬í•˜ê¸°</button></div>';
                }
            }
        <\/script>
    </body>
    </html>
  `));d.get("/tools/roi-calculator",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë§ˆì¼€íŒ… ROI ê³„ì‚°ê¸° - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>.gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }</style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-5xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4 text-center">ğŸ’° í•™ì› ë§ˆì¼€íŒ… ROI ê³„ì‚°ê¸°</h1>
            <p class="text-xl text-gray-600 text-center mb-12">ë§ˆì¼€íŒ… íˆ¬ì ëŒ€ë¹„ ìˆ˜ìµë¥ ì„ ê³„ì‚°í•˜ì„¸ìš”</p>

            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white rounded-2xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">ì…ë ¥ ì •ë³´</h2>
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì›” ë§ˆì¼€íŒ… ë¹„ìš© (ì›)</label>
                            <input type="number" id="marketingCost" placeholder="300000" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">ì‹ ê·œ ë“±ë¡ í•™ìƒ ìˆ˜ (ëª…)</label>
                            <input type="number" id="newStudents" placeholder="10" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">í•™ìƒ 1ëª…ë‹¹ ì›” ìˆ˜ê°•ë£Œ (ì›)</label>
                            <input type="number" id="tuitionPerStudent" placeholder="400000" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">í‰ê·  ìˆ˜ê°• ê¸°ê°„ (ê°œì›”)</label>
                            <input type="number" id="avgDuration" placeholder="12" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                        </div>
                        <button onclick="calculate()" class="w-full gradient-purple text-white py-4 rounded-xl font-bold hover:shadow-xl transition">
                            ROI ê³„ì‚°í•˜ê¸°
                        </button>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-lg p-8">
                    <h2 class="text-2xl font-bold text-gray-900 mb-6">ê³„ì‚° ê²°ê³¼</h2>
                    <div id="results" class="hidden space-y-6">
                        <div class="p-6 bg-purple-50 rounded-xl">
                            <div class="text-sm text-gray-600 mb-1">ì´ ë§¤ì¶œ</div>
                            <div class="text-3xl font-bold text-purple-600" id="totalRevenue">0ì›</div>
                        </div>
                        <div class="p-6 bg-blue-50 rounded-xl">
                            <div class="text-sm text-gray-600 mb-1">ìˆœì´ìµ</div>
                            <div class="text-3xl font-bold text-blue-600" id="profit">0ì›</div>
                        </div>
                        <div class="p-6 bg-green-50 rounded-xl">
                            <div class="text-sm text-gray-600 mb-1">ROI (íˆ¬ì ëŒ€ë¹„ ìˆ˜ìµë¥ )</div>
                            <div class="text-4xl font-bold text-green-600" id="roi">0%</div>
                        </div>
                        <div class="p-6 bg-orange-50 rounded-xl">
                            <div class="text-sm text-gray-600 mb-1">í•™ìƒ 1ëª…ë‹¹ íšë“ ë¹„ìš©</div>
                            <div class="text-2xl font-bold text-orange-600" id="cpa">0ì›</div>
                        </div>
                    </div>

                    <div id="tips" class="hidden mt-8">
                        <h3 class="font-bold text-gray-900 mb-4">ğŸ’¡ ë¶„ì„ TIP</h3>
                        <div class="space-y-3 text-sm">
                            <div class="p-4 bg-green-50 rounded-xl">
                                <div class="font-bold text-green-900 mb-1">âœ… ROI 300% ì´ìƒ</div>
                                <div class="text-gray-700">ë§¤ìš° íš¨ìœ¨ì ! ë§ˆì¼€íŒ… ìœ ì§€</div>
                            </div>
                            <div class="p-4 bg-blue-50 rounded-xl">
                                <div class="font-bold text-blue-900 mb-1">âœ… ROI 150-300%</div>
                                <div class="text-gray-700">ì¢‹ì€ ìˆ˜ì¤€! ìµœì í™” ê°€ëŠ¥</div>
                            </div>
                            <div class="p-4 bg-orange-50 rounded-xl">
                                <div class="font-bold text-orange-900 mb-1">âš ï¸ ROI 100-150%</div>
                                <div class="text-gray-700">ê°œì„  í•„ìš”, ì „ëµ ì¬ê²€í† </div>
                            </div>
                            <div class="p-4 bg-red-50 rounded-xl">
                                <div class="font-bold text-red-900 mb-1">âŒ ROI 100% ë¯¸ë§Œ</div>
                                <div class="text-gray-700">ë§ˆì¼€íŒ… ì „ëµ ì „ë©´ ìˆ˜ì • í•„ìš”</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 bg-gradient-to-br from-purple-50 to-blue-50 rounded-2xl p-8">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ“Š í•™ì› ë§ˆì¼€íŒ… ROI ê°œì„  ì „ëµ</h2>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="p-6 bg-white rounded-xl">
                        <div class="text-3xl mb-3">ğŸ¯</div>
                        <h3 class="font-bold text-gray-900 mb-2">íƒ€ê²ŸíŒ… ì •êµí™”</h3>
                        <p class="text-sm text-gray-600">ìš°ë¦¬ í•™ì›ì— ê¼­ ë§ëŠ” í•™ë¶€ëª¨ë§Œ ê³µëµ</p>
                    </div>
                    <div class="p-6 bg-white rounded-xl">
                        <div class="text-3xl mb-3">ğŸ’¬</div>
                        <h3 class="font-bold text-gray-900 mb-2">ì „í™˜ìœ¨ í–¥ìƒ</h3>
                        <p class="text-sm text-gray-600">ìƒë‹´ì—ì„œ ë“±ë¡ê¹Œì§€ì˜ ì „í™˜ìœ¨ ë†’ì´ê¸°</p>
                    </div>
                    <div class="p-6 bg-white rounded-xl">
                        <div class="text-3xl mb-3">ğŸ”„</div>
                        <h3 class="font-bold text-gray-900 mb-2">ì¬ë“±ë¡ë¥  ê´€ë¦¬</h3>
                        <p class="text-sm text-gray-600">ê¸°ì¡´ í•™ìƒ ë§Œì¡±ë„ ë†’ì—¬ ì¥ê¸° ìˆ˜ê°•</p>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function calculate() {
                const cost = parseInt(document.getElementById('marketingCost').value) || 0;
                const students = parseInt(document.getElementById('newStudents').value) || 0;
                const tuition = parseInt(document.getElementById('tuitionPerStudent').value) || 0;
                const duration = parseInt(document.getElementById('avgDuration').value) || 0;
                
                if(cost === 0 || students === 0 || tuition === 0 || duration === 0) {
                    alert('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                    return;
                }
                
                const totalRevenue = students * tuition * duration;
                const profit = totalRevenue - cost;
                const roi = ((profit / cost) * 100).toFixed(1);
                const cpa = (cost / students).toFixed(0);
                
                document.getElementById('totalRevenue').textContent = totalRevenue.toLocaleString() + 'ì›';
                document.getElementById('profit').textContent = profit.toLocaleString() + 'ì›';
                document.getElementById('roi').textContent = roi + '%';
                document.getElementById('cpa').textContent = parseInt(cpa).toLocaleString() + 'ì›';
                
                document.getElementById('results').classList.remove('hidden');
                document.getElementById('tips').classList.remove('hidden');
            }
        <\/script>
    </body>
    </html>
  `));d.get("/tools",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë§ˆì¼€íŒ… íˆ´ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            .card-hover { transition: all 0.3s ease; }
            .card-hover:hover { transform: translateY(-8px); box-shadow: 0 20px 40px -10px rgba(124, 58, 237, 0.3); }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/" class="text-gray-600 hover:text-purple-600">â† í™ˆìœ¼ë¡œ</a>
                </div>
            </div>
        </nav>

        <div class="max-w-7xl mx-auto px-6 py-12">
            <div class="text-center mb-16">
                <h1 class="text-5xl font-bold text-gray-900 mb-6">ğŸš€ ë§ˆì¼€íŒ… íˆ´ ëª¨ìŒ</h1>
                <p class="text-2xl text-gray-600">í•™ì› ë§ˆì¼€íŒ…ì— í•„ìš”í•œ ëª¨ë“  ë„êµ¬ë¥¼ í•œ ê³³ì—ì„œ</p>
                <div class="mt-6 inline-flex items-center px-6 py-3 bg-purple-50 rounded-full text-purple-700 font-medium">
                    <i class="fas fa-check-circle mr-2"></i>
                    100% ë¬´ë£Œ Â· íšŒì›ê°€ì… ë¶ˆí•„ìš” Â· ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥
                </div>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <a href="/tools/keyword-analyzer" class="bg-white rounded-2xl p-8 shadow-lg border-2 border-transparent hover:border-purple-300 card-hover">
                    <div class="w-16 h-16 gradient-purple rounded-2xl flex items-center justify-center mb-6">
                        <i class="fas fa-search text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">í‚¤ì›Œë“œ ë¶„ì„ê¸°</h3>
                    <p class="text-gray-600 mb-4">ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìµœì  í‚¤ì›Œë“œ ë°œêµ´</p>
                    <div class="flex items-center text-purple-600 font-medium">
                        ìì„¸íˆ ë³´ê¸° <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </a>

                <a href="/tools/review-template" class="bg-white rounded-2xl p-8 shadow-lg border-2 border-transparent hover:border-purple-300 card-hover">
                    <div class="w-16 h-16 gradient-purple rounded-2xl flex items-center justify-center mb-6">
                        <i class="fas fa-comment-dots text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">ë¦¬ë·° ì‘ë‹µ ìƒì„±ê¸°</h3>
                    <p class="text-gray-600 mb-4">ê³ ê° ë¦¬ë·°ì— ë§ì¶¤í˜• ë‹µë³€ ìë™ ìƒì„±</p>
                    <div class="flex items-center text-purple-600 font-medium">
                        ìì„¸íˆ ë³´ê¸° <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </a>

                <a href="/tools/ad-copy-generator" class="bg-white rounded-2xl p-8 shadow-lg border-2 border-transparent hover:border-purple-300 card-hover">
                    <div class="w-16 h-16 gradient-purple rounded-2xl flex items-center justify-center mb-6">
                        <i class="fas fa-bullhorn text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">í™ë³´ ë¬¸êµ¬ ìƒì„±ê¸°</h3>
                    <p class="text-gray-600 mb-4">íš¨ê³¼ì ì¸ í•™ì› ê´‘ê³  ë¬¸êµ¬ 5ê°œ ìë™ ìƒì„±</p>
                    <div class="flex items-center text-purple-600 font-medium">
                        ìì„¸íˆ ë³´ê¸° <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </a>

                <a href="/tools/photo-optimizer" class="bg-white rounded-2xl p-8 shadow-lg border-2 border-transparent hover:border-purple-300 card-hover">
                    <div class="w-16 h-16 gradient-purple rounded-2xl flex items-center justify-center mb-6">
                        <i class="fas fa-camera text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">ì‚¬ì§„ ìµœì í™” ê°€ì´ë“œ</h3>
                    <p class="text-gray-600 mb-4">í´ë¦­ë¥  ë†’ì´ëŠ” í”Œë ˆì´ìŠ¤ ì‚¬ì§„ ì´¬ì˜ë²•</p>
                    <div class="flex items-center text-purple-600 font-medium">
                        ìì„¸íˆ ë³´ê¸° <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </a>

                <a href="/tools/competitor-analysis" class="bg-white rounded-2xl p-8 shadow-lg border-2 border-transparent hover:border-purple-300 card-hover">
                    <div class="w-16 h-16 gradient-purple rounded-2xl flex items-center justify-center mb-6">
                        <i class="fas fa-chart-line text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">ê²½ìŸ í•™ì› ë¶„ì„</h3>
                    <p class="text-gray-600 mb-4">ì£¼ë³€ ê²½ìŸì‚¬ ë¶„ì„ ë° ì°¨ë³„í™” ì „ëµ</p>
                    <div class="flex items-center text-purple-600 font-medium">
                        ìì„¸íˆ ë³´ê¸° <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </a>

                <a href="/tools/blog-checklist" class="bg-white rounded-2xl p-8 shadow-lg border-2 border-transparent hover:border-purple-300 card-hover">
                    <div class="w-16 h-16 gradient-purple rounded-2xl flex items-center justify-center mb-6">
                        <i class="fas fa-check-square text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">ë¸”ë¡œê·¸ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
                    <p class="text-gray-600 mb-4">SEO ìµœì í™” ë¸”ë¡œê·¸ ì‘ì„± ì™„ë²½ ê°€ì´ë“œ</p>
                    <div class="flex items-center text-purple-600 font-medium">
                        ìì„¸íˆ ë³´ê¸° <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </a>

                <a href="/tools/content-calendar" class="bg-white rounded-2xl p-8 shadow-lg border-2 border-transparent hover:border-purple-300 card-hover">
                    <div class="w-16 h-16 gradient-purple rounded-2xl flex items-center justify-center mb-6">
                        <i class="fas fa-calendar-alt text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">ì½˜í…ì¸  ìº˜ë¦°ë”</h3>
                    <p class="text-gray-600 mb-4">í•œ ë‹¬ SNS ì½˜í…ì¸  ë¯¸ë¦¬ ê³„íší•˜ê¸°</p>
                    <div class="flex items-center text-purple-600 font-medium">
                        ìì„¸íˆ ë³´ê¸° <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </a>

                <a href="/tools/consultation-script" class="bg-white rounded-2xl p-8 shadow-lg border-2 border-transparent hover:border-purple-300 card-hover">
                    <div class="w-16 h-16 gradient-purple rounded-2xl flex items-center justify-center mb-6">
                        <i class="fas fa-comments text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">ìƒë‹´ ìŠ¤í¬ë¦½íŠ¸</h3>
                    <p class="text-gray-600 mb-4">íš¨ê³¼ì ì¸ í•™ë¶€ëª¨ ìƒë‹´ ëŒ€ë³¸ 5ë‹¨ê³„</p>
                    <div class="flex items-center text-purple-600 font-medium">
                        ìì„¸íˆ ë³´ê¸° <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </a>

                <a href="/tools/place-optimization" class="bg-white rounded-2xl p-8 shadow-lg border-2 border-transparent hover:border-purple-300 card-hover">
                    <div class="w-16 h-16 gradient-purple rounded-2xl flex items-center justify-center mb-6">
                        <i class="fas fa-tasks text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">í”Œë ˆì´ìŠ¤ ì ê²€í‘œ</h3>
                    <p class="text-gray-600 mb-4">100ì  ë§Œì  í”Œë ˆì´ìŠ¤ ë§Œë“¤ê¸° ì²´í¬ë¦¬ìŠ¤íŠ¸</p>
                    <div class="flex items-center text-purple-600 font-medium">
                        ìì„¸íˆ ë³´ê¸° <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </a>

                <a href="/tools/roi-calculator" class="bg-white rounded-2xl p-8 shadow-lg border-2 border-transparent hover:border-purple-300 card-hover">
                    <div class="w-16 h-16 gradient-purple rounded-2xl flex items-center justify-center mb-6">
                        <i class="fas fa-calculator text-white text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-3">ROI ê³„ì‚°ê¸°</h3>
                    <p class="text-gray-600 mb-4">ë§ˆì¼€íŒ… íˆ¬ì ëŒ€ë¹„ ìˆ˜ìµë¥  ë¶„ì„ ë„êµ¬</p>
                    <div class="flex items-center text-purple-600 font-medium">
                        ìì„¸íˆ ë³´ê¸° <i class="fas fa-arrow-right ml-2"></i>
                    </div>
                </a>
            </div>

            <div class="mt-16 bg-gradient-to-br from-purple-50 to-white rounded-3xl p-12 text-center">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">ë” ë§ì€ ë§ˆì¼€íŒ… ì§€ì›ì´ í•„ìš”í•˜ì‹ ê°€ìš”?</h2>
                <p class="text-xl text-gray-600 mb-8">ì „ë¬¸ ì»¨ì„¤í„´íŠ¸ì™€ 1:1 ìƒë‹´ì„ ì§„í–‰í•´ë³´ì„¸ìš”</p>
                <a href="/contact" class="inline-block gradient-purple text-white px-12 py-4 rounded-full text-lg font-bold shadow-xl hover:shadow-2xl transition-all hover:-translate-y-1">
                    ë¬´ë£Œ ìƒë‹´ ì‹ ì²­í•˜ê¸°
                </a>
            </div>
        </div>
    </body>
    </html>
  `));d.post("/api/search-analysis",async e=>{try{const{userId:t,keyword:s,placeUrl:r}=await e.req.json();if(!s)return e.json({success:!1,error:"í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"},400);const a="https://web-production-14c4.up.railway.app/analyze";try{const n=fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:s,placeUrl:r||null})}),l=new Promise((p,m)=>setTimeout(()=>m(new Error("Request timeout")),5e4)),o=await Promise.race([n,l]);if(!o.ok)throw new Error(`Crawler API error: ${o.status}`);const i=await o.json(),{env:c}=e;if(t)try{await c.DB.prepare(`
            INSERT INTO search_analysis_logs (user_id, keyword, place_url, result_data, created_at)
            VALUES (?, ?, ?, ?, datetime('now'))
          `).bind(t,s,r||"",JSON.stringify(i)).run()}catch(p){console.error("DB save error:",p)}return e.json(i)}catch(n){console.error("Crawler API error:",n);const l={success:!1,error:"í¬ë¡¤ë§ ì„œë²„ ì—°ê²° ì‹¤íŒ¨",message:`ì˜¤ë¥˜: ${n instanceof Error?n.message:"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"}`,searchVolume:{monthlyAvg:0,competition:"ë¶„ì„ ë¶ˆê°€",recommendation:"ì„œë²„ ì˜¤ë¥˜"},ranking:{myRank:null,competitors:[]},keywords:[]};return e.json(l)}}catch(t){return console.error("Search analysis error:",t),e.json({success:!1,error:"ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"},500)}});d.post("/api/contact",async e=>{try{const{type:t,academy:s,name:r,phone:a,email:n,programs:l,message:o}=await e.req.json(),{env:i}=e;return await i.DB.prepare(`
      INSERT INTO contacts (inquiry, academy, name, phone, email, programs, message, created_at)
      VALUES (?, ?, ?, ?, ?, ?, ?, datetime('now'))
    `).bind(t,s,r,a,n||"",JSON.stringify(l||[]),o).run(),e.json({success:!0,message:"ë¬¸ì˜ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤"})}catch(t){return console.error("Contact error:",t),e.json({success:!1,error:"ë¬¸ì˜ ì ‘ìˆ˜ ì‹¤íŒ¨"},500)}});d.post("/api/login",async e=>{try{const{email:t,password:s}=await e.req.json(),{env:r}=e,a=await r.DB.prepare("SELECT * FROM users WHERE email = ?").bind(t).first();if(!a)return e.json({success:!1,error:"ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"},401);if(a.password!==s)return e.json({success:!1,error:"ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"},401);const n={id:a.id,email:a.email,name:a.name,phone:a.phone,academy_name:a.academy_name,role:a.role};return e.json({success:!0,message:"ë¡œê·¸ì¸ ì„±ê³µ",user:n})}catch(t){return console.error("Login error:",t),e.json({success:!1,error:"ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"},500)}});d.post("/api/sms/send",async e=>{try{const{userId:t,receivers:s,message:r,subject:a}=await e.req.json();if(!s||s.length===0)return e.json({success:!1,error:"ìˆ˜ì‹ ì ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"},400);if(!r)return e.json({success:!1,error:"ë©”ì‹œì§€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"},400);const n="4bbi3l27pb5qh11tkujl578bttz6vb5j",l="wangholy",o="010-8739-9697",i=s.map(v=>v.replace(/-/g,"")),c="https://apis.aligo.in/send/",p=new URLSearchParams;p.append("key",n),p.append("user_id",l),p.append("sender",o.replace(/-/g,"")),p.append("receiver",i.join(",")),p.append("msg",r),a&&p.append("title",a);const m=r.length<=90?"SMS":"LMS";p.append("msg_type",m),console.log("ì•Œë¦¬ê³  SMS ë°œì†¡ ì‹œë„:",{receivers:i,messageLength:r.length,msgType:m});const x=await(await fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:p.toString()})).json();if(console.log("ì•Œë¦¬ê³  API ì‘ë‹µ:",x),x.result_code==="1"){const{env:v}=e;for(const w of i)try{await v.DB.prepare(`
            INSERT INTO sms_history (
              recipient_phone, message_content, status, sent_at, 
              result_code, result_message, cost, created_by, created_at
            )
            VALUES (?, ?, ?, datetime('now'), ?, ?, ?, ?, datetime('now'))
          `).bind(w,r,"sent",x.result_code,x.message||"ë°œì†¡ ì„±ê³µ",20,t||null).run()}catch(b){console.error("SMS ë¡œê·¸ ì €ì¥ ì˜¤ë¥˜:",b)}return e.json({success:!0,message:"ë¬¸ì ë°œì†¡ ì„±ê³µ",data:{sentCount:x.success_cnt||i.length,failCount:x.error_cnt||0,msgType:m,details:x}})}else{const{env:v}=e;for(const w of i)try{await v.DB.prepare(`
            INSERT INTO sms_logs (user_id, receiver, message, subject, status, result_code, result_message, created_at)
            VALUES (?, ?, ?, ?, ?, ?, ?, datetime('now'))
          `).bind(t||null,w,r,a||"","failed",x.result_code||"-1",x.message||"ë°œì†¡ ì‹¤íŒ¨").run()}catch(b){console.error("SMS ë¡œê·¸ ì €ì¥ ì˜¤ë¥˜:",b)}return e.json({success:!1,error:"ë¬¸ì ë°œì†¡ ì‹¤íŒ¨",message:x.message||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜",resultCode:x.result_code},400)}}catch(t){return console.error("SMS ë°œì†¡ ì˜¤ë¥˜:",t),e.json({success:!1,error:"ë¬¸ì ë°œì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤",details:error instanceof Error?error.message:"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"},500)}});d.get("/api/sms/logs",async e=>{try{const t=e.req.query("userId"),{env:s}=e;let r="SELECT * FROM sms_history",a=[];t&&(r+=" WHERE created_by = ?",a.push(t)),r+=" ORDER BY created_at DESC LIMIT 100";const{results:n}=await s.DB.prepare(r).bind(...a).all();return e.json({success:!0,logs:n||[]})}catch(t){return console.error("SMS ë¡œê·¸ ì¡°íšŒ ì˜¤ë¥˜:",t),e.json({success:!1,error:"SMS ë¡œê·¸ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.get("/tools/place-keyword-analyzer",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ í‚¤ì›Œë“œ ë¶„ì„ê¸° - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-7xl mx-auto px-6 py-12">
            <div class="mb-8">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">
                    <i class="fas fa-search text-purple-600 mr-3"></i>
                    ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ í‚¤ì›Œë“œ ë¶„ì„ê¸°
                </h1>
                <p class="text-xl text-gray-600">ì§€ì—­ë³„ ê²€ìƒ‰ëŸ‰ê³¼ ê²½ìŸë„ë¥¼ ë¶„ì„í•˜ì—¬ ìµœì ì˜ í‚¤ì›Œë“œë¥¼ ì°¾ì•„ë“œë¦½ë‹ˆë‹¤</p>
            </div>

            <div class="grid lg:grid-cols-3 gap-8">
                <div class="lg:col-span-1">
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 sticky top-24">
                        <h2 class="text-xl font-bold text-gray-900 mb-6">í‚¤ì›Œë“œ ì…ë ¥</h2>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì§€ì—­</label>
                                <input type="text" id="region" placeholder="ì˜ˆ: ì¸ì²œ ì„œêµ¬" 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-900 mb-2">ì—…ì¢…</label>
                                <input type="text" id="keyword" placeholder="ì˜ˆ: ì˜ì–´í•™ì›" 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                            </div>

                            <button onclick="analyzeKeyword()" 
                                    class="w-full gradient-purple text-white py-4 rounded-xl font-bold hover:shadow-lg transition">
                                <i class="fas fa-chart-line mr-2"></i>ë¶„ì„ ì‹œì‘
                            </button>
                        </div>

                        <div class="mt-6 p-4 bg-blue-50 rounded-xl text-sm text-blue-800">
                            <i class="fas fa-info-circle mr-2"></i>
                            ì‹¤ì‹œê°„ ê²€ìƒ‰ëŸ‰ê³¼ ê²½ìŸ ì—…ì²´ ìˆ˜ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤
                        </div>
                    </div>
                </div>

                <div class="lg:col-span-2">
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-8">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">ë¶„ì„ ê²°ê³¼</h2>
                        
                        <div id="result" class="hidden">
                            <div class="grid md:grid-cols-3 gap-4 mb-8">
                                <div class="bg-purple-50 rounded-xl p-6 text-center">
                                    <div class="text-3xl font-bold text-purple-600 mb-2" id="searchVolume">-</div>
                                    <div class="text-sm text-gray-600">ì›” í‰ê·  ê²€ìƒ‰ëŸ‰</div>
                                </div>
                                <div class="bg-orange-50 rounded-xl p-6 text-center">
                                    <div class="text-3xl font-bold text-orange-600 mb-2" id="competition">-</div>
                                    <div class="text-sm text-gray-600">ê²½ìŸ ì—…ì²´ ìˆ˜</div>
                                </div>
                                <div class="bg-green-50 rounded-xl p-6 text-center">
                                    <div class="text-3xl font-bold text-green-600 mb-2" id="difficulty">-</div>
                                    <div class="text-sm text-gray-600">ë‚œì´ë„</div>
                                </div>
                            </div>

                            <div class="space-y-4">
                                <h3 class="text-xl font-bold text-gray-900">ì¶”ì²œ í‚¤ì›Œë“œ</h3>
                                <div id="recommendations" class="space-y-3"></div>
                            </div>

                            <div class="mt-8 p-6 bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl">
                                <h4 class="font-bold text-gray-900 mb-3">ğŸ’¡ ìµœì í™” íŒ</h4>
                                <ul class="space-y-2 text-sm text-gray-700">
                                    <li>âœ“ ì§€ì—­ëª… + ì—…ì¢…ì„ í•¨ê»˜ ì‚¬ìš©í•˜ì„¸ìš”</li>
                                    <li>âœ“ ê²½ìŸì´ ë‚®ì€ ë¡±í…Œì¼ í‚¤ì›Œë“œë¥¼ í™œìš©í•˜ì„¸ìš”</li>
                                    <li>âœ“ ì •ê¸°ì ìœ¼ë¡œ í‚¤ì›Œë“œ ìˆœìœ„ë¥¼ ëª¨ë‹ˆí„°ë§í•˜ì„¸ìš”</li>
                                </ul>
                            </div>
                        </div>

                        <div id="empty" class="text-center py-20">
                            <div class="text-6xl mb-4">ğŸ”</div>
                            <p class="text-gray-500 text-lg">í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ê³  ë¶„ì„ì„ ì‹œì‘í•˜ì„¸ìš”</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function analyzeKeyword() {
                const region = document.getElementById('region').value;
                const keyword = document.getElementById('keyword').value;

                if (!region || !keyword) {
                    alert('ì§€ì—­ê³¼ ì—…ì¢…ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”');
                    return;
                }

                // ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„°
                const searchVolume = Math.floor(Math.random() * 5000) + 1000;
                const competition = Math.floor(Math.random() * 100) + 20;
                const difficulty = competition > 70 ? 'ë†’ìŒ' : competition > 40 ? 'ë³´í†µ' : 'ë‚®ìŒ';

                document.getElementById('searchVolume').textContent = searchVolume.toLocaleString();
                document.getElementById('competition').textContent = competition + 'ê°œ';
                document.getElementById('difficulty').textContent = difficulty;

                const recommendations = [
                    { keyword: region + ' ' + keyword, score: 95 },
                    { keyword: region + ' ' + keyword + ' ì¶”ì²œ', score: 88 },
                    { keyword: region + ' ì´ˆë“± ' + keyword, score: 82 },
                    { keyword: region + ' ì¤‘ë“± ' + keyword, score: 78 },
                    { keyword: 'ê²€ë‹¨ ' + keyword, score: 75 }
                ];

                const recommendationsHTML = recommendations.map(item => \`
                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition">
                        <div>
                            <div class="font-medium text-gray-900">\${item.keyword}</div>
                            <div class="text-sm text-gray-500">ì¶”ì²œë„: \${item.score}ì </div>
                        </div>
                        <div class="text-purple-600 font-bold">\${item.score}</div>
                    </div>
                \`).join('');

                document.getElementById('recommendations').innerHTML = recommendationsHTML;
                document.getElementById('empty').classList.add('hidden');
                document.getElementById('result').classList.remove('hidden');
            }
        <\/script>
    </body>
    </html>
  `));d.get("/tools/blog-title-generator",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë¸”ë¡œê·¸ ì œëª© ìƒì„±ê¸° - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-5xl mx-auto px-6 py-12">
            <div class="mb-8">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">
                    <i class="fas fa-lightbulb text-purple-600 mr-3"></i>
                    ë¸”ë¡œê·¸ ì œëª© ìƒì„±ê¸°
                </h1>
                <p class="text-xl text-gray-600">í´ë¦­ë¥ ì„ ë†’ì´ëŠ” ë§¤ë ¥ì ì¸ ë¸”ë¡œê·¸ ì œëª©ì„ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤</p>
            </div>

            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-8">
                <div class="mb-8">
                    <label class="block text-sm font-medium text-gray-900 mb-3">ì£¼ì œ ì…ë ¥</label>
                    <input type="text" id="topic" placeholder="ì˜ˆ: ì´ˆë“±ì˜ì–´ í•™ìŠµë²•" 
                           class="w-full px-6 py-4 text-lg border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                </div>

                <div class="mb-8 grid md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-900 mb-2">í†¤ì•¤ë§¤ë„ˆ</label>
                        <select id="tone" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                            <option value="professional">ì „ë¬¸ì ì¸</option>
                            <option value="friendly">ì¹œê·¼í•œ</option>
                            <option value="exciting">í¥ë¯¸ë¡œìš´</option>
                            <option value="urgent">ê¸´ê¸‰í•œ</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-900 mb-2">íƒ€ê²Ÿ</label>
                        <select id="target" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                            <option value="parents">í•™ë¶€ëª¨</option>
                            <option value="students">í•™ìƒ</option>
                            <option value="teachers">ì„ ìƒë‹˜</option>
                            <option value="general">ì¼ë°˜</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-900 mb-2">ê°œìˆ˜</label>
                        <select id="count" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                            <option value="5">5ê°œ</option>
                            <option value="10" selected>10ê°œ</option>
                            <option value="15">15ê°œ</option>
                            <option value="20">20ê°œ</option>
                        </select>
                    </div>
                </div>

                <button onclick="generateTitles()" 
                        class="w-full gradient-purple text-white py-4 rounded-xl text-lg font-bold hover:shadow-lg transition">
                    <i class="fas fa-magic mr-2"></i>ì œëª© ìƒì„±í•˜ê¸°
                </button>

                <div id="results" class="mt-8 hidden">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">ìƒì„±ëœ ì œëª©</h3>
                    <div id="titleList" class="space-y-3"></div>
                </div>
            </div>

            <div class="mt-8 bg-gradient-to-r from-purple-50 to-blue-50 rounded-2xl p-8">
                <h3 class="text-xl font-bold text-gray-900 mb-4">ğŸ’¡ ì¢‹ì€ ë¸”ë¡œê·¸ ì œëª©ì˜ ì¡°ê±´</h3>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-bold text-purple-600 mb-2">âœ“ í¬í•¨í•´ì•¼ í•  ìš”ì†Œ</h4>
                        <ul class="space-y-1 text-sm text-gray-700">
                            <li>â€¢ êµ¬ì²´ì ì¸ ìˆ«ìë‚˜ ìˆ˜ì¹˜</li>
                            <li>â€¢ íƒ€ê²Ÿ ë…ìì¸µ ëª…ì‹œ</li>
                            <li>â€¢ ëª…í™•í•œ í˜œíƒ ì œì‹œ</li>
                            <li>â€¢ ê¶ê¸ˆì¦ì„ ìœ ë°œí•˜ëŠ” ë¬¸êµ¬</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-orange-600 mb-2">âœ— í”¼í•´ì•¼ í•  ìš”ì†Œ</h4>
                        <ul class="space-y-1 text-sm text-gray-700">
                            <li>â€¢ ê³¼ì¥ëœ í‘œí˜„ ë‚¨ë°œ</li>
                            <li>â€¢ ë„ˆë¬´ ê¸´ ì œëª© (50ì ì´ìƒ)</li>
                            <li>â€¢ ëª¨í˜¸í•˜ê³  ì¶”ìƒì ì¸ ë‹¨ì–´</li>
                            <li>â€¢ í´ë¦­ë² ì´íŠ¸ì„± ì œëª©</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function generateTitles() {
                const topic = document.getElementById('topic').value;
                const count = parseInt(document.getElementById('count').value);

                if (!topic) {
                    alert('ì£¼ì œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
                    return;
                }

                const templates = [
                    \`\${topic}, ì´ë ‡ê²Œ í•˜ë©´ ì„±ê³µí•©ë‹ˆë‹¤\`,
                    \`\${topic} ì™„ë²½ ê°€ì´ë“œ (2025ë…„ ìµœì‹ )\`,
                    \`\${topic} ì²˜ìŒ ì‹œì‘í•˜ëŠ” ë¶„ë“¤ì„ ìœ„í•œ 5ë‹¨ê³„\`,
                    \`ì „ë¬¸ê°€ê°€ ì•Œë ¤ì£¼ëŠ” \${topic} í•µì‹¬ ì „ëµ\`,
                    \`\${topic} ì‹¤ìˆ˜í•˜ì§€ ì•ŠëŠ” ë°©ë²• 7ê°€ì§€\`,
                    \`\${topic}ë¡œ ì„±ê³¼ 200% ë†’ì´ëŠ” ë²•\`,
                    \`í•™ë¶€ëª¨ê°€ ê¼­ ì•Œì•„ì•¼ í•  \${topic} ì •ë³´\`,
                    \`\${topic} íš¨ê³¼ ê·¹ëŒ€í™”í•˜ëŠ” ê¿€íŒ\`,
                    \`\${topic} ì „ì— ë°˜ë“œì‹œ ì•Œì•„ì•¼ í•  ê²ƒë“¤\`,
                    \`\${topic} ì„±ê³µ ì‚¬ë¡€ì™€ ë…¸í•˜ìš° ëŒ€ê³µê°œ\`,
                    \`ì™œ \${topic}ì´ ì¤‘ìš”í•œê°€? (ì‹¤ì „ ê²½í—˜ë‹´)\`,
                    \`\${topic} ë¹„ìš©ë¶€í„° íš¨ê³¼ê¹Œì§€ ì™„ë²½ ë¶„ì„\`,
                    \`\${topic} ê³ ë¯¼ í•´ê²°! ì „ë¬¸ê°€ Q&A\`,
                    \`\${topic} 1ë“±ì˜ ë¹„ë°€, ì´ê²ƒ ë•Œë¬¸ì´ì—ˆì–´ìš”\`,
                    \`\${topic} ì‹œì‘ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸ 10ê°€ì§€\`,
                    \`\${topic}ì˜ ëª¨ë“  ê²ƒ A to Z\`,
                    \`\${topic} ì‹¤ì „ ì ìš© í›„ê¸° (ì†”ì§ ë¦¬ë·°)\`,
                    \`\${topic}, ì´ ë°©ë²•ìœ¼ë¡œ ë°”ë¡œ ì‹œì‘í•˜ì„¸ìš”\`,
                    \`\${topic} ì „ë¬¸ê°€ê°€ ì¶”ì²œí•˜ëŠ” ìµœê³ ì˜ ë°©ë²•\`,
                    \`\${topic} ì„±ê³µë¥  ë†’ì´ëŠ” 3ê°€ì§€ ì›ì¹™\`
                ];

                const selectedTitles = templates.sort(() => 0.5 - Math.random()).slice(0, count);

                const titlesHTML = selectedTitles.map((title, index) => \`
                    <div class="flex items-start gap-4 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition group">
                        <div class="flex-shrink-0 w-8 h-8 gradient-purple rounded-lg flex items-center justify-center text-white font-bold text-sm">
                            \${index + 1}
                        </div>
                        <div class="flex-1">
                            <div class="text-gray-900 font-medium">\${title}</div>
                            <div class="text-xs text-gray-500 mt-1">\${title.length}ì</div>
                        </div>
                        <button onclick="copyTitle('\${title.replace(/'/g, "\\\\'")}', this)" 
                                class="flex-shrink-0 px-4 py-2 text-sm text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition opacity-0 group-hover:opacity-100">
                            <i class="fas fa-copy mr-1"></i>ë³µì‚¬
                        </button>
                    </div>
                \`).join('');

                document.getElementById('titleList').innerHTML = titlesHTML;
                document.getElementById('results').classList.remove('hidden');
            }

            function copyTitle(title, button) {
                navigator.clipboard.writeText(title).then(() => {
                    const originalText = button.innerHTML;
                    button.innerHTML = '<i class="fas fa-check mr-1"></i>ë³µì‚¬ë¨';
                    button.classList.add('text-green-600');
                    setTimeout(() => {
                        button.innerHTML = originalText;
                        button.classList.remove('text-green-600');
                    }, 2000);
                });
            }
        <\/script>
    </body>
    </html>
  `));d.get("/tools/consultation-calendar",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ìƒë‹´ ì˜ˆì•½ ìº˜ë¦°ë” - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            .calendar-day { min-height: 100px; }
            .time-slot { cursor: pointer; transition: all 0.2s; }
            .time-slot:hover { transform: scale(1.05); }
            .time-slot.selected { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-7xl mx-auto px-6 py-12">
            <div class="mb-8">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">
                    <i class="fas fa-calendar-check text-purple-600 mr-3"></i>
                    ìƒë‹´ ì˜ˆì•½ ìº˜ë¦°ë”
                </h1>
                <p class="text-xl text-gray-600">ì›í•˜ì‹œëŠ” ë‚ ì§œì™€ ì‹œê°„ì„ ì„ íƒí•˜ì—¬ ë¬´ë£Œ ìƒë‹´ì„ ì˜ˆì•½í•˜ì„¸ìš”</p>
            </div>

            <div class="grid lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-8">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-2xl font-bold text-gray-900">2025ë…„ 1ì›”</h2>
                            <div class="flex gap-2">
                                <button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>

                        <div class="grid grid-cols-7 gap-2 mb-4">
                            <div class="text-center text-sm font-medium text-red-500 py-2">ì¼</div>
                            <div class="text-center text-sm font-medium text-gray-600 py-2">ì›”</div>
                            <div class="text-center text-sm font-medium text-gray-600 py-2">í™”</div>
                            <div class="text-center text-sm font-medium text-gray-600 py-2">ìˆ˜</div>
                            <div class="text-center text-sm font-medium text-gray-600 py-2">ëª©</div>
                            <div class="text-center text-sm font-medium text-gray-600 py-2">ê¸ˆ</div>
                            <div class="text-center text-sm font-medium text-blue-500 py-2">í† </div>
                        </div>

                        <div class="grid grid-cols-7 gap-2" id="calendar"></div>

                        <div class="mt-8">
                            <h3 class="text-lg font-bold text-gray-900 mb-4">ì˜ˆì•½ ê°€ëŠ¥ ì‹œê°„</h3>
                            <div id="timeSlots" class="grid grid-cols-4 gap-3"></div>
                        </div>
                    </div>
                </div>

                <div class="lg:col-span-1">
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 sticky top-24">
                        <h2 class="text-xl font-bold text-gray-900 mb-6">ì˜ˆì•½ ì •ë³´</h2>
                        
                        <div class="space-y-4 mb-6">
                            <div class="p-4 bg-purple-50 rounded-xl">
                                <div class="text-sm text-gray-600 mb-1">ì„ íƒí•œ ë‚ ì§œ</div>
                                <div class="font-bold text-gray-900" id="selectedDate">ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
                            </div>

                            <div class="p-4 bg-purple-50 rounded-xl">
                                <div class="text-sm text-gray-600 mb-1">ì„ íƒí•œ ì‹œê°„</div>
                                <div class="font-bold text-gray-900" id="selectedTime">ì‹œê°„ì„ ì„ íƒí•˜ì„¸ìš”</div>
                            </div>
                        </div>

                        <div class="space-y-3 mb-6">
                            <input type="text" id="name" placeholder="ì´ë¦„" 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                            <input type="tel" id="phone" placeholder="ì—°ë½ì²˜" 
                                   class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                            <textarea id="message" placeholder="ë¬¸ì˜ ë‚´ìš©" rows="3"
                                      class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 outline-none resize-none"></textarea>
                        </div>

                        <button onclick="submitReservation()" 
                                class="w-full gradient-purple text-white py-4 rounded-xl font-bold hover:shadow-lg transition">
                            <i class="fas fa-check mr-2"></i>ì˜ˆì•½í•˜ê¸°
                        </button>

                        <div class="mt-6 p-4 bg-blue-50 rounded-xl text-sm text-blue-800">
                            <i class="fas fa-info-circle mr-2"></i>
                            ìƒë‹´ì€ ì•½ 30ë¶„ ì†Œìš”ë©ë‹ˆë‹¤
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            let selectedDate = null;
            let selectedTimeSlot = null;

            function generateCalendar() {
                const calendar = document.getElementById('calendar');
                const today = new Date();
                const daysInMonth = 31;
                const startDay = 3; // 1ì›” 1ì¼ì´ ìˆ˜ìš”ì¼

                let html = '';
                for (let i = 0; i < startDay; i++) {
                    html += '<div></div>';
                }

                for (let day = 1; day <= daysInMonth; day++) {
                    const isPast = day < today.getDate();
                    const isToday = day === today.getDate();
                    
                    html += \`
                        <div onclick="selectDate(\${day})" 
                             class="calendar-day border border-gray-200 rounded-lg p-2 text-center cursor-pointer hover:border-purple-400 transition \${isPast ? 'bg-gray-100 cursor-not-allowed' : ''} \${isToday ? 'border-purple-600 bg-purple-50' : ''}">
                            <div class="font-medium \${isPast ? 'text-gray-400' : 'text-gray-900'}">\${day}</div>
                            \${!isPast ? '<div class="text-xs text-green-600 mt-1">ì˜ˆì•½ê°€ëŠ¥</div>' : ''}
                        </div>
                    \`;
                }

                calendar.innerHTML = html;
            }

            function selectDate(day) {
                const today = new Date();
                if (day < today.getDate()) return;

                selectedDate = \`2025ë…„ 1ì›” \${day}ì¼\`;
                document.getElementById('selectedDate').textContent = selectedDate;

                const timeSlots = document.getElementById('timeSlots');
                const times = ['10:00', '11:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00'];
                
                timeSlots.innerHTML = times.map(time => \`
                    <button onclick="selectTime('\${time}')" 
                            class="time-slot px-4 py-3 border-2 border-gray-200 rounded-lg text-sm font-medium hover:border-purple-400 transition">
                        \${time}
                    </button>
                \`).join('');
            }

            function selectTime(time) {
                selectedTimeSlot = time;
                document.getElementById('selectedTime').textContent = time;

                document.querySelectorAll('.time-slot').forEach(slot => {
                    slot.classList.remove('selected');
                });
                event.target.classList.add('selected');
            }

            function submitReservation() {
                const name = document.getElementById('name').value;
                const phone = document.getElementById('phone').value;

                if (!selectedDate || !selectedTimeSlot) {
                    alert('ë‚ ì§œì™€ ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”');
                    return;
                }

                if (!name || !phone) {
                    alert('ì´ë¦„ê³¼ ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
                    return;
                }

                alert(\`ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\\n\\në‚ ì§œ: \${selectedDate}\\nì‹œê°„: \${selectedTimeSlot}\\nì´ë¦„: \${name}\`);
            }

            generateCalendar();
        <\/script>
    </body>
    </html>
  `));d.get("/tools/promo-generator",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í•™ì› í™ë³´ ë¬¸êµ¬ ìƒì„±ê¸° - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-4xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">
                <i class="fas fa-bullhorn text-purple-600 mr-3"></i>í•™ì› í™ë³´ ë¬¸êµ¬ ìƒì„±ê¸°
            </h1>
            <p class="text-xl text-gray-600 mb-8">í•™ìƒ ëª¨ì§‘ì— íš¨ê³¼ì ì¸ í™ë³´ ë¬¸êµ¬ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤</p>

            <div class="bg-white rounded-2xl shadow-sm border p-8 mb-8">
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">í•™ì› ìœ í˜•</label>
                        <select id="type" class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                            <option>ì˜ì–´í•™ì›</option>
                            <option>ìˆ˜í•™í•™ì›</option>
                            <option>ê³¼í•™í•™ì›</option>
                            <option>ë…¼ìˆ í•™ì›</option>
                            <option>ì…ì‹œí•™ì›</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">íƒ€ê²Ÿ í•™ë…„</label>
                        <select id="grade" class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                            <option>ì´ˆë“±</option>
                            <option>ì¤‘ë“±</option>
                            <option>ê³ ë“±</option>
                            <option>ì „í•™ë…„</option>
                        </select>
                    </div>
                </div>
                <button onclick="generate()" class="w-full gradient-purple text-white py-4 rounded-xl font-bold">
                    <i class="fas fa-magic mr-2"></i>ë¬¸êµ¬ ìƒì„±í•˜ê¸°
                </button>
            </div>

            <div id="results" class="hidden space-y-4"></div>
        </div>

        <script>
            function generate() {
                const type = document.getElementById('type').value;
                const grade = document.getElementById('grade').value;
                const templates = [
                    \`\${grade} \${type} 1ë“±ì˜ ë¹„ê²°, ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•˜ì„¸ìš”!\`,
                    \`\${grade}ìƒ ì„±ì  í–¥ìƒ í”„ë¡œê·¸ë¨ ë¬´ë£Œ ì²´í—˜ ì´ë²¤íŠ¸\`,
                    \`ì†Œìˆ˜ ì •ì˜ˆ \${grade} \${type} - 1:1 ë§ì¶¤ ê´€ë¦¬\`,
                    \`\${grade} ë‚´ì‹ Â·ìˆ˜ëŠ¥ ì™„ë²½ ëŒ€ë¹„ \${type}\`,
                    \`í•©ê²©ë¥  98%! \${grade} ì „ë¬¸ \${type}\`,
                    \`\${grade} \${type} ê²¨ìš¸ë°©í•™ íŠ¹ê°• ëª¨ì§‘ ì¤‘\`,
                    \`\${grade}ìƒ í•™ë¶€ëª¨ë‹˜, ì„±ì  ê±±ì • ë! ê²€ì¦ëœ ì»¤ë¦¬í˜ëŸ¼\`,
                    \`\${grade} \${type} ì‹ ê·œ ì˜¤í”ˆ ì´ë²¤íŠ¸ - ì²«ë‹¬ 50% í• ì¸\`,
                    \`\${grade}ìƒ ì „ë¬¸ ê°•ì‚¬ì§„ì˜ 1:1 ì¼€ì–´ ì‹œìŠ¤í…œ\`,
                    \`\${grade} \${type} ì„±ì  ë³´ì¥ë°˜ ìš´ì˜ ì¤‘\`
                ];

                const html = templates.map((text, i) => \`
                    <div class="bg-white rounded-xl p-6 shadow-sm border">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="text-sm text-purple-600 font-medium mb-2">í™ë³´ ë¬¸êµ¬ \${i+1}</div>
                                <div class="text-lg font-medium text-gray-900">\${text}</div>
                            </div>
                            <button onclick="copy('\${text.replace(/'/g, "\\\\'")}', this)" 
                                    class="px-4 py-2 text-sm text-purple-600 hover:bg-purple-50 rounded-lg">
                                <i class="fas fa-copy"></i> ë³µì‚¬
                            </button>
                        </div>
                    </div>
                \`).join('');

                document.getElementById('results').innerHTML = html;
                document.getElementById('results').classList.remove('hidden');
            }

            function copy(text, btn) {
                navigator.clipboard.writeText(text);
                btn.innerHTML = '<i class="fas fa-check"></i> ë³µì‚¬ë¨';
                setTimeout(() => btn.innerHTML = '<i class="fas fa-copy"></i> ë³µì‚¬', 2000);
            }
        <\/script>
    </body>
    </html>
  `));d.get("/tools/review-template",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë¦¬ë·° ë‹µë³€ í…œí”Œë¦¿ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-4xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">
                <i class="fas fa-comment-dots text-purple-600 mr-3"></i>ë¦¬ë·° ë‹µë³€ í…œí”Œë¦¿
            </h1>
            <p class="text-xl text-gray-600 mb-8">ê¸ì •/ë¶€ì • ë¦¬ë·°ì— ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ì „ë¬¸ì ì¸ ë‹µë³€ í…œí”Œë¦¿</p>

            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white rounded-2xl p-6 shadow-sm border">
                    <h2 class="text-xl font-bold text-green-600 mb-4">
                        <i class="fas fa-smile mr-2"></i>ê¸ì • ë¦¬ë·° ë‹µë³€
                    </h2>
                    <div class="space-y-4">
                        ${["ê°ì‚¬í•©ë‹ˆë‹¤! ì•ìœ¼ë¡œë„ ìµœì„ ì„ ë‹¤í•˜ê² ìŠµë‹ˆë‹¤.","ì†Œì¤‘í•œ í›„ê¸° ê°ì‚¬ë“œë¦½ë‹ˆë‹¤. ë”ìš± ë°œì „í•˜ëŠ” í•™ì›ì´ ë˜ê² ìŠµë‹ˆë‹¤.","ì•„ì´ë“¤ì˜ ì„±ì¥ì´ ì €í¬ì˜ ê°€ì¥ í° ë³´ëŒì…ë‹ˆë‹¤. í•­ìƒ ì‘ì›í•´ì£¼ì„¸ìš”!"].map((t,s)=>`
                            <div class="p-4 bg-green-50 rounded-xl">
                                <div class="text-sm text-gray-600 mb-2">í…œí”Œë¦¿ ${s+1}</div>
                                <div class="text-gray-900">${t}</div>
                                <button onclick="copyText('${t}')" class="mt-2 text-sm text-green-600 hover:underline">
                                    <i class="fas fa-copy"></i> ë³µì‚¬
                                </button>
                            </div>
                        `).join("")}
                    </div>
                </div>

                <div class="bg-white rounded-2xl p-6 shadow-sm border">
                    <h2 class="text-xl font-bold text-orange-600 mb-4">
                        <i class="fas fa-frown mr-2"></i>ë¶€ì • ë¦¬ë·° ë‹µë³€
                    </h2>
                    <div class="space-y-4">
                        ${["ì†Œì¤‘í•œ ì˜ê²¬ ê°ì‚¬í•©ë‹ˆë‹¤. ë” ë‚˜ì€ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ë„ë¡ ë…¸ë ¥í•˜ê² ìŠµë‹ˆë‹¤.","ë¶ˆí¸ì„ ë“œë ¤ ì£„ì†¡í•©ë‹ˆë‹¤. ë¹ ë¥´ê²Œ ê°œì„ í•˜ê² ìŠµë‹ˆë‹¤.","ì „í™” ì£¼ì‹œë©´ ìì„¸íˆ ìƒë‹´ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤."].map((t,s)=>`
                            <div class="p-4 bg-orange-50 rounded-xl">
                                <div class="text-sm text-gray-600 mb-2">í…œí”Œë¦¿ ${s+1}</div>
                                <div class="text-gray-900">${t}</div>
                                <button onclick="copyText('${t}')" class="mt-2 text-sm text-orange-600 hover:underline">
                                    <i class="fas fa-copy"></i> ë³µì‚¬
                                </button>
                            </div>
                        `).join("")}
                    </div>
                </div>
            </div>
        </div>

        <script>
            function copyText(text) {
                navigator.clipboard.writeText(text);
                alert('ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        <\/script>
    </body>
    </html>
  `));d.get("/tools/parent-sms-template",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í•™ë¶€ëª¨ ë¬¸ì í…œí”Œë¦¿ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-5xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold mb-4">
                <i class="fas fa-sms text-purple-600 mr-3"></i>í•™ë¶€ëª¨ ë¬¸ì ë©”ì‹œì§€ í…œí”Œë¦¿
            </h1>
            <p class="text-xl text-gray-600 mb-8">ìƒí™©ë³„ë¡œ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ í•™ë¶€ëª¨ ë¬¸ì í…œí”Œë¦¿</p>

            <div class="grid md:grid-cols-3 gap-6">
                ${[{title:"ì„±ì  í–¥ìƒ ì•ˆë‚´",icon:"chart-line",color:"green",messages:["ì•ˆë…•í•˜ì„¸ìš”. ì´ë²ˆ ì‹œí—˜ì—ì„œ ìˆ˜í•™ ì„±ì ì´ ë§ì´ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤! ì•ìœ¼ë¡œë„ ì‘ì› ë¶€íƒë“œë¦½ë‹ˆë‹¤.","í•™ìƒì˜ ê¾¸ì¤€í•œ ë…¸ë ¥ìœ¼ë¡œ ì„±ì ì´ ì˜¬ëìŠµë‹ˆë‹¤. ì¶•í•˜ë“œë¦½ë‹ˆë‹¤!","ì´ë²ˆ ë‹¬ í•™ìŠµ ì§„ë„ê°€ ìš°ìˆ˜í•©ë‹ˆë‹¤. ê³„ì† ì‘ì›í•´ì£¼ì„¸ìš”."]},{title:"ê²°ì„ í™•ì¸",icon:"calendar-times",color:"orange",messages:["ì•ˆë…•í•˜ì„¸ìš”. ì˜¤ëŠ˜ ìˆ˜ì—…ì— ë¶ˆì°¸í•˜ì…¨ëŠ”ë° ê´œì°®ìœ¼ì‹ ê°€ìš”?","ê²°ì„ ì‚¬ìœ  í™•ì¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤. ë³´ê°• ìˆ˜ì—… ì•ˆë‚´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.","ìˆ˜ì—… ë¶ˆì°¸ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ê±´ê°• ìƒíƒœ ê´œì°®ìœ¼ì‹ ì§€ìš”?"]},{title:"ì´ë²¤íŠ¸ ì•ˆë‚´",icon:"gift",color:"purple",messages:["[ì´ë²¤íŠ¸] ì¹œêµ¬ ì¶”ì²œ ì‹œ ìƒí’ˆê¶Œ ì¦ì •! ìì„¸í•œ ë‚´ìš©ì€ í•™ì›ìœ¼ë¡œ ë¬¸ì˜ì£¼ì„¸ìš”.","ê²¨ìš¸ë°©í•™ íŠ¹ê°• ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤. ì¡°ê¸° ë“±ë¡ ì‹œ í• ì¸ í˜œíƒ!","í•™ë¶€ëª¨ ìƒë‹´ ì£¼ê°„ ìš´ì˜ ì¤‘ì…ë‹ˆë‹¤. ì˜ˆì•½ ë¶€íƒë“œë¦½ë‹ˆë‹¤."]}].map(t=>`
                    <div class="bg-white rounded-2xl p-6 shadow-sm border">
                        <h2 class="text-lg font-bold text-${t.color}-600 mb-4">
                            <i class="fas fa-${t.icon} mr-2"></i>${t.title}
                        </h2>
                        <div class="space-y-3">
                            ${t.messages.map((s,r)=>`
                                <div class="p-3 bg-gray-50 rounded-lg text-sm">
                                    <div class="text-gray-900 mb-2">${s}</div>
                                    <button onclick="copy('${s.replace(/'/g,"\\\\'")}', this)" 
                                            class="text-xs text-purple-600 hover:underline">
                                        ë³µì‚¬í•˜ê¸°
                                    </button>
                                </div>
                            `).join("")}
                        </div>
                    </div>
                `).join("")}
            </div>
        </div>

        <script>
            function copy(text, btn) {
                navigator.clipboard.writeText(text);
                btn.textContent = 'ë³µì‚¬ë¨!';
                setTimeout(() => btn.textContent = 'ë³µì‚¬í•˜ê¸°', 2000);
            }
        <\/script>
    </body>
    </html>
  `));d.get("/tools/poster-generator",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í•™ì› í¬ìŠ¤í„° ë¬¸êµ¬ ìƒì„±ê¸° - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            .poster-preview { aspect-ratio: 3/4; }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-6xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold mb-4">
                <i class="fas fa-image text-purple-600 mr-3"></i>í•™ì› í¬ìŠ¤í„° ë¬¸êµ¬ ìƒì„±ê¸°
            </h1>
            <p class="text-xl text-gray-600 mb-8">ëˆˆì— ë„ëŠ” í•™ì› í™ë³´ í¬ìŠ¤í„° ë¬¸êµ¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤</p>

            <div class="grid lg:grid-cols-2 gap-8">
                <div class="bg-white rounded-2xl p-8 shadow-sm">
                    <h2 class="text-xl font-bold mb-6">í¬ìŠ¤í„° ì„¤ì •</h2>
                    <div class="space-y-4 mb-6">
                        <input type="text" id="title" placeholder="ë©”ì¸ ë¬¸êµ¬ (ì˜ˆ: ê²¨ìš¸ë°©í•™ íŠ¹ê°•)" 
                               class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                        <input type="text" id="subtitle" placeholder="ë¶€ì œëª© (ì˜ˆ: ì„±ì  í–¥ìƒ ë³´ì¥)" 
                               class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                        <input type="text" id="discount" placeholder="í• ì¸ìœ¨ (ì˜ˆ: 30% í• ì¸)" 
                               class="w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-purple-500 outline-none">
                    </div>
                    <button onclick="generatePoster()" class="w-full gradient-purple text-white py-4 rounded-xl font-bold">
                        í¬ìŠ¤í„° ë¯¸ë¦¬ë³´ê¸°
                    </button>
                </div>

                <div class="bg-white rounded-2xl p-8 shadow-sm">
                    <h2 class="text-xl font-bold mb-6">ë¯¸ë¦¬ë³´ê¸°</h2>
                    <div id="preview" class="poster-preview bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl p-8 flex flex-col justify-center items-center text-white">
                        <div class="text-center">
                            <div id="previewTitle" class="text-4xl font-bold mb-4">ê²¨ìš¸ë°©í•™ íŠ¹ê°•</div>
                            <div id="previewSubtitle" class="text-2xl mb-4">ì„±ì  í–¥ìƒ ë³´ì¥</div>
                            <div id="previewDiscount" class="text-5xl font-bold mb-4">30% í• ì¸</div>
                            <div class="text-lg">ìŠˆí¼í”Œë ˆì´ìŠ¤ í•™ì›</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function generatePoster() {
                const title = document.getElementById('title').value || 'ê²¨ìš¸ë°©í•™ íŠ¹ê°•';
                const subtitle = document.getElementById('subtitle').value || 'ì„±ì  í–¥ìƒ ë³´ì¥';
                const discount = document.getElementById('discount').value || '30% í• ì¸';

                document.getElementById('previewTitle').textContent = title;
                document.getElementById('previewSubtitle').textContent = subtitle;
                document.getElementById('previewDiscount').textContent = discount;
            }
        <\/script>
    </body>
    </html>
  `));d.get("/tools/competitor-analysis",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ê²½ìŸì‚¬ ë¶„ì„ ë„êµ¬ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-7xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold mb-4">
                <i class="fas fa-chart-bar text-purple-600 mr-3"></i>ê²½ìŸì‚¬ ë¶„ì„ ë„êµ¬
            </h1>
            <p class="text-xl text-gray-600 mb-8">ì£¼ë³€ í•™ì› ì •ë³´ë¥¼ ë¶„ì„í•˜ì—¬ ì°¨ë³„í™” ì „ëµì„ ìˆ˜ë¦½í•˜ì„¸ìš”</p>

            <div class="grid lg:grid-cols-3 gap-6">
                <div class="bg-white rounded-2xl p-6 shadow-sm">
                    <h2 class="text-lg font-bold mb-4">
                        <i class="fas fa-map-marker-alt text-purple-600 mr-2"></i>ì§€ì—­ ê²€ìƒ‰
                    </h2>
                    <input type="text" id="location" placeholder="ì˜ˆ: ì¸ì²œ ì„œêµ¬" 
                           class="w-full px-4 py-3 border rounded-xl mb-4 focus:ring-2 focus:ring-purple-500 outline-none">
                    <button onclick="analyze()" class="w-full gradient-purple text-white py-3 rounded-xl font-bold">
                        ë¶„ì„ ì‹œì‘
                    </button>
                </div>

                <div class="lg:col-span-2 bg-white rounded-2xl p-6 shadow-sm">
                    <h2 class="text-lg font-bold mb-4">ë¶„ì„ ê²°ê³¼</h2>
                    <div id="results" class="space-y-4">
                        <div class="text-center py-12 text-gray-500">
                            ì§€ì—­ì„ ì…ë ¥í•˜ê³  ë¶„ì„ì„ ì‹œì‘í•˜ì„¸ìš”
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            function analyze() {
                const location = document.getElementById('location').value;
                if (!location) {
                    alert('ì§€ì—­ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
                    return;
                }

                const data = [
                    { name: 'A ì˜ì–´í•™ì›', rating: 4.5, reviews: 120, price: 'ì¤‘ê°„' },
                    { name: 'B í•™ì›', rating: 4.2, reviews: 85, price: 'ë†’ìŒ' },
                    { name: 'C ì˜ì–´', rating: 4.7, reviews: 200, price: 'ë‚®ìŒ' }
                ];

                const html = data.map(item => \`
                    <div class="p-4 border rounded-xl hover:border-purple-400 transition">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg">\${item.name}</h3>
                            <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm">
                                â­ \${item.rating}
                            </span>
                        </div>
                        <div class="text-sm text-gray-600 space-y-1">
                            <div>ë¦¬ë·°: \${item.reviews}ê°œ</div>
                            <div>ê°€ê²©ëŒ€: \${item.price}</div>
                        </div>
                    </div>
                \`).join('');

                document.getElementById('results').innerHTML = html;
            }
        <\/script>
    </body>
    </html>
  `));d.get("/tools/operation-checklist",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í•™ì› ìš´ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-4xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold mb-4">
                <i class="fas fa-tasks text-purple-600 mr-3"></i>í•™ì› ìš´ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸
            </h1>
            <p class="text-xl text-gray-600 mb-8">ë§¤ì¼ í™•ì¸í•´ì•¼ í•  í•„ìˆ˜ ì²´í¬ë¦¬ìŠ¤íŠ¸</p>

            <div class="space-y-6">
                ${[{title:"ì˜¤ì „ ì—…ë¬´",items:["êµì‹¤ ì²­ì†Œ ë° í™˜ê¸°","í•™ìƒ ì¶œê²° í™•ì¸","ì˜¤ëŠ˜ì˜ ìˆ˜ì—… ìë£Œ ì¤€ë¹„","í•™ë¶€ëª¨ ë¬¸ì˜ ë‹µë³€"]},{title:"ìˆ˜ì—… ì¤‘",items:["í•™ìƒ ì§‘ì¤‘ë„ ì²´í¬","ìˆ™ì œ ê²€ì‚¬","ì´í•´ë„ í™•ì¸","ë³´ì¶© í•„ìš” í•™ìƒ íŒŒì•…"]},{title:"ìˆ˜ì—… í›„",items:["ì˜¤ëŠ˜ì˜ ì§„ë„ ê¸°ë¡","í•™ë¶€ëª¨ ìƒë‹´ ì˜ˆì•½","ë‹¤ìŒ ìˆ˜ì—… ì¤€ë¹„","ì‹œì„¤ ì ê²€"]}].map(t=>`
                    <div class="bg-white rounded-2xl p-6 shadow-sm">
                        <h2 class="text-xl font-bold text-purple-600 mb-4">
                            <i class="fas fa-clock mr-2"></i>${t.title}
                        </h2>
                        <div class="space-y-3">
                            ${t.items.map((s,r)=>`
                                <label class="flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg cursor-pointer">
                                    <input type="checkbox" class="w-5 h-5 text-purple-600 rounded">
                                    <span class="text-gray-900">${s}</span>
                                </label>
                            `).join("")}
                        </div>
                    </div>
                `).join("")}
            </div>

            <div class="mt-8 text-center">
                <button onclick="resetAll()" class="px-8 py-3 bg-gray-200 text-gray-700 rounded-xl font-bold hover:bg-gray-300">
                    ì „ì²´ ì´ˆê¸°í™”
                </button>
            </div>
        </div>

        <script>
            function resetAll() {
                document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            }
        <\/script>
    </body>
    </html>
  `));d.get("/tools/campaign-planner",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë§ˆì¼€íŒ… ìº í˜ì¸ í”Œë˜ë„ˆ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/tools" class="text-gray-600 hover:text-purple-600">â† íˆ´ ëª©ë¡</a>
                </div>
            </div>
        </nav>

        <div class="max-w-5xl mx-auto px-6 py-12">
            <h1 class="text-4xl font-bold mb-4">
                <i class="fas fa-calendar-alt text-purple-600 mr-3"></i>ë§ˆì¼€íŒ… ìº í˜ì¸ í”Œë˜ë„ˆ
            </h1>
            <p class="text-xl text-gray-600 mb-8">ì›”ë³„ ë§ˆì¼€íŒ… ìº í˜ì¸ì„ ì²´ê³„ì ìœ¼ë¡œ ê³„íší•˜ì„¸ìš”</p>

            <div class="bg-white rounded-2xl p-8 shadow-sm mb-8">
                <h2 class="text-2xl font-bold mb-6">2025ë…„ ì—°ê°„ ìº í˜ì¸ ê³„íš</h2>
                
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    ${[{month:"1ì›”",campaign:"ê²¨ìš¸ë°©í•™ íŠ¹ê°•",status:"active"},{month:"2ì›”",campaign:"ì‹ í•™ê¸° ì¤€ë¹„ë°˜",status:"planning"},{month:"3ì›”",campaign:"ë´„ ì‹ ê·œ ë“±ë¡ ì´ë²¤íŠ¸",status:"upcoming"},{month:"4ì›”",campaign:"ì¤‘ê°„ê³ ì‚¬ ëŒ€ë¹„ë°˜",status:"upcoming"},{month:"7ì›”",campaign:"ì—¬ë¦„ë°©í•™ ìº í”„",status:"upcoming"},{month:"12ì›”",campaign:"ì—°ë§ ê²°ì‚° ì´ë²¤íŠ¸",status:"upcoming"}].map(t=>`
                        <div class="p-6 border-2 ${t.status==="active"?"border-purple-500 bg-purple-50":"border-gray-200"} rounded-xl">
                            <div class="flex justify-between items-start mb-3">
                                <h3 class="font-bold text-lg">${t.month}</h3>
                                <span class="px-2 py-1 text-xs rounded-full ${t.status==="active"?"bg-purple-200 text-purple-700":t.status==="planning"?"bg-blue-200 text-blue-700":"bg-gray-200 text-gray-700"}">
                                    ${t.status==="active"?"ì§„í–‰ì¤‘":t.status==="planning"?"ì¤€ë¹„ì¤‘":"ì˜ˆì •"}
                                </span>
                            </div>
                            <p class="text-gray-700">${t.campaign}</p>
                            <button onclick="alert('ìº í˜ì¸ ìƒì„¸ í˜ì´ì§€')" 
                                    class="mt-4 w-full py-2 text-sm text-purple-600 border border-purple-300 rounded-lg hover:bg-purple-50">
                                ìì„¸íˆ ë³´ê¸°
                            </button>
                        </div>
                    `).join("")}
                </div>
            </div>

            <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-2xl p-8">
                <h3 class="text-xl font-bold mb-4">ğŸ’¡ íš¨ê³¼ì ì¸ ìº í˜ì¸ ì „ëµ</h3>
                <div class="grid md:grid-cols-3 gap-6">
                    <div>
                        <h4 class="font-bold text-purple-600 mb-2">íƒ€ì´ë°</h4>
                        <p class="text-sm text-gray-700">ë°©í•™ 2ì£¼ ì „ë¶€í„° í™ë³´ ì‹œì‘</p>
                    </div>
                    <div>
                        <h4 class="font-bold text-purple-600 mb-2">ì±„ë„</h4>
                        <p class="text-sm text-gray-700">ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤, ë¸”ë¡œê·¸, ë¬¸ì</p>
                    </div>
                    <div>
                        <h4 class="font-bold text-purple-600 mb-2">í˜œíƒ</h4>
                        <p class="text-sm text-gray-700">ì¡°ê¸° ë“±ë¡ í• ì¸ + ì‚¬ì€í’ˆ</p>
                    </div>
                </div>
            </div>
        </div>
    </body>
    </html>
  `));d.get("/tools",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë§ˆì¼€íŒ… íˆ´ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            .tool-card { transition: all 0.3s; }
            .tool-card:hover { transform: translateY(-4px); }
        </style>
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a>
                    <a href="/" class="text-gray-600 hover:text-purple-600">â† í™ˆìœ¼ë¡œ</a>
                </div>
            </div>
        </nav>

        <div class="max-w-7xl mx-auto px-6 py-12">
            <div class="text-center mb-12">
                <h1 class="text-5xl font-bold text-gray-900 mb-4">ë§ˆì¼€íŒ… íˆ´</h1>
                <p class="text-xl text-gray-600">í•™ì› ë§ˆì¼€íŒ…ì— í•„ìš”í•œ ëª¨ë“  ë„êµ¬ë¥¼ í•œ ê³³ì—ì„œ</p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                ${[{url:"/tools/landing-builder",icon:"rocket",title:"ëœë”©í˜ì´ì§€ ìƒì„±ê¸°",desc:"í•™ì› ë§ì¶¤ ëœë”©í˜ì´ì§€ ì œì‘",color:"purple"},{url:"/tools/place-keyword-analyzer",icon:"search",title:"ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ í‚¤ì›Œë“œ ë¶„ì„ê¸°",desc:"ìµœì ì˜ í‚¤ì›Œë“œë¡œ ìƒìœ„ ë…¸ì¶œ",color:"blue"},{url:"/tools/blog-title-generator",icon:"lightbulb",title:"ë¸”ë¡œê·¸ ì œëª© ìƒì„±ê¸°",desc:"í´ë¦­ë¥  ë†’ì€ ì œëª© ìë™ ìƒì„±",color:"orange"},{url:"/tools/consultation-calendar",icon:"calendar-check",title:"ìƒë‹´ ì˜ˆì•½ ìº˜ë¦°ë”",desc:"ê°„í¸í•œ ìƒë‹´ ì˜ˆì•½ ì‹œìŠ¤í…œ",color:"green"},{url:"/tools/promo-generator",icon:"bullhorn",title:"í•™ì› í™ë³´ ë¬¸êµ¬ ìƒì„±ê¸°",desc:"íš¨ê³¼ì ì¸ í™ë³´ ë¬¸êµ¬ ìƒì„±",color:"cyan"},{url:"/tools/review-template",icon:"comment-dots",title:"ë¦¬ë·° ë‹µë³€ í…œí”Œë¦¿",desc:"ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥í•œ ë‹µë³€",color:"pink"},{url:"/tools/parent-sms-template",icon:"sms",title:"í•™ë¶€ëª¨ ë¬¸ì í…œí”Œë¦¿",desc:"ìƒí™©ë³„ ë¬¸ì ë©”ì‹œì§€",color:"indigo"},{url:"/tools/poster-generator",icon:"image",title:"í¬ìŠ¤í„° ë¬¸êµ¬ ìƒì„±ê¸°",desc:"ëˆˆì— ë„ëŠ” í¬ìŠ¤í„° ì œì‘",color:"red"},{url:"/tools/competitor-analysis",icon:"chart-bar",title:"ê²½ìŸì‚¬ ë¶„ì„ ë„êµ¬",desc:"ì£¼ë³€ í•™ì› ì •ë³´ ë¶„ì„",color:"teal"},{url:"/tools/operation-checklist",icon:"tasks",title:"í•™ì› ìš´ì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸",desc:"í•„ìˆ˜ ì—…ë¬´ ê´€ë¦¬",color:"yellow"},{url:"/tools/campaign-planner",icon:"calendar-alt",title:"ë§ˆì¼€íŒ… ìº í˜ì¸ í”Œë˜ë„ˆ",desc:"ì—°ê°„ ìº í˜ì¸ ê³„íš",color:"emerald"}].map(t=>`
                    <a href="${t.url}" class="tool-card block bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hover:shadow-lg">
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-${t.color}-100 rounded-xl flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-${t.icon} text-${t.color}-600 text-xl"></i>
                            </div>
                            <div class="flex-1">
                                <h3 class="font-bold text-lg text-gray-900 mb-2">${t.title}</h3>
                                <p class="text-sm text-gray-600">${t.desc}</p>
                            </div>
                            <i class="fas fa-chevron-right text-gray-400"></i>
                        </div>
                    </a>
                `).join("")}
            </div>

            <div class="mt-12 text-center">
                <div class="inline-block bg-gradient-to-r from-purple-50 to-blue-50 rounded-2xl p-8">
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">
                        <i class="fas fa-rocket text-purple-600 mr-2"></i>
                        ë” ë§ì€ ê¸°ëŠ¥ì´ ê³„ì† ì¶”ê°€ë©ë‹ˆë‹¤!
                    </h3>
                    <p class="text-gray-600 mb-6">í•™ì› ìš´ì˜ì— í•„ìš”í•œ íˆ´ì´ ìˆë‹¤ë©´ ì œì•ˆí•´ì£¼ì„¸ìš”</p>
                    <a href="/contact" class="inline-block gradient-purple text-white px-8 py-4 rounded-xl font-bold hover:shadow-lg">
                        ê¸°ëŠ¥ ì œì•ˆí•˜ê¸°
                    </a>
                </div>
            </div>
        </div>
    </body>
    </html>
  `));d.get("/admin",async e=>{const{env:t}=e,s=await t.DB.prepare("SELECT COUNT(*) as count FROM users").first(),r=await t.DB.prepare("SELECT COUNT(*) as count FROM contacts").first(),a=await t.DB.prepare("SELECT COUNT(*) as count FROM contacts WHERE status = ?").bind("pending").first();return e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            .card-hover { transition: all 0.3s ease; }
            .card-hover:hover { transform: translateY(-4px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- í—¤ë” -->
        <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-8">
                        <a href="/" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤ ê´€ë¦¬ì</a>
                        <div class="flex gap-4">
                            <a href="/admin" class="text-purple-600 font-medium">ëŒ€ì‹œë³´ë“œ</a>
                            <a href="/admin/users" class="text-gray-600 hover:text-purple-600">ì‚¬ìš©ì</a>
                            <a href="/admin/deposits" class="text-gray-600 hover:text-purple-600">ì…ê¸ˆ ì‹ ì²­</a>
                            <a href="/admin/contacts" class="text-gray-600 hover:text-purple-600">ë¬¸ì˜</a>
                        </div>
                    </div>
                    <button onclick="logout()" class="text-gray-600 hover:text-red-600">
                        <i class="fas fa-sign-out-alt mr-2"></i>ë¡œê·¸ì•„ì›ƒ
                    </button>
                </div>
            </div>
        </nav>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <div class="max-w-7xl mx-auto px-6 py-8">
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
                <p class="text-gray-600">ì‹œìŠ¤í…œ ì „ì²´ í˜„í™©ì„ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”</p>
            </div>

            <!-- í†µê³„ ì¹´ë“œ -->
            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <!-- ì „ì²´ ì‚¬ìš©ì -->
                <div class="bg-white rounded-2xl p-6 shadow-sm card-hover border border-gray-100">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 gradient-purple rounded-xl flex items-center justify-center">
                            <i class="fas fa-users text-white text-xl"></i>
                        </div>
                        <span class="text-sm text-gray-500">ì „ì²´</span>
                    </div>
                    <div class="text-3xl font-bold text-gray-900 mb-1">${(s==null?void 0:s.count)||0}</div>
                    <div class="text-sm text-gray-600">ì „ì²´ ì‚¬ìš©ì</div>
                </div>

                <!-- ì „ì²´ ë¬¸ì˜ -->
                <div class="bg-white rounded-2xl p-6 shadow-sm card-hover border border-gray-100">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center">
                            <i class="fas fa-envelope text-white text-xl"></i>
                        </div>
                        <span class="text-sm text-gray-500">ì „ì²´</span>
                    </div>
                    <div class="text-3xl font-bold text-gray-900 mb-1">${(r==null?void 0:r.count)||0}</div>
                    <div class="text-sm text-gray-600">ì „ì²´ ë¬¸ì˜</div>
                </div>

                <!-- ëŒ€ê¸°ì¤‘ ë¬¸ì˜ -->
                <div class="bg-white rounded-2xl p-6 shadow-sm card-hover border border-gray-100">
                    <div class="flex items-center justify-between mb-4">
                        <div class="w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center">
                            <i class="fas fa-clock text-white text-xl"></i>
                        </div>
                        <span class="text-sm text-orange-500">ì²˜ë¦¬ í•„ìš”</span>
                    </div>
                    <div class="text-3xl font-bold text-gray-900 mb-1">${(a==null?void 0:a.count)||0}</div>
                    <div class="text-sm text-gray-600">ëŒ€ê¸°ì¤‘ ë¬¸ì˜</div>
                </div>
            </div>

            <!-- ë¹ ë¥¸ ë©”ë‰´ -->
            <div class="bg-white rounded-2xl p-8 shadow-sm border border-gray-100">
                <h2 class="text-xl font-bold text-gray-900 mb-6">ë¹ ë¥¸ ë©”ë‰´</h2>
                <div class="grid md:grid-cols-4 gap-4">
                    <a href="/admin/users" class="flex items-center gap-4 p-4 rounded-xl border border-gray-200 hover:border-purple-300 hover:bg-purple-50 transition">
                        <div class="w-12 h-12 gradient-purple rounded-xl flex items-center justify-center">
                            <i class="fas fa-users text-white"></i>
                        </div>
                        <div>
                            <div class="font-bold text-gray-900">ì‚¬ìš©ì ê´€ë¦¬</div>
                            <div class="text-sm text-gray-600">íšŒì› ëª©ë¡ ë° ê´€ë¦¬</div>
                        </div>
                    </a>

                    <a href="/admin/contacts" class="flex items-center gap-4 p-4 rounded-xl border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition">
                        <div class="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center">
                            <i class="fas fa-envelope text-white"></i>
                        </div>
                        <div>
                            <div class="font-bold text-gray-900">ë¬¸ì˜ ê´€ë¦¬</div>
                            <div class="text-sm text-gray-600">ëŒ€í–‰ ë¬¸ì˜ í™•ì¸</div>
                        </div>
                    </a>

                    <a href="/admin/programs" class="flex items-center gap-4 p-4 rounded-xl border border-gray-200 hover:border-green-300 hover:bg-green-50 transition">
                        <div class="w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center">
                            <i class="fas fa-graduation-cap text-white"></i>
                        </div>
                        <div>
                            <div class="font-bold text-gray-900">í”„ë¡œê·¸ë¨ ê´€ë¦¬</div>
                            <div class="text-sm text-gray-600">êµìœ¡ í”„ë¡œê·¸ë¨ ê´€ë¦¬</div>
                        </div>
                    </a>
                    
                    <button onclick="runMigration()" class="flex items-center gap-4 p-4 rounded-xl border border-gray-200 hover:border-red-300 hover:bg-red-50 transition text-left">
                        <div class="w-12 h-12 bg-red-500 rounded-xl flex items-center justify-center">
                            <i class="fas fa-database text-white"></i>
                        </div>
                        <div>
                            <div class="font-bold text-gray-900">DB ë§ˆì´ê·¸ë ˆì´ì…˜</div>
                            <div class="text-sm text-gray-600">ê¶Œí•œ í…Œì´ë¸” ì´ˆê¸°í™”</div>
                        </div>
                    </button>
                </div>
            </div>
        </div>

        <script>
            async function runMigration() {
                if (!confirm('âš ï¸ ê¶Œí•œ í…Œì´ë¸”ì„ ì¬ìƒì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?

ê¸°ì¡´ ê¶Œí•œ ë°ì´í„°ëŠ” ë°±ì—…ë˜ì§€ë§Œ, ëª¨ë“  ì‚¬ìš©ìì˜ ê¶Œí•œì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.')) {
                    return;
                }
                
                const user = JSON.parse(localStorage.getItem('user') || '{}');
                if (!user.id) {
                    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    return;
                }
                
                try {
                    const response = await fetch('/api/admin/run-migration', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ adminId: user.id })
                    });
                    
                    const data = await response.json();
                    if (data.success) {
                        alert('âœ… ' + data.message + '

ì´ì œ ê¶Œí•œ ì‹œìŠ¤í…œì„ ì •ìƒì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                        location.reload();
                    } else {
                        alert('âŒ ì˜¤ë¥˜: ' + data.error);
                    }
                } catch (err) {
                    alert('âŒ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + err.message);
                }
            }
            
            function logout() {
                if(confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    localStorage.removeItem('user');
                    window.location.href = '/';
                }
            }
        <\/script>
    </body>
    </html>
  `)});d.get("/admin/users",async e=>{var r,a;const{env:t}=e,s=await t.DB.prepare("SELECT id, email, name, phone, academy_name, role, points, created_at FROM users ORDER BY created_at DESC").all();return e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ì‚¬ìš©ì ê´€ë¦¬ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <script src="/static/admin-users.js" defer><\/script>
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- í—¤ë” -->
        <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-8">
                        <a href="/admin" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤ ê´€ë¦¬ì</a>
                        <div class="flex gap-4">
                            <a href="/admin" class="text-gray-600 hover:text-purple-600">ëŒ€ì‹œë³´ë“œ</a>
                            <a href="/admin/users" class="text-purple-600 font-medium">ì‚¬ìš©ì</a>
                            <a href="/admin/contacts" class="text-gray-600 hover:text-purple-600">ë¬¸ì˜</a>
                        </div>
                    </div>
                    <button onclick="logout()" class="text-gray-600 hover:text-red-600">
                        <i class="fas fa-sign-out-alt mr-2"></i>ë¡œê·¸ì•„ì›ƒ
                    </button>
                </div>
            </div>
        </nav>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <div class="max-w-7xl mx-auto px-6 py-8">
            <div class="mb-8 flex justify-between items-center">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">ì‚¬ìš©ì ê´€ë¦¬</h1>
                    <p class="text-gray-600">ì „ì²´ ${((r=s==null?void 0:s.results)==null?void 0:r.length)||0}ëª…ì˜ ì‚¬ìš©ì</p>
                </div>
            </div>

            <!-- ì‚¬ìš©ì ëª©ë¡ í…Œì´ë¸” -->
            <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50 border-b border-gray-200">
                            <tr>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì´ë©”ì¼</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì´ë¦„</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì „í™”ë²ˆí˜¸</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">í•™ì›ëª…</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">í¬ì¸íŠ¸</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ê¶Œí•œ</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ê°€ì…ì¼</th>
                                <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ê´€ë¦¬</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            ${((a=s==null?void 0:s.results)==null?void 0:a.map(n=>{const l=(n.name||"").replace(/"/g,"&quot;");return`
                                <tr class="hover:bg-gray-50">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${n.id}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${n.email}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${n.name}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">${n.phone||"-"}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">${n.academy_name||"-"}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600">${(n.points||0).toLocaleString()}P</td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-3 py-1 text-xs font-medium rounded-full ${n.role==="admin"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}">
                                            ${n.role==="admin"?"ê´€ë¦¬ì":"ì¼ë°˜íšŒì›"}
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">${new Date(n.created_at).toLocaleString("ko-KR",{timeZone:"Asia/Seoul",year:"numeric",month:"2-digit",day:"2-digit"})}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                                        ${n.role!=="admin"?`
                                            <div class="flex gap-2 flex-wrap">
                                                <button onclick="changePassword(${n.id}, '${l}')" class="px-3 py-1.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition text-xs font-medium" title="ë¹„ë°€ë²ˆí˜¸ ë³€ê²½">
                                                    ğŸ”‘ ë¹„ë°€ë²ˆí˜¸
                                                </button>
                                                <button onclick="givePoints(${n.id}, '${l}', ${n.points||0})" class="px-3 py-1.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-xs font-medium" title="í¬ì¸íŠ¸ ì§€ê¸‰">
                                                    ğŸ’° ì§€ê¸‰
                                                </button>
                                                <button onclick="deductPoints(${n.id}, '${l}', ${n.points||0})" class="px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-xs font-medium" title="í¬ì¸íŠ¸ ì°¨ê°">
                                                    âŒ ì°¨ê°
                                                </button>
                                                <button onclick="loginAs(${n.id}, '${l}')" class="px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition text-xs font-medium" title="ì´ ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸">
                                                    ğŸ‘¤ ë¡œê·¸ì¸
                                                </button>
                                                <button onclick="managePermissions(${n.id}, '${l}')" class="px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-xs font-medium" title="ê¶Œí•œ ê´€ë¦¬">
                                                    âš™ï¸ ê¶Œí•œ
                                                </button>
                                                <a href="/admin/users/${n.id}" class="px-3 py-1.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition text-xs font-medium inline-block" title="ìƒì„¸ì •ë³´">
                                                    ğŸ“‹ ìƒì„¸
                                                </a>
                                            </div>
                                        `:"-"}
                                    </td>
                                </tr>
                            `}).join(""))||'<tr><td colspan="9" class="px-6 py-8 text-center text-gray-500">ë“±ë¡ëœ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤</td></tr>'}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ê¶Œí•œ ê´€ë¦¬ ëª¨ë‹¬ -->
        <div id="permissionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6 border-b border-gray-200 sticky top-0 bg-white z-10">
                    <div class="flex justify-between items-center">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900">í”„ë¡œê·¸ë¨ ê¶Œí•œ ê´€ë¦¬</h2>
                            <p id="modalUserName" class="text-gray-600 mt-1"></p>
                        </div>
                        <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-2xl"></i>
                        </button>
                    </div>
                </div>
                
                <div class="p-6">
                    <div class="mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                        <p class="text-sm text-blue-800">
                            <i class="fas fa-info-circle mr-2"></i>
                            <strong>ê¶Œí•œ ì„¤ì •:</strong> ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒ/í•´ì œí•˜ì—¬ ì‚¬ìš©ìê°€ ëŒ€ì‹œë³´ë“œì—ì„œ ë³¼ ìˆ˜ ìˆëŠ” ë„êµ¬ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                        </p>
                    </div>
                    
                    <!-- ê¶Œí•œ ëª©ë¡ (ì¹´í…Œê³ ë¦¬ë³„ë¡œ JSì—ì„œ ë™ì  ë Œë”ë§) -->
                    <div id="systemPermissions" class="space-y-6">
                        <!-- ê¶Œí•œ ì²´í¬ë°•ìŠ¤ê°€ ì—¬ê¸°ì— ë Œë”ë§ë©ë‹ˆë‹¤ -->
                    </div>
                </div>

                <div class="p-6 border-t border-gray-200 bg-gray-50 sticky bottom-0 flex justify-between items-center">
                    <button onclick="selectAllPermissions()" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition text-sm font-medium">
                        ì „ì²´ ì„ íƒ
                    </button>
                    <div class="flex gap-3">
                        <button onclick="closeModal()" class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                            ì·¨ì†Œ
                        </button>
                        <button onclick="savePermissions()" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium">
                            ì €ì¥
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </body>
    </html>
  `)});d.get("/my-deposits",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë‚´ ì…ê¸ˆ ë‚´ì—­ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
            
            let currentUserId = null;

            // ì‹œìŠ¤í…œ ê¸°ëŠ¥ ê¶Œí•œ (DBì˜ program_keyì™€ ì¼ì¹˜)
            const systemFeatures = [
                { 
                    key: 'search_volume', 
                    name: 'ë„¤ì´ë²„ ê²€ìƒ‰ëŸ‰ ì¡°íšŒ',
                    icon: 'ğŸ“Š',
                    description: 'í‚¤ì›Œë“œ ê²€ìƒ‰ëŸ‰, í”Œë ˆì´ìŠ¤ ìˆœìœ„, ê²½ìŸì‚¬ ë¶„ì„'
                },
                { 
                    key: 'sms', 
                    name: 'SMS ë¬¸ì ë°œì†¡',
                    icon: 'ğŸ“±',
                    description: 'ë¬¸ì ì‘ì„±, ë°œì‹ ë²ˆí˜¸ ê´€ë¦¬, ë°œì†¡ ë‚´ì—­'
                },
                { 
                    key: 'landing_builder', 
                    name: 'ëœë”©í˜ì´ì§€ ìƒì„±ê¸°',
                    icon: 'ğŸš€',
                    description: 'AI ê¸°ë°˜ ëœë”©í˜ì´ì§€ ìë™ ìƒì„±'
                },
                { 
                    key: 'analytics', 
                    name: 'ë¶„ì„ ë„êµ¬',
                    icon: 'ğŸ“ˆ',
                    description: 'ë°ì´í„° ë¶„ì„ ë° ë¦¬í¬íŠ¸ ìƒì„± (ì˜ˆì •)'
                }
            ];

            async function managePermissions(userId, userName) {
                currentUserId = userId;
                document.getElementById('modalUserName').textContent = userName + 'ë‹˜ì˜ í”„ë¡œê·¸ë¨ ê¶Œí•œ ì„¤ì •';
                
                // í˜„ì¬ ê¶Œí•œ ì¡°íšŒ (ìƒˆë¡œìš´ API)
                const response = await fetch('/api/user/permissions?userId=' + userId);
                const data = await response.json();
                
                // ì‹œìŠ¤í…œ ê¸°ëŠ¥ ê¶Œí•œ ë Œë”ë§
                const systemPerms = document.getElementById('systemPermissions');
                systemPerms.innerHTML = systemFeatures.map(feature => {
                    const hasPermission = data.success && data.permissions && data.permissions[feature.key];
                    const borderClass = hasPermission ? 'border-blue-500 bg-blue-50' : 'border-gray-200';
                    return '<label class="flex items-start p-4 border-2 ' + borderClass + ' rounded-lg hover:border-blue-300 cursor-pointer transition">' +
                        '<input type="checkbox" ' +
                               'class="w-5 h-5 text-blue-600 rounded mr-3 mt-1" ' +
                               'data-program-key="' + feature.key + '" ' +
                               (hasPermission ? 'checked' : '') + '>' +
                        '<div class="flex-1">' +
                            '<div class="flex items-center gap-2 mb-1">' +
                                '<span class="text-xl">' + feature.icon + '</span>' +
                                '<span class="text-sm font-bold text-gray-900">' + feature.name + '</span>' +
                            '</div>' +
                            '<p class="text-xs text-gray-600">' + feature.description + '</p>' +
                        '</div>' +
                    '</label>';
                }).join('');

                // ëª¨ë‹¬ í‘œì‹œ
                document.getElementById('permissionModal').classList.remove('hidden');
            }

            async function savePermissions() {
                const checkboxes = document.querySelectorAll('#systemPermissions input[type="checkbox"]');
                const adminUser = JSON.parse(localStorage.getItem('user') || '{}');
                
                let successCount = 0;
                let errorCount = 0;
                
                for (const checkbox of checkboxes) {
                    const programKey = checkbox.dataset.programKey;
                    
                    try {
                        if (checkbox.checked) {
                            // ê¶Œí•œ ë¶€ì—¬
                            const response = await fetch('/api/admin/grant-permission', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({
                                    userId: currentUserId,
                                    programKey: programKey,
                                    grantedBy: adminUser.id || 1
                                })
                            });
                            const result = await response.json();
                            if (result.success) {
                                successCount++;
                            } else {
                                errorCount++;
                            }
                        } else {
                            // ê¶Œí•œ íšŒìˆ˜
                            const response = await fetch('/api/admin/revoke-permission', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({
                                    userId: currentUserId,
                                    programKey: programKey,
                                    adminId: adminUser.id || 1
                                })
                            });
                            const result = await response.json();
                            if (result.success) {
                                successCount++;
                            } else {
                                errorCount++;
                            }
                        }
                    } catch (err) {
                        console.error('ê¶Œí•œ ì²˜ë¦¬ ì˜¤ë¥˜:', err);
                        errorCount++;
                    }
                }

                if (errorCount === 0) {
                    alert('âœ… ê¶Œí•œì´ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } else {
                    alert('âš ï¸ ê¶Œí•œ ì—…ë°ì´íŠ¸ ì™„ë£Œ
ì„±ê³µ: ' + successCount + 'ê°œ
ì‹¤íŒ¨: ' + errorCount + 'ê°œ');
                }
                closeModal();
                location.reload(); // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ìœ¼ë¡œ ë³€ê²½ì‚¬í•­ ë°˜ì˜
            }

            function closeModal() {
                document.getElementById('permissionModal').classList.add('hidden');
                currentUserId = null;
            }

            function logout() {
                if(confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    localStorage.removeItem('user');
                    window.location.href = '/';
                }
            }

            // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
            async function changePassword(userId, userName) {
                const newPassword = prompt(userName + 'ë‹˜ì˜ ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ìµœì†Œ 6ì):');
                if (!newPassword) return;
                
                if (newPassword.length < 6) {
                    alert('ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
                    return;
                }

                try {
                    const response = await fetch('/api/admin/users/' + userId + '/password', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ newPassword })
                    });

                    const data = await response.json();
                    if (data.success) {
                        alert('ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    } else {
                        alert('ì˜¤ë¥˜: ' + (data.error || 'ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì‹¤íŒ¨'));
                    }
                } catch (err) {
                    alert('ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            // í¬ì¸íŠ¸ ì§€ê¸‰
            async function givePoints(userId, userName, currentPoints) {
                // data ì†ì„±ì—ì„œ ì „ë‹¬ëœ ë¬¸ìì—´ì„ ìˆ«ìë¡œ ë³€í™˜
                currentPoints = parseInt(currentPoints) || 0;
                const pointsStr = prompt(userName + 'ë‹˜ì—ê²Œ ì§€ê¸‰í•  í¬ì¸íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (í˜„ì¬: ' + currentPoints + 'P):');
                if (!pointsStr) return;
                
                const points = parseInt(pointsStr);
                if (isNaN(points) || points <= 0) {
                    alert('ì˜¬ë°”ë¥¸ í¬ì¸íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                    return;
                }

                try {
                    const response = await fetch('/api/admin/users/' + userId + '/points', {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ points })
                    });

                    const data = await response.json();
                    if (data.success) {
                        alert(points.toLocaleString() + 'Pê°€ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤! ìƒˆ ì”ì•¡: ' + data.newPoints.toLocaleString() + 'P');
                        location.reload();
                    } else {
                        alert('ì˜¤ë¥˜: ' + (data.error || 'í¬ì¸íŠ¸ ì§€ê¸‰ ì‹¤íŒ¨'));
                    }
                } catch (err) {
                    alert('í¬ì¸íŠ¸ ì§€ê¸‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            // í¬ì¸íŠ¸ ì°¨ê° (í™˜ìˆ˜)
            async function deductPoints(userId, userName, currentPoints) {
                // data ì†ì„±ì—ì„œ ì „ë‹¬ëœ ë¬¸ìì—´ì„ ìˆ«ìë¡œ ë³€í™˜
                currentPoints = parseInt(currentPoints) || 0;
                const pointsStr = prompt(userName + 'ë‹˜ì˜ í¬ì¸íŠ¸ë¥¼ ì°¨ê°í•©ë‹ˆë‹¤ (í˜„ì¬: ' + currentPoints.toLocaleString() + 'P) - ì°¨ê°í•  í¬ì¸íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:');
                if (!pointsStr) return;
                
                const points = parseInt(pointsStr);
                if (isNaN(points) || points <= 0) {
                    alert('ì˜¬ë°”ë¥¸ í¬ì¸íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                    return;
                }

                // í˜„ì¬ í¬ì¸íŠ¸ë³´ë‹¤ ë§ì´ ì°¨ê°í•˜ë ¤ëŠ” ê²½ìš° ê²½ê³ 
                if (points > currentPoints) {
                    if (!confirm('ê²½ê³ : í˜„ì¬ í¬ì¸íŠ¸(' + currentPoints.toLocaleString() + 'P)ë³´ë‹¤ ë§ì€ ê¸ˆì•¡(' + points.toLocaleString() + 'P)ì„ ì°¨ê°í•˜ë©´ í¬ì¸íŠ¸ê°€ ë§ˆì´ë„ˆìŠ¤ê°€ ë©ë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        return;
                    }
                }

                if (!confirm(userName + 'ë‹˜ì˜ í¬ì¸íŠ¸ë¥¼ ' + points.toLocaleString() + 'P ì°¨ê°í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (ì°¨ê° í›„ ì”ì•¡: ' + (currentPoints - points).toLocaleString() + 'P)')) {
                    return;
                }

                try {
                    const response = await fetch('/api/admin/users/' + userId + '/points/deduct', {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ points })
                    });

                    const data = await response.json();
                    if (data.success) {
                        alert(points.toLocaleString() + 'Pê°€ ì°¨ê°ë˜ì—ˆìŠµë‹ˆë‹¤! ìƒˆ ì”ì•¡: ' + data.newPoints.toLocaleString() + 'P');
                        location.reload();
                    } else {
                        alert('ì˜¤ë¥˜: ' + (data.error || 'í¬ì¸íŠ¸ ì°¨ê° ì‹¤íŒ¨'));
                    }
                } catch (err) {
                    alert('í¬ì¸íŠ¸ ì°¨ê° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            // ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸
            async function loginAs(userId, userName) {
                if (!confirm(userName + 'ë‹˜ì˜ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

                try {
                    const response = await fetch('/api/admin/login-as/' + userId, {
                        method: 'POST'
                    });

                    const data = await response.json();
                    if (data.success) {
                        localStorage.setItem('user', JSON.stringify(data.user));
                        alert(userName + 'ë‹˜ìœ¼ë¡œ ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤!');
                        window.location.href = '/dashboard';
                    } else {
                        alert('ì˜¤ë¥˜: ' + (data.error || 'ë¡œê·¸ì¸ ì‹¤íŒ¨'));
                    }
                } catch (err) {
                    alert('ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            // í•¨ìˆ˜ë“¤ì„ ì „ì—­ window ê°ì²´ì— ëª…ì‹œì ìœ¼ë¡œ í• ë‹¹
            window.changePassword = changePassword;
            window.givePoints = givePoints;
            window.deductPoints = deductPoints;
            window.loginAs = loginAs;
            window.managePermissions = managePermissions;
            window.savePermissions = savePermissions;
            window.closeModal = closeModal;
            window.logout = logout;

            console.log('âœ… Admin functions loaded and ready');
            console.log('âœ… changePassword:', typeof window.changePassword);
            console.log('âœ… givePoints:', typeof window.givePoints);
            console.log('âœ… deductPoints:', typeof window.deductPoints);
            console.log('âœ… loginAs:', typeof window.loginAs);
            console.log('âœ… managePermissions:', typeof window.managePermissions);
            
            // í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ í˜¸ì¶œ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
            window.testAdminFunctions = function() {
                console.log('ğŸ§ª Testing admin functions...');
                console.log('changePassword:', typeof changePassword);
                console.log('givePoints:', typeof givePoints);
                console.log('deductPoints:', typeof deductPoints);
                console.log('loginAs:', typeof loginAs);
                console.log('managePermissions:', typeof managePermissions);
                alert('Admin functions are loaded! Check console for details.');
            };
            console.log('ğŸ’¡ You can test by running: testAdminFunctions()');
        <\/script>
    </body>
    </html>
  `));d.post("/api/teachers/apply",async e=>{try{try{await e.env.DB.prepare(`
        ALTER TABLE users ADD COLUMN user_type TEXT DEFAULT 'director'
      `).run(),console.log("[Migration] user_type column added")}catch{}try{await e.env.DB.prepare(`
        ALTER TABLE users ADD COLUMN parent_user_id INTEGER
      `).run(),console.log("[Migration] parent_user_id column added")}catch{}try{await e.env.DB.prepare(`
        CREATE TABLE IF NOT EXISTS teacher_applications (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          email TEXT NOT NULL,
          password TEXT NOT NULL,
          name TEXT NOT NULL,
          phone TEXT,
          academy_name TEXT NOT NULL,
          director_email TEXT,
          verification_code TEXT,
          status TEXT DEFAULT 'pending',
          applied_at DATETIME DEFAULT CURRENT_TIMESTAMP,
          processed_at DATETIME,
          processed_by INTEGER,
          reject_reason TEXT,
          FOREIGN KEY (processed_by) REFERENCES users(id)
        )
      `).run(),console.log("[Migration] teacher_applications table created")}catch{console.log("[Migration] teacher_applications table already exists")}try{await e.env.DB.prepare(`
        CREATE INDEX IF NOT EXISTS idx_teacher_applications_status ON teacher_applications(status)
      `).run(),await e.env.DB.prepare(`
        CREATE INDEX IF NOT EXISTS idx_teacher_applications_email ON teacher_applications(email)
      `).run(),console.log("[Migration] teacher_applications indexes created")}catch{}const{email:t,password:s,name:r,phone:a,academyName:n,verificationCode:l}=await e.req.json();if(!t||!s||!r||!n||!l)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const o=await e.env.DB.prepare(`
      SELECT avc.*, u.id as director_id, u.email as director_email, u.name as director_name, u.academy_name
      FROM academy_verification_codes avc
      JOIN users u ON avc.user_id = u.id
      WHERE avc.code = ? AND avc.is_active = 1
    `).bind(l.toUpperCase()).first();if(!o)return e.json({success:!1,error:"ìœ íš¨í•˜ì§€ ì•Šì€ ì¸ì¦ ì½”ë“œì…ë‹ˆë‹¤."},400);const i=o.academy_name||n,c=await e.env.DB.prepare("SELECT id, email, name FROM users WHERE email = ?").bind(t).first();if(c){if(console.log("[TeacherApply] Existing user found, creating connection request:",c),await e.env.DB.prepare('SELECT id FROM teacher_applications WHERE email = ? AND director_email = ? AND status = "pending"').bind(t,o.director_email).first())return e.json({success:!1,error:"ì´ë¯¸ ì´ í•™ì›ì— ë“±ë¡ ì‹ ì²­ì´ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤."},400);const x=await e.env.DB.prepare(`
        INSERT INTO teacher_applications (
          email, password, name, phone, academy_name, 
          director_email, verification_code, status, applied_at
        )
        VALUES (?, ?, ?, ?, ?, ?, ?, 'pending', datetime('now'))
      `).bind(t,"EXISTING_USER",c.name||r,a||null,i,o.director_email,l.toUpperCase()).run();return e.json({success:!0,applicationId:x.meta.last_row_id,message:`ê¸°ì¡´ ê³„ì •ìœ¼ë¡œ í•™ì› ì—°ê²° ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
${o.director_name} ì›ì¥ë‹˜ì˜ ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.`,directorName:o.director_name,isExistingUser:!0})}if(await e.env.DB.prepare('SELECT id FROM teacher_applications WHERE email = ? AND status = "pending"').bind(t).first())return e.json({success:!1,error:"ì´ë¯¸ ë“±ë¡ ì‹ ì²­ì´ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤."},400);const m=await e.env.DB.prepare(`
      INSERT INTO teacher_applications (
        email, password, name, phone, academy_name, 
        director_email, verification_code, status, applied_at
      )
      VALUES (?, ?, ?, ?, ?, ?, ?, 'pending', datetime('now'))
    `).bind(t,s,r,a||null,i,o.director_email,l.toUpperCase()).run();return e.json({success:!0,applicationId:m.meta.last_row_id,message:`ë“±ë¡ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ${o.director_name} ì›ì¥ë‹˜ì˜ ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.`,directorName:o.director_name})}catch(t){return console.error("[TeacherApply] Error:",t),console.error("[TeacherApply] Error stack:",t.stack),console.error("[TeacherApply] Error message:",t.message),e.json({success:!1,error:"ë“±ë¡ ì‹ ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",details:t.message,stack:t.stack},500)}});d.get("/api/teachers/applications",async e=>{try{const t=e.req.query("directorId"),s=e.req.query("status")||"pending";if(!t)return e.json({success:!1,error:"ì›ì¥ë‹˜ IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const r=await e.env.DB.prepare(`
      SELECT ta.*, avc.academy_name
      FROM teacher_applications ta
      JOIN academy_verification_codes avc ON ta.verification_code = avc.verification_code
      WHERE avc.user_id = ? AND ta.status = ?
      ORDER BY ta.applied_at DESC
    `).bind(t,s).all();return e.json({success:!0,applications:r.results||[]})}catch(t){return console.error("Get applications error:",t),e.json({success:!1,error:"ì‹ ì²­ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/teachers/applications/:id/approve",async e=>{try{const t=e.req.param("id"),{directorId:s}=await e.req.json();if(!s)return e.json({success:!1,error:"ì›ì¥ë‹˜ IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const r=await e.env.DB.prepare('SELECT * FROM teacher_applications WHERE id = ? AND status = "pending"').bind(t).first();if(!r)return e.json({success:!1,error:"ì‹ ì²­ì„ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ ì´ë¯¸ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤."},404);const a=await e.env.DB.prepare("SELECT id, academy_name FROM users WHERE id = ?").bind(s).first();if(!a)return e.json({success:!1,error:"ì›ì¥ë‹˜ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);const n=await e.env.DB.prepare("SELECT id, email, name, user_type, parent_user_id FROM users WHERE email = ?").bind(r.email).first();let l;return n&&r.password==="EXISTING_USER"?(console.log("[ApproveTeacher] Existing user, updating connection:",n),l=n.id,await e.env.DB.prepare(`
        UPDATE users 
        SET parent_user_id = ?, academy_name = ?, user_type = 'teacher', updated_at = datetime('now')
        WHERE id = ?
      `).bind(s,a.academy_name,n.id).run(),console.log("[ApproveTeacher] User connected to academy")):(console.log("[ApproveTeacher] New user, creating account"),l=(await e.env.DB.prepare(`
        INSERT INTO users (
          email, password, name, phone, role, user_type, 
          parent_user_id, academy_name, created_at
        )
        VALUES (?, ?, ?, ?, 'user', 'teacher', ?, ?, datetime('now'))
      `).bind(r.email,r.password,r.name,r.phone,s,a.academy_name).run()).meta.last_row_id),await e.env.DB.prepare(`
      UPDATE teacher_applications 
      SET status = 'approved', processed_at = datetime('now'), processed_by = ?
      WHERE id = ?
    `).bind(s,t).run(),e.json({success:!0,teacherId:l,message:`${r.name} ì„ ìƒë‹˜ì˜ ë“±ë¡ì´ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.`})}catch(t){return console.error("Approve application error:",t),e.json({success:!1,error:"ìŠ¹ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/teachers/applications/:id/reject",async e=>{try{const t=e.req.param("id"),{directorId:s,reason:r}=await e.req.json();if(!s)return e.json({success:!1,error:"ì›ì¥ë‹˜ IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const a=await e.env.DB.prepare('SELECT * FROM teacher_applications WHERE id = ? AND status = "pending"').bind(t).first();return a?(await e.env.DB.prepare(`
      UPDATE teacher_applications 
      SET status = 'rejected', processed_at = datetime('now'), 
          processed_by = ?, reject_reason = ?
      WHERE id = ?
    `).bind(s,r||"ì›ì¥ë‹˜ì— ì˜í•´ ê±°ë¶€ë¨",t).run(),e.json({success:!0,message:`${a.name} ì„ ìƒë‹˜ì˜ ë“±ë¡ ì‹ ì²­ì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.`})):e.json({success:!1,error:"ì‹ ì²­ì„ ì°¾ì„ ìˆ˜ ì—†ê±°ë‚˜ ì´ë¯¸ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤."},404)}catch(t){return console.error("Reject application error:",t),e.json({success:!1,error:"ê±°ë¶€ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/teachers/verification-code",async e=>{try{const t=e.req.query("directorId");if(!t)return e.json({success:!1,error:"ì›ì¥ë‹˜ IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);console.log("[VerificationCode] GET request for directorId:",t);try{await e.env.DB.prepare(`
        CREATE TABLE IF NOT EXISTS academy_verification_codes (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          user_id INTEGER NOT NULL,
          code TEXT NOT NULL UNIQUE,
          is_active INTEGER DEFAULT 1,
          created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
          expires_at DATETIME,
          FOREIGN KEY (user_id) REFERENCES users(id)
        )
      `).run(),await e.env.DB.prepare(`
        CREATE INDEX IF NOT EXISTS idx_verification_codes_user ON academy_verification_codes(user_id)
      `).run(),await e.env.DB.prepare(`
        CREATE INDEX IF NOT EXISTS idx_verification_codes_code ON academy_verification_codes(code)
      `).run(),console.log("[VerificationCode] Table and indexes ensured")}catch{console.log("[VerificationCode] Table already exists or creation skipped")}const s=await e.env.DB.prepare("SELECT id, academy_name, email FROM users WHERE id = ?").bind(t).first();if(!s)return console.error("[VerificationCode] Director not found:",t),e.json({success:!1,error:"ì›ì¥ë‹˜ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);console.log("[VerificationCode] Director found:",s);let r=null;try{r=await e.env.DB.prepare("SELECT * FROM academy_verification_codes WHERE user_id = ? AND is_active = 1 ORDER BY created_at DESC LIMIT 1").bind(t).first()}catch(n){console.log("[VerificationCode] SELECT error (table might not exist):",n)}if(console.log("[VerificationCode] Existing code:",r),!r||!r.code&&!r.verification_code){console.log("[VerificationCode] Creating new code for director:",t);const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let l="";for(let o=0;o<6;o++)l+=n.charAt(Math.floor(Math.random()*n.length));console.log("[VerificationCode] Generated new code:",l);try{const o=await e.env.DB.prepare(`
          INSERT INTO academy_verification_codes (user_id, code, is_active, created_at)
          VALUES (?, ?, 1, datetime('now'))
        `).bind(t,l).run();console.log("[VerificationCode] Insert result:",o),r={id:o.meta.last_row_id,user_id:parseInt(t),code:l,is_active:1,created_at:new Date().toISOString()}}catch(o){throw console.error("[VerificationCode] Insert error:",o),o}}const a=r.code||r.verification_code||"ERROR";return console.log("[VerificationCode] Final response code:",a),e.json({success:!0,code:a,codeData:r,debug:{directorId:t,directorEmail:s.email,hasCode:!!r,codeValue:a}})}catch(t){return console.error("[VerificationCode] Error:",t),e.json({success:!1,error:"ì¸ì¦ ì½”ë“œ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",details:t.message,stack:t.stack},500)}});d.post("/api/teachers/verification-code/regenerate",async e=>{try{const{directorId:t}=await e.req.json();if(!t)return e.json({success:!1,error:"ì›ì¥ë‹˜ IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);console.log("[RegenerateCode] POST request for directorId:",t);const s=await e.env.DB.prepare("SELECT id, academy_name, email FROM users WHERE id = ?").bind(t).first();if(!s)return console.error("[RegenerateCode] Director not found:",t),e.json({success:!1,error:"ì›ì¥ë‹˜ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);console.log("[RegenerateCode] Director found:",s),await e.env.DB.prepare("UPDATE academy_verification_codes SET is_active = 0 WHERE user_id = ?").bind(t).run();const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let a="";for(let l=0;l<6;l++)a+=r.charAt(Math.floor(Math.random()*r.length));console.log("[RegenerateCode] Generated new code:",a);const n=await e.env.DB.prepare(`
      INSERT INTO academy_verification_codes (user_id, code, is_active, created_at)
      VALUES (?, ?, 1, datetime('now'))
    `).bind(t,a).run();return console.log("[RegenerateCode] Insert result:",n),e.json({success:!0,code:a,codeData:{id:n.meta.last_row_id,code:a,verification_code:a,user_id:parseInt(t),is_active:1,created_at:new Date().toISOString()},message:"ìƒˆë¡œìš´ ì¸ì¦ ì½”ë“œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.",debug:{directorId:t,directorEmail:s.email,newCode:a}})}catch(t){return console.error("[RegenerateCode] Error:",t),e.json({success:!1,error:"ì¸ì¦ ì½”ë“œ ì¬ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",details:t.message,stack:t.stack},500)}});d.post("/api/teachers/create",async e=>{try{const{email:t,password:s,name:r,phone:a,directorId:n}=await e.req.json();if(!t||!s||!r||!n)return e.json({success:!1,error:"í•„ìˆ˜ ì •ë³´ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”."},400);const l=await e.env.DB.prepare("SELECT id, academy_name, user_type FROM users WHERE id = ?").bind(n).first();if(!l)return e.json({success:!1,error:"ì›ì¥ë‹˜ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);if(await e.env.DB.prepare("SELECT id FROM users WHERE email = ?").bind(t).first())return e.json({success:!1,error:"ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì´ë©”ì¼ì…ë‹ˆë‹¤."},400);const i=await e.env.DB.prepare(`
      INSERT INTO users (email, password, name, phone, role, user_type, parent_user_id, academy_name, created_at)
      VALUES (?, ?, ?, ?, 'user', 'teacher', ?, ?, datetime('now'))
    `).bind(t,s,r,a||null,n,l.academy_name).run();return e.json({success:!0,teacherId:i.meta.last_row_id,message:"ì„ ìƒë‹˜ ê³„ì •ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤."})}catch(t){return console.error("Create teacher error:",t),e.json({success:!1,error:"ì„ ìƒë‹˜ ê³„ì • ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/teachers/list",async e=>{try{const t=e.req.query("directorId");if(!t)return e.json({success:!1,error:"ì›ì¥ë‹˜ IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const s=await e.env.DB.prepare(`
      SELECT id, email, name, phone, created_at, 
             (SELECT COUNT(*) FROM classes WHERE teacher_id = users.id) as class_count
      FROM users 
      WHERE parent_user_id = ? AND user_type = 'teacher'
      ORDER BY created_at DESC
    `).bind(t).all();return e.json({success:!0,teachers:s.results||[]})}catch(t){return console.error("Get teachers error:",t),e.json({success:!1,error:"ì„ ìƒë‹˜ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/classes/create",async e=>{try{const{name:t,description:s,userId:r,teacherId:a,gradeLevel:n,subject:l,maxStudents:o}=await e.req.json();if(!t||!r)return e.json({success:!1,error:"ë°˜ ì´ë¦„ê³¼ ì›ì¥ë‹˜ ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const i=await e.env.DB.prepare(`
      INSERT INTO classes (name, description, user_id, teacher_id, grade_level, subject, max_students, status, created_at)
      VALUES (?, ?, ?, ?, ?, ?, ?, 'active', datetime('now'))
    `).bind(t,s||null,r,a||null,n||null,l||null,o||20).run();return e.json({success:!0,classId:i.meta.last_row_id,message:"ë°˜ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤."})}catch(t){return console.error("Create class error:",t),e.json({success:!1,error:"ë°˜ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/classes/list",async e=>{try{const t=e.req.query("userId"),s=e.req.query("userType");if(!t)return e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);let r="";s==="teacher"?r=`
        SELECT c.*, u.name as director_name,
               (SELECT COUNT(*) FROM students WHERE class_id = c.id AND status = 'active') as student_count
        FROM classes c
        LEFT JOIN users u ON c.user_id = u.id
        WHERE c.teacher_id = ? AND c.status = 'active'
        ORDER BY c.created_at DESC
      `:r=`
        SELECT c.*, t.name as teacher_name,
               (SELECT COUNT(*) FROM students WHERE class_id = c.id AND status = 'active') as student_count
        FROM classes c
        LEFT JOIN users t ON c.teacher_id = t.id
        WHERE c.user_id = ? AND c.status = 'active'
        ORDER BY c.created_at DESC
      `;const a=await e.env.DB.prepare(r).bind(t).all();return e.json({success:!0,classes:a.results||[]})}catch(t){return console.error("Get classes error:",t),e.json({success:!1,error:"ë°˜ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.put("/api/classes/:id/assign-teacher",async e=>{try{const t=e.req.param("id"),{teacherId:s,userId:r}=await e.req.json(),a=await e.env.DB.prepare("SELECT user_id FROM classes WHERE id = ?").bind(t).first();return!a||a.user_id!==r?e.json({success:!1,error:"ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."},403):(await e.env.DB.prepare("UPDATE classes SET teacher_id = ?, updated_at = datetime('now') WHERE id = ?").bind(s,t).run(),e.json({success:!0,message:"ì„ ìƒë‹˜ì´ ë°°ì •ë˜ì—ˆìŠµë‹ˆë‹¤."}))}catch(t){return console.error("Assign teacher error:",t),e.json({success:!1,error:"ì„ ìƒë‹˜ ë°°ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/teachers/:id/permissions",async e=>{try{const t=e.req.param("id"),s=e.req.query("directorId");if(!s)return e.json({success:!1,error:"ì›ì¥ë‹˜ IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const r=await e.env.DB.prepare('SELECT id, parent_user_id FROM users WHERE id = ? AND user_type = "teacher"').bind(t).first();if(!r||r.parent_user_id!==parseInt(s))return e.json({success:!1,error:"ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."},403);const a=await e.env.DB.prepare("SELECT permission_key, permission_value FROM teacher_permissions WHERE teacher_id = ?").bind(t).all(),n={};return a.results&&a.results.forEach(l=>{n[l.permission_key]=l.permission_value===1}),e.json({success:!0,permissions:n})}catch(t){return console.error("Get teacher permissions error:",t),e.json({success:!1,error:"ê¶Œí•œ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.post("/api/teachers/:id/permissions",async e=>{try{const t=e.req.param("id"),{permissionKey:s,permissionValue:r,directorId:a}=await e.req.json();if(!a)return e.json({success:!1,error:"ì›ì¥ë‹˜ IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const n=await e.env.DB.prepare('SELECT id, parent_user_id, name FROM users WHERE id = ? AND user_type = "teacher"').bind(t).first();if(!n||n.parent_user_id!==parseInt(a))return e.json({success:!1,error:"ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."},403);await e.env.DB.prepare(`
      INSERT OR REPLACE INTO teacher_permissions (teacher_id, permission_key, permission_value, granted_by, updated_at)
      VALUES (?, ?, ?, ?, datetime('now'))
    `).bind(t,s,r?1:0,a).run();const l=r?"í™œì„±í™”":"ë¹„í™œì„±í™”",o=s==="view_parent_contact"?"í•™ë¶€ëª¨ ì—°ë½ì²˜ ì¡°íšŒ":s;return e.json({success:!0,message:`${n.name} ì„ ìƒë‹˜ì˜ ${o} ê¶Œí•œì´ ${l}ë˜ì—ˆìŠµë‹ˆë‹¤.`})}catch(t){return console.error("Set teacher permission error:",t),e.json({success:!1,error:"ê¶Œí•œ ì„¤ì • ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/teachers/my-permissions",async e=>{try{const t=e.req.query("teacherId");if(!t)return e.json({success:!1,error:"ì„ ìƒë‹˜ IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);const s=await e.env.DB.prepare("SELECT permission_key, permission_value FROM teacher_permissions WHERE teacher_id = ?").bind(t).all(),r={};return s.results&&s.results.forEach(a=>{r[a.permission_key]=a.permission_value===1}),e.json({success:!0,permissions:r})}catch(t){return console.error("Get my permissions error:",t),e.json({success:!1,error:"ê¶Œí•œ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/students/list",async e=>{try{const t=e.req.query("userId"),s=e.req.query("userType"),r=e.req.query("classId");if(!t)return e.json({success:!1,error:"ì‚¬ìš©ì IDê°€ í•„ìš”í•©ë‹ˆë‹¤."},400);let a="",n=[];s==="teacher"?r?(a=`
          SELECT s.*, c.name as class_name
          FROM students s
          LEFT JOIN classes c ON s.class_id = c.id
          WHERE c.teacher_id = ? AND s.class_id = ? AND s.status = 'active'
          ORDER BY s.name
        `,n=[t,r]):(a=`
          SELECT s.*, c.name as class_name
          FROM students s
          LEFT JOIN classes c ON s.class_id = c.id
          WHERE c.teacher_id = ? AND s.status = 'active'
          ORDER BY c.name, s.name
        `,n=[t]):r?(a=`
          SELECT s.*, c.name as class_name, u.name as teacher_name
          FROM students s
          LEFT JOIN classes c ON s.class_id = c.id
          LEFT JOIN users u ON c.teacher_id = u.id
          WHERE s.user_id = ? AND s.class_id = ? AND s.status = 'active'
          ORDER BY s.name
        `,n=[t,r]):(a=`
          SELECT s.*, c.name as class_name, u.name as teacher_name
          FROM students s
          LEFT JOIN classes c ON s.class_id = c.id
          LEFT JOIN users u ON c.teacher_id = u.id
          WHERE s.user_id = ? AND s.status = 'active'
          ORDER BY c.name, s.name
        `,n=[t]);const l=await e.env.DB.prepare(a).bind(...n).all();return e.json({success:!0,students:l.results||[]})}catch(t){return console.error("Get students error:",t),e.json({success:!1,error:"í•™ìƒ ëª©ë¡ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/api/admin/users/:id/detail",async e=>{try{const t=e.req.param("id"),s=await e.env.DB.prepare(`
      SELECT id, email, name, phone, academy_name, role, points, created_at
      FROM users WHERE id = ?
    `).bind(t).first();if(!s)return e.json({success:!1,error:"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."},404);let r={results:[]};try{r=await e.env.DB.prepare(`
        SELECT id, phone_number, verification_method, document_url, status, 
               created_at, processed_at, admin_note
        FROM sender_verification_requests
        WHERE user_id = ?
        ORDER BY created_at DESC
      `).bind(t).all()}catch(i){console.error("Verification requests error (non-critical):",i)}let a={results:[]};try{a=await e.env.DB.prepare(`
        SELECT id, phone_number, verification_method, status, verification_date, created_at
        FROM sender_ids
        WHERE user_id = ?
        ORDER BY created_at DESC
      `).bind(t).all()}catch(i){console.error("Sender numbers error (non-critical):",i)}let n={results:[]};try{n=await e.env.DB.prepare(`
        SELECT id, title, slug, status, view_count, created_at, updated_at
        FROM landing_pages
        WHERE user_id = ?
        ORDER BY created_at DESC
        LIMIT 10
      `).bind(t).all()}catch(i){console.error("Landing pages error (non-critical):",i)}let l={results:[]};try{l=await e.env.DB.prepare(`
        SELECT program_key, granted_at, expires_at
        FROM user_permissions
        WHERE user_id = ? AND is_active = 1
        ORDER BY granted_at DESC
      `).bind(t).all()}catch(i){console.error("Permissions error (non-critical):",i)}let o={total_sent:0,success_count:0,failed_count:0};try{const i=await e.env.DB.prepare(`
        SELECT 
          COUNT(*) as total_sent,
          SUM(CASE WHEN status = 'success' THEN 1 ELSE 0 END) as success_count,
          SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END) as failed_count
        FROM sms_logs
        WHERE user_id = ?
      `).bind(t).first();i&&(o=i)}catch(i){console.error("SMS stats error (non-critical):",i)}return e.json({success:!0,user:s,verificationRequests:r.results||[],senderNumbers:a.results||[],landingPages:n.results||[],permissions:l.results||[],smsStats:o||{total_sent:0,success_count:0,failed_count:0}})}catch(t){return console.error("Get user detail error:",t),e.json({success:!1,error:"ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."},500)}});d.get("/admin/users/:id",async e=>{var r,a;const{env:t}=e,s=e.req.param("id");try{const n=await t.DB.prepare("SELECT * FROM users WHERE id = ?").bind(s).first();if(!n)return e.html("<h1>ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h1>",404);const l=await t.DB.prepare("SELECT program_key, granted_at FROM user_permissions WHERE user_id = ? AND is_active = 1").bind(s).all(),o=await t.DB.prepare("SELECT * FROM contacts WHERE email = ? ORDER BY created_at DESC").bind(n.email).all(),i=await t.DB.prepare("SELECT * FROM deposits WHERE user_id = ? ORDER BY created_at DESC").bind(s).all(),c={search_volume:"ë„¤ì´ë²„ ê²€ìƒ‰ëŸ‰ ì¡°íšŒ",parent_message:"í•™ë¶€ëª¨ ì†Œí†µ ë©”ì‹œì§€",blog_writer:"ë¸”ë¡œê·¸ ìë™ ì‘ì„±",landing_builder:"ëœë”©í˜ì´ì§€ ìƒì„±ê¸°",sms_sender:"SMS ë¬¸ì ë°œì†¡",student_management:"í•™ìƒ ê´€ë¦¬",dashboard_analytics:"í†µí•© ë¶„ì„ ëŒ€ì‹œë³´ë“œ",ai_learning_report:"AI í•™ìŠµ ë¦¬í¬íŠ¸",landing_manager:"ëœë”©í˜ì´ì§€ ê´€ë¦¬",keyword_analyzer:"í‚¤ì›Œë“œ ë¶„ì„ê¸°",review_template:"í›„ê¸° í…œí”Œë¦¿",ad_copy_generator:"ê´‘ê³  ë¬¸êµ¬ ìƒì„±ê¸°",photo_optimizer:"ì‚¬ì§„ ìµœì í™”",competitor_analysis:"ê²½ìŸì‚¬ ë¶„ì„",blog_checklist:"ë¸”ë¡œê·¸ ì²´í¬ë¦¬ìŠ¤íŠ¸",content_calendar:"ì½˜í…ì¸  ìº˜ë¦°ë”",consultation_script:"ìƒë‹´ ìŠ¤í¬ë¦½íŠ¸",place_optimization:"í”Œë ˆì´ìŠ¤ ìµœì í™”",roi_calculator:"ROI ê³„ì‚°ê¸°"};return e.html(`
      <!DOCTYPE html>
      <html lang="ko">
      <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>${n.name} ìƒì„¸ ì •ë³´ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
          <script src="https://cdn.tailwindcss.com"><\/script>
          <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
          <style>
              .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
              .info-card { transition: all 0.3s ease; }
              .info-card:hover { transform: translateY(-2px); box-shadow: 0 8px 15px -5px rgba(0, 0, 0, 0.1); }
          </style>
      </head>
      <body class="bg-gray-50">
          <!-- í—¤ë” -->
          <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
              <div class="max-w-7xl mx-auto px-6 py-4">
                  <div class="flex justify-between items-center">
                      <div class="flex items-center gap-8">
                          <a href="/admin" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤ ê´€ë¦¬ì</a>
                          <div class="flex gap-4">
                              <a href="/admin" class="text-gray-600 hover:text-purple-600">ëŒ€ì‹œë³´ë“œ</a>
                              <a href="/admin/users" class="text-purple-600 font-medium">ì‚¬ìš©ì</a>
                              <a href="/admin/contacts" class="text-gray-600 hover:text-purple-600">ë¬¸ì˜</a>
                          </div>
                      </div>
                      <button onclick="logout()" class="text-gray-600 hover:text-red-600">
                          <i class="fas fa-sign-out-alt mr-2"></i>ë¡œê·¸ì•„ì›ƒ
                      </button>
                  </div>
              </div>
          </nav>

          <!-- ë©”ì¸ ì»¨í…ì¸  -->
          <div class="max-w-7xl mx-auto px-6 py-8">
              <!-- ìƒë‹¨: ë’¤ë¡œê°€ê¸° + ì‚¬ìš©ì ì´ë¦„ -->
              <div class="mb-8">
                  <a href="/admin/users" class="text-purple-600 hover:text-purple-700 font-medium mb-4 inline-flex items-center">
                      <i class="fas fa-arrow-left mr-2"></i> ì‚¬ìš©ì ëª©ë¡ìœ¼ë¡œ
                  </a>
                  <h1 class="text-3xl font-bold text-gray-900 mt-4 mb-2">${n.name}ë‹˜ì˜ ìƒì„¸ ì •ë³´</h1>
                  <p class="text-gray-600">ì‚¬ìš©ì ID: ${n.id} | ì´ë©”ì¼: ${n.email}</p>
              </div>

              <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                  <!-- ì™¼ìª½: ê¸°ë³¸ ì •ë³´ -->
                  <div class="lg:col-span-1 space-y-6">
                      <!-- ê¸°ë³¸ ì •ë³´ ì¹´ë“œ -->
                      <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 info-card">
                          <div class="flex items-center gap-4 mb-6">
                              <div class="w-16 h-16 gradient-purple rounded-full flex items-center justify-center">
                                  <i class="fas fa-user text-white text-2xl"></i>
                              </div>
                              <div>
                                  <h2 class="text-xl font-bold text-gray-900">${n.name}</h2>
                                  <span class="px-3 py-1 text-xs font-medium rounded-full ${n.role==="admin"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}">
                                      ${n.role==="admin"?"ê´€ë¦¬ì":"ì¼ë°˜íšŒì›"}
                                  </span>
                              </div>
                          </div>

                          <div class="space-y-4">
                              <div>
                                  <div class="text-xs text-gray-500 mb-1">ğŸ“§ ì´ë©”ì¼</div>
                                  <div class="text-sm font-medium text-gray-900">${n.email}</div>
                              </div>
                              <div>
                                  <div class="text-xs text-gray-500 mb-1">ğŸ“± ì „í™”ë²ˆí˜¸</div>
                                  <div class="text-sm font-medium text-gray-900">${n.phone||"-"}</div>
                              </div>
                              <div>
                                  <div class="text-xs text-gray-500 mb-1">ğŸ« í•™ì›ëª…</div>
                                  <div class="text-sm font-medium text-gray-900">${n.academy_name||"-"}</div>
                              </div>
                              <div>
                                  <div class="text-xs text-gray-500 mb-1">ğŸ’° í¬ì¸íŠ¸</div>
                                  <div class="text-xl font-bold text-blue-600">${(n.points||0).toLocaleString()}P</div>
                              </div>
                              <div>
                                  <div class="text-xs text-gray-500 mb-1">ğŸ“… ê°€ì…ì¼</div>
                                  <div class="text-sm font-medium text-gray-900">${new Date(n.created_at).toLocaleString("ko-KR",{timeZone:"Asia/Seoul"})}</div>
                              </div>
                          </div>
                      </div>

                      <!-- ë¹ ë¥¸ ê´€ë¦¬ ë²„íŠ¼ -->
                      ${n.role!=="admin"?`
                      <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 info-card">
                          <h3 class="text-lg font-bold text-gray-900 mb-4">ë¹ ë¥¸ ê´€ë¦¬</h3>
                          <div class="space-y-2">
                              <button onclick="changePassword(${n.id}, '${n.name}')" class="w-full px-4 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition text-sm font-medium text-left">
                                  ğŸ”‘ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
                              </button>
                              <button onclick="givePoints(${n.id}, '${n.name}', ${n.points||0})" class="w-full px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition text-sm font-medium text-left">
                                  ğŸ’° í¬ì¸íŠ¸ ì§€ê¸‰
                              </button>
                              <button onclick="deductPoints(${n.id}, '${n.name}', ${n.points||0})" class="w-full px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition text-sm font-medium text-left">
                                  âŒ í¬ì¸íŠ¸ ì°¨ê°
                              </button>
                              <button onclick="loginAs(${n.id}, '${n.name}')" class="w-full px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition text-sm font-medium text-left">
                                  ğŸ‘¤ ì´ ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸
                              </button>
                          </div>
                      </div>
                      `:""}
                  </div>

                  <!-- ì˜¤ë¥¸ìª½: ìƒì„¸ ì •ë³´ -->
                  <div class="lg:col-span-2 space-y-6">
                      <!-- í™œì„±í™”ëœ ê¶Œí•œ -->
                      <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 info-card">
                          <h3 class="text-lg font-bold text-gray-900 mb-4">âš™ï¸ í™œì„±í™”ëœ ê¶Œí•œ</h3>
                          ${l!=null&&l.results&&l.results.length>0?`
                              <div class="grid grid-cols-2 gap-3">
                                  ${l.results.map(p=>`
                                      <div class="flex items-center gap-2 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                          <i class="fas fa-check-circle text-blue-600"></i>
                                          <span class="text-sm font-medium text-blue-900">${c[p.program_key]||p.program_key}</span>
                                      </div>
                                  `).join("")}
                              </div>
                          `:'<p class="text-gray-500 text-sm">í™œì„±í™”ëœ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤</p>'}
                          <button onclick="window.location.href='/admin/users'" class="mt-4 text-purple-600 hover:text-purple-700 text-sm font-medium">
                              ê¶Œí•œ ìˆ˜ì •í•˜ë ¤ë©´ ì‚¬ìš©ì ëª©ë¡ì—ì„œ ê¶Œí•œ ê´€ë¦¬ ë²„íŠ¼ì„ ì‚¬ìš©í•˜ì„¸ìš” â†’
                          </button>
                      </div>

                      <!-- ë¬¸ì˜ ë‚´ì—­ -->
                      <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 info-card">
                          <h3 class="text-lg font-bold text-gray-900 mb-4">ğŸ“§ ë¬¸ì˜ ë‚´ì—­</h3>
                          ${o!=null&&o.results&&o.results.length>0?`
                              <div class="space-y-3 max-h-96 overflow-y-auto">
                                  ${o.results.map(p=>`
                                      <div class="p-4 border border-gray-200 rounded-lg hover:border-purple-300 transition">
                                          <div class="flex justify-between items-start mb-2">
                                              <div class="font-medium text-gray-900">${p.message}</div>
                                              <span class="px-2 py-1 text-xs font-medium rounded ${p.status==="pending"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}">
                                                  ${p.status==="pending"?"ëŒ€ê¸°ì¤‘":"ì™„ë£Œ"}
                                              </span>
                                          </div>
                                          <div class="text-xs text-gray-500">
                                              ${new Date(p.created_at).toLocaleString("ko-KR",{timeZone:"Asia/Seoul"})}
                                          </div>
                                      </div>
                                  `).join("")}
                              </div>
                          `:'<p class="text-gray-500 text-sm">ë¬¸ì˜ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</p>'}
                      </div>

                      <!-- ì…ê¸ˆ ì‹ ì²­ ë‚´ì—­ (deposits í…Œì´ë¸”ì´ ìˆë‹¤ë©´) -->
                      ${i!=null&&i.results&&i.results.length>0?`
                      <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 info-card">
                          <h3 class="text-lg font-bold text-gray-900 mb-4">ğŸ’³ ì…ê¸ˆ ì‹ ì²­ ë‚´ì—­</h3>
                          <div class="space-y-3 max-h-96 overflow-y-auto">
                              ${i.results.map(p=>`
                                  <div class="p-4 border border-gray-200 rounded-lg hover:border-purple-300 transition">
                                      <div class="flex justify-between items-start mb-2">
                                          <div class="font-medium text-gray-900">${(p.amount||0).toLocaleString()}ì›</div>
                                          <span class="px-2 py-1 text-xs font-medium rounded ${p.status==="pending"?"bg-orange-100 text-orange-700":p.status==="approved"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}">
                                              ${p.status==="pending"?"ëŒ€ê¸°ì¤‘":p.status==="approved"?"ìŠ¹ì¸":"ê±°ë¶€"}
                                          </span>
                                      </div>
                                      ${p.business_license_url?`
                                          <a href="${p.business_license_url}" target="_blank" class="text-xs text-purple-600 hover:text-purple-700">
                                              ğŸ“„ ì‚¬ì—…ìë“±ë¡ì¦ ë³´ê¸°
                                          </a>
                                      `:""}
                                      <div class="text-xs text-gray-500 mt-2">
                                          ${new Date(p.created_at).toLocaleString("ko-KR",{timeZone:"Asia/Seoul"})}
                                      </div>
                                  </div>
                              `).join("")}
                          </div>
                      </div>
                      `:""}

                      <!-- ì¶”ê°€ ì •ë³´ (ìˆë‹¤ë©´) -->
                      <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 info-card">
                          <h3 class="text-lg font-bold text-gray-900 mb-4">ğŸ“Š í†µê³„ ì •ë³´</h3>
                          <div class="grid grid-cols-3 gap-4">
                              <div class="text-center p-4 bg-purple-50 rounded-lg">
                                  <div class="text-2xl font-bold text-purple-600">${((r=l==null?void 0:l.results)==null?void 0:r.length)||0}</div>
                                  <div class="text-xs text-gray-600 mt-1">í™œì„± ê¶Œí•œ</div>
                              </div>
                              <div class="text-center p-4 bg-blue-50 rounded-lg">
                                  <div class="text-2xl font-bold text-blue-600">${((a=o==null?void 0:o.results)==null?void 0:a.length)||0}</div>
                                  <div class="text-xs text-gray-600 mt-1">ì´ ë¬¸ì˜</div>
                              </div>
                              <div class="text-center p-4 bg-green-50 rounded-lg">
                                  <div class="text-2xl font-bold text-green-600">${(n.points||0).toLocaleString()}</div>
                                  <div class="text-xs text-gray-600 mt-1">í¬ì¸íŠ¸</div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>

          <script src="/static/admin-users.js"><\/script>
          <script>
              function logout() {
                  if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                      localStorage.removeItem('user');
                      window.location.href = '/';
                  }
              }
          <\/script>
      </body>
      </html>
    `)}catch(n){return console.error("ì‚¬ìš©ì ìƒì„¸ ì •ë³´ ì¡°íšŒ ì˜¤ë¥˜:",n),e.html("<h1>ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h1>",500)}});d.get("/admin/contacts",async e=>{var r,a;const{env:t}=e,s=await t.DB.prepare("SELECT * FROM contacts ORDER BY created_at DESC").all();return e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë¬¸ì˜ ê´€ë¦¬ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- í—¤ë” -->
        <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-8">
                        <a href="/admin" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤ ê´€ë¦¬ì</a>
                        <div class="flex gap-4">
                            <a href="/admin" class="text-gray-600 hover:text-purple-600">ëŒ€ì‹œë³´ë“œ</a>
                            <a href="/admin/users" class="text-gray-600 hover:text-purple-600">ì‚¬ìš©ì</a>
                            <a href="/admin/contacts" class="text-purple-600 font-medium">ë¬¸ì˜</a>
                        </div>
                    </div>
                    <button onclick="logout()" class="text-gray-600 hover:text-red-600">
                        <i class="fas fa-sign-out-alt mr-2"></i>ë¡œê·¸ì•„ì›ƒ
                    </button>
                </div>
            </div>
        </nav>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <div class="max-w-7xl mx-auto px-6 py-8">
            <div class="mb-8 flex justify-between items-center">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">ë¬¸ì˜ ê´€ë¦¬</h1>
                    <p class="text-gray-600">ì „ì²´ ${((r=s==null?void 0:s.results)==null?void 0:r.length)||0}ê±´ì˜ ë¬¸ì˜</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="filterContacts('all')" class="px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium">ì „ì²´</button>
                    <button onclick="filterContacts('pending')" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm font-medium">ëŒ€ê¸°ì¤‘</button>
                    <button onclick="filterContacts('completed')" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm font-medium">ì²˜ë¦¬ì™„ë£Œ</button>
                </div>
            </div>

            <!-- ë¬¸ì˜ ëª©ë¡ -->
            <div class="space-y-4">
                ${((a=s==null?void 0:s.results)==null?void 0:a.map(n=>`
                    <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition" data-status="${n.status||"pending"}">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex-1">
                                <div class="flex items-center gap-3 mb-2">
                                    <h3 class="text-lg font-bold text-gray-900">${n.name}</h3>
                                    <span class="px-3 py-1 text-xs font-medium rounded-full ${n.status==="completed"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}">
                                        ${n.status==="completed"?"ì²˜ë¦¬ì™„ë£Œ":"ëŒ€ê¸°ì¤‘"}
                                    </span>
                                    <span class="px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-700">
                                        ${n.inquiry||"ì¼ë°˜ë¬¸ì˜"}
                                    </span>
                                </div>
                                <div class="flex gap-4 text-sm text-gray-600">
                                    <span><i class="fas fa-building mr-1"></i>${n.academy||"-"}</span>
                                    <span><i class="fas fa-phone mr-1"></i>${n.phone}</span>
                                    <span><i class="fas fa-envelope mr-1"></i>${n.email}</span>
                                </div>
                            </div>
                            <div class="text-sm text-gray-500">
                                ${new Date(n.created_at).toLocaleString("ko-KR",{timeZone:"Asia/Seoul"})}
                            </div>
                        </div>

                        <div class="bg-gray-50 rounded-xl p-4 mb-4">
                            <div class="text-sm text-gray-700 whitespace-pre-wrap">${n.message}</div>
                        </div>

                        ${n.programs?`
                            <div class="flex gap-2 mb-4">
                                <span class="text-sm text-gray-600">ê´€ì‹¬ í”„ë¡œê·¸ë¨:</span>
                                ${JSON.parse(n.programs||"[]").map(l=>`
                                    <span class="px-2 py-1 bg-purple-50 text-purple-700 text-xs rounded-lg">${l}</span>
                                `).join("")}
                            </div>
                        `:""}

                        <div class="flex gap-2">
                            <button onclick="updateStatus(${n.id}, 'completed')" class="px-4 py-2 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600">
                                <i class="fas fa-check mr-1"></i>ì²˜ë¦¬ì™„ë£Œ
                            </button>
                            <button onclick="updateStatus(${n.id}, 'pending')" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-300">
                                <i class="fas fa-undo mr-1"></i>ëŒ€ê¸°ì¤‘ìœ¼ë¡œ
                            </button>
                        </div>
                    </div>
                `).join(""))||'<div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-12 text-center text-gray-500">ë“±ë¡ëœ ë¬¸ì˜ê°€ ì—†ìŠµë‹ˆë‹¤</div>'}
            </div>
        </div>

        <script>
            function logout() {
                if(confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    localStorage.removeItem('user');
                    window.location.href = '/';
                }
            }

            function filterContacts(status) {
                const items = document.querySelectorAll('[data-status]');
                const buttons = document.querySelectorAll('button[onclick^="filterContacts"]');
                
                buttons.forEach(btn => {
                    btn.classList.remove('bg-purple-600', 'text-white');
                    btn.classList.add('bg-gray-200', 'text-gray-700');
                });
                event.target.classList.add('bg-purple-600', 'text-white');
                event.target.classList.remove('bg-gray-200', 'text-gray-700');
                
                items.forEach(item => {
                    if(status === 'all') {
                        item.style.display = 'block';
                    } else {
                        item.style.display = item.dataset.status === status ? 'block' : 'none';
                    }
                });
            }

            async function updateStatus(id, status) {
                try {
                    const response = await fetch('/api/admin/contacts/' + id, {
                        method: 'PATCH',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ status })
                    });

                    if(response.ok) {
                        alert('ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤');
                        location.reload();
                    } else {
                        alert('ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨');
                    }
                } catch(error) {
                    alert('ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');
                }
            }
        <\/script>
    </body>
    </html>
  `)});d.post("/api/admin/init-sender-table",async e=>{try{const{adminSecret:t}=await e.req.json();if(t!=="superplace-init-2026")return e.json({success:!1,error:"ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤."},403);console.log("Creating sender_verification_requests table..."),await e.env.DB.prepare(`
      CREATE TABLE IF NOT EXISTS sender_verification_requests (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        user_id INTEGER NOT NULL,
        phone_number TEXT NOT NULL,
        business_name TEXT NOT NULL,
        business_registration_number TEXT NOT NULL,
        business_registration_image TEXT NOT NULL,
        certificate_image TEXT,
        employment_cert_image TEXT,
        contract_image TEXT,
        request_date DATETIME DEFAULT CURRENT_TIMESTAMP,
        status TEXT DEFAULT 'pending',
        admin_note TEXT,
        rejection_reason TEXT,
        processed_by INTEGER,
        processed_date DATETIME,
        FOREIGN KEY (user_id) REFERENCES users(id),
        FOREIGN KEY (processed_by) REFERENCES users(id)
      )
    `).run(),await e.env.DB.prepare(`
      CREATE INDEX IF NOT EXISTS idx_sender_verification_user_id ON sender_verification_requests(user_id)
    `).run(),await e.env.DB.prepare(`
      CREATE INDEX IF NOT EXISTS idx_sender_verification_status ON sender_verification_requests(status)
    `).run(),await e.env.DB.prepare(`
      CREATE INDEX IF NOT EXISTS idx_sender_verification_phone ON sender_verification_requests(phone_number)
    `).run();try{await e.env.DB.prepare("ALTER TABLE sender_ids ADD COLUMN verification_request_id INTEGER").run()}catch(s){console.log("verification_request_id column already exists or error:",s.message)}try{await e.env.DB.prepare("ALTER TABLE sender_ids ADD COLUMN business_name TEXT").run()}catch(s){console.log("business_name column already exists or error:",s.message)}try{await e.env.DB.prepare("ALTER TABLE sender_ids ADD COLUMN business_registration_number TEXT").run()}catch(s){console.log("business_registration_number column already exists or error:",s.message)}return console.log("Table creation complete!"),e.json({success:!0,message:"âœ… sender_verification_requests í…Œì´ë¸”ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!"})}catch(t){return console.error("Init table error:",t),e.json({success:!1,error:"í…Œì´ë¸” ìƒì„± ì‹¤íŒ¨: "+t.message},500)}});d.get("/api/user/:id/permissions",async e=>{try{const{env:t}=e,s=e.req.param("id"),r=await t.DB.prepare(`
      SELECT permission_type, permission_name, granted_at, expires_at, is_active
      FROM user_permissions
      WHERE user_id = ? AND is_active = 1
      ORDER BY granted_at DESC
    `).bind(s).all();return e.json({permissions:r.results})}catch(t){return console.error("Get permissions error:",t),e.json({success:!1,error:"ê¶Œí•œ ì¡°íšŒ ì‹¤íŒ¨"},500)}});d.post("/api/admin/permissions/grant",async e=>{try{const{env:t}=e,{userId:s,permissionType:r,permissionName:a,expiresAt:n}=await e.req.json(),l=await t.DB.prepare(`
      INSERT INTO user_permissions (user_id, permission_type, permission_name, granted_by, expires_at, is_active)
      VALUES (?, ?, ?, 1, ?, 1)
    `).bind(s,r,a,n||null).run();return e.json({success:!0,message:"ê¶Œí•œì´ ë¶€ì—¬ë˜ì—ˆìŠµë‹ˆë‹¤"})}catch(t){return console.error("Grant permission error:",t),e.json({success:!1,error:"ê¶Œí•œ ë¶€ì—¬ ì‹¤íŒ¨"},500)}});d.post("/api/admin/permissions/revoke",async e=>{try{const{env:t}=e,{userId:s,permissionType:r,permissionName:a}=await e.req.json();return await t.DB.prepare(`
      UPDATE user_permissions
      SET is_active = 0
      WHERE user_id = ? AND permission_type = ? AND permission_name = ?
    `).bind(s,r,a).run(),e.json({success:!0,message:"ê¶Œí•œì´ íšŒìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤"})}catch(t){return console.error("Revoke permission error:",t),e.json({success:!1,error:"ê¶Œí•œ íšŒìˆ˜ ì‹¤íŒ¨"},500)}});d.patch("/api/admin/contacts/:id",async e=>{try{const t=e.req.param("id"),{status:s}=await e.req.json(),{env:r}=e;return await r.DB.prepare("UPDATE contacts SET status = ? WHERE id = ?").bind(s,t).run(),e.json({success:!0})}catch(t){return console.error("Update contact status error:",t),e.json({success:!1},500)}});d.patch("/api/admin/contacts/:id",async e=>{try{const t=e.req.param("id"),{status:s}=await e.req.json(),{env:r}=e;return await r.DB.prepare("UPDATE contacts SET status = ? WHERE id = ?").bind(s,t).run(),e.json({success:!0})}catch(t){return console.error("Update contact status error:",t),e.json({success:!1},500)}});d.get("/api/test/db",async e=>{const{env:t}=e;try{if(!t.DB)return e.json({success:!1,error:"DB binding not found",env_keys:Object.keys(t)});const s=await t.DB.prepare("SELECT 1 as test").first();return e.json({success:!0,message:"DB connection OK",result:s})}catch(s){return e.json({success:!1,error:s.message,stack:s.stack},500)}});d.get("/admin/dashboard",async e=>{var g,x,v,w,b;const{env:t}=e;if(!(t!=null&&t.DB))return e.html('<h1>DB Error</h1><a href="/admin/users">Users</a>');let s=0,r=0,a=0,n=0,l=0;try{s=((g=await t.DB.prepare("SELECT COUNT(*)c FROM users").first())==null?void 0:g.c)||0}catch{}try{r=((x=await t.DB.prepare("SELECT COUNT(*)c FROM contacts").first())==null?void 0:x.c)||0}catch{}try{a=((v=await t.DB.prepare("SELECT COUNT(*)c FROM contacts WHERE status=?").bind("pending").first())==null?void 0:v.c)||0}catch{}try{n=((w=await t.DB.prepare("SELECT COUNT(*)c FROM deposit_requests WHERE status=?").bind("pending").first())==null?void 0:w.c)||0}catch{}try{l=((b=await t.DB.prepare("SELECT COUNT(*)c FROM sender_verification_requests WHERE status=?").bind("pending").first())==null?void 0:b.c)||0}catch{}const o='<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</title><script src="https://cdn.tailwindcss.com"><\/script><link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet"></head><body class="bg-gray-50">',i=`<nav class="bg-white border-b"><div class="max-w-7xl mx-auto px-6 py-4"><div class="flex justify-between items-center"><div class="flex items-center gap-8"><a href="/admin/dashboard" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤</a><div class="flex gap-4"><a href="/admin/dashboard" class="text-purple-600 font-semibold">ëŒ€ì‹œë³´ë“œ</a><a href="/admin/users" class="text-gray-600 hover:text-purple-600">ì‚¬ìš©ì</a><a href="/admin/contacts" class="text-gray-600 hover:text-purple-600">ë¬¸ì˜</a><a href="/admin/sms" class="text-gray-600 hover:text-purple-600">ë¬¸ì</a><a href="/admin/sender/verification" class="text-gray-600 hover:text-purple-600">ë°œì‹ ë²ˆí˜¸</a></div></div><button onclick="localStorage.removeItem('user');location.href='/'" class="text-gray-600 hover:text-red-600"><i class="fas fa-sign-out-alt mr-2"></i>ë¡œê·¸ì•„ì›ƒ</button></div></div></nav>`,c=`<div class="max-w-7xl mx-auto px-6 py-8"><h1 class="text-3xl font-bold mb-8">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1><div class="grid md:grid-cols-3 gap-6 mb-8"><div class="bg-white rounded-xl shadow p-6 border"><div class="flex items-center justify-between mb-2"><span class="text-gray-600">ì „ì²´ ì‚¬ìš©ì</span><i class="fas fa-users text-blue-600 text-2xl"></i></div><p class="text-3xl font-bold">${s}</p></div><div class="bg-white rounded-xl shadow p-6 border"><div class="flex items-center justify-between mb-2"><span class="text-gray-600">ì „ì²´ ë¬¸ì˜</span><i class="fas fa-envelope text-green-600 text-2xl"></i></div><p class="text-3xl font-bold">${r}</p></div><div class="bg-white rounded-xl shadow p-6 border"><div class="flex items-center justify-between mb-2"><span class="text-gray-600">ëŒ€ê¸°ì¤‘ ë¬¸ì˜</span><i class="fas fa-clock text-orange-600 text-2xl"></i></div><p class="text-3xl font-bold">${a}</p></div></div>`,p=`<div class="mb-8"><h2 class="text-xl font-bold mb-4">ì‹ ì²­ ëŒ€ê¸°</h2><div class="grid md:grid-cols-2 gap-6"><div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow p-6 text-white"><div class="flex items-center justify-between mb-2"><span>ì…ê¸ˆ ëŒ€ê¸°</span><i class="fas fa-money-bill-wave text-2xl"></i></div><p class="text-3xl font-bold">${n}</p></div><div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow p-6 text-white"><div class="flex items-center justify-between mb-2"><span>ë°œì‹ ë²ˆí˜¸ ëŒ€ê¸°</span><i class="fas fa-phone text-2xl"></i></div><p class="text-3xl font-bold">${l}</p></div></div></div>`;return e.html(o+i+c+p+'<div class="grid md:grid-cols-3 gap-6"><a href="/admin/users" class="bg-white rounded-xl shadow p-6 hover:shadow-md transition border"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"><i class="fas fa-user-cog text-blue-600 text-xl"></i></div><div><h3 class="text-lg font-bold">ì‚¬ìš©ì ê´€ë¦¬</h3><p class="text-gray-600 text-sm">ê¶Œí•œ ê´€ë¦¬</p></div></div></a><a href="/admin/contacts" class="bg-white rounded-xl shadow p-6 hover:shadow-md transition border"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"><i class="fas fa-comments text-green-600 text-xl"></i></div><div><h3 class="text-lg font-bold">ë¬¸ì˜ ê´€ë¦¬</h3><p class="text-gray-600 text-sm">ë¬¸ì˜ ì²˜ë¦¬</p></div></div></a><a href="/admin/sms" class="bg-white rounded-xl shadow p-6 hover:shadow-md transition border"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"><i class="fas fa-sms text-blue-600 text-xl"></i></div><div><h3 class="text-lg font-bold">ë¬¸ì ê´€ë¦¬</h3><p class="text-gray-600 text-sm">SMS ë°œì†¡</p></div></div></a><a href="/admin/sender/verification" class="bg-white rounded-xl shadow p-6 hover:shadow-md transition border"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"><i class="fas fa-phone text-purple-600 text-xl"></i></div><div><h3 class="text-lg font-bold">ë°œì‹ ë²ˆí˜¸</h3><p class="text-gray-600 text-sm">ì¸ì¦ ìŠ¹ì¸</p></div></div></a><a href="/admin/deposits" class="bg-white rounded-xl shadow p-6 hover:shadow-md transition border"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"><i class="fas fa-money-bill-wave text-green-600 text-xl"></i></div><div><h3 class="text-lg font-bold">ì…ê¸ˆ ê´€ë¦¬</h3><p class="text-gray-600 text-sm">í¬ì¸íŠ¸ ìŠ¹ì¸</p></div></div></a><a href="/admin/programs" class="bg-white rounded-xl shadow p-6 hover:shadow-md transition border"><div class="flex items-center gap-4"><div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"><i class="fas fa-graduation-cap text-purple-600 text-xl"></i></div><div><h3 class="text-lg font-bold">í”„ë¡œê·¸ë¨</h3><p class="text-gray-600 text-sm">êµìœ¡ ê´€ë¦¬</p></div></div></a></div></div></body></html>')});d.get("/admin/programs.html",e=>e.redirect("/admin/programs",301));d.get("/admin/programs",async e=>{const{env:t}=e,s=await t.DB.prepare("SELECT id, email, name, role FROM users WHERE role != ? ORDER BY created_at DESC").bind("admin").all();return e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í”„ë¡œê·¸ë¨ ê´€ë¦¬ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-8">
                        <a href="/admin/dashboard" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤ ê´€ë¦¬ì</a>
                        <div class="flex gap-4">
                            <a href="/admin/dashboard" class="text-gray-600 hover:text-purple-600">ëŒ€ì‹œë³´ë“œ</a>
                            <a href="/admin/users" class="text-gray-600 hover:text-purple-600">ì‚¬ìš©ì</a>
                            <a href="/admin/contacts" class="text-gray-600 hover:text-purple-600">ë¬¸ì˜</a>
                            <a href="/admin/programs" class="text-purple-600 font-semibold">í”„ë¡œê·¸ë¨</a>
                        </div>
                    </div>
                    <button onclick="logout()" class="text-gray-600 hover:text-red-600">
                        <i class="fas fa-sign-out-alt mr-2"></i>ë¡œê·¸ì•„ì›ƒ
                    </button>
                </div>
            </div>
        </nav>

        <div class="max-w-7xl mx-auto px-6 py-8">
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">í”„ë¡œê·¸ë¨ ê´€ë¦¬</h1>
                <p class="text-gray-600">ì´ 13ê°œì˜ êµìœ¡ í”„ë¡œê·¸ë¨ì´ ë“±ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤. í´ë¦­í•˜ì—¬ ê¶Œí•œì„ ê´€ë¦¬í•˜ì„¸ìš”.</p>
            </div>

            <div id="programsGrid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
        </div>

        <!-- ê¶Œí•œ ê´€ë¦¬ ëª¨ë‹¬ -->
        <div id="permissionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-2xl p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">
                        <span id="modalProgramIcon"></span>
                        <span id="modalProgramName"></span> ê¶Œí•œ ê´€ë¦¬
                    </h2>
                    <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>

                <div class="mb-6">
                    <h3 class="text-lg font-bold mb-4">ì‚¬ìš©ìë³„ ê¶Œí•œ ì„¤ì •</h3>
                    <div id="usersList" class="space-y-3 max-h-96 overflow-y-auto"></div>
                </div>

                <div class="flex gap-4">
                    <button onclick="savePermissions()" class="flex-1 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-semibold">
                        <i class="fas fa-save mr-2"></i>ì €ì¥
                    </button>
                    <button onclick="closeModal()" class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-semibold">
                        ì·¨ì†Œ
                    </button>
                </div>
            </div>
        </div>

        <script>
            const programs = [
                { id: 'naver-place', name: 'ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ ìƒìœ„ë…¸ì¶œ', desc: 'ì§€ì—­ ê²€ìƒ‰ 1ìœ„ë¥¼ ìœ„í•œ ì‹¤ì „ ë…¸í•˜ìš°', icon: 'ğŸ—ºï¸', url: '/programs/naver-place' },
                { id: 'blog', name: 'ë¸”ë¡œê·¸ ìƒìœ„ë…¸ì¶œ', desc: 'ê²€ìƒ‰ 1í˜ì´ì§€ ì§„ì…ì„ ìœ„í•œ ë¸”ë¡œê·¸ ë§ˆì¼€íŒ…', icon: 'ğŸ“', url: '/programs/blog' },
                { id: 'funnel', name: 'í¼ë„ ë§ˆì¼€íŒ…', desc: 'ìë™í™”ëœ í•™ìƒ ëª¨ì§‘ ì‹œìŠ¤í…œ êµ¬ì¶•', icon: 'ğŸ¯', url: '/programs/funnel' },
                { id: 'sns', name: 'SNS ë§ˆì¼€íŒ…', desc: 'ì¸ìŠ¤íƒ€ê·¸ë¨, í˜ì´ìŠ¤ë¶ í™œìš© ì „ëµ', icon: 'ğŸ“±', url: '/programs/sns' },
                { id: 'video', name: 'ì˜ìƒ ë§ˆì¼€íŒ…', desc: 'ìœ íŠœë¸Œ, ìˆí¼ ì½˜í…ì¸  ì œì‘', icon: 'ğŸ¥', url: '/programs/video' },
                { id: 'ad', name: 'ì˜¨ë¼ì¸ ê´‘ê³ ', desc: 'ë„¤ì´ë²„, êµ¬ê¸€ ê´‘ê³  ìš´ì˜ ì „ëµ', icon: 'ğŸ’°', url: '/programs/ad' },
                { id: 'community', name: 'ì»¤ë®¤ë‹ˆí‹° ë§ˆì¼€íŒ…', desc: 'í•™ë¶€ëª¨ ì»¤ë®¤ë‹ˆí‹° í™œì„±í™” ì „ëµ', icon: 'ğŸ‘¥', url: '/programs/community' },
                { id: 'branding', name: 'ë¸Œëœë”©', desc: 'í•™ì› ë¸Œëœë“œ ì•„ì´ë´í‹°í‹° êµ¬ì¶•', icon: 'ğŸ¨', url: '/programs/branding' },
                { id: 'data', name: 'ë°ì´í„° ë¶„ì„', desc: 'ë§ˆì¼€íŒ… ì„±ê³¼ ë¶„ì„ ë° ìµœì í™”', icon: 'ğŸ“Š', url: '/programs/data' },
                { id: 'carrot', name: 'ë‹¹ê·¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë§ˆì¼€íŒ…', desc: 'ì§€ì—­ ê¸°ë°˜ ë‹¹ê·¼ë§ˆì¼“ í™œìš© ì „ëµ', icon: 'ğŸ¥•', url: '/programs/carrot' },
                { id: 'meta', name: 'ë©”íƒ€ ê´‘ê³ ', desc: 'Facebook/Instagram ê´‘ê³  ìš´ì˜', icon: 'ğŸ“˜', url: '/programs/meta' },
                { id: 'youtube-ad', name: 'ìœ íŠœë¸Œ ê´‘ê³ ', desc: 'ìœ íŠœë¸Œ ê´‘ê³  ìº í˜ì¸ ìš´ì˜', icon: 'ğŸ“º', url: '/programs/youtube-ad' },
                { id: 'threads', name: 'ì“°ë ˆë“œ ë§ˆì¼€íŒ…', desc: 'Meta Threads í™œìš© ì „ëµ', icon: 'ğŸ§µ', url: '/programs/threads' }
            ];

            const users = ${JSON.stringify(s.results||[])};
            let currentProgram = null;
            let userPermissions = {};

            // í”„ë¡œê·¸ë¨ ì¹´ë“œ ë Œë”ë§
            function renderPrograms() {
                const grid = document.getElementById('programsGrid');
                grid.innerHTML = programs.map(p => 
                    '<div onclick="openPermissionModal(\\'' + p.id + '\\')" ' +
                         'class="bg-white rounded-xl shadow-sm p-6 border border-gray-200 hover:border-purple-300 hover:shadow-lg transition cursor-pointer">' +
                        '<div class="text-4xl mb-3">' + p.icon + '</div>' +
                        '<h3 class="text-xl font-bold text-gray-900 mb-2">' + p.name + '</h3>' +
                        '<p class="text-gray-600 text-sm mb-4">' + p.desc + '</p>' +
                        '<div class="flex gap-2">' +
                            '<span class="px-3 py-1 bg-green-100 text-green-700 text-xs rounded-full">í™œì„±í™”</span>' +
                            '<a href="' + p.url + '" target="_blank" onclick="event.stopPropagation()" ' +
                               'class="px-3 py-1 bg-blue-100 text-blue-700 text-xs rounded-full hover:bg-blue-200">' +
                                '<i class="fas fa-external-link-alt mr-1"></i>ë³´ê¸°' +
                            '</a>' +
                        '</div>' +
                    '</div>'
                ).join('');
            }

            // ê¶Œí•œ ê´€ë¦¬ ëª¨ë‹¬ ì—´ê¸°
            async function openPermissionModal(programId) {
                currentProgram = programs.find(p => p.id === programId);
                document.getElementById('modalProgramIcon').textContent = currentProgram.icon;
                document.getElementById('modalProgramName').textContent = currentProgram.name;

                // ì‚¬ìš©ìë³„ ê¶Œí•œ ì¡°íšŒ
                userPermissions = {};
                for (const user of users) {
                    const response = await fetch('/api/user/' + user.id + '/permissions');
                    const data = await response.json();
                    const permissions = data.permissions || [];
                    userPermissions[user.id] = permissions.some(
                        p => p.permission_type === 'program' && p.permission_name === programId && p.is_active === 1
                    );
                }

                renderUsersList();
                document.getElementById('permissionModal').classList.remove('hidden');
            }

            // ì‚¬ìš©ì ëª©ë¡ ë Œë”ë§
            function renderUsersList() {
                const list = document.getElementById('usersList');
                list.innerHTML = users.map(user =>
                    '<div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">' +
                        '<div class="flex-1">' +
                            '<p class="font-semibold text-gray-900">' + user.name + '</p>' +
                            '<p class="text-sm text-gray-600">' + user.email + '</p>' +
                        '</div>' +
                        '<label class="flex items-center cursor-pointer">' +
                            '<input type="checkbox" ' +
                                   'id="user-' + user.id + '" ' +
                                   (userPermissions[user.id] ? 'checked' : '') +
                                   ' class="w-5 h-5 text-purple-600 rounded focus:ring-purple-500">' +
                            '<span class="ml-3 text-sm font-medium text-gray-900">ê¶Œí•œ ë¶€ì—¬</span>' +
                        '</label>' +
                    '</div>'
                ).join('');
            }

            // ê¶Œí•œ ì €ì¥
            async function savePermissions() {
                const updates = [];
                
                for (const user of users) {
                    const checkbox = document.getElementById('user-' + user.id);
                    const hasPermission = checkbox.checked;
                    const hadPermission = userPermissions[user.id];

                    if (hasPermission !== hadPermission) {
                        updates.push({ userId: user.id, hasPermission });
                    }
                }

                if (updates.length === 0) {
                    alert('ë³€ê²½ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                for (const update of updates) {
                    const url = update.hasPermission 
                        ? '/api/admin/permissions/grant'
                        : '/api/admin/permissions/revoke';

                    await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            userId: update.userId,
                            permissionType: 'program',
                            permissionName: currentProgram.id
                        })
                    });
                }

                alert('ê¶Œí•œì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
                closeModal();
            }

            function closeModal() {
                document.getElementById('permissionModal').classList.add('hidden');
                currentProgram = null;
            }

            function logout() {
                if(confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    localStorage.removeItem('user');
                    window.location.href = '/';
                }
            }

            // í˜ì´ì§€ ë¡œë“œ ì‹œ í”„ë¡œê·¸ë¨ ë Œë”ë§
            renderPrograms();
        <\/script>
    </body>
    </html>
  `)});d.get("/sms/senders",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë°œì‹ ë²ˆí˜¸ ê´€ë¦¬ - SMS ë°œì†¡</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-200 shadow-sm">
            <div class="max-w-7xl mx-auto px-6">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center space-x-8">
                        <a href="/dashboard" class="text-xl font-bold text-purple-600">SMS ë°œì†¡ ì‹œìŠ¤í…œ</a>
                        <div class="flex space-x-4">
                            <a href="/sms/senders" class="text-purple-600 border-b-2 border-purple-600 px-3 py-2 font-medium">ë°œì‹ ë²ˆí˜¸</a>
                            <a href="/sms/compose" class="text-gray-600 hover:text-purple-600 px-3 py-2">ë¬¸ì ì‘ì„±</a>
                            <a href="/sms/logs" class="text-gray-600 hover:text-purple-600 px-3 py-2">ë°œì†¡ ë‚´ì—­</a>
                            <a href="/sms/points" class="text-gray-600 hover:text-purple-600 px-3 py-2">í¬ì¸íŠ¸ ê´€ë¦¬</a>
                        </div>
                    </div>
                    <a href="/dashboard" class="text-gray-600 hover:text-purple-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                        </svg>
                    </a>
                </div>
            </div>
        </nav>

        <div class="pt-24 pb-12 px-6">
            <div class="max-w-6xl mx-auto">
                <!-- Header -->
                <div class="mb-8 flex justify-between items-start">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900 mb-2">ğŸ“± ë°œì‹ ë²ˆí˜¸ ê´€ë¦¬</h1>
                        <p class="text-gray-600">ë¬¸ì ë°œì†¡ì— ì‚¬ìš©í•  ë°œì‹ ë²ˆí˜¸ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
                    </div>
                    <a href="/sms/sender/request" 
                       class="px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg font-bold hover:from-green-700 hover:to-green-800 transition shadow-md hover:shadow-lg flex items-center space-x-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                        </svg>
                        <span>ì¸ì¦ ì‹ ì²­</span>
                    </a>
                </div>

                <!-- ì•Œë¦¬ê³  ì•ˆë‚´ -->
                <div class="bg-orange-50 border border-orange-200 rounded-lg p-6 mb-6">
                    <div class="flex items-start space-x-3">
                        <svg class="w-6 h-6 text-orange-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                        </svg>
                        <div>
                            <h3 class="font-semibold text-orange-900 mb-2">âš ï¸ ë°œì‹ ë²ˆí˜¸ ë“±ë¡ ì•ˆë‚´</h3>
                            <ol class="text-sm text-orange-800 space-y-1">
                                <li>1. ë°œì‹ ë²ˆí˜¸ ì¸ì¦ ì‹ ì²­ì„ ì™„ë£Œ</li>
                                <li>2. ì•„ë˜ "ë°œì‹ ë²ˆí˜¸ ì¶”ê°€" ë²„íŠ¼ìœ¼ë¡œ ì¸ì¦ëœ ë²ˆí˜¸ë¥¼ ì‹œìŠ¤í…œì— ë“±ë¡</li>
                                <li>3. ë“±ë¡ëœ ë°œì‹ ë²ˆí˜¸ë¡œ ë¬¸ì ë°œì†¡ ê°€ëŠ¥</li>
                            </ol>
                        </div>
                    </div>
                </div>

                <!-- ë°œì‹ ë²ˆí˜¸ ì¶”ê°€ -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">ë°œì‹ ë²ˆí˜¸ ì¶”ê°€</h2>
                    <div class="flex gap-4">
                        <input type="text" id="phoneNumber" placeholder="010-1234-5678" 
                            class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                            onkeypress="if(event.key === 'Enter') registerSender()">
                        <button id="registerButton" onclick="registerSender()" 
                            class="bg-purple-600 text-white px-8 py-3 rounded-lg hover:bg-purple-700 transition font-medium shadow-sm">
                            ë“±ë¡í•˜ê¸°
                        </button>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">ğŸ’¡ ë¨¼ì € ì¸ì¦ ì‹ ì²­ì„ ì™„ë£Œí•œ í›„, ì¸ì¦ëœ ë²ˆí˜¸ë¥¼ ì—¬ê¸°ì„œ ë“±ë¡í•´ì£¼ì„¸ìš”</p>
                </div>

                <!-- ë°œì‹ ë²ˆí˜¸ ëª©ë¡ -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <h2 class="text-xl font-semibold text-gray-900">ë“±ë¡ëœ ë°œì‹ ë²ˆí˜¸</h2>
                    </div>
                    <div id="sendersContainer" class="divide-y divide-gray-200">
                        <!-- ë¡œë”© ìƒíƒœ -->
                        <div class="p-8 text-center text-gray-500">
                            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-4"></div>
                            ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            let currentUserId = null;

            // ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
            async function checkAuth() {
                const user = localStorage.getItem('user');
                if (!user) {
                    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    window.location.href = '/login';
                    return null;
                }
                const userData = JSON.parse(user);
                currentUserId = userData.id;
                return userData;
            }

            // ë°œì‹ ë²ˆí˜¸ ëª©ë¡ ë¡œë“œ
            async function loadSenders() {
                try {
                    const response = await fetch(\`/api/sms/senders?userId=\${currentUserId}\`);
                    const data = await response.json();

                    const container = document.getElementById('sendersContainer');
                    
                    if (data.success && data.senders.length > 0) {
                        container.innerHTML = data.senders.map(sender => \`
                            <div class="p-6 hover:bg-gray-50 transition">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-4">
                                        <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                                            <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                                            </svg>
                                        </div>
                                        <div>
                                            <div class="font-semibold text-gray-900 text-lg">\${formatPhoneNumber(sender.phone_number)}</div>
                                            <div class="text-sm text-gray-500">ì¸ì¦: \${sender.verification_date || 'ì•Œ ìˆ˜ ì—†ìŒ'}</div>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="px-3 py-1 bg-green-100 text-green-800 text-sm font-medium rounded-full">
                                            âœ“ ì¸ì¦ì™„ë£Œ
                                        </span>
                                        <button onclick="deleteSender(\${sender.id})" 
                                            class="text-red-600 hover:text-red-700 hover:bg-red-50 p-2 rounded-lg transition">
                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        \`).join('');
                    } else {
                        container.innerHTML = \`
                            <div class="p-12 text-center">
                                <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                                </svg>
                                <p class="text-gray-500 mb-2">ë“±ë¡ëœ ë°œì‹ ë²ˆí˜¸ê°€ ì—†ìŠµë‹ˆë‹¤</p>
                                <p class="text-sm text-gray-400">ì•Œë¦¬ê³  ì›¹ì‚¬ì´íŠ¸ì—ì„œ ì¸ì¦ í›„ ë“±ë¡í•´ì£¼ì„¸ìš”</p>
                            </div>
                        \`;
                    }
                } catch (err) {
                    console.error('Failed to load senders:', err);
                    alert('ë°œì‹ ë²ˆí˜¸ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            }

            // ì „í™”ë²ˆí˜¸ í¬ë§·íŒ…
            function formatPhoneNumber(phone) {
                if (phone.length === 10) {
                    return phone.replace(/(\\d{3})(\\d{3})(\\d{4})/, '$1-$2-$3');
                } else if (phone.length === 11) {
                    return phone.replace(/(\\d{3})(\\d{4})(\\d{4})/, '$1-$2-$3');
                }
                return phone;
            }

            // ë°œì‹ ë²ˆí˜¸ ë“±ë¡
            async function registerSender() {
                console.log('registerSender called, userId:', currentUserId);
                
                if (!currentUserId) {
                    alert('ë¡œê·¸ì¸ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
                    window.location.href = '/login';
                    return;
                }
                
                const phoneNumber = document.getElementById('phoneNumber').value.trim();
                
                if (!phoneNumber) {
                    alert('ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                try {
                    console.log('Sending register request:', { userId: currentUserId, phoneNumber });
                    
                    const response = await fetch('/api/sms/sender/register', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            userId: currentUserId,
                            phoneNumber: phoneNumber,
                            verificationMethod: 'aligo_web'
                        })
                    });

                    const data = await response.json();
                    console.log('Register response:', data);

                    if (data.success) {
                        alert('âœ… ë°œì‹ ë²ˆí˜¸ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
                        document.getElementById('phoneNumber').value = '';
                        loadSenders();
                    } else {
                        alert('âŒ ' + data.error);
                    }
                } catch (err) {
                    console.error('Failed to register sender:', err);
                    alert('ë°œì‹ ë²ˆí˜¸ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + err.message);
                }
            }

            // ë°œì‹ ë²ˆí˜¸ ì‚­ì œ
            async function deleteSender(senderId) {
                if (!confirm('ì´ ë°œì‹ ë²ˆí˜¸ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    return;
                }

                try {
                    const response = await fetch(\`/api/sms/sender/\${senderId}?userId=\${currentUserId}\`, {
                        method: 'DELETE'
                    });

                    const data = await response.json();

                    if (data.success) {
                        alert('âœ… ë°œì‹ ë²ˆí˜¸ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                        loadSenders();
                    } else {
                        alert('âŒ ' + data.error);
                    }
                } catch (err) {
                    console.error('Failed to delete sender:', err);
                    alert('ë°œì‹ ë²ˆí˜¸ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
            (async () => {
                console.log('Page loaded, initializing...');
                await checkAuth();
                if (currentUserId) {
                    console.log('User authenticated, userId:', currentUserId);
                    loadSenders();
                    
                    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ (ì´ì¤‘ ë³´ì•ˆ)
                    const registerBtn = document.getElementById('registerButton');
                    if (registerBtn) {
                        registerBtn.addEventListener('click', registerSender);
                        console.log('Register button event listener added');
                    }
                } else {
                    console.error('User not authenticated');
                }
            })();
        <\/script>
    </body>
    </html>
  `));d.get("/sms/sender/request",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë°œì‹ ë²ˆí˜¸ ì¸ì¦ ì‹ ì²­ - SMS ì‹œìŠ¤í…œ</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * { font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif; }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100">
            <div class="max-w-5xl mx-auto px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center space-x-3">
                        <a href="/dashboard" class="text-lg font-bold text-gray-900">â† ëŒ€ì‹œë³´ë“œ</a>
                    </div>
                    <div class="flex items-center space-x-4">
                        <a href="/sms/senders" class="text-gray-600 hover:text-purple-600 transition">ë°œì‹ ë²ˆí˜¸ ê´€ë¦¬</a>
                        <span id="userName" class="text-gray-700 font-medium"></span>
                    </div>
                </div>
            </div>
        </nav>

        <div class="pt-24 pb-12 px-6">
            <div class="max-w-3xl mx-auto">
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">ğŸ“± ë°œì‹ ë²ˆí˜¸ ì¸ì¦ ì‹ ì²­</h1>
                    <p class="text-gray-600">ì‚¬ì—…ì ë“±ë¡ì¦ì„ ì—…ë¡œë“œí•˜ê³  ë°œì‹ ë²ˆí˜¸ë¥¼ ë“±ë¡í•˜ì„¸ìš”</p>
                </div>

                <!-- ì•ˆë‚´ ì‚¬í•­ -->
                <div class="bg-blue-50 border border-blue-200 rounded-xl p-6 mb-8">
                    <div class="flex items-start">
                        <svg class="w-6 h-6 text-blue-600 mr-3 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <div class="text-sm text-blue-800">
                            <p class="font-bold mb-3">ğŸ“‹ í•„ìš” ì„œë¥˜ ë° ì ˆì°¨</p>
                            <ul class="space-y-2 list-disc list-inside ml-2">
                                <li><strong>ì‚¬ì—…ì ë“±ë¡ì¦</strong> (í•„ìˆ˜)</li>
                                <li><strong>í†µì‹ ì‚¬ ê°€ì…ì¦ëª…ì›</strong> (í•„ìˆ˜)
                                    <ul class="ml-6 mt-1 text-xs space-y-1">
                                        <li>âœ“ ë°œê¸‰ì¼ì: ìµœê·¼ 1ê°œì›” ì´ë‚´</li>
                                        <li>âœ“ ê°€ì…ì ì •ë³´(ê°€ì…ë²ˆí˜¸, ê°€ì…ìëª…, ê°œí†µì¼ì, ë°œê¸‰ì¼ì) ëª¨ë‘ ê¸°ì¬</li>
                                        <li>âœ“ ë°œì‹ ë²ˆí˜¸ê°€ 010-1234-5678 í˜•ì‹ìœ¼ë¡œ ëª…í™•íˆ í‘œì‹œ</li>
                                        <li>âœ“ ê°€ë ¤ì§„ ì •ë³´ ì—†ì´, ì˜ë¦° ë¶€ë¶„ ì—†ì´ ì²¨ë¶€</li>
                                    </ul>
                                </li>
                                <li><strong>ëŒ€í‘œì ì‹ ë¶„ì¦</strong> ë˜ëŠ” <strong>ì¬ì§ì ì‹ ë¶„ì¦ + ì¬ì§ì¦ëª…ì„œ</strong> (í•„ìˆ˜)
                                    <ul class="ml-6 mt-1 text-xs space-y-1">
                                        <li>âœ“ ì£¼ë¯¼ë²ˆí˜¸ ë’·ìë¦¬, ë¯¼ê°ì •ë³´ ë§ˆìŠ¤í‚¹ í•„ìˆ˜</li>
                                        <li>âœ“ ì¬ì§ì¦ëª…ì„œ: ë„ì¥ ë‚ ì¸ í•„ìˆ˜</li>
                                    </ul>
                                </li>
                                <li><strong>ë¬¸ìë©”ì‹œì§€ ì´ìš©ê³„ì•½ì„œ</strong> (í•„ìˆ˜, ë„ì¥ ë‚ ì¸ í•„ìˆ˜)</li>
                                <li>íŒŒì¼ í˜•ì‹: JPG, PNG, PDF, DOC, DOCX (ê° íŒŒì¼ ìµœëŒ€ 5MB)</li>
                                <li>ìŠ¹ì¸ ì†Œìš”: í‰ì¼ ì—…ë¬´ì‹œê°„(10ì‹œ~17ì‹œ) ë‚´ í‰ê·  1~3ì‹œê°„ ì†Œìš”</li>
                                <li class="text-red-700 font-bold">âš ï¸ ëª¨ë“  ì„œë¥˜ëŠ” ì ‘ìˆ˜ì¼ ê¸°ì¤€ ìµœê·¼ 1ê°œì›” ì´ë‚´ë§Œ ì¸ì •</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- ì„œë¥˜ ì–‘ì‹ ë‹¤ìš´ë¡œë“œ -->
                <div class="bg-green-50 border border-green-200 rounded-xl p-6 mb-8">
                    <div class="flex items-start">
                        <svg class="w-6 h-6 text-green-600 mr-3 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                        </svg>
                        <div class="text-sm text-green-800">
                            <p class="font-bold mb-3">ğŸ“¥ ì„œë¥˜ ì–‘ì‹ ë‹¤ìš´ë¡œë“œ</p>
                            <div class="flex flex-wrap gap-3">
                                <a href="/downloads/ë°œì‹ ë²ˆí˜¸_ì‚¬ì „ë“±ë¡_ëŒ€ë¦¬_ì‹ ì²­ì„œ.docx" download class="px-4 py-2 bg-white border border-green-300 rounded-lg hover:bg-green-100 transition font-medium">
                                    ğŸ“„ ë°œì‹ ë²ˆí˜¸ ì‚¬ì „ë“±ë¡ ëŒ€ë¦¬ ì‹ ì²­ì„œ
                                </a>
                                <a href="/downloads/ë¬¸ìë©”ì‹œì§€_ì´ìš©ê³„ì•½ì„œ.docx" download class="px-4 py-2 bg-white border border-green-300 rounded-lg hover:bg-green-100 transition font-medium">
                                    ğŸ“„ ë¬¸ìë©”ì‹œì§€ ì´ìš©ê³„ì•½ì„œ
                                </a>
                                <a href="/api/downloads/employment-cert" download class="px-4 py-2 bg-white border border-green-300 rounded-lg hover:bg-green-100 transition font-medium">
                                    ğŸ“„ ì¬ì§ì¦ëª…ì„œ ì–‘ì‹
                                </a>
                            </div>
                            <p class="mt-3 text-xs text-green-700">ğŸ’¡ ë„ì¥(ì§ì¸)ì€ ì‹¸ì¸ì´ ì•ˆë˜ë©° ë°˜ë“œì‹œ ë„ì¥ìœ¼ë¡œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤</p>
                        </div>
                    </div>
                </div>

                <!-- ì‹ ì²­ í¼ -->
                <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-8">
                    <form id="verificationForm" class="space-y-6">
                        <!-- ì‚¬ì—…ì ì •ë³´ -->
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">ì‚¬ì—…ì²´ëª… *</label>
                            <input type="text" id="businessName" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                   placeholder="ì˜ˆ: ê¾¸ë©”ë•…í•™ì›">
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">ì‚¬ì—…ì ë“±ë¡ë²ˆí˜¸ *</label>
                            <input type="text" id="businessRegistrationNumber" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                   placeholder="123-45-67890"
                                   maxlength="12">
                        </div>

                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">ë°œì‹ ë²ˆí˜¸ (íœ´ëŒ€í°) *</label>
                            <input type="text" id="phoneNumber" required
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                   placeholder="010-1234-5678"
                                   maxlength="13">
                            <p class="text-xs text-gray-500 mt-1">í•˜ì´í”ˆ(-)ì„ í¬í•¨í•˜ì—¬ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                        </div>

                        <!-- 1. ì‚¬ì—…ì ë“±ë¡ì¦ ì—…ë¡œë“œ -->
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">1. ì‚¬ì—…ì ë“±ë¡ì¦ * <span class="text-red-600">(í•„ìˆ˜)</span></label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-purple-500 transition cursor-pointer upload-area"
                                 data-target="businessRegistrationImage">
                                <input type="file" id="businessRegistrationImage" accept="image/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document" class="hidden" required>
                                <div class="upload-placeholder">
                                    <svg class="w-12 h-12 text-gray-400 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                    </svg>
                                    <p class="text-gray-600 font-medium mb-1">í´ë¦­í•˜ê±°ë‚˜ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ì„¸ìš”</p>
                                    <p class="text-sm text-gray-500">JPG, PNG, PDF, DOC, DOCX (ìµœëŒ€ 5MB)</p>
                                </div>
                                <div class="upload-preview hidden">
                                    <img class="preview-image max-w-full max-h-64 mx-auto rounded-lg mb-3">
                                    <p class="file-name text-sm text-gray-600 font-medium"></p>
                                    <button type="button" class="reset-upload text-sm text-red-600 hover:text-red-700 mt-2">
                                        ë‹¤ì‹œ ì„ íƒ
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 2. í†µì‹ ì‚¬ ê°€ì…ì¦ëª…ì› ì—…ë¡œë“œ -->
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">2. í†µì‹ ì‚¬ ê°€ì…ì¦ëª…ì› * <span class="text-red-600">(í•„ìˆ˜)</span></label>
                            <p class="text-xs text-gray-500 mb-2">ë°œì‹ ë²ˆí˜¸ê°€ ëª…í™•íˆ í‘œì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤ (010-1234-5678 í˜•ì‹, ê°€ë¦¼ ì—†ì´)</p>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-purple-500 transition cursor-pointer upload-area"
                                 data-target="certificateImage">
                                <input type="file" id="certificateImage" accept="image/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document" class="hidden" required>
                                <div class="upload-placeholder">
                                    <svg class="w-12 h-12 text-gray-400 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                    </svg>
                                    <p class="text-gray-600 font-medium mb-1">í´ë¦­í•˜ê±°ë‚˜ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ì„¸ìš”</p>
                                    <p class="text-sm text-gray-500">JPG, PNG, PDF, DOC, DOCX (ìµœëŒ€ 5MB)</p>
                                </div>
                                <div class="upload-preview hidden">
                                    <img class="preview-image max-w-full max-h-64 mx-auto rounded-lg mb-3">
                                    <p class="file-name text-sm text-gray-600 font-medium"></p>
                                    <button type="button" class="reset-upload text-sm text-red-600 hover:text-red-700 mt-2">
                                        ë‹¤ì‹œ ì„ íƒ
                                    </button>
                                </div>
                            </div>
                            <p class="text-xs text-blue-600 mt-2">ğŸ’¡ í†µì‹ ì‚¬ 114 ë¬¸ì˜ ì‹œ: "ê³ ê° ì‘ëŒ€ìš© ë¬¸ì ë°œì‹ ë“±ë¡ìš©"ì´ë¼ê³  ë‹µë³€í•˜ì„¸ìš”</p>
                        </div>
                        
                        <!-- 3. ì¬ì§ì¦ëª…ì„œ ì—…ë¡œë“œ -->
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">3. ì¬ì§ì¦ëª…ì„œ * <span class="text-red-600">(í•„ìˆ˜, ë„ì¥ ë‚ ì¸ í•„ìˆ˜)</span></label>
                            <p class="text-xs text-gray-500 mb-2">ì‚¬ì—…ì ëŒ€í‘œë„ ë³¸ì¸ì˜ ì¬ì§ì¦ëª…ì„œ ì œì¶œ í•„ìš”</p>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-purple-500 transition cursor-pointer upload-area"
                                 data-target="employmentCertImage">
                                <input type="file" id="employmentCertImage" accept="image/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document" class="hidden" required>
                                <div class="upload-placeholder">
                                    <svg class="w-12 h-12 text-gray-400 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                    </svg>
                                    <p class="text-gray-600 font-medium mb-1">í´ë¦­í•˜ê±°ë‚˜ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ì„¸ìš”</p>
                                    <p class="text-sm text-gray-500">JPG, PNG, PDF, DOC, DOCX (ìµœëŒ€ 5MB)</p>
                                </div>
                                <div class="upload-preview hidden">
                                    <img class="preview-image max-w-full max-h-64 mx-auto rounded-lg mb-3">
                                    <p class="file-name text-sm text-gray-600 font-medium"></p>
                                    <button type="button" class="reset-upload text-sm text-red-600 hover:text-red-700 mt-2">
                                        ë‹¤ì‹œ ì„ íƒ
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 4. ë¬¸ìë©”ì‹œì§€ ì´ìš©ê³„ì•½ì„œ ì—…ë¡œë“œ -->
                        <div>
                            <label class="block text-sm font-bold text-gray-700 mb-2">4. ë¬¸ìë©”ì‹œì§€ ì´ìš©ê³„ì•½ì„œ * <span class="text-red-600">(í•„ìˆ˜, ë„ì¥ ë‚ ì¸ í•„ìˆ˜)</span></label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-purple-500 transition cursor-pointer upload-area"
                                 data-target="contractImage">
                                <input type="file" id="contractImage" accept="image/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document" class="hidden" required>
                                <div class="upload-placeholder">
                                    <svg class="w-12 h-12 text-gray-400 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                    </svg>
                                    <p class="text-gray-600 font-medium mb-1">í´ë¦­í•˜ê±°ë‚˜ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ì„¸ìš”</p>
                                    <p class="text-sm text-gray-500">JPG, PNG, PDF, DOC, DOCX (ìµœëŒ€ 5MB)</p>
                                </div>
                                <div class="upload-preview hidden">
                                    <img class="preview-image max-w-full max-h-64 mx-auto rounded-lg mb-3">
                                    <p class="file-name text-sm text-gray-600 font-medium"></p>
                                    <button type="button" class="reset-upload text-sm text-red-600 hover:text-red-700 mt-2">
                                        ë‹¤ì‹œ ì„ íƒ
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- ì œì¶œ ë²„íŠ¼ -->
                        <div class="flex gap-4 pt-4">
                            <button type="button" onclick="history.back()"
                                    class="flex-1 px-6 py-3 border border-gray-300 rounded-lg text-gray-700 font-bold hover:bg-gray-50 transition">
                                ì·¨ì†Œ
                            </button>
                            <button type="submit" id="submitButton"
                                    class="flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg font-bold hover:from-purple-700 hover:to-purple-800 transition shadow-md hover:shadow-lg">
                                ì‹ ì²­í•˜ê¸°
                            </button>
                        </div>
                    </form>
                </div>

                <!-- ì‹ ì²­ ë‚´ì—­ -->
                <div class="mt-8 bg-white rounded-xl shadow-lg border border-gray-200 p-8">
                    <h2 class="text-xl font-bold text-gray-900 mb-6">ğŸ“‹ ì‹ ì²­ ë‚´ì—­</h2>
                    <div id="requestsList" class="space-y-4">
                        <div class="text-center text-gray-500 py-8">
                            <svg class="w-12 h-12 text-gray-300 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            <p>ì‹ ì²­ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            const user = JSON.parse(localStorage.getItem('user'))
            if (!user) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.')
                window.location.href = '/login'
            }
            document.getElementById('userName').textContent = user.name

            // ì‚¬ì—…ì ë“±ë¡ë²ˆí˜¸ ìë™ í•˜ì´í”ˆ ì¶”ê°€
            document.getElementById('businessRegistrationNumber').addEventListener('input', function(e) {
                let value = e.target.value.replace(/[^0-9]/g, '')
                if (value.length > 3 && value.length <= 5) {
                    value = value.slice(0, 3) + '-' + value.slice(3)
                } else if (value.length > 5) {
                    value = value.slice(0, 3) + '-' + value.slice(3, 5) + '-' + value.slice(5, 10)
                }
                e.target.value = value
            })

            // ì „í™”ë²ˆí˜¸ ìë™ í•˜ì´í”ˆ ì¶”ê°€
            document.getElementById('phoneNumber').addEventListener('input', function(e) {
                let value = e.target.value.replace(/[^0-9]/g, '')
                if (value.length > 3 && value.length <= 7) {
                    value = value.slice(0, 3) + '-' + value.slice(3)
                } else if (value.length > 7) {
                    value = value.slice(0, 3) + '-' + value.slice(3, 7) + '-' + value.slice(7, 11)
                }
                e.target.value = value
            })

            // íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ (4ê°œ íŒŒì¼)
            document.querySelectorAll('.upload-area').forEach(uploadArea => {
                const inputId = uploadArea.dataset.target
                const fileInput = document.getElementById(inputId)
                const placeholder = uploadArea.querySelector('.upload-placeholder')
                const preview = uploadArea.querySelector('.upload-preview')
                const previewImage = preview.querySelector('.preview-image')
                const fileNameEl = preview.querySelector('.file-name')
                const resetBtn = preview.querySelector('.reset-upload')

                uploadArea.addEventListener('click', (e) => {
                    if (!e.target.classList.contains('reset-upload')) {
                        fileInput.click()
                    }
                })
                
                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault()
                    uploadArea.classList.add('border-purple-500', 'bg-purple-50')
                })

                uploadArea.addEventListener('dragleave', () => {
                    uploadArea.classList.remove('border-purple-500', 'bg-purple-50')
                })

                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault()
                    uploadArea.classList.remove('border-purple-500', 'bg-purple-50')
                    const file = e.dataTransfer.files[0]
                    if (file && (
                        file.type.startsWith('image/') || 
                        file.type === 'application/pdf' ||
                        file.type === 'application/msword' ||
                        file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
                    )) {
                        handleFileUpload(file, fileInput, placeholder, preview, previewImage, fileNameEl)
                    } else if (file) {
                        alert('JPG, PNG, PDF, DOC, DOCX íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.')
                    }
                })

                fileInput.addEventListener('change', (e) => {
                    const file = e.target.files[0]
                    if (file) {
                        handleFileUpload(file, fileInput, placeholder, preview, previewImage, fileNameEl)
                    }
                })

                resetBtn.addEventListener('click', (e) => {
                    e.stopPropagation()
                    fileInput.value = ''
                    placeholder.classList.remove('hidden')
                    preview.classList.add('hidden')
                    previewImage.src = ''
                    fileNameEl.textContent = ''
                })
            })

            function handleFileUpload(file, fileInput, placeholder, preview, previewImage, fileNameEl) {
                if (file.size > 5 * 1024 * 1024) {
                    alert('íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.')
                    return
                }

                // íŒŒì¼ íƒ€ì… ê²€ì¦
                const allowedTypes = [
                    'image/jpeg', 
                    'image/jpg', 
                    'image/png', 
                    'application/pdf',
                    'application/msword', // .doc
                    'application/vnd.openxmlformats-officedocument.wordprocessingml.document' // .docx
                ]
                if (!allowedTypes.includes(file.type)) {
                    alert('JPG, PNG, PDF, DOC, DOCX íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.')
                    return
                }

                const reader = new FileReader()
                reader.onload = (e) => {
                    // PDFì™€ Word íŒŒì¼ì€ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ëŒ€ì‹  íŒŒì¼ëª…ë§Œ í‘œì‹œ
                    if (file.type === 'application/pdf') {
                        previewImage.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjQwIiBmaWxsPSIjZWY0NDQ0IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+UERGPC90ZXh0Pjwvc3ZnPg=='
                        previewImage.classList.add('max-h-32')
                    } else if (file.type === 'application/msword' || file.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {
                        previewImage.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjM1IiBmaWxsPSIjMjk2N2FhIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+RE9DPC90ZXh0Pjwvc3ZnPg=='
                        previewImage.classList.add('max-h-32')
                    } else {
                        previewImage.src = e.target.result
                        previewImage.classList.remove('max-h-32')
                    }
                    fileNameEl.textContent = file.name
                    placeholder.classList.add('hidden')
                    preview.classList.remove('hidden')
                }
                reader.readAsDataURL(file)
            }

            // R2 ì—…ë¡œë“œ í•¨ìˆ˜ (imgbb ëŒ€ì²´)
            async function uploadToR2(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader()
                    reader.onload = async (e) => {
                        try {
                            const response = await fetch('/api/upload/document', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({
                                    userId: user.id,
                                    fileName: file.name,
                                    fileData: e.target.result,
                                    fileType: file.type
                                })
                            })
                            
                            const data = await response.json()
                            if (data.success) {
                                resolve(data.url)
                            } else {
                                reject(new Error(data.error || 'ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨'))
                            }
                        } catch (err) {
                            reject(err)
                        }
                    }
                    reader.onerror = () => reject(new Error('íŒŒì¼ ì½ê¸° ì‹¤íŒ¨'))
                    reader.readAsDataURL(file)
                })
            }

            // í¼ ì œì¶œ
            document.getElementById('verificationForm').addEventListener('submit', async function(e) {
                e.preventDefault()
                
                const submitButton = document.getElementById('submitButton')
                submitButton.disabled = true
                submitButton.textContent = 'ì—…ë¡œë“œ ì¤‘... (ìµœëŒ€ 4ë¶„ ì†Œìš”)'

                try {
                    const businessName = document.getElementById('businessName').value
                    const businessRegistrationNumber = document.getElementById('businessRegistrationNumber').value
                    const phoneNumber = document.getElementById('phoneNumber').value
                    
                    // 4ê°œ íŒŒì¼ ê°€ì ¸ì˜¤ê¸°
                    const businessRegFile = document.getElementById('businessRegistrationImage').files[0]
                    const certificateFile = document.getElementById('certificateImage').files[0]
                    const employmentFile = document.getElementById('employmentCertImage').files[0]
                    const contractFile = document.getElementById('contractImage').files[0]

                    if (!businessRegFile || !certificateFile || !employmentFile || !contractFile) {
                        alert('ëª¨ë“  ì„œë¥˜ë¥¼ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.')
                        submitButton.disabled = false
                        submitButton.textContent = 'ì‹ ì²­í•˜ê¸°'
                        return
                    }

                    // ìˆœì°¨ì ìœ¼ë¡œ ì´ë¯¸ì§€ ì—…ë¡œë“œ (R2 ì‚¬ìš©)
                    submitButton.textContent = 'ì—…ë¡œë“œ ì¤‘... (1/4)'
                    const businessRegUrl = await uploadToR2(businessRegFile)
                    
                    submitButton.textContent = 'ì—…ë¡œë“œ ì¤‘... (2/4)'
                    const certificateUrl = await uploadToR2(certificateFile)
                    
                    submitButton.textContent = 'ì—…ë¡œë“œ ì¤‘... (3/4)'
                    const employmentUrl = await uploadToR2(employmentFile)
                    
                    submitButton.textContent = 'ì—…ë¡œë“œ ì¤‘... (4/4)'
                    const contractUrl = await uploadToR2(contractFile)

                    submitButton.textContent = 'ì‹ ì²­ ì¤‘...'

                    // ì‹ ì²­ API í˜¸ì¶œ
                    const response = await fetch('/api/sms/sender/verification-request', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            userId: user.id,
                            phoneNumber,
                            businessName,
                            businessRegistrationNumber,
                            businessRegistrationImage: businessRegUrl,
                            certificateImage: certificateUrl,
                            employmentCertImage: employmentUrl,
                            contractImage: contractUrl
                        })
                    })

                    const data = await response.json()

                    console.log('API Response:', data) // ë””ë²„ê¹…ìš©

                    if (data.success) {
                        alert('âœ… ë°œì‹ ë²ˆí˜¸ ì¸ì¦ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\\nê´€ë¦¬ì ìŠ¹ì¸ í›„ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. (í‰ì¼ ê¸°ì¤€ 2~3ì¼ ì†Œìš”)')
                        document.getElementById('verificationForm').reset()
                        // ëª¨ë“  í”„ë¦¬ë·° ì´ˆê¸°í™”
                        document.querySelectorAll('.upload-preview').forEach(p => p.classList.add('hidden'))
                        document.querySelectorAll('.upload-placeholder').forEach(p => p.classList.remove('hidden'))
                        loadRequests()
                    } else {
                        console.error('API Error:', data.error)
                        alert('âŒ ì‹ ì²­ ì‹¤íŒ¨: ' + (data.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'))
                    }
                } catch (err) {
                    console.error('Submission error:', err)
                    alert('âŒ ì‹ ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + err.message)
                } finally {
                    submitButton.disabled = false
                    submitButton.textContent = 'ì‹ ì²­í•˜ê¸°'
                }
            })

            // ì‹ ì²­ ë‚´ì—­ ë¡œë“œ
            async function loadRequests() {
                try {
                    const response = await fetch('/api/sms/sender/verification-requests?userId=' + user.id)
                    const data = await response.json()

                    const container = document.getElementById('requestsList')
                    
                    if (data.success && data.requests.length > 0) {
                        container.innerHTML = data.requests.map(req => {
                            const statusColor = req.status === 'pending' ? 'yellow' : req.status === 'approved' ? 'green' : 'red'
                            const statusText = req.status === 'pending' ? 'ìŠ¹ì¸ ëŒ€ê¸°' : req.status === 'approved' ? 'ìŠ¹ì¸ ì™„ë£Œ' : 'ê±°ì ˆë¨'
                            
                            return \`
                                <div class="border border-gray-200 rounded-lg p-4">
                                    <div class="flex justify-between items-start mb-3">
                                        <div>
                                            <p class="font-bold text-gray-900">\${req.business_name}</p>
                                            <p class="text-sm text-gray-600">\${req.phone_number}</p>
                                        </div>
                                        <span class="px-3 py-1 bg-\${statusColor}-100 text-\${statusColor}-700 text-sm font-medium rounded-full">
                                            \${statusText}
                                        </span>
                                    </div>
                                    <div class="text-sm text-gray-600 space-y-1">
                                        <p>ì‚¬ì—…ìë²ˆí˜¸: \${req.business_registration_number}</p>
                                        <p>ì‹ ì²­ì¼: \${new Date(req.request_date).toLocaleString('ko-KR')}</p>
                                        \${req.admin_note ? '<p class="text-red-600">ê´€ë¦¬ì ë©”ëª¨: ' + req.admin_note + '</p>' : ''}
                                    </div>
                                    <a href="\${req.business_registration_image}" target="_blank" 
                                       class="inline-block mt-3 text-sm text-purple-600 hover:text-purple-700 font-medium">
                                        ì‚¬ì—…ì ë“±ë¡ì¦ ë³´ê¸° â†’
                                    </a>
                                </div>
                            \`
                        }).join('')
                    } else {
                        container.innerHTML = \`
                            <div class="text-center text-gray-500 py-8">
                                <svg class="w-12 h-12 text-gray-300 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                                <p>ì‹ ì²­ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</p>
                            </div>
                        \`
                    }
                } catch (err) {
                    console.error('Load requests error:', err)
                }
            }

            loadRequests()
        <\/script>
    </body>
    </html>
  `));d.get("/sms/compose",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë¬¸ì ì‘ì„± - SMS ë°œì†¡</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-200 shadow-sm">
            <div class="max-w-7xl mx-auto px-6">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center space-x-8">
                        <a href="/dashboard" class="text-xl font-bold text-purple-600">SMS ë°œì†¡ ì‹œìŠ¤í…œ</a>
                        <div class="flex space-x-4">
                            <a href="/sms/senders" class="text-gray-600 hover:text-purple-600 px-3 py-2">ë°œì‹ ë²ˆí˜¸</a>
                            <a href="/sms/compose" class="text-purple-600 border-b-2 border-purple-600 px-3 py-2 font-medium">ë¬¸ì ì‘ì„±</a>
                            <a href="/sms/logs" class="text-gray-600 hover:text-purple-600 px-3 py-2">ë°œì†¡ ë‚´ì—­</a>
                            <a href="/sms/points" class="text-gray-600 hover:text-purple-600 px-3 py-2">í¬ì¸íŠ¸ ê´€ë¦¬</a>
                        </div>
                    </div>
                    <a href="/dashboard" class="text-gray-600 hover:text-purple-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                        </svg>
                    </a>
                </div>
            </div>
        </nav>

        <div class="pt-24 pb-12 px-6">
            <div class="max-w-6xl mx-auto">
                <!-- Header -->
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">âœ‰ï¸ ë¬¸ì ì‘ì„±</h1>
                    <p class="text-gray-600">ë¬¸ì ë©”ì‹œì§€ë¥¼ ì‘ì„±í•˜ê³  ë°œì†¡í•©ë‹ˆë‹¤</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- ì™¼ìª½: ë¬¸ì ì‘ì„± -->
                    <div class="lg:col-span-2 space-y-6">
                        <!-- ë°œì‹ ë²ˆí˜¸ ì„ íƒ -->
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <label class="block text-sm font-semibold text-gray-900 mb-3">ë°œì‹ ë²ˆí˜¸</label>
                            <select id="senderId" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                <option value="">ë°œì‹ ë²ˆí˜¸ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                            </select>
                        </div>

                        <!-- í…œí”Œë¦¿ ê´€ë¦¬ -->
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-semibold text-gray-900">ğŸ“ í…œí”Œë¦¿ ê´€ë¦¬</h3>
                                <div class="flex gap-2">
                                    <button onclick="openFolderModal()" class="text-xs px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-lg transition">
                                        + í´ë”
                                    </button>
                                    <button onclick="saveTemplate()" class="text-xs px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition">
                                        ğŸ’¾ ì €ì¥
                                    </button>
                                </div>
                            </div>
                            
                            <!-- í´ë” íƒ­ -->
                            <div class="flex gap-2 mb-3 overflow-x-auto pb-2" id="folderTabs">
                                <button onclick="selectFolder(null)" class="folder-tab active px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap bg-purple-100 text-purple-700">
                                    ì „ì²´
                                </button>
                            </div>
                            
                            <!-- í…œí”Œë¦¿ ëª©ë¡ -->
                            <div id="templateList" class="space-y-2 max-h-40 overflow-y-auto">
                                <p class="text-xs text-gray-400 text-center py-3">í…œí”Œë¦¿ì´ ì—†ìŠµë‹ˆë‹¤</p>
                            </div>
                        </div>

                        <!-- ë©”ì‹œì§€ ì‘ì„± -->
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div class="flex items-center justify-between mb-3">
                                <label class="block text-sm font-semibold text-gray-900">ë©”ì‹œì§€ ë‚´ìš©</label>
                                <div class="flex items-center space-x-2">
                                    <span id="byteCount" class="text-sm font-medium text-gray-600">0</span>
                                    <span class="text-sm text-gray-400">/ 2000 ë°”ì´íŠ¸</span>
                                </div>
                            </div>
                            
                            <!-- ì¹˜í™˜ ë³€ìˆ˜ ë²„íŠ¼ë“¤ -->
                            <div class="flex flex-wrap gap-2 mb-3">
                                <button onclick="insertVariable('#{ì´ë¦„}')" class="text-xs px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition">
                                    + #{ì´ë¦„}
                                </button>
                                <button onclick="insertVariable('#{ì „í™”ë²ˆí˜¸}')" class="text-xs px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition">
                                    + #{ì „í™”ë²ˆí˜¸}
                                </button>
                                <button onclick="insertVariable('#{í•™ë…„}')" class="text-xs px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition">
                                    + #{í•™ë…„}
                                </button>
                                <button onclick="insertVariable('#{ë°˜}')" class="text-xs px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition">
                                    + #{ë°˜}
                                </button>
                            </div>
                            
                            <textarea id="message" rows="10" 
                                placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”&#10;&#10;ì¹˜í™˜ ë³€ìˆ˜ ì‚¬ìš© ì˜ˆì‹œ:&#10;ì•ˆë…•í•˜ì„¸ìš” #{ì´ë¦„} í•™ë¶€ëª¨ë‹˜!&#10;ê¾¸ë©”ë•…í•™ì›ì…ë‹ˆë‹¤."
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 resize-none"></textarea>
                            <div class="flex items-center justify-between mt-3">
                                <span id="messageType" class="text-sm font-medium px-3 py-1 bg-blue-100 text-blue-800 rounded-full">SMS (ë‹¨ë¬¸)</span>
                                <p class="text-xs text-gray-500">90ë°”ì´íŠ¸ ì´ˆê³¼ ì‹œ LMS(ì¥ë¬¸)ë¡œ ìë™ ì „í™˜</p>
                            </div>
                        </div>

                        <!-- ì˜ˆì•½ ë°œì†¡ -->
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <label class="flex items-center space-x-3 mb-4">
                                <input type="checkbox" id="reserveEnabled" class="w-5 h-5 text-purple-600 rounded focus:ring-2 focus:ring-purple-500">
                                <span class="text-sm font-semibold text-gray-900">ì˜ˆì•½ ë°œì†¡</span>
                            </label>
                            <input type="datetime-local" id="reserveTime" 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 disabled:bg-gray-100 disabled:text-gray-400" 
                                disabled>
                        </div>
                    </div>

                    <!-- ì˜¤ë¥¸ìª½: ìˆ˜ì‹ ì ê´€ë¦¬ -->
                    <div class="space-y-6">
                        <!-- ìˆ˜ì‹ ì ì¶”ê°€ -->
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <h3 class="text-sm font-semibold text-gray-900 mb-4">ìˆ˜ì‹ ì ì¶”ê°€</h3>
                            <div class="space-y-3 mb-4">
                                <input type="text" id="receiverName" placeholder="ì´ë¦„" 
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                <input type="text" id="receiverPhone" placeholder="010-1234-5678" 
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                            </div>
                            <button onclick="addReceiver()" 
                                class="w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition font-medium">
                                + ìˆ˜ì‹ ì ì¶”ê°€
                            </button>
                        </div>

                        <!-- ì—‘ì…€ ì—…ë¡œë“œ -->
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <h3 class="text-sm font-semibold text-gray-900 mb-4">ì—‘ì…€ ì—…ë¡œë“œ</h3>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-purple-500 transition cursor-pointer" 
                                onclick="document.getElementById('excelFile').click()">
                                <svg class="w-12 h-12 text-gray-400 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                </svg>
                                <p class="text-sm text-gray-600">í´ë¦­ ë˜ëŠ” ë“œë˜ê·¸í•˜ì—¬ ì—…ë¡œë“œ</p>
                                <p class="text-xs text-gray-400 mt-1">ì´ë¦„, ì „í™”ë²ˆí˜¸ ì»¬ëŸ¼ í•„ìˆ˜</p>
                            </div>
                            <input type="file" id="excelFile" accept=".xlsx,.xls" class="hidden" onchange="uploadExcel(event)">
                        </div>

                        <!-- ìˆ˜ì‹ ì ëª©ë¡ -->
                        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-sm font-semibold text-gray-900">ìˆ˜ì‹ ì ëª©ë¡</h3>
                                <span id="receiverCount" class="text-sm font-medium text-purple-600">0ëª…</span>
                            </div>
                            
                            <!-- ê²€ìƒ‰ ì…ë ¥ -->
                            <div class="mb-3">
                                <div class="relative">
                                    <input 
                                        type="text" 
                                        id="receiverSearch" 
                                        placeholder="ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰..." 
                                        oninput="filterReceivers()"
                                        class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"
                                    >
                                    <svg class="w-5 h-5 absolute left-3 top-2.5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                    </svg>
                                </div>
                            </div>
                            
                            <div id="receiversContainer" class="space-y-2 max-h-64 overflow-y-auto">
                                <p class="text-sm text-gray-400 text-center py-4">ìˆ˜ì‹ ìë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”</p>
                            </div>
                            <button onclick="clearReceivers()" 
                                class="w-full mt-4 border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition text-sm">
                                ì „ì²´ ì‚­ì œ
                            </button>
                        </div>

                        <!-- ë°œì†¡ ë¹„ìš© -->
                        <div class="bg-purple-50 rounded-lg p-6">
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">ìˆ˜ì‹ ì ìˆ˜</span>
                                    <span id="costReceivers" class="font-medium">0ëª…</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">ê±´ë‹¹ ìš”ê¸ˆ</span>
                                    <span id="costPerMessage" class="font-medium">20P</span>
                                </div>
                                <div class="border-t border-purple-200 pt-2 mt-2">
                                    <div class="flex justify-between">
                                        <span class="font-semibold text-gray-900">ì´ ë¹„ìš©</span>
                                        <span id="totalCost" class="font-bold text-purple-600 text-lg">0P</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ë°œì†¡ ë²„íŠ¼ -->
                        <button onclick="sendSMS()" 
                            class="w-full bg-gradient-to-r from-purple-600 to-purple-700 text-white px-6 py-4 rounded-lg hover:from-purple-700 hover:to-purple-800 transition font-semibold text-lg shadow-lg">
                            ğŸ“¤ ë¬¸ì ë°œì†¡í•˜ê¸°
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            let currentUserId = null;
            let receivers = [];
            let sendersList = [];
            let folders = [];
            let templates = [];
            let currentFolderId = null;

            // ì‚¬ìš©ì ì¸ì¦
            async function checkAuth() {
                const user = localStorage.getItem('user');
                if (!user) {
                    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    window.location.href = '/login';
                    return null;
                }
                const userData = JSON.parse(user);
                currentUserId = userData.id;
                return userData;
            }

            // ë°œì‹ ë²ˆí˜¸ ëª©ë¡ ë¡œë“œ
            async function loadSenders() {
                try {
                    const response = await fetch(\`/api/sms/senders?userId=\${currentUserId}\`);
                    const data = await response.json();

                    const select = document.getElementById('senderId');
                    
                    if (data.success && data.senders.length > 0) {
                        sendersList = data.senders;
                        select.innerHTML = '<option value="">ë°œì‹ ë²ˆí˜¸ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>' + 
                            data.senders.map(s => \`<option value="\${s.id}">\${formatPhoneNumber(s.phone_number)}</option>\`).join('');
                    } else {
                        select.innerHTML = '<option value="">ë“±ë¡ëœ ë°œì‹ ë²ˆí˜¸ê°€ ì—†ìŠµë‹ˆë‹¤</option>';
                        alert('ë°œì‹ ë²ˆí˜¸ë¥¼ ë¨¼ì € ë“±ë¡í•´ì£¼ì„¸ìš”.');
                        window.location.href = '/sms/senders';
                    }
                } catch (err) {
                    console.error('Failed to load senders:', err);
                }
            }

            // ì „í™”ë²ˆí˜¸ í¬ë§·íŒ…
            function formatPhoneNumber(phone) {
                phone = phone.replace(/[^0-9]/g, '');
                if (phone.length === 10) {
                    return phone.replace(/(\\d{3})(\\d{3})(\\d{4})/, '$1-$2-$3');
                } else if (phone.length === 11) {
                    return phone.replace(/(\\d{3})(\\d{4})(\\d{4})/, '$1-$2-$3');
                }
                return phone;
            }

            // ë°”ì´íŠ¸ ìˆ˜ ê³„ì‚°
            function calculateBytes(str) {
                return new Blob([str]).size;
            }

            // ë©”ì‹œì§€ ì…ë ¥ ì´ë²¤íŠ¸
            document.getElementById('message').addEventListener('input', (e) => {
                const message = e.target.value;
                const byteSize = calculateBytes(message);
                
                document.getElementById('byteCount').textContent = byteSize;
                
                const messageTypeEl = document.getElementById('messageType');
                const costPerMessageEl = document.getElementById('costPerMessage');
                
                if (byteSize > 90) {
                    messageTypeEl.textContent = 'LMS (ì¥ë¬¸)';
                    messageTypeEl.className = 'text-sm font-medium px-3 py-1 bg-orange-100 text-orange-800 rounded-full';
                    costPerMessageEl.textContent = '50P';
                } else {
                    messageTypeEl.textContent = 'SMS (ë‹¨ë¬¸)';
                    messageTypeEl.className = 'text-sm font-medium px-3 py-1 bg-blue-100 text-blue-800 rounded-full';
                    costPerMessageEl.textContent = '20P';
                }
                
                updateCost();
            });

            // ì˜ˆì•½ ë°œì†¡ ì²´í¬ë°•ìŠ¤
            document.getElementById('reserveEnabled').addEventListener('change', (e) => {
                document.getElementById('reserveTime').disabled = !e.target.checked;
            });

            // ìˆ˜ì‹ ì ì¶”ê°€
            function addReceiver() {
                const name = document.getElementById('receiverName').value.trim();
                const phone = document.getElementById('receiverPhone').value.trim().replace(/[^0-9]/g, '');
                
                if (!name || !phone) {
                    alert('ì´ë¦„ê³¼ ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                if (phone.length < 10) {
                    alert('ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                receivers.push({ name, phone });
                
                document.getElementById('receiverName').value = '';
                document.getElementById('receiverPhone').value = '';
                
                renderReceivers();
            }

            // ìˆ˜ì‹ ì ëª©ë¡ ë Œë”ë§
            function renderReceivers(filteredList = null) {
                const container = document.getElementById('receiversContainer');
                const list = filteredList !== null ? filteredList : receivers;
                
                if (list.length === 0) {
                    if (filteredList !== null && receivers.length > 0) {
                        container.innerHTML = '<p class="text-sm text-gray-400 text-center py-4">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</p>';
                    } else {
                        container.innerHTML = '<p class="text-sm text-gray-400 text-center py-4">ìˆ˜ì‹ ìë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”</p>';
                    }
                } else {
                    container.innerHTML = list.map((r, i) => {
                        // ì‹¤ì œ ì¸ë±ìŠ¤ ì°¾ê¸° (ê²€ìƒ‰ ì‹œ)
                        const actualIndex = filteredList !== null ? receivers.indexOf(r) : i;
                        return \`
                        <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                            <div>
                                <div class="font-medium text-sm">\${r.name}</div>
                                <div class="text-xs text-gray-500">\${formatPhoneNumber(r.phone)}</div>
                            </div>
                            <button onclick="removeReceiver(\${actualIndex})" class="text-red-600 hover:text-red-700">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                                </svg>
                            </button>
                        </div>
                    \`;
                    }).join('');
                }
                
                document.getElementById('receiverCount').textContent = receivers.length + 'ëª…';
                updateCost();
            }

            // ìˆ˜ì‹ ì ê²€ìƒ‰ í•„í„°ë§
            function filterReceivers() {
                const searchTerm = document.getElementById('receiverSearch').value.toLowerCase().trim();
                
                if (!searchTerm) {
                    renderReceivers();
                    return;
                }
                
                const filtered = receivers.filter(r => {
                    const name = r.name.toLowerCase();
                    const phone = r.phone;
                    return name.includes(searchTerm) || phone.includes(searchTerm);
                });
                
                renderReceivers(filtered);
            }

            // ìˆ˜ì‹ ì ì œê±°
            function removeReceiver(index) {
                receivers.splice(index, 1);
                renderReceivers();
            }

            // ì „ì²´ ì‚­ì œ
            function clearReceivers() {
                if (receivers.length === 0) return;
                if (confirm('ëª¨ë“  ìˆ˜ì‹ ìë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    receivers = [];
                    renderReceivers();
                }
            }

            // ì—‘ì…€ ì—…ë¡œë“œ
            async function uploadExcel(event) {
                const file = event.target.files[0];
                if (!file) return;

                try {
                    const data = await file.arrayBuffer();
                    const workbook = XLSX.read(data);
                    const firstSheet = workbook.Sheets[workbook.SheetNames[0]];
                    
                    // Aì—´ê³¼ Bì—´ë§Œ ì½ê¸° (í—¤ë” ë¬´ì‹œ)
                    const range = XLSX.utils.decode_range(firstSheet['!ref']);
                    console.log('Excel range:', firstSheet['!ref']);
                    
                    let addedCount = 0;
                    let duplicateCount = 0;
                    const tempReceivers = [];
                    
                    // 2í–‰ë¶€í„° ì½ê¸° (1í–‰ì€ í—¤ë”)
                    for (let rowNum = range.s.r + 1; rowNum <= range.e.r; rowNum++) {
                        // Aì—´: ì´ë¦„
                        const nameCell = firstSheet[XLSX.utils.encode_cell({ r: rowNum, c: 0 })];
                        const name = nameCell ? String(nameCell.v).trim() : '';
                        
                        // Bì—´: ì—°ë½ì²˜
                        const phoneCell = firstSheet[XLSX.utils.encode_cell({ r: rowNum, c: 1 })];
                        const phoneRaw = phoneCell ? String(phoneCell.v) : '';
                        const phone = phoneRaw.replace(/[^0-9]/g, '');
                        
                        console.log(\`Row \${rowNum + 1}:\`, { name, phone, phoneLength: phone.length });
                        
                        // ì´ë¦„ê³¼ ì „í™”ë²ˆí˜¸ ëª¨ë‘ ìˆê³ , ì „í™”ë²ˆí˜¸ê°€ 10ìë¦¬ ì´ìƒ
                        if (name && phone && phone.length >= 10) {
                            // ê¸°ì¡´ ìˆ˜ì‹ ì ëª©ë¡ì— ì´ë¯¸ ìˆëŠ”ì§€ í™•ì¸
                            const existsInCurrent = receivers.some(r => r.phone === phone);
                            // ì„ì‹œ ëª©ë¡ì— ì´ë¯¸ ìˆëŠ”ì§€ í™•ì¸ (ì—‘ì…€ ë‚´ ì¤‘ë³µ)
                            const existsInTemp = tempReceivers.some(r => r.phone === phone);
                            
                            if (!existsInCurrent && !existsInTemp) {
                                tempReceivers.push({ name, phone });
                                addedCount++;
                            } else {
                                duplicateCount++;
                                console.log('ì¤‘ë³µ ì œì™¸:', { name, phone });
                            }
                        }
                    }
                    
                    // ì¤‘ë³µ ì œê±°ëœ ìˆ˜ì‹ ìë“¤ ì¶”ê°€
                    receivers.push(...tempReceivers);

                    if (addedCount === 0 && duplicateCount === 0) {
                        alert('âŒ ì—‘ì…€ íŒŒì¼ì—ì„œ ë°ì´í„°ë¥¼ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\n\\ní˜•ì‹ì„ í™•ì¸í•´ì£¼ì„¸ìš”:\\n- Aì—´: ì´ë¦„\\n- Bì—´: ì—°ë½ì²˜ (01012345678 í˜•ì‹)\\n- 1í–‰: í—¤ë” (ìë™ ê±´ë„ˆëœ€)\\n\\në¸Œë¼ìš°ì € ì½˜ì†”(F12)ì—ì„œ ìì„¸í•œ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.');
                    } else {
                        let message = \`âœ… \${addedCount}ëª…ì˜ ìˆ˜ì‹ ìê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.\`;
                        if (duplicateCount > 0) {
                            message += \`\\n\\nâš ï¸ ì¤‘ë³µëœ \${duplicateCount}ëª…ì€ ì œì™¸ë˜ì—ˆìŠµë‹ˆë‹¤.\`;
                        }
                        alert(message);
                    }
                    
                    renderReceivers();
                    updateCost();
                } catch (err) {
                    console.error('Excel upload error:', err);
                    alert('ì—‘ì…€ íŒŒì¼ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\\n' + err.message);
                }
                
                event.target.value = '';
            }

            // ë¹„ìš© ê³„ì‚°
            function updateCost() {
                const byteSize = calculateBytes(document.getElementById('message').value);
                const costPerMessage = byteSize > 90 ? 50 : 20;
                const totalCost = costPerMessage * receivers.length;
                
                document.getElementById('costReceivers').textContent = receivers.length + 'ëª…';
                document.getElementById('totalCost').textContent = totalCost + 'P';
            }

            // SMS ë°œì†¡
            async function sendSMS() {
                const senderId = document.getElementById('senderId').value;
                const message = document.getElementById('message').value.trim();
                const reserveEnabled = document.getElementById('reserveEnabled').checked;
                const reserveTime = document.getElementById('reserveTime').value;

                if (!senderId) {
                    alert('ë°œì‹ ë²ˆí˜¸ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }

                if (!message) {
                    alert('ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                if (receivers.length === 0) {
                    alert('ìˆ˜ì‹ ìë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.');
                    return;
                }

                if (reserveEnabled && !reserveTime) {
                    alert('ì˜ˆì•½ ë°œì†¡ ì‹œê°„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }

                if (!confirm(\`\${receivers.length}ëª…ì—ê²Œ ë¬¸ìë¥¼ ë°œì†¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\`)) {
                    return;
                }

                try {
                    const payload = {
                        userId: currentUserId,
                        senderId: parseInt(senderId),
                        receivers: receivers,
                        message: message
                    };

                    if (reserveEnabled && reserveTime) {
                        payload.reserveTime = reserveTime;
                    }

                    const response = await fetch('/api/sms/send', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const data = await response.json();

                    if (data.success) {
                        alert(\`âœ… ë¬¸ì ë°œì†¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\\n\\në°œì†¡ ê±´ìˆ˜: \${data.sentCount}ê±´\\nì°¨ê° í¬ì¸íŠ¸: \${data.totalCost}P\\në‚¨ì€ í¬ì¸íŠ¸: \${data.remainingBalance}P\`);
                        
                        // ì´ˆê¸°í™”
                        document.getElementById('message').value = '';
                        receivers = [];
                        renderReceivers();
                        
                        // ë°œì†¡ ë‚´ì—­ìœ¼ë¡œ ì´ë™
                        if (confirm('ë°œì†¡ ë‚´ì—­ì„ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                            window.location.href = '/sms/logs';
                        }
                    } else {
                        alert('âŒ ' + data.error);
                    }
                } catch (err) {
                    console.error('Send SMS error:', err);
                    alert('ë¬¸ì ë°œì†¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            // === í…œí”Œë¦¿ & í´ë” ê´€ë¦¬ í•¨ìˆ˜ ===
            
            // ì¹˜í™˜ ë³€ìˆ˜ ì‚½ì…
            function insertVariable(variable) {
                const messageBox = document.getElementById('message');
                const start = messageBox.selectionStart;
                const end = messageBox.selectionEnd;
                const text = messageBox.value;
                messageBox.value = text.substring(0, start) + variable + text.substring(end);
                messageBox.focus();
                messageBox.setSelectionRange(start + variable.length, start + variable.length);
                updateByteCount();
            }

            // í´ë” ëª©ë¡ ë¡œë“œ
            async function loadFolders() {
                try {
                    const response = await fetch(\`/api/sms/folders?userId=\${currentUserId}\`);
                    const data = await response.json();
                    
                    if (data.success) {
                        folders = data.folders;
                        renderFolderTabs();
                    }
                } catch (err) {
                    console.error('Failed to load folders:', err);
                }
            }

            // í´ë” íƒ­ ë Œë”ë§
            function renderFolderTabs() {
                const container = document.getElementById('folderTabs');
                const tabs = \`
                    <button onclick="selectFolder(null)" class="folder-tab \${!currentFolderId ? 'active' : ''} px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap \${!currentFolderId ? 'bg-purple-100 text-purple-700' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}">
                        ì „ì²´
                    </button>
                    \${folders.map(folder => \`
                        <div class="relative inline-block group">
                            <button onclick="selectFolder(\${folder.id})" class="folder-tab \${currentFolderId === folder.id ? 'active' : ''} px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap \${currentFolderId === folder.id ? 'bg-purple-100 text-purple-700' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}">
                                ğŸ“ \${folder.name}
                            </button>
                            <button 
                                onclick="event.stopPropagation(); deleteFolder(\${folder.id}, '\${folder.name}')" 
                                class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-xs hover:bg-red-600"
                                title="í´ë” ì‚­ì œ"
                            >
                                Ã—
                            </button>
                        </div>
                    \`).join('')}
                \`;
                container.innerHTML = tabs;
            }

            // í´ë” ì„ íƒ
            async function selectFolder(folderId) {
                currentFolderId = folderId;
                await loadTemplates();
                renderFolderTabs();
            }

            // í…œí”Œë¦¿ ëª©ë¡ ë¡œë“œ
            async function loadTemplates() {
                try {
                    let url = \`/api/sms/templates?userId=\${currentUserId}\`;
                    if (currentFolderId) {
                        url += \`&folderId=\${currentFolderId}\`;
                    }
                    
                    const response = await fetch(url);
                    const data = await response.json();
                    
                    if (data.success) {
                        templates = data.templates;
                        renderTemplates();
                    }
                } catch (err) {
                    console.error('Failed to load templates:', err);
                }
            }

            // í…œí”Œë¦¿ ëª©ë¡ ë Œë”ë§
            function renderTemplates() {
                const container = document.getElementById('templateList');
                
                if (templates.length === 0) {
                    container.innerHTML = '<p class="text-xs text-gray-400 text-center py-3">í…œí”Œë¦¿ì´ ì—†ìŠµë‹ˆë‹¤</p>';
                    return;
                }
                
                container.innerHTML = templates.map(template => \`
                    <div class="flex items-center justify-between p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                        <button onclick="loadTemplateMessage(\${template.id})" class="flex-1 text-left text-xs font-medium text-gray-700 truncate">
                            \${template.title}
                        </button>
                        <button onclick="deleteTemplate(\${template.id})" class="ml-2 text-red-500 hover:text-red-700">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                        </button>
                    </div>
                \`).join('');
            }

            // í…œí”Œë¦¿ ë©”ì‹œì§€ ë¶ˆëŸ¬ì˜¤ê¸°
            function loadTemplateMessage(templateId) {
                const template = templates.find(t => t.id === templateId);
                if (template) {
                    // ë©”ì‹œì§€ ë¶ˆëŸ¬ì˜¤ê¸°
                    document.getElementById('message').value = template.message;
                    updateByteCount();
                    
                    // ìˆ˜ì‹ ì ë¶ˆëŸ¬ì˜¤ê¸°
                    if (template.receivers) {
                        try {
                            const savedReceivers = JSON.parse(template.receivers);
                            receivers = savedReceivers;
                            renderReceivers();
                            updateCost();
                            alert(\`âœ… í…œí”Œë¦¿ ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ!\\në©”ì‹œì§€ + ìˆ˜ì‹ ì \${receivers.length}ëª…\`);
                        } catch (err) {
                            console.error('Failed to parse receivers:', err);
                        }
                    }
                }
            }

            // í…œí”Œë¦¿ ì €ì¥
            async function saveTemplate() {
                const message = document.getElementById('message').value.trim();
                if (!message) {
                    alert('ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                const title = prompt('í…œí”Œë¦¿ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”:', message.substring(0, 20) + '...');
                if (!title) return;
                
                try {
                    const response = await fetch('/api/sms/templates', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            userId: currentUserId,
                            folderId: currentFolderId,
                            title,
                            message,
                            receivers: JSON.stringify(receivers) // ìˆ˜ì‹ ì ì •ë³´ë„ ì €ì¥
                        })
                    });
                    
                    const data = await response.json();
                    if (data.success) {
                        alert(\`âœ… í…œí”Œë¦¿ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!\\nìˆ˜ì‹ ì: \${receivers.length}ëª…\`);
                        await loadTemplates();
                    } else {
                        alert('âŒ ' + data.error);
                    }
                } catch (err) {
                    console.error('Save template error:', err);
                    alert('í…œí”Œë¦¿ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            // í…œí”Œë¦¿ ì‚­ì œ
            async function deleteTemplate(templateId) {
                if (!confirm('ì´ í…œí”Œë¦¿ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
                
                try {
                    const response = await fetch(\`/api/sms/templates/\${templateId}?userId=\${currentUserId}\`, {
                        method: 'DELETE'
                    });
                    
                    const data = await response.json();
                    if (data.success) {
                        alert('âœ… í…œí”Œë¦¿ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!');
                        await loadTemplates();
                    } else {
                        alert('âŒ ' + data.error);
                    }
                } catch (err) {
                    console.error('Delete template error:', err);
                    alert('í…œí”Œë¦¿ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            // í´ë” ìƒì„± ëª¨ë‹¬
            function openFolderModal() {
                const name = prompt('í´ë” ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:', 'ì¤‘ë“± í•™ë¶€ëª¨');
                if (!name) return;
                createFolder(name);
            }

            // í´ë” ìƒì„±
            async function createFolder(name) {
                try {
                    const response = await fetch('/api/sms/folders', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            userId: currentUserId,
                            name
                        })
                    });
                    
                    const data = await response.json();
                    if (data.success) {
                        alert('âœ… í´ë”ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
                        await loadFolders();
                        await loadTemplates();
                    } else {
                        alert('âŒ ' + data.error);
                    }
                } catch (err) {
                    console.error('Create folder error:', err);
                    alert('í´ë” ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            // í´ë” ì‚­ì œ
            async function deleteFolder(folderId, folderName) {
                if (!confirm(\`"\${folderName}" í´ë”ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?

âš ï¸ í´ë” ì•ˆì˜ ëª¨ë“  í…œí”Œë¦¿ë„ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤.\`)) {
                    return;
                }
                
                try {
                    const response = await fetch(\`/api/sms/folders/\${folderId}?userId=\${currentUserId}\`, {
                        method: 'DELETE'
                    });
                    
                    const data = await response.json();
                    if (data.success) {
                        alert('âœ… í´ë”ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!');
                        
                        // ì‚­ì œëœ í´ë”ê°€ í˜„ì¬ ì„ íƒëœ í´ë”ì˜€ë‹¤ë©´ ì „ì²´ë¡œ ì´ë™
                        if (currentFolderId === folderId) {
                            currentFolderId = null;
                        }
                        
                        await loadFolders();
                        await loadTemplates();
                    } else {
                        alert('âŒ ' + data.error);
                    }
                } catch (err) {
                    console.error('Delete folder error:', err);
                    alert('í´ë” ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            // í˜ì´ì§€ ë¡œë“œ
            (async () => {
                await checkAuth();
                if (currentUserId) {
                    await loadSenders();
                    await loadFolders();
                    await loadTemplates();
                }
            })();
        <\/script>
    </body>
    </html>
  `));d.get("/sms/logs",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë°œì†¡ ë‚´ì—­ - SMS ë°œì†¡</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-200 shadow-sm">
            <div class="max-w-7xl mx-auto px-6">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center space-x-8">
                        <a href="/dashboard" class="text-xl font-bold text-purple-600">SMS ë°œì†¡ ì‹œìŠ¤í…œ</a>
                        <div class="flex space-x-4">
                            <a href="/sms/senders" class="text-gray-600 hover:text-purple-600 px-3 py-2">ë°œì‹ ë²ˆí˜¸</a>
                            <a href="/sms/compose" class="text-gray-600 hover:text-purple-600 px-3 py-2">ë¬¸ì ì‘ì„±</a>
                            <a href="/sms/logs" class="text-purple-600 border-b-2 border-purple-600 px-3 py-2 font-medium">ë°œì†¡ ë‚´ì—­</a>
                            <a href="/sms/points" class="text-gray-600 hover:text-purple-600 px-3 py-2">í¬ì¸íŠ¸ ê´€ë¦¬</a>
                        </div>
                    </div>
                    <a href="/dashboard" class="text-gray-600 hover:text-purple-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                        </svg>
                    </a>
                </div>
            </div>
        </nav>

        <div class="pt-24 pb-12 px-6">
            <div class="max-w-7xl mx-auto">
                <!-- Header -->
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">ğŸ“Š ë°œì†¡ ë‚´ì—­</h1>
                    <p class="text-gray-600">ë¬¸ì ë°œì†¡ ë‚´ì—­ì„ í™•ì¸í•©ë‹ˆë‹¤</p>
                </div>

                <!-- í•„í„° -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ìƒíƒœ</label>
                            <select id="statusFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                <option value="">ì „ì²´</option>
                                <option value="success">ì„±ê³µ</option>
                                <option value="failed">ì‹¤íŒ¨</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ë©”ì‹œì§€ íƒ€ì…</label>
                            <select id="typeFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                <option value="">ì „ì²´</option>
                                <option value="SMS">SMS (ë‹¨ë¬¸)</option>
                                <option value="LMS">LMS (ì¥ë¬¸)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">í˜ì´ì§€ë‹¹ ê°œìˆ˜</label>
                            <select id="limitFilter" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                <option value="20">20ê°œ</option>
                                <option value="50">50ê°œ</option>
                                <option value="100">100ê°œ</option>
                            </select>
                        </div>
                        <div class="flex items-end">
                            <button onclick="applyFilters()" class="w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition font-medium">
                                ê²€ìƒ‰
                            </button>
                        </div>
                    </div>
                </div>

                <!-- í†µê³„ ì¹´ë“œ -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600 mb-1">ì´ ë°œì†¡</p>
                                <p id="totalSent" class="text-2xl font-bold text-gray-900">0</p>
                            </div>
                            <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600 mb-1">ì„±ê³µ</p>
                                <p id="totalSuccess" class="text-2xl font-bold text-green-600">0</p>
                            </div>
                            <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600 mb-1">ì‹¤íŒ¨</p>
                                <p id="totalFailed" class="text-2xl font-bold text-red-600">0</p>
                            </div>
                            <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center">
                                <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-600 mb-1">ì´ ë¹„ìš©</p>
                                <p id="totalCost" class="text-2xl font-bold text-purple-600">0P</p>
                            </div>
                            <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                                <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ë°œì†¡ ë‚´ì—­ í…Œì´ë¸” -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <h2 class="text-xl font-semibold text-gray-900">ë°œì†¡ ë‚´ì—­</h2>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50 border-b border-gray-200">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ë°œì†¡ ì¼ì‹œ</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ë°œì‹ ë²ˆí˜¸</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ìˆ˜ì‹ ì</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">íƒ€ì…</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ìƒíƒœ</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ë¹„ìš©</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">ìƒì„¸</th>
                                </tr>
                            </thead>
                            <tbody id="logsContainer" class="divide-y divide-gray-200">
                                <tr>
                                    <td colspan="7" class="px-6 py-12 text-center">
                                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-4"></div>
                                        <p class="text-gray-500">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                    <div class="p-6 border-t border-gray-200">
                        <div class="flex items-center justify-between">
                            <p id="paginationInfo" class="text-sm text-gray-600">ì´ 0ê±´</p>
                            <div class="flex space-x-2" id="paginationButtons">
                                <!-- ë™ì  ìƒì„± -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ìƒì„¸ ëª¨ë‹¬ -->
        <div id="detailModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-6">
            <div class="bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex items-center justify-between">
                        <h3 class="text-xl font-semibold text-gray-900">ë°œì†¡ ìƒì„¸</h3>
                        <button onclick="closeDetailModal()" class="text-gray-400 hover:text-gray-600">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div id="detailContent" class="p-6">
                    <!-- ë™ì  ìƒì„± -->
                </div>
            </div>
        </div>

        <script>
            let currentUserId = null;
            let currentPage = 1;
            let currentLimit = 20;

            async function checkAuth() {
                const user = localStorage.getItem('user');
                if (!user) {
                    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    window.location.href = '/login';
                    return null;
                }
                const userData = JSON.parse(user);
                currentUserId = userData.id;
                return userData;
            }

            function formatPhoneNumber(phone) {
                phone = phone.replace(/[^0-9]/g, '');
                if (phone.length === 10) {
                    return phone.replace(/(\\d{3})(\\d{3})(\\d{4})/, '$1-$2-$3');
                } else if (phone.length === 11) {
                    return phone.replace(/(\\d{3})(\\d{4})(\\d{4})/, '$1-$2-$3');
                }
                return phone;
            }

            function formatDateTime(dateStr) {
                if (!dateStr) return '-';
                const date = new Date(dateStr);
                return date.toLocaleString('ko-KR', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }

            async function loadLogs(page = 1) {
                currentPage = page;
                const limit = parseInt(document.getElementById('limitFilter').value);
                currentLimit = limit;

                try {
                    const response = await fetch(\`/api/sms/logs?userId=\${currentUserId}&page=\${page}&limit=\${limit}\`);
                    const data = await response.json();

                    if (data.success) {
                        renderLogs(data.logs);
                        renderPagination(data.pagination);
                        updateStats(data.logs);
                    }
                } catch (err) {
                    console.error('Failed to load logs:', err);
                }
            }

            function renderLogs(logs) {
                const container = document.getElementById('logsContainer');

                if (logs.length === 0) {
                    container.innerHTML = \`
                        <tr>
                            <td colspan="7" class="px-6 py-12 text-center">
                                <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"/>
                                </svg>
                                <p class="text-gray-500">ë°œì†¡ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</p>
                            </td>
                        </tr>
                    \`;
                    return;
                }

                container.innerHTML = logs.map(log => \`
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 text-sm text-gray-900">\${formatDateTime(log.sent_at || log.created_at)}</td>
                        <td class="px-6 py-4 text-sm text-gray-600">\${formatPhoneNumber(log.sender_number)}</td>
                        <td class="px-6 py-4 text-sm text-gray-600">\${log.receiver_number.split(',').length}ëª…</td>
                        <td class="px-6 py-4">
                            <span class="px-2 py-1 text-xs font-medium rounded-full \${log.message_type === 'SMS' ? 'bg-blue-100 text-blue-800' : 'bg-orange-100 text-orange-800'}">
                                \${log.message_type}
                            </span>
                        </td>
                        <td class="px-6 py-4">
                            <span class="px-2 py-1 text-xs font-medium rounded-full \${log.status === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                \${log.status === 'success' ? 'âœ“ ì„±ê³µ' : 'âœ— ì‹¤íŒ¨'}
                            </span>
                        </td>
                        <td class="px-6 py-4 text-sm font-medium text-gray-900">\${log.point_cost}P</td>
                        <td class="px-6 py-4">
                            <button onclick='showDetail(\${JSON.stringify(log).replace(/'/g, "\\\\'")})'
                                class="text-purple-600 hover:text-purple-700 text-sm font-medium">
                                ë³´ê¸°
                            </button>
                        </td>
                    </tr>
                \`).join('');
            }

            function renderPagination(pagination) {
                const info = document.getElementById('paginationInfo');
                const buttons = document.getElementById('paginationButtons');

                info.textContent = \`ì´ \${pagination.total}ê±´ (í˜ì´ì§€ \${pagination.page}/\${pagination.totalPages})\`;

                let html = '';
                
                if (pagination.page > 1) {
                    html += \`<button onclick="loadLogs(\${pagination.page - 1})" class="px-3 py-1 border border-gray-300 rounded hover:bg-gray-50">ì´ì „</button>\`;
                }

                for (let i = 1; i <= Math.min(pagination.totalPages, 5); i++) {
                    const active = i === pagination.page ? 'bg-purple-600 text-white' : 'bg-white text-gray-700 hover:bg-gray-50';
                    html += \`<button onclick="loadLogs(\${i})" class="px-3 py-1 border border-gray-300 rounded \${active}">\${i}</button>\`;
                }

                if (pagination.page < pagination.totalPages) {
                    html += \`<button onclick="loadLogs(\${pagination.page + 1})" class="px-3 py-1 border border-gray-300 rounded hover:bg-gray-50">ë‹¤ìŒ</button>\`;
                }

                buttons.innerHTML = html;
            }

            function updateStats(logs) {
                const totalSent = logs.length;
                const totalSuccess = logs.filter(l => l.status === 'success').length;
                const totalFailed = logs.filter(l => l.status === 'failed').length;
                const totalCost = logs.reduce((sum, l) => sum + (l.point_cost || 0), 0);

                document.getElementById('totalSent').textContent = totalSent;
                document.getElementById('totalSuccess').textContent = totalSuccess;
                document.getElementById('totalFailed').textContent = totalFailed;
                document.getElementById('totalCost').textContent = totalCost + 'P';
            }

            function showDetail(log) {
                const modal = document.getElementById('detailModal');
                const content = document.getElementById('detailContent');

                content.innerHTML = \`
                    <div class="space-y-6">
                        <div>
                            <h4 class="text-sm font-semibold text-gray-700 mb-2">ë°œì†¡ ì •ë³´</h4>
                            <div class="bg-gray-50 rounded-lg p-4 space-y-2">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">ë°œì‹ ë²ˆí˜¸</span>
                                    <span class="font-medium">\${formatPhoneNumber(log.sender_number)}</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">ìˆ˜ì‹ ì</span>
                                    <span class="font-medium">\${log.receiver_number.split(',').length}ëª…</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">ë°œì†¡ ì¼ì‹œ</span>
                                    <span class="font-medium">\${formatDateTime(log.sent_at || log.created_at)}</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">ë©”ì‹œì§€ íƒ€ì…</span>
                                    <span class="font-medium">\${log.message_type}</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">ìƒíƒœ</span>
                                    <span class="font-medium">\${log.status === 'success' ? 'âœ“ ì„±ê³µ' : 'âœ— ì‹¤íŒ¨'}</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">ë¹„ìš©</span>
                                    <span class="font-medium">\${log.point_cost}P</span>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h4 class="text-sm font-semibold text-gray-700 mb-2">ë©”ì‹œì§€ ë‚´ìš©</h4>
                            <div class="bg-gray-50 rounded-lg p-4">
                                <p class="text-sm text-gray-900 whitespace-pre-wrap">\${log.message_content}</p>
                            </div>
                        </div>

                        <div>
                            <h4 class="text-sm font-semibold text-gray-700 mb-2">ìˆ˜ì‹ ì ëª©ë¡</h4>
                            <div class="bg-gray-50 rounded-lg p-4">
                                <div class="space-y-1 text-sm text-gray-900">
                                    \${log.receiver_number.split(',').map(phone => \`
                                        <div>\${formatPhoneNumber(phone)}</div>
                                    \`).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                \`;

                modal.classList.remove('hidden');
            }

            function closeDetailModal() {
                document.getElementById('detailModal').classList.add('hidden');
            }

            function applyFilters() {
                loadLogs(1);
            }

            (async () => {
                await checkAuth();
                if (currentUserId) {
                    loadLogs(1);
                }
            })();
        <\/script>
    </body>
    </html>
  `));d.get("/sms/points",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í¬ì¸íŠ¸ ê´€ë¦¬ - SMS ë°œì†¡</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * {
            font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
          }
          .tab-active {
            border-bottom: 2px solid #9333ea;
            color: #9333ea;
            font-weight: 600;
          }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-200 shadow-sm">
            <div class="max-w-7xl mx-auto px-6">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center space-x-8">
                        <a href="/dashboard" class="text-xl font-bold text-purple-600">SMS ë°œì†¡ ì‹œìŠ¤í…œ</a>
                        <div class="flex space-x-4">
                            <a href="/sms/senders" class="text-gray-600 hover:text-purple-600 px-3 py-2">ë°œì‹ ë²ˆí˜¸</a>
                            <a href="/sms/compose" class="text-gray-600 hover:text-purple-600 px-3 py-2">ë¬¸ì ì‘ì„±</a>
                            <a href="/sms/logs" class="text-gray-600 hover:text-purple-600 px-3 py-2">ë°œì†¡ ë‚´ì—­</a>
                            <a href="/sms/points" class="text-purple-600 border-b-2 border-purple-600 px-3 py-2 font-medium">í¬ì¸íŠ¸ ê´€ë¦¬</a>
                        </div>
                    </div>
                    <a href="/dashboard" class="text-gray-600 hover:text-purple-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                        </svg>
                    </a>
                </div>
            </div>
        </nav>

        <div class="pt-24 pb-12 px-6">
            <div class="max-w-7xl mx-auto">
                <!-- Header -->
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">ğŸ’° í¬ì¸íŠ¸ ê´€ë¦¬</h1>
                    <p class="text-gray-600">SMS ë°œì†¡ í¬ì¸íŠ¸ë¥¼ ê´€ë¦¬í•˜ê³  ê±°ë˜ ë‚´ì—­ì„ í™•ì¸í•©ë‹ˆë‹¤</p>
                </div>

                <!-- í˜„ì¬ ì”ì•¡ ì¹´ë“œ -->
                <div class="bg-gradient-to-br from-purple-600 to-purple-800 rounded-lg shadow-lg p-8 text-white mb-8">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-lg font-medium opacity-90">ë³´ìœ  í¬ì¸íŠ¸</h2>
                        <svg class="w-8 h-8 opacity-80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <div class="flex items-end justify-between">
                        <div>
                            <p id="currentBalance" class="text-5xl font-bold mb-2">0</p>
                            <p class="text-lg opacity-90">í¬ì¸íŠ¸</p>
                        </div>
                        <div class="text-right space-y-2">
                            <div class="flex items-center gap-3">
                                <span class="text-sm opacity-75">SMS</span>
                                <span id="smsCount" class="text-xl font-bold">0ê±´</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <span class="text-sm opacity-75">LMS</span>
                                <span id="lmsCount" class="text-xl font-bold">0ê±´</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <span class="text-sm opacity-75">MMS</span>
                                <span id="mmsCount" class="text-xl font-bold">0ê±´</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- í†µê³„ -->
                    <div class="grid grid-cols-3 gap-4 pt-6 mt-6 border-t border-white/20">
                        <div>
                            <p class="text-xs opacity-75 mb-1">ì´ ì¶©ì „</p>
                            <p id="totalCharged" class="text-lg font-semibold">0P</p>
                        </div>
                        <div>
                            <p class="text-xs opacity-75 mb-1">ì´ ì‚¬ìš©</p>
                            <p id="totalUsed" class="text-lg font-semibold">0P</p>
                        </div>
                        <div>
                            <p class="text-xs opacity-75 mb-1">ê±°ë˜ ê±´ìˆ˜</p>
                            <p id="totalTransactions" class="text-lg font-semibold">0ê±´</p>
                        </div>
                    </div>
                </div>

                <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6">
                    <div class="flex border-b border-gray-200">
                        <button onclick="switchTab('charge')" id="tab-charge" class="tab-active flex-1 px-6 py-4 text-center transition">
                            ğŸ’³ ì¶©ì „í•˜ê¸°
                        </button>
                        <button onclick="switchTab('deposit')" id="tab-deposit" class="flex-1 px-6 py-4 text-center text-gray-600 hover:text-purple-600 transition">
                            ğŸ“‹ ì¶©ì „ ë‚´ì—­
                        </button>
                        <button onclick="switchTab('transactions')" id="tab-transactions" class="flex-1 px-6 py-4 text-center text-gray-600 hover:text-purple-600 transition">
                            ğŸ“Š ì‚¬ìš© ë‚´ì—­
                        </button>
                        <button onclick="switchTab('pricing')" id="tab-pricing" class="flex-1 px-6 py-4 text-center text-gray-600 hover:text-purple-600 transition">
                            ğŸ’µ ìš”ê¸ˆí‘œ
                        </button>
                    </div>

                    <!-- ì¶©ì „í•˜ê¸° íƒ­ -->
                    <div id="content-charge" class="p-6">
                        <div class="max-w-2xl mx-auto space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ì¶©ì „ ê¸ˆì•¡</label>
                                <div class="relative">
                                    <input type="number" id="depositAmount" placeholder="10000" 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 pr-12">
                                    <span class="absolute right-4 top-3 text-gray-500">ì›</span>
                                </div>
                            </div>
                            <div class="grid grid-cols-4 gap-2">
                                <button onclick="setAmount(10000)" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-purple-50 hover:border-purple-500 text-sm transition">+1ë§Œ</button>
                                <button onclick="setAmount(50000)" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-purple-50 hover:border-purple-500 text-sm transition">+5ë§Œ</button>
                                <button onclick="setAmount(100000)" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-purple-50 hover:border-purple-500 text-sm transition">+10ë§Œ</button>
                                <button onclick="setAmount(500000)" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-purple-50 hover:border-purple-500 text-sm transition">+50ë§Œ</button>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ì€í–‰ëª… (ì„ íƒ)</label>
                                <input type="text" id="bankName" placeholder="ì‹ í•œì€í–‰" 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ê³„ì¢Œë²ˆí˜¸ (ì„ íƒ)</label>
                                <input type="text" id="accountNumber" placeholder="110-123-456789" 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ì…ê¸ˆìëª… (ì„ íƒ)</label>
                                <input type="text" id="depositorName" placeholder="í™ê¸¸ë™" 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ë©”ëª¨ (ì„ íƒ)</label>
                                <textarea id="depositMessage" rows="3" placeholder="ì…ê¸ˆ ê´€ë ¨ ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”" 
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"></textarea>
                            </div>
                            
                            <!-- ì…ê¸ˆ ì•ˆë‚´ -->
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <h4 class="font-semibold text-blue-900 mb-2">ğŸ’¡ ì…ê¸ˆ ì•ˆë‚´</h4>
                                <p class="text-sm text-blue-800 mb-2">ì•„ë˜ ê³„ì¢Œë¡œ ì…ê¸ˆ í›„ ì‹ ì²­í•´ì£¼ì„¸ìš”:</p>
                                <div class="bg-white rounded p-3 font-mono text-sm">
                                    <p class="font-bold text-gray-900">êµ­ë¯¼ì€í–‰ 746-910023-17004</p>
                                    <p class="text-gray-600">ì˜ˆê¸ˆì£¼: ìŠˆí¼í”Œë ˆì´ìŠ¤</p>
                                </div>
                                <p class="text-xs text-blue-600 mt-2">â€¢ ìµœì†Œ ì¶©ì „ ê¸ˆì•¡: 10,000ì›<br>â€¢ ê´€ë¦¬ì ìŠ¹ì¸ í›„ í¬ì¸íŠ¸ê°€ ìë™ ì¶©ì „ë©ë‹ˆë‹¤</p>
                            </div>
                            
                            <button onclick="requestDeposit()" 
                                class="w-full bg-purple-600 text-white px-6 py-4 rounded-lg hover:bg-purple-700 transition font-semibold text-lg">
                                ì…ê¸ˆ ì‹ ì²­í•˜ê¸°
                            </button>
                        </div>
                    </div>

                    <!-- ì¶©ì „ ë‚´ì—­ íƒ­ -->
                    <div id="content-deposit" class="p-6 hidden">
                        <div id="depositsContainer" class="space-y-3">
                            <p class="text-sm text-gray-400 text-center py-8">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                        </div>
                    </div>

                    <!-- ì‚¬ìš© ë‚´ì—­ íƒ­ -->
                    <div id="content-transactions" class="p-6 hidden">
                        <div id="transactionsContainer" class="space-y-3">
                            <p class="text-sm text-gray-400 text-center py-8">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                        </div>
                    </div>

                    <!-- ìš”ê¸ˆí‘œ íƒ­ -->
                    <div id="content-pricing" class="p-6 hidden">
                        <div id="pricingContainer" class="max-w-2xl mx-auto space-y-3">
                            <div class="animate-pulse">
                                <div class="h-4 bg-gray-200 rounded w-3/4 mb-2"></div>
                                <div class="h-4 bg-gray-200 rounded w-1/2"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            let currentUserId = null;
            let currentUserName = '';
            let currentUserEmail = '';
            let currentBalance = 0;
            let currentTab = 'charge';

            async function checkAuth() {
                const user = localStorage.getItem('user');
                if (!user) {
                    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    window.location.href = '/login';
                    return null;
                }
                const userData = JSON.parse(user);
                currentUserId = userData.id;
                currentUserName = userData.name || '';
                currentUserEmail = userData.email || '';
                currentBalance = userData.points || 0;
                return userData;
            }

            function switchTab(tab) {
                // ëª¨ë“  íƒ­ ë²„íŠ¼ì˜ active í´ë˜ìŠ¤ ì œê±°
                document.querySelectorAll('[id^="tab-"]').forEach(btn => {
                    btn.classList.remove('tab-active');
                    btn.classList.add('text-gray-600');
                });
                
                // ëª¨ë“  íƒ­ ì»¨í…ì¸  ìˆ¨ê¸°ê¸°
                document.querySelectorAll('[id^="content-"]').forEach(content => {
                    content.classList.add('hidden');
                });
                
                // ì„ íƒëœ íƒ­ í™œì„±í™”
                document.getElementById('tab-' + tab).classList.add('tab-active');
                document.getElementById('tab-' + tab).classList.remove('text-gray-600');
                document.getElementById('content-' + tab).classList.remove('hidden');
                
                currentTab = tab;
                
                // ë°ì´í„° ë¡œë“œ
                if (tab === 'deposit' && currentUserId) {
                    loadDepositRequests();
                } else if (tab === 'transactions' && currentUserId) {
                    loadTransactions();
                } else if (tab === 'pricing') {
                    loadPricing();
                }
            }

            async function loadBalance() {
                try {
                    const response = await fetch(\`/api/users/\${currentUserId}/points\`);
                    const data = await response.json();

                    if (data.success) {
                        currentBalance = data.points || 0;
                        document.getElementById('currentBalance').textContent = currentBalance.toLocaleString();
                        
                        // ë°œì†¡ ê°€ëŠ¥ ê±´ìˆ˜ ê³„ì‚°
                        document.getElementById('smsCount').textContent = Math.floor(currentBalance / 20) + 'ê±´';
                        document.getElementById('lmsCount').textContent = Math.floor(currentBalance / 50) + 'ê±´';
                        document.getElementById('mmsCount').textContent = Math.floor(currentBalance / 150) + 'ê±´';
                    }
                } catch (err) {
                    console.error('Failed to load balance:', err);
                }
            }

            async function loadStats() {
                try {
                    const response = await fetch(\`/api/point-transactions/\${currentUserId}?limit=1000\`);
                    const data = await response.json();

                    if (data.success && data.stats) {
                        document.getElementById('totalCharged').textContent = data.stats.totalCharged.toLocaleString() + 'P';
                        document.getElementById('totalUsed').textContent = data.stats.totalUsed.toLocaleString() + 'P';
                        document.getElementById('totalTransactions').textContent = data.stats.totalTransactions.toLocaleString() + 'ê±´';
                    }
                } catch (err) {
                    console.error('Failed to load stats:', err);
                }
            }

            async function loadPricing() {
                try {
                    const response = await fetch('/api/sms/pricing');
                    const data = await response.json();

                    if (data.success) {
                        const container = document.getElementById('pricingContainer');
                        container.innerHTML = data.pricing.map(p => \`
                            <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                                <div>
                                    <div class="font-semibold text-gray-900">\${p.message_type}</div>
                                    <div class="text-sm text-gray-500 mt-1">\${p.description}</div>
                                </div>
                                <div class="text-right">
                                    <div class="text-2xl font-bold text-purple-600">\${p.retail_price}P</div>
                                    <div class="text-xs text-gray-400">ê±´ë‹¹</div>
                                </div>
                            </div>
                        \`).join('');
                    }
                } catch (err) {
                    console.error('Failed to load pricing:', err);
                }
            }

            async function loadDepositRequests() {
                try {
                    const response = await fetch(\`/api/deposit/my-requests/\${currentUserId}\`);
                    const data = await response.json();

                    const container = document.getElementById('depositsContainer');
                    
                    if (data.success && data.requests && data.requests.length > 0) {
                        container.innerHTML = data.requests.map(req => \`
                            <div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-xl font-bold text-gray-900">\${req.amount.toLocaleString()}ì›</span>
                                    <span class="text-xs px-3 py-1 rounded-full font-semibold \${
                                        req.status === 'pending' ? 'bg-yellow-100 text-yellow-800' :
                                        req.status === 'approved' ? 'bg-green-100 text-green-800' :
                                        'bg-red-100 text-red-800'
                                    }">
                                        \${req.status === 'pending' ? 'ëŒ€ê¸°ì¤‘' : req.status === 'approved' ? 'ìŠ¹ì¸ì™„ë£Œ' : 'ê±°ì ˆë¨'}
                                    </span>
                                </div>
                                <div class="grid grid-cols-2 gap-2 text-sm text-gray-600">
                                    \${req.bank_name ? \`<div>â€¢ ì€í–‰: \${req.bank_name}</div>\` : ''}
                                    \${req.depositor_name ? \`<div>â€¢ ì…ê¸ˆì: \${req.depositor_name}</div>\` : ''}
                                </div>
                                <div class="flex items-center justify-between mt-3 pt-3 border-t border-gray-200">
                                    <span class="text-xs text-gray-500">ì‹ ì²­ì¼: \${new Date(req.created_at).toLocaleString('ko-KR')}</span>
                                    \${req.processed_at ? \`<span class="text-xs text-gray-500">ì²˜ë¦¬ì¼: \${new Date(req.processed_at).toLocaleString('ko-KR')}</span>\` : ''}
                                </div>
                                \${req.message ? \`<div class="mt-2 text-sm text-gray-600 italic">\${req.message}</div>\` : ''}
                            </div>
                        \`).join('');
                    } else {
                        container.innerHTML = '<div class="text-center py-12"><p class="text-gray-400">ì…ê¸ˆ ì‹ ì²­ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</p><p class="text-sm text-gray-400 mt-2">ì¶©ì „í•˜ê¸° íƒ­ì—ì„œ ì…ê¸ˆì„ ì‹ ì²­í•´ë³´ì„¸ìš”</p></div>';
                    }
                } catch (err) {
                    console.error('Failed to load deposit requests:', err);
                    document.getElementById('depositsContainer').innerHTML = '<p class="text-sm text-red-500 text-center py-8">ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨</p>';
                }
            }

            async function loadTransactions() {
                try {
                    const response = await fetch(\`/api/point-transactions/\${currentUserId}?limit=50\`);
                    const data = await response.json();

                    const container = document.getElementById('transactionsContainer');
                    
                    if (data.success && data.transactions && data.transactions.length > 0) {
                        container.innerHTML = data.transactions.map(tx => {
                            const isPositive = tx.amount > 0;
                            const typeLabels = {
                                'deposit': 'ì…ê¸ˆ ìŠ¹ì¸',
                                'charge': 'ê´€ë¦¬ì ì¶©ì „',
                                'sms_cost': 'SMS ë°œì†¡',
                                'refund': 'í™˜ë¶ˆ'
                            };
                            const typeLabel = typeLabels[tx.transaction_type] || tx.transaction_type;
                            
                            return \`
                            <div class="p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center gap-2">
                                        <span class="text-2xl">\${isPositive ? 'ğŸ“¥' : 'ğŸ“¤'}</span>
                                        <div>
                                            <div class="font-semibold text-gray-900">\${typeLabel}</div>
                                            <div class="text-xs text-gray-500">\${new Date(tx.created_at).toLocaleString('ko-KR')}</div>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-xl font-bold \${isPositive ? 'text-green-600' : 'text-red-600'}">
                                            \${isPositive ? '+' : ''}\${tx.amount.toLocaleString()}P
                                        </div>
                                        <div class="text-xs text-gray-500">ì”ì•¡: \${tx.balance_after.toLocaleString()}P</div>
                                    </div>
                                </div>
                                \${tx.description ? \`<div class="text-sm text-gray-600 mt-2">\${tx.description}</div>\` : ''}
                            </div>
                        \`}).join('');
                    } else {
                        container.innerHTML = '<div class="text-center py-12"><p class="text-gray-400">ê±°ë˜ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</p><p class="text-sm text-gray-400 mt-2">ì¶©ì „ ë˜ëŠ” SMS ë°œì†¡ í›„ ë‚´ì—­ì´ í‘œì‹œë©ë‹ˆë‹¤</p></div>';
                    }
                } catch (err) {
                    console.error('Failed to load transactions:', err);
                    document.getElementById('transactionsContainer').innerHTML = '<p class="text-sm text-red-500 text-center py-8">ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨</p>';
                }
            }

            function setAmount(amount) {
                const input = document.getElementById('depositAmount');
                const current = parseInt(input.value) || 0;
                input.value = current + amount;
            }

            async function requestDeposit() {
                const amount = parseInt(document.getElementById('depositAmount').value);
                const bankName = document.getElementById('bankName').value.trim();
                const accountNumber = document.getElementById('accountNumber').value.trim();
                const depositorName = document.getElementById('depositorName').value.trim();
                const message = document.getElementById('depositMessage').value.trim();

                if (!amount || amount <= 0) {
                    alert('ì¶©ì „ ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                if (amount < 10000) {
                    alert('ìµœì†Œ ì¶©ì „ ê¸ˆì•¡ì€ 10,000ì›ì…ë‹ˆë‹¤.');
                    return;
                }

                if (!confirm(\`\${amount.toLocaleString()}ì›ì„ ì¶©ì „ ì‹ ì²­í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\`)) {
                    return;
                }

                try {
                    const response = await fetch('/api/deposit/request', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            userId: currentUserId,
                            userName: currentUserName,
                            userEmail: currentUserEmail,
                            amount: amount,
                            bankName: bankName,
                            accountNumber: accountNumber,
                            depositorName: depositorName,
                            message: message
                        })
                    });

                    const data = await response.json();

                    if (data.success) {
                        alert('âœ… ì…ê¸ˆ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\\nê´€ë¦¬ì ìŠ¹ì¸ í›„ í¬ì¸íŠ¸ê°€ ì¶©ì „ë©ë‹ˆë‹¤.');
                        
                        // í¼ ì´ˆê¸°í™”
                        document.getElementById('depositAmount').value = '';
                        document.getElementById('bankName').value = '';
                        document.getElementById('accountNumber').value = '';
                        document.getElementById('depositorName').value = '';
                        document.getElementById('depositMessage').value = '';
                        
                        // ì¶©ì „ ë‚´ì—­ íƒ­ìœ¼ë¡œ ì „í™˜
                        switchTab('deposit');
                    } else {
                        alert('âŒ ' + data.error);
                    }
                } catch (err) {
                    console.error('Deposit request error:', err);
                    alert('ì…ê¸ˆ ì‹ ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            (async () => {
                await checkAuth();
                if (currentUserId) {
                    loadBalance();
                    loadStats();
                }
            })();
        <\/script>
    </body>
    </html>
  `));d.get("/admin/sms",async e=>{const{env:t}=e,s=await t.DB.prepare(`
    SELECT 
      COUNT(*) as total,
      SUM(CASE WHEN status = 'success' THEN 1 ELSE 0 END) as success,
      SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END) as failed
    FROM sms_logs
  `).all(),r=await t.DB.prepare(`
    SELECT 
      COUNT(*) as total,
      SUM(CASE WHEN status = 'success' THEN 1 ELSE 0 END) as success,
      SUM(CASE WHEN status = 'failed' THEN 1 ELSE 0 END) as failed
    FROM kakao_logs
  `).all(),a=await t.DB.prepare(`
    SELECT 
      id, user_id, sender_id, message_type, 
      status, created_at
    FROM sms_logs 
    ORDER BY created_at DESC 
    LIMIT 10
  `).all(),n=await t.DB.prepare(`
    SELECT 
      id, user_id, sender_key, template_code, 
      status, created_at
    FROM kakao_logs 
    ORDER BY created_at DESC 
    LIMIT 10
  `).all(),l=s.results[0]||{total:0,success:0,failed:0},o=r.results[0]||{total:0,success:0,failed:0};return e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë¬¸ì ê´€ë¦¬ - ìŠˆí¼í”Œë ˆì´ìŠ¤ ê´€ë¦¬ì</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-8">
                        <a href="/admin/dashboard" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤ ê´€ë¦¬ì</a>
                        <div class="flex gap-4">
                            <a href="/admin/dashboard" class="text-gray-600 hover:text-purple-600">ëŒ€ì‹œë³´ë“œ</a>
                            <a href="/admin/users" class="text-gray-600 hover:text-purple-600">ì‚¬ìš©ì</a>
                            <a href="/admin/contacts" class="text-gray-600 hover:text-purple-600">ë¬¸ì˜</a>
                            <a href="/admin/sms" class="text-purple-600 font-semibold">ë¬¸ì ê´€ë¦¬</a>
                            <a href="/admin/sender/verification" class="text-gray-600 hover:text-purple-600">ë°œì‹ ë²ˆí˜¸ ìŠ¹ì¸</a>
                        </div>
                    </div>
                    <button onclick="logout()" class="text-gray-600 hover:text-red-600">
                        <i class="fas fa-sign-out-alt mr-2"></i>ë¡œê·¸ì•„ì›ƒ
                    </button>
                </div>
            </div>
        </nav>

        <div class="max-w-7xl mx-auto px-6 py-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-8">ë¬¸ì ë°œì†¡ ê´€ë¦¬</h1>
            
            <!-- í†µê³„ ì¹´ë“œ -->
            <div class="grid md:grid-cols-4 gap-6 mb-8">
                <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-sm p-6 text-white">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-blue-100">SMS ë°œì†¡</span>
                        <i class="fas fa-sms text-2xl"></i>
                    </div>
                    <p class="text-3xl font-bold mb-1">${l.total}</p>
                    <p class="text-sm text-blue-100">ì„±ê³µ ${l.success} / ì‹¤íŒ¨ ${l.failed}</p>
                </div>
                
                <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-sm p-6 text-white">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-green-100">SMS ì„±ê³µ</span>
                        <i class="fas fa-check-circle text-2xl"></i>
                    </div>
                    <p class="text-3xl font-bold mb-1">${l.success||0}</p>
                    <p class="text-sm text-green-100">ì„±ê³µë¥  ${l.total>0?Math.round(l.success/l.total*100):0}%</p>
                </div>
                
                <div class="bg-gradient-to-br from-yellow-400 to-yellow-500 rounded-xl shadow-sm p-6 text-white">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-yellow-100">ì¹´ì¹´ì˜¤í†¡</span>
                        <i class="fas fa-comment-dots text-2xl"></i>
                    </div>
                    <p class="text-3xl font-bold mb-1">${o.total}</p>
                    <p class="text-sm text-yellow-100">ì„±ê³µ ${o.success} / ì‹¤íŒ¨ ${o.failed}</p>
                </div>
                
                <div class="bg-gradient-to-br from-green-400 to-green-500 rounded-xl shadow-sm p-6 text-white">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-green-100">ì¹´ì¹´ì˜¤ ì„±ê³µ</span>
                        <i class="fas fa-check-circle text-2xl"></i>
                    </div>
                    <p class="text-3xl font-bold mb-1">${o.success||0}</p>
                    <p class="text-sm text-green-100">ì„±ê³µë¥  ${o.total>0?Math.round(o.success/o.total*100):0}%</p>
                </div>
            </div>
            
            <!-- ìµœê·¼ ë°œì†¡ ë‚´ì—­ -->
            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200 mb-8">
                <h2 class="text-xl font-bold text-gray-900 mb-4">ìµœê·¼ SMS ë°œì†¡ ë‚´ì—­</h2>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-gray-200">
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ID</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ì‚¬ìš©ì</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">íƒ€ì…</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ì„±ê³µ/ì‹¤íŒ¨</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ìƒíƒœ</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ë°œì†¡ì¼ì‹œ</th>
                            </tr>
                        </thead>
                        <tbody id="smsTableBody">
                            ${a.results.map(i=>`
                                <tr class="border-b border-gray-100 hover:bg-gray-50">
                                    <td class="py-3 px-4">#${i.id}</td>
                                    <td class="py-3 px-4">User ${i.user_id}</td>
                                    <td class="py-3 px-4">
                                        <span class="px-2 py-1 rounded text-xs font-semibold ${i.message_type==="SMS"?"bg-blue-100 text-blue-800":i.message_type==="LMS"?"bg-purple-100 text-purple-800":"bg-pink-100 text-pink-800"}">
                                            ${i.message_type}
                                        </span>
                                    </td>
                                    <td class="py-3 px-4">-</td>
                                    <td class="py-3 px-4">
                                        <span class="px-2 py-1 rounded text-xs font-semibold ${i.status==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}">
                                            ${i.status==="success"?"ì„±ê³µ":"ì‹¤íŒ¨"}
                                        </span>
                                    </td>
                                    <td class="py-3 px-4 text-sm text-gray-600">${new Date(i.created_at).toLocaleString("ko-KR")}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- ìµœê·¼ ì¹´ì¹´ì˜¤í†¡ ë°œì†¡ ë‚´ì—­ -->
            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                <h2 class="text-xl font-bold text-gray-900 mb-4">ìµœê·¼ ì¹´ì¹´ì˜¤í†¡ ë°œì†¡ ë‚´ì—­</h2>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-gray-200">
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ID</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ì‚¬ìš©ì</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">í…œí”Œë¦¿</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ì„±ê³µ/ì‹¤íŒ¨</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ìƒíƒœ</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ë°œì†¡ì¼ì‹œ</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${n.results.map(i=>`
                                <tr class="border-b border-gray-100 hover:bg-gray-50">
                                    <td class="py-3 px-4">#${i.id}</td>
                                    <td class="py-3 px-4">User ${i.user_id}</td>
                                    <td class="py-3 px-4">
                                        <span class="px-2 py-1 rounded text-xs font-semibold bg-yellow-100 text-yellow-800">
                                            ${i.template_code||"N/A"}
                                        </span>
                                    </td>
                                    <td class="py-3 px-4">-</td>
                                    <td class="py-3 px-4">
                                        <span class="px-2 py-1 rounded text-xs font-semibold ${i.status==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}">
                                            ${i.status==="success"?"ì„±ê³µ":"ì‹¤íŒ¨"}
                                        </span>
                                    </td>
                                    <td class="py-3 px-4 text-sm text-gray-600">${new Date(i.created_at).toLocaleString("ko-KR")}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <script>
            function logout() {
                if(confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    localStorage.removeItem('user');
                    window.location.href = '/';
                }
            }
        <\/script>
    </body>
    </html>
  `)});d.get("/admin/deposits",async e=>{const{env:t}=e,s=await t.DB.prepare(`
    SELECT 
      dr.*,
      u.name as user_name,
      u.email as user_email
    FROM deposit_requests dr
    LEFT JOIN users u ON dr.user_id = u.id
    ORDER BY 
      CASE 
        WHEN dr.status = 'pending' THEN 1
        WHEN dr.status = 'approved' THEN 2
        ELSE 3
      END,
      dr.created_at DESC
    LIMIT 50
  `).all();return e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ì…ê¸ˆ ê´€ë¦¬ - ìŠˆí¼í”Œë ˆì´ìŠ¤ ê´€ë¦¬ì</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
    </head>
    <body class="bg-gray-50">
        <nav class="bg-white border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-6 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-8">
                        <a href="/admin/dashboard" class="text-2xl font-bold text-purple-600">ìŠˆí¼í”Œë ˆì´ìŠ¤ ê´€ë¦¬ì</a>
                        <div class="flex gap-4">
                            <a href="/admin/dashboard" class="text-gray-600 hover:text-purple-600">ëŒ€ì‹œë³´ë“œ</a>
                            <a href="/admin/users" class="text-gray-600 hover:text-purple-600">ì‚¬ìš©ì</a>
                            <a href="/admin/contacts" class="text-gray-600 hover:text-purple-600">ë¬¸ì˜</a>
                            <a href="/admin/sms" class="text-gray-600 hover:text-purple-600">ë¬¸ì ê´€ë¦¬</a>
                            <a href="/admin/deposits" class="text-purple-600 font-semibold">ì…ê¸ˆ ê´€ë¦¬</a>
                        </div>
                    </div>
                    <button onclick="logout()" class="text-gray-600 hover:text-red-600">
                        <i class="fas fa-sign-out-alt mr-2"></i>ë¡œê·¸ì•„ì›ƒ
                    </button>
                </div>
            </div>
        </nav>

        <div class="max-w-7xl mx-auto px-6 py-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-8">í¬ì¸íŠ¸ ì…ê¸ˆ ê´€ë¦¬</h1>
            
            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-gray-200">
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ID</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ì‚¬ìš©ì</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ê¸ˆì•¡</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ì€í–‰/ì…ê¸ˆì</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ì‹ ì²­ì¼</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ìƒíƒœ</th>
                                <th class="text-left py-3 px-4 text-gray-600 font-semibold">ê´€ë¦¬</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${s.results.map(r=>`
                                <tr class="border-b border-gray-100 hover:bg-gray-50">
                                    <td class="py-3 px-4">#${r.id}</td>
                                    <td class="py-3 px-4">
                                        <div class="font-semibold">${r.user_name}</div>
                                        <div class="text-sm text-gray-600">${r.user_email}</div>
                                    </td>
                                    <td class="py-3 px-4 font-bold text-lg">${r.amount.toLocaleString()}P</td>
                                    <td class="py-3 px-4">
                                        <div class="text-sm">${r.bank_name||"N/A"}</div>
                                        <div class="text-sm text-gray-600">${r.depositor_name||"N/A"}</div>
                                    </td>
                                    <td class="py-3 px-4 text-sm text-gray-600">${new Date(r.created_at).toLocaleString("ko-KR")}</td>
                                    <td class="py-3 px-4">
                                        <span class="px-2 py-1 rounded text-xs font-semibold ${r.status==="pending"?"bg-yellow-100 text-yellow-800":r.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}">
                                            ${r.status==="pending"?"ëŒ€ê¸°ì¤‘":r.status==="approved"?"ìŠ¹ì¸ì™„ë£Œ":"ê±°ì ˆë¨"}
                                        </span>
                                    </td>
                                    <td class="py-3 px-4">
                                        ${r.status==="pending"?`
                                            <button onclick="processDeposit(${r.id}, 'approved')" 
                                                class="px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 text-sm mr-2">
                                                ìŠ¹ì¸
                                            </button>
                                            <button onclick="processDeposit(${r.id}, 'rejected')" 
                                                class="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm">
                                                ê±°ì ˆ
                                            </button>
                                        `:"-"}
                                    </td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <script>
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            
            async function processDeposit(requestId, status) {
                const action = status === 'approved' ? 'ìŠ¹ì¸' : 'ê±°ì ˆ';
                if(!confirm(\`ì •ë§ ì´ ì…ê¸ˆ ì‹ ì²­ì„ \${action}í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\`)) return;
                
                try {
                    const response = await fetch(\`/api/admin/deposit/requests/\${requestId}/process\`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            status: status,
                            adminId: user.id
                        })
                    });
                    
                    const data = await response.json();
                    
                    if(data.success) {
                        alert(\`ì…ê¸ˆ ì‹ ì²­ì´ \${action}ë˜ì—ˆìŠµë‹ˆë‹¤.\`);
                        location.reload();
                    } else {
                        alert(\`ì˜¤ë¥˜: \${data.error}\`);
                    }
                } catch(error) {
                    alert('ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }
            
            function logout() {
                if(confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    localStorage.removeItem('user');
                    window.location.href = '/';
                }
            }
        <\/script>
    </body>
    </html>
  `)});d.get("/admin/sender/verification",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ë°œì‹ ë²ˆí˜¸ ìŠ¹ì¸ ê´€ë¦¬ - ê´€ë¦¬ì</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <style>
          @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
          * { font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, sans-serif; }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- Navigation -->
        <nav class="fixed w-full top-0 z-50 bg-white border-b border-gray-100">
            <div class="max-w-7xl mx-auto px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center space-x-3">
                        <a href="/admin/dashboard" class="text-lg font-bold text-gray-900">â† ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</a>
                    </div>
                    <span id="userName" class="text-gray-700 font-medium"></span>
                </div>
            </div>
        </nav>

        <div class="pt-24 pb-12 px-6">
            <div class="max-w-7xl mx-auto">
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-gray-900 mb-2">ğŸ“± ë°œì‹ ë²ˆí˜¸ ìŠ¹ì¸ ê´€ë¦¬</h1>
                    <p class="text-gray-600">ì‚¬ìš©ìì˜ ë°œì‹ ë²ˆí˜¸ ì¸ì¦ ì‹ ì²­ì„ ê²€í† í•˜ê³  ìŠ¹ì¸/ê±°ì ˆí•©ë‹ˆë‹¤</p>
                </div>

                <!-- í†µê³„ -->
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-yellow-50 border border-yellow-200 rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-yellow-700 font-medium">ìŠ¹ì¸ ëŒ€ê¸°</p>
                                <p class="text-3xl font-bold text-yellow-900 mt-1"><span id="pendingCount">0</span>ê±´</p>
                            </div>
                            <svg class="w-12 h-12 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>

                    <div class="bg-green-50 border border-green-200 rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-green-700 font-medium">ìŠ¹ì¸ ì™„ë£Œ</p>
                                <p class="text-3xl font-bold text-green-900 mt-1"><span id="approvedCount">0</span>ê±´</p>
                            </div>
                            <svg class="w-12 h-12 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>

                    <div class="bg-red-50 border border-red-200 rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-red-700 font-medium">ê±°ì ˆë¨</p>
                                <p class="text-3xl font-bold text-red-900 mt-1"><span id="rejectedCount">0</span>ê±´</p>
                            </div>
                            <svg class="w-12 h-12 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </div>

                <!-- ì‹ ì²­ ëª©ë¡ -->
                <div class="bg-white rounded-xl shadow-lg border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-bold text-gray-900">ì‹ ì²­ ëª©ë¡</h2>
                            <button onclick="loadRequests()" class="text-purple-600 hover:text-purple-700 font-medium">
                                ğŸ”„ ìƒˆë¡œê³ ì¹¨
                            </button>
                        </div>
                    </div>
                    <div id="requestsList" class="divide-y divide-gray-200">
                        <div class="text-center text-gray-500 py-12">
                            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"></div>
                            <p>ë¡œë”© ì¤‘...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ìƒì„¸ ëª¨ë‹¬ -->
        <div id="detailModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
            <div class="bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h2 class="text-2xl font-bold text-gray-900">ë°œì‹ ë²ˆí˜¸ ìŠ¹ì¸ ê²€í† </h2>
                        <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div id="modalContent" class="p-6">
                    <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
                </div>
            </div>
        </div>

        <script>
            const user = JSON.parse(localStorage.getItem('user'))
            if (!user || user.role !== 'admin') {
                alert('ê´€ë¦¬ì ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.')
                window.location.href = '/dashboard'
            }
            document.getElementById('userName').textContent = user.name

            let currentRequest = null

            async function loadRequests() {
                try {
                    const response = await fetch('/api/admin/sender/verification-requests?adminId=' + user.id)
                    const data = await response.json()

                    if (data.success) {
                        updateStats(data.requests)
                        renderRequests(data.requests)
                    }
                } catch (err) {
                    console.error('Load requests error:', err)
                }
            }

            function updateStats(requests) {
                const pending = requests.filter(r => r.status === 'pending').length
                const approved = requests.filter(r => r.status === 'approved').length
                const rejected = requests.filter(r => r.status === 'rejected').length

                document.getElementById('pendingCount').textContent = pending
                document.getElementById('approvedCount').textContent = approved
                document.getElementById('rejectedCount').textContent = rejected
            }

            function renderRequests(requests) {
                const container = document.getElementById('requestsList')

                if (requests.length === 0) {
                    container.innerHTML = \`
                        <div class="text-center text-gray-500 py-12">
                            <svg class="w-12 h-12 text-gray-300 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            <p>ì‹ ì²­ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</p>
                        </div>
                    \`
                    return
                }

                container.innerHTML = requests.map(req => {
                    const statusColor = req.status === 'pending' ? 'yellow' : req.status === 'approved' ? 'green' : 'red'
                    const statusText = req.status === 'pending' ? 'ìŠ¹ì¸ ëŒ€ê¸°' : req.status === 'approved' ? 'ìŠ¹ì¸ ì™„ë£Œ' : 'ê±°ì ˆë¨'
                    
                    return \`
                        <div class="p-6 hover:bg-gray-50 transition">
                            <div class="flex justify-between items-start">
                                <div class="flex-1">
                                    <div class="flex items-center gap-3 mb-3">
                                        <span class="px-3 py-1 bg-\${statusColor}-100 text-\${statusColor}-700 text-sm font-medium rounded-full">
                                            \${statusText}
                                        </span>
                                        <span class="text-sm text-gray-500">
                                            \${new Date(req.request_date).toLocaleString('ko-KR')}
                                        </span>
                                    </div>
                                    <div class="grid md:grid-cols-2 gap-4 mb-3">
                                        <div>
                                            <p class="text-sm text-gray-600">ì‹ ì²­ì</p>
                                            <p class="font-bold text-gray-900">\${req.user_name} (\${req.user_email})</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-600">ì‚¬ì—…ì²´ëª…</p>
                                            <p class="font-bold text-gray-900">\${req.business_name}</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-600">ë°œì‹ ë²ˆí˜¸</p>
                                            <p class="font-bold text-gray-900">\${req.phone_number}</p>
                                        </div>
                                        <div>
                                            <p class="text-sm text-gray-600">ì‚¬ì—…ìë²ˆí˜¸</p>
                                            <p class="font-bold text-gray-900">\${req.business_registration_number}</p>
                                        </div>
                                    </div>
                                    \${req.admin_note ? '<p class="text-sm text-gray-600 bg-gray-100 p-3 rounded">ê´€ë¦¬ì ë©”ëª¨: ' + req.admin_note + '</p>' : ''}
                                </div>
                                <div class="ml-6">
                                    <button onclick='openModal(\${JSON.stringify(req)})' 
                                            class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition font-medium">
                                        ìƒì„¸ë³´ê¸°
                                    </button>
                                </div>
                            </div>
                        </div>
                    \`
                }).join('')
            }

            // íŒŒì¼ ë Œë”ë§ í—¬í¼ í•¨ìˆ˜ (ì´ë¯¸ì§€ ë˜ëŠ” PDF)
            function renderFilePreview(url, title) {
                if (!url) {
                    return '<p class="text-gray-500 text-sm">íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤</p>'
                }
                
                // URLì—ì„œ íŒŒì¼ í™•ì¥ì í™•ì¸
                const isPdf = url.toLowerCase().endsWith('.pdf') || url.includes('application/pdf')
                
                if (isPdf) {
                    return \`
                        <div class="border border-gray-300 rounded-lg p-4 bg-gray-50">
                            <div class="flex items-center justify-center mb-3">
                                <svg class="w-16 h-16 text-red-500" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"/>
                                    <path d="M8 10a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"/>
                                </svg>
                            </div>
                            <p class="text-center text-sm font-medium text-gray-700 mb-3">PDF ë¬¸ì„œ</p>
                            <a href="\${url}" target="_blank" 
                               class="block w-full px-4 py-2 bg-red-600 text-white text-center rounded-lg hover:bg-red-700 transition">
                                ğŸ“„ PDF ì—´ê¸°
                            </a>
                        </div>
                        <p class="text-xs text-gray-500 mt-2 text-center">í´ë¦­í•˜ë©´ ìƒˆ íƒ­ì—ì„œ ì—´ë¦½ë‹ˆë‹¤</p>
                    \`
                } else {
                    return \`
                        <a href="\${url}" target="_blank" class="block">
                            <img src="\${url}" 
                                 class="w-full rounded-lg border border-gray-300 hover:border-purple-500 transition cursor-pointer"
                                 onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2YzZjRmNiIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjE2IiBmaWxsPSIjOTc5N2E3IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+7J2066+47KeAIOuhnOuTnCDsi6Ttjqg8L3RleHQ+PC9zdmc+'">
                        </a>
                        <p class="text-xs text-gray-500 mt-2 text-center">í´ë¦­í•˜ë©´ ìƒˆ íƒ­ì—ì„œ ì—´ë¦½ë‹ˆë‹¤</p>
                    \`
                }
            }

            function openModal(request) {
                currentRequest = request
                const modal = document.getElementById('detailModal')
                const content = document.getElementById('modalContent')

                const statusColor = request.status === 'pending' ? 'yellow' : request.status === 'approved' ? 'green' : 'red'
                const statusText = request.status === 'pending' ? 'ìŠ¹ì¸ ëŒ€ê¸°' : request.status === 'approved' ? 'ìŠ¹ì¸ ì™„ë£Œ' : 'ê±°ì ˆë¨'

                content.innerHTML = \`
                    <div class="space-y-6">
                        <!-- ìƒíƒœ -->
                        <div class="flex items-center justify-between p-4 bg-\${statusColor}-50 border border-\${statusColor}-200 rounded-lg">
                            <span class="text-\${statusColor}-700 font-bold">ìƒíƒœ: \${statusText}</span>
                            \${request.processed_date ? '<span class="text-sm text-' + statusColor + '-600">ì²˜ë¦¬ì¼: ' + new Date(request.processed_date).toLocaleString('ko-KR') + '</span>' : ''}
                        </div>

                        <!-- ì‹ ì²­ì ì •ë³´ -->
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h3 class="font-bold text-gray-900 mb-3">ì‹ ì²­ì ì •ë³´</h3>
                            <div class="grid md:grid-cols-2 gap-4 text-sm">
                                <div>
                                    <p class="text-gray-600">ì´ë¦„</p>
                                    <p class="font-medium">\${request.user_name}</p>
                                </div>
                                <div>
                                    <p class="text-gray-600">ì´ë©”ì¼</p>
                                    <p class="font-medium">\${request.user_email}</p>
                                </div>
                            </div>
                        </div>

                        <!-- ì‚¬ì—…ì ì •ë³´ -->
                        <div class="border border-gray-200 rounded-lg p-4">
                            <h3 class="font-bold text-gray-900 mb-3">ì‚¬ì—…ì ì •ë³´</h3>
                            <div class="grid md:grid-cols-2 gap-4 text-sm">
                                <div>
                                    <p class="text-gray-600">ì‚¬ì—…ì²´ëª…</p>
                                    <p class="font-medium">\${request.business_name}</p>
                                </div>
                                <div>
                                    <p class="text-gray-600">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸</p>
                                    <p class="font-medium">\${request.business_registration_number}</p>
                                </div>
                                <div class="md:col-span-2">
                                    <p class="text-gray-600">ë°œì‹ ë²ˆí˜¸</p>
                                    <p class="font-medium">\${request.phone_number}</p>
                                </div>
                            </div>
                        </div>

                        <!-- ì œì¶œ ì„œë¥˜ ì´ë¯¸ì§€ -->
                        <div class="space-y-4">
                            <!-- 1. ì‚¬ì—…ì ë“±ë¡ì¦ -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h3 class="font-bold text-gray-900 mb-3">ğŸ“„ 1. ì‚¬ì—…ì ë“±ë¡ì¦</h3>
                                \${renderFilePreview(request.business_registration_image, 'ì‚¬ì—…ì ë“±ë¡ì¦')}
                            </div>

                            <!-- 2. í†µì‹ ì‚¬ ê°€ì…ì¦ëª…ì› -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h3 class="font-bold text-gray-900 mb-3">ğŸ“„ 2. í†µì‹ ì‚¬ ê°€ì…ì¦ëª…ì›</h3>
                                \${renderFilePreview(request.certificate_image, 'í†µì‹ ì‚¬ ê°€ì…ì¦ëª…ì›')}
                            </div>

                            <!-- 3. ì¬ì§ì¦ëª…ì„œ -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h3 class="font-bold text-gray-900 mb-3">ğŸ“„ 3. ì¬ì§ì¦ëª…ì„œ (ë„ì¥ ë‚ ì¸)</h3>
                                \${renderFilePreview(request.employment_cert_image, 'ì¬ì§ì¦ëª…ì„œ')}
                            </div>

                            <!-- 4. ë¬¸ìë©”ì‹œì§€ ì´ìš©ê³„ì•½ì„œ -->
                            <div class="border border-gray-200 rounded-lg p-4">
                                <h3 class="font-bold text-gray-900 mb-3">ğŸ“„ 4. ë¬¸ìë©”ì‹œì§€ ì´ìš©ê³„ì•½ì„œ (ë„ì¥ ë‚ ì¸)</h3>
                                \${renderFilePreview(request.contract_image, 'ë¬¸ìë©”ì‹œì§€ ì´ìš©ê³„ì•½ì„œ')}
                            </div>
                        </div>

                        <!-- ê´€ë¦¬ì ë©”ëª¨ ì…ë ¥ -->
                        \${request.status === 'pending' ? \`
                            <div class="border border-gray-200 rounded-lg p-4">
                                <label class="block text-sm font-bold text-gray-700 mb-2">ê´€ë¦¬ì ë©”ëª¨ (ì„ íƒ)</label>
                                <textarea id="adminNote" rows="3" 
                                          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                          placeholder="ìŠ¹ì¸/ê±°ì ˆ ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                            </div>
                        \` : request.admin_note ? \`
                            <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                                <p class="text-sm font-bold text-gray-700 mb-2">ê´€ë¦¬ì ë©”ëª¨</p>
                                <p class="text-gray-900">\${request.admin_note}</p>
                            </div>
                        \` : ''}

                        <!-- ì•¡ì…˜ ë²„íŠ¼ -->
                        \${request.status === 'pending' ? \`
                            <div class="flex gap-4 pt-4">
                                <button onclick="processRequest('reject')" 
                                        class="flex-1 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-bold">
                                    âŒ ê±°ì ˆ
                                </button>
                                <button onclick="processRequest('approve')" 
                                        class="flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition font-bold">
                                    âœ… ìŠ¹ì¸
                                </button>
                            </div>
                        \` : ''}
                    </div>
                \`

                modal.classList.remove('hidden')
            }

            function closeModal() {
                document.getElementById('detailModal').classList.add('hidden')
                currentRequest = null
            }

            async function processRequest(action) {
                if (!currentRequest) return

                const adminNote = document.getElementById('adminNote')?.value || ''

                if (!confirm(\`ì •ë§ë¡œ ì´ ì‹ ì²­ì„ \${action === 'approve' ? 'ìŠ¹ì¸' : 'ê±°ì ˆ'}í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\`)) {
                    return
                }

                try {
                    const response = await fetch('/api/sms/sender/verification-process', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            requestId: currentRequest.id,
                            action,
                            adminNote,
                            adminId: user.id
                        })
                    })

                    const data = await response.json()

                    if (data.success) {
                        alert(data.message)
                        closeModal()
                        loadRequests()
                    } else {
                        alert(data.error || 'ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')
                    }
                } catch (err) {
                    console.error('Process error:', err)
                    alert('ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')
                }
            }

            // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
            document.getElementById('detailModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal()
                }
            })

            loadRequests()
        <\/script>
    </body>
    </html>
  `));d.get("/teachers/manage",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ì„ ìƒë‹˜ ê´€ë¦¬ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
        <nav class="bg-white shadow-sm border-b sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex items-center gap-8">
                        <h1 class="text-xl font-bold text-purple-600">
                            <i class="fas fa-chalkboard-teacher mr-2"></i>ì„ ìƒë‹˜ & ë°˜ ê´€ë¦¬
                        </h1>
                        <div class="flex gap-4">
                            <a href="/dashboard" class="text-gray-600 hover:text-purple-600">ëŒ€ì‹œë³´ë“œ</a>
                            <a href="/students" class="text-gray-600 hover:text-purple-600">í•™ìƒ ê´€ë¦¬</a>
                        </div>
                    </div>
                    <button onclick="logout()" class="text-gray-600 hover:text-red-600">
                        <i class="fas fa-sign-out-alt mr-2"></i>ë¡œê·¸ì•„ì›ƒ
                    </button>
                </div>
            </div>
        </nav>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- ìƒë‹¨ ìš”ì•½ -->
            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500 mb-1">ë“±ë¡ëœ ì„ ìƒë‹˜</p>
                            <p id="teacherCount" class="text-3xl font-bold text-purple-600">0ëª…</p>
                        </div>
                        <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                            <i class="fas fa-user-tie text-purple-600 text-2xl"></i>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-500 mb-1">ìš´ì˜ ì¤‘ì¸ ë°˜</p>
                            <p id="classCount" class="text-3xl font-bold text-blue-600">0ê°œ</p>
                        </div>
                        <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                            <i class="fas fa-chalkboard text-blue-600 text-2xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ì„ ìƒë‹˜ ëª©ë¡ ì„¹ì…˜ -->
            <div class="mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">
                        <i class="fas fa-user-tie text-purple-600 mr-2"></i>ì„ ìƒë‹˜ ëª©ë¡
                    </h2>
                    <button onclick="openCreateTeacherModal()" class="px-4 py-2 gradient-purple text-white rounded-lg hover:opacity-90 transition">
                        <i class="fas fa-plus mr-2"></i>ì„ ìƒë‹˜ ì¶”ê°€
                    </button>
                </div>
                <div id="teacherList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- ì„ ìƒë‹˜ ì¹´ë“œê°€ ì—¬ê¸°ì— ë Œë”ë§ë©ë‹ˆë‹¤ -->
                    <div class="col-span-full text-center py-12 text-gray-500">
                        <i class="fas fa-spinner fa-spin text-4xl mb-4"></i>
                        <p>ë¡œë”© ì¤‘...</p>
                    </div>
                </div>
            </div>

            <!-- ë°˜ ëª©ë¡ ì„¹ì…˜ -->
            <div>
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">
                        <i class="fas fa-chalkboard text-blue-600 mr-2"></i>ë°˜ ëª©ë¡
                    </h2>
                    <button onclick="openCreateClassModal()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                        <i class="fas fa-plus mr-2"></i>ë°˜ ìƒì„±
                    </button>
                </div>
                <div id="classList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- ë°˜ ì¹´ë“œê°€ ì—¬ê¸°ì— ë Œë”ë§ë©ë‹ˆë‹¤ -->
                    <div class="col-span-full text-center py-12 text-gray-500">
                        <i class="fas fa-spinner fa-spin text-4xl mb-4"></i>
                        <p>ë¡œë”© ì¤‘...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì„ ìƒë‹˜ ìƒì„± ëª¨ë‹¬ -->
        <div id="createTeacherModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-900">ì„ ìƒë‹˜ ê³„ì • ìƒì„±</h3>
                    <button onclick="closeCreateTeacherModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
                
                <form id="createTeacherForm" onsubmit="createTeacher(event)">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ì´ë¦„ *</label>
                            <input type="text" name="name" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ì´ë©”ì¼ *</label>
                            <input type="email" name="email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ë¹„ë°€ë²ˆí˜¸ *</label>
                            <input type="password" name="password" required minlength="6" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ë¹„ë°€ë²ˆí˜¸ í™•ì¸ *</label>
                            <input type="password" name="confirmPassword" required minlength="6" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ì „í™”ë²ˆí˜¸</label>
                            <input type="tel" name="phone" placeholder="010-1234-5678" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                    </div>
                    
                    <div class="flex gap-3 mt-6">
                        <button type="button" onclick="closeCreateTeacherModal()" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                            ì·¨ì†Œ
                        </button>
                        <button type="submit" class="flex-1 px-4 py-2 gradient-purple text-white rounded-lg hover:opacity-90">
                            ìƒì„±
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- ë°˜ ìƒì„± ëª¨ë‹¬ -->
        <div id="createClassModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-900">ë°˜ ìƒì„±</h3>
                    <button onclick="closeCreateClassModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
                
                <form id="createClassForm" onsubmit="createClass(event)">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ë°˜ ì´ë¦„ *</label>
                            <input type="text" name="className" required placeholder="ì˜ˆ: ì´ˆë“± 1ë°˜" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ì„¤ëª…</label>
                            <textarea name="description" rows="2" placeholder="ë°˜ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">í•™ë…„ ìˆ˜ì¤€</label>
                            <select name="gradeLevel" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="ì´ˆë“±">ì´ˆë“±</option>
                                <option value="ì¤‘ë“±">ì¤‘ë“±</option>
                                <option value="ê³ ë“±">ê³ ë“±</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ê³¼ëª©</label>
                            <input type="text" name="subject" placeholder="ì˜ˆ: ìˆ˜í•™, ì˜ì–´, ì „ê³¼ëª©" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ìµœëŒ€ í•™ìƒ ìˆ˜</label>
                            <input type="number" name="maxStudents" value="20" min="1" max="50" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                    
                    <div class="flex gap-3 mt-6">
                        <button type="button" onclick="closeCreateClassModal()" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                            ì·¨ì†Œ
                        </button>
                        <button type="submit" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                            ìƒì„±
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <script src="/static/teacher-management.js"><\/script>
    </body>
    </html>
  `));d.get("/academy-management",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í•™ì› ê´€ë¦¬ - ìŠˆí¼í”Œë ˆì´ìŠ¤</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
        <nav class="bg-white shadow-sm border-b sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex items-center gap-8">
                        <h1 class="text-xl font-bold text-purple-600">
                            <i class="fas fa-school mr-2"></i>í•™ì› ê´€ë¦¬
                        </h1>
                        <a href="/" class="text-gray-600 hover:text-purple-600">í™ˆìœ¼ë¡œ</a>
                    </div>
                    <button onclick="logout()" class="text-gray-600 hover:text-red-600">
                        <i class="fas fa-sign-out-alt mr-2"></i>ë¡œê·¸ì•„ì›ƒ
                    </button>
                </div>
            </div>
        </nav>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- ë‚´ í•™ì› ëª©ë¡ -->
            <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">
                        <i class="fas fa-building text-purple-600 mr-2"></i>ë‚´ í•™ì›
                    </h2>
                    <button onclick="openAddAcademyModal()" class="px-4 py-2 gradient-purple text-white rounded-lg hover:opacity-90">
                        <i class="fas fa-plus mr-2"></i>í•™ì› ì¶”ê°€
                    </button>
                </div>
                <div id="academyList" class="space-y-4">
                    <div class="text-center text-gray-500 py-8">ë¡œë”© ì¤‘...</div>
                </div>
            </div>
        </div>

        <!-- í•™ì› ì¶”ê°€ ëª¨ë‹¬ -->
        <div id="addAcademyModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-2xl max-w-md w-full p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-900">í•™ì› ì¶”ê°€í•˜ê¸°</h3>
                    <button onclick="closeAddAcademyModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>
                
                <form id="addAcademyForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-900 mb-2">í•™ì›ëª… <span class="text-red-500">*</span></label>
                        <input type="text" name="academy_name" required class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500" placeholder="ê¾¸ë©”ë•…í•™ì› ë¶„ë‹¹ì ">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-900 mb-2">í•™ì› ì£¼ì†Œ <span class="text-red-500">*</span></label>
                        <input type="text" name="academy_address" required class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500" placeholder="ì¸ì²œ ì„œêµ¬ ê²€ë‹¨ë™">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-900 mb-2">ì›ì¥ë‹˜ ì´ë¦„ <span class="text-red-500">*</span></label>
                        <input type="text" name="director_name" required class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500" placeholder="í™ê¸¸ë™">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-900 mb-2">ì›ì¥ë‹˜ ì—°ë½ì²˜ <span class="text-red-500">*</span></label>
                        <input type="tel" name="director_phone" required class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500" placeholder="010-0000-0000">
                    </div>
                    
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <p class="text-sm text-yellow-800">
                            <i class="fas fa-info-circle mr-2"></i>
                            ê´€ë¦¬ì ìŠ¹ì¸ í›„ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤
                        </p>
                    </div>
                    
                    <button type="submit" class="w-full gradient-purple text-white py-3 rounded-lg font-medium hover:opacity-90">
                        <i class="fas fa-paper-plane mr-2"></i>ì‹ ì²­í•˜ê¸°
                    </button>
                </form>
            </div>
        </div>

        <script>
            let currentUser = null;
            
            // ë¡œê·¸ì¸ í™•ì¸
            const userStr = localStorage.getItem('user');
            if (!userStr) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                location.href = '/login';
            } else {
                currentUser = JSON.parse(userStr);
                if (currentUser.user_type !== 'teacher') {
                    alert('ì„ ìƒë‹˜ ê³„ì •ë§Œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                    location.href = '/';
                }
                loadMyAcademies();
            }
            
            async function loadMyAcademies() {
                try {
                    const res = await fetch('/api/teacher/academies?teacherId=' + currentUser.id);
                    const data = await res.json();
                    const container = document.getElementById('academyList');
                    
                    if (!data.success || data.academies.length === 0) {
                        container.innerHTML = \`
                            <div class="text-center py-12">
                                <i class="fas fa-school text-6xl text-gray-300 mb-4"></i>
                                <p class="text-gray-600 mb-4">ë“±ë¡ëœ í•™ì›ì´ ì—†ìŠµë‹ˆë‹¤</p>
                                <button onclick="openAddAcademyModal()" class="px-6 py-3 gradient-purple text-white rounded-lg hover:opacity-90">
                                    <i class="fas fa-plus mr-2"></i>ì²« í•™ì› ì¶”ê°€í•˜ê¸°
                                </button>
                            </div>
                        \`;
                        return;
                    }
                    
                    container.innerHTML = data.academies.map(academy => \`
                        <div class="border rounded-xl p-6 hover:shadow-lg transition">
                            <div class="flex items-start justify-between">
                                <div>
                                    <h3 class="text-lg font-bold text-gray-900 mb-2">\${academy.academy_name}</h3>
                                    <p class="text-sm text-gray-600 mb-1"><i class="fas fa-map-marker-alt mr-2"></i>\${academy.academy_address}</p>
                                    <p class="text-sm text-gray-600 mb-1"><i class="fas fa-user mr-2"></i>ì›ì¥: \${academy.director_name}</p>
                                    <p class="text-sm text-gray-600"><i class="fas fa-phone mr-2"></i>\${academy.director_phone}</p>
                                </div>
                                <div>
                                    \${academy.status === 'pending' ? 
                                        '<span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium">ìŠ¹ì¸ ëŒ€ê¸°</span>' :
                                      academy.status === 'approved' ?
                                        '<span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium">ìŠ¹ì¸ ì™„ë£Œ</span>' :
                                        '<span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium">ê±°ì ˆë¨</span>'
                                    }
                                </div>
                            </div>
                        </div>
                    \`).join('');
                } catch (error) {
                    console.error('Load academies error:', error);
                }
            }
            
            function openAddAcademyModal() {
                document.getElementById('addAcademyModal').classList.remove('hidden');
            }
            
            function closeAddAcademyModal() {
                document.getElementById('addAcademyModal').classList.add('hidden');
            }
            
            document.getElementById('addAcademyForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                const formData = new FormData(e.target);
                const data = {
                    teacher_id: currentUser.id,
                    academy_name: formData.get('academy_name'),
                    academy_address: formData.get('academy_address'),
                    director_name: formData.get('director_name'),
                    director_phone: formData.get('director_phone')
                };
                
                try {
                    const res = await fetch('/api/teacher/academy/add', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                    const result = await res.json();
                    
                    if (result.success) {
                        alert('í•™ì› ì¶”ê°€ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê´€ë¦¬ì ìŠ¹ì¸ì„ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.');
                        closeAddAcademyModal();
                        e.target.reset();
                        loadMyAcademies();
                    } else {
                        alert(result.error || 'í•™ì› ì¶”ê°€ ì‹¤íŒ¨');
                    }
                } catch (error) {
                    console.error('Add academy error:', error);
                    alert('í•™ì› ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            });
            
            function logout() {
                if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    localStorage.removeItem('user');
                    location.href = '/';
                }
            }
        <\/script>
    </body>
    </html>
  `));d.get("/students",e=>e.html(`
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>í•™ìƒ ê´€ë¦¬ - ê¾¸ë©”ë•…í•™ì›</title>
        <script src="https://cdn.tailwindcss.com"><\/script>
        <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet">
        <style>
            .gradient-purple { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            .gradient-blue { background: linear-gradient(135deg, #667eea 0%, #4facfe 100%); }
            .gradient-green { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
            .gradient-orange { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        </style>
    </head>
    <body class="bg-gray-50">
        <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
        <nav class="bg-white shadow-sm border-b">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex items-center">
                        <h1 class="text-xl font-bold text-gray-900">ğŸ‘¨â€ğŸ“ í•™ìƒ ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <a href="/" class="text-gray-600 hover:text-gray-900">
                            <i class="fas fa-home mr-2"></i>í™ˆ
                        </a>
                        <a href="/sms/compose" class="text-gray-600 hover:text-gray-900">
                            <i class="fas fa-sms mr-2"></i>ë¬¸ì
                        </a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- ëŒ€ì‹œë³´ë“œ ì¹´ë“œ ê·¸ë¦¬ë“œ -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                <!-- ì„ ìƒë‹˜ ê´€ë¦¬ (ì›ì¥ë‹˜ ì „ìš©) -->
                <div id="teacherManagementCard" class="bg-white rounded-xl shadow-lg hover:shadow-xl transition cursor-pointer" onclick="toggleTeacherSection()">
                    <div class="bg-gradient-to-br from-purple-500 to-indigo-600 text-white p-6 rounded-t-xl">
                        <i class="fas fa-chalkboard-teacher text-4xl mb-3"></i>
                        <h3 class="text-xl font-bold">ì„ ìƒë‹˜ ê´€ë¦¬</h3>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-600 mb-4">ì„ ìƒë‹˜ ë“±ë¡, ë°˜ ë°°ì •, ìŠ¹ì¸ ê´€ë¦¬</p>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-500">ë“±ë¡ <span id="totalTeachers" class="font-bold text-purple-600">0</span>ëª…</span>
                            <i class="fas fa-chevron-down text-purple-600" id="teacherSectionIcon"></i>
                        </div>
                    </div>
                </div>

                <!-- ë°˜ ê´€ë¦¬ -->
                <a href="/students/classes" class="block bg-white rounded-xl shadow-lg hover:shadow-xl transition transform hover:-translate-y-1">
                    <div class="gradient-purple text-white p-6 rounded-t-xl">
                        <i class="fas fa-chalkboard text-4xl mb-3"></i>
                        <h3 class="text-xl font-bold">ë°˜ ê´€ë¦¬</h3>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-600 mb-4">ë°˜ ìƒì„±, í•™ìƒ ë°°ì •, ë°˜ë³„ ê´€ë¦¬</p>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-500">ì „ì²´ <span id="totalClasses" class="font-bold text-purple-600">0</span>ê°œ ë°˜</span>
                            <i class="fas fa-arrow-right text-purple-600"></i>
                        </div>
                    </div>
                </a>

                <!-- í•™ìƒ ëª©ë¡ -->
                <a href="/students/list" class="block bg-white rounded-xl shadow-lg hover:shadow-xl transition transform hover:-translate-y-1">
                    <div class="gradient-blue text-white p-6 rounded-t-xl">
                        <i class="fas fa-users text-4xl mb-3"></i>
                        <h3 class="text-xl font-bold">í•™ìƒ ëª©ë¡</h3>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-600 mb-4">í•™ìƒ ë“±ë¡, ì •ë³´ ìˆ˜ì •, í•™ë¶€ëª¨ ì—°ë½ì²˜</p>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-500">ì „ì²´ <span id="totalStudents" class="font-bold text-blue-600">0</span>ëª…</span>
                            <i class="fas fa-arrow-right text-blue-600"></i>
                        </div>
                    </div>
                </a>

                <!-- ê³¼ëª© ê´€ë¦¬ -->
                <a href="/students/courses" class="block bg-white rounded-xl shadow-lg hover:shadow-xl transition transform hover:-translate-y-1">
                    <div class="gradient-green text-white p-6 rounded-t-xl">
                        <i class="fas fa-book text-4xl mb-3"></i>
                        <h3 class="text-xl font-bold">ê³¼ëª© ê´€ë¦¬</h3>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-600 mb-4">ê³¼ëª© ë“±ë¡, ìˆ˜ê°• ê´€ë¦¬</p>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-500">ì „ì²´ <span id="totalCourses" class="font-bold text-green-600">0</span>ê°œ ê³¼ëª©</span>
                            <i class="fas fa-arrow-right text-green-600"></i>
                        </div>
                    </div>
                </a>

                <!-- ì¼ì¼ ì„±ê³¼ ê¸°ë¡ -->
                <a href="/students/daily-record" class="block bg-white rounded-xl shadow-lg hover:shadow-xl transition transform hover:-translate-y-1">
                    <div class="gradient-orange text-white p-6 rounded-t-xl">
                        <i class="fas fa-calendar-check text-4xl mb-3"></i>
                        <h3 class="text-xl font-bold">ì¼ì¼ ì„±ê³¼</h3>
                    </div>
                    <div class="p-6">
                        <p class="text-gray-600 mb-4">ì¶œì„, ê³¼ì œ, ìˆ˜ì—… ì´í•´ë„ ê¸°ë¡</p>
                        <div class="flex items-center justify-between">
                            <span class="text-sm text-gray-500">ì˜¤ëŠ˜ <span id="todayRecords" class="font-bold text-pink-600">0</span>ê±´</span>
                            <i class="fas fa-arrow-right text-pink-600"></i>
                        </div>
                    </div>
                </a>
            </div>

            <!-- ì„ ìƒë‹˜ ê´€ë¦¬ ì„¹ì…˜ -->
            <div id="teacherSection" class="hidden mb-8 space-y-6">
                <!-- ì¸ì¦ ì½”ë“œ -->
                <div class="bg-purple-50 border-2 border-purple-200 rounded-xl p-6">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">
                        <i class="fas fa-key text-purple-600 mr-2"></i>í•™ì› ì¸ì¦ ì½”ë“œ
                    </h3>
                    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
                        <div>
                            <p class="text-sm text-gray-600 mb-2">ì„ ìƒë‹˜ì—ê²Œ ì´ ì½”ë“œë¥¼ ì „ë‹¬í•˜ì„¸ìš”</p>
                            <span id="verificationCode" class="text-3xl font-mono font-bold text-purple-600 block mb-2">------</span>
                            <a href="/signup?teacher=true" target="_blank" class="text-sm text-purple-600 hover:underline">
                                <i class="fas fa-external-link-alt mr-1"></i>ì„ ìƒë‹˜ ë“±ë¡ í˜ì´ì§€ë¡œ ì´ë™
                            </a>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="copyVerificationCode()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 whitespace-nowrap">
                                <i class="fas fa-copy mr-2"></i>ë³µì‚¬
                            </button>
                            <button onclick="regenerateVerificationCode()" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 whitespace-nowrap">
                                <i class="fas fa-sync-alt mr-2"></i>ì¬ìƒì„±
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ìŠ¹ì¸ ëŒ€ê¸° -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-bold text-gray-900">
                            <i class="fas fa-clock text-yellow-600 mr-2"></i>ìŠ¹ì¸ ëŒ€ê¸° ì¤‘
                        </h3>
                        <span id="pendingBadge" class="px-3 py-1 bg-yellow-500 text-white rounded-full text-sm font-bold">0</span>
                    </div>
                    <div id="pendingApplications" class="space-y-4">
                        <div class="text-center text-gray-500 py-4">ë¡œë”© ì¤‘...</div>
                    </div>
                </div>

                <!-- ë“±ë¡ëœ ì„ ìƒë‹˜ -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-bold text-gray-900">
                            <i class="fas fa-users text-green-600 mr-2"></i>ë“±ë¡ëœ ì„ ìƒë‹˜
                        </h3>
                        <button onclick="openAddTeacherModal()" class="px-6 py-3 gradient-purple text-white rounded-lg hover:opacity-90 font-semibold shadow-lg">
                            <i class="fas fa-user-plus mr-2"></i>ì„ ìƒë‹˜ ì¶”ê°€
                        </button>
                    </div>
                    <div id="teachersList" class="space-y-4">
                        <div class="text-center text-gray-500 py-4">ë¡œë”© ì¤‘...</div>
                    </div>
                </div>
            </div>

            <!-- ì„ ìƒë‹˜ ì¶”ê°€ ëª¨ë‹¬ -->
            <div id="addTeacherModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
                <div class="bg-white rounded-2xl max-w-md w-full p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-900">
                            <i class="fas fa-user-plus text-purple-600 mr-2"></i>ì„ ìƒë‹˜ ì¶”ê°€
                        </h3>
                        <button onclick="closeAddTeacherModal()" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times text-2xl"></i>
                        </button>
                    </div>
                    
                    <form id="addTeacherForm" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">
                                ì´ë¦„ <span class="text-red-500">*</span>
                            </label>
                            <input type="text" name="name" required class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500" placeholder="ê¹€ì„ ìƒ">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">
                                ì´ë©”ì¼ (íšŒì› ì•„ì´ë””) <span class="text-red-500">*</span>
                            </label>
                            <input type="email" name="email" required class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500" placeholder="teacher@example.com">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">
                                ì—°ë½ì²˜ <span class="text-red-500">*</span>
                            </label>
                            <input type="tel" name="phone" required class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500" placeholder="010-0000-0000">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">
                                ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ <span class="text-red-500">*</span>
                            </label>
                            <input type="password" name="password" required minlength="6" class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500" placeholder="ìµœì†Œ 6ì">
                            <p class="text-xs text-gray-500 mt-1">ì„ ìƒë‹˜ì´ ë¡œê·¸ì¸ í›„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-900 mb-2">
                                ë‹´ë‹¹ ë°˜ ë°°ì • (ì„ íƒ)
                            </label>
                            <select name="class_id" class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500">
                                <option value="">ë‚˜ì¤‘ì— ë°°ì •</option>
                                <!-- ë°˜ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                            </select>
                        </div>
                        
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <p class="text-sm text-blue-800">
                                <i class="fas fa-info-circle mr-2"></i>
                                ì„ ìƒë‹˜ ê³„ì •ì´ ìë™ìœ¼ë¡œ ìƒì„±ë˜ë©°, ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            </p>
                        </div>
                        
                        <button type="submit" class="w-full gradient-purple text-white py-3 rounded-lg font-medium hover:opacity-90">
                            <i class="fas fa-check mr-2"></i>ì„ ìƒë‹˜ ì¶”ê°€í•˜ê¸°
                        </button>
                    </form>
                </div>
            </div>

            <!-- ìµœê·¼ í™œë™ -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-bold text-gray-900 mb-6">ğŸ“Š ìµœê·¼ í™œë™</h2>
                <div id="recentActivity" class="space-y-4">
                    <div class="text-center text-gray-500 py-8">ë°ì´í„° ë¡œë”© ì¤‘...</div>
                </div>
            </div>
        </div>

        <script>
            const academyId = 1; // í˜„ì¬ í•™ì› ID
            
            // ë¡œê·¸ì¸ ì‚¬ìš©ì ì •ë³´ í™•ì¸
            const userStr = localStorage.getItem('user');
            let currentUser = null;
            if (userStr) {
                currentUser = JSON.parse(userStr);
                // ì„ ìƒë‹˜ ê´€ë¦¬ ì¹´ë“œëŠ” í•­ìƒ í‘œì‹œ
            }

            async function loadDashboard() {
                try {
                    // ì„ ìƒë‹˜ ìˆ˜ (ì›ì¥ë‹˜ë§Œ)
                    if (currentUser && currentUser.user_type !== 'teacher') {
                        const teachersRes = await fetch('/api/teachers/list?directorId=' + currentUser.id);
                        const teachersData = await teachersRes.json();
                        if (teachersData.success) {
                            document.getElementById('totalTeachers').textContent = teachersData.teachers.length;
                        }
                    }
                
                    // ë°˜ ê°œìˆ˜
                    const classesRes = await fetch('/api/classes?academyId=' + academyId);
                    const classesData = await classesRes.json();
                    if (classesData.success) {
                        document.getElementById('totalClasses').textContent = classesData.classes.length;
                    }

                    // í•™ìƒ ìˆ˜
                    const studentsRes = await fetch('/api/students?academyId=' + academyId);
                    const studentsData = await studentsRes.json();
                    if (studentsData.success) {
                        document.getElementById('totalStudents').textContent = studentsData.students.length;
                    }

                    // ê³¼ëª© ìˆ˜
                    const coursesRes = await fetch('/api/courses?academyId=' + academyId);
                    const coursesData = await coursesRes.json();
                    if (coursesData.success) {
                        document.getElementById('totalCourses').textContent = coursesData.courses.length;
                    }

                    // ì˜¤ëŠ˜ ê¸°ë¡ ìˆ˜
                    const today = new Date().toISOString().split('T')[0];
                    const recordsRes = await fetch('/api/daily-records?date=' + today);
                    const recordsData = await recordsRes.json();
                    if (recordsData.success) {
                        document.getElementById('todayRecords').textContent = recordsData.records.length;
                    }

                    // ìµœê·¼ í™œë™ í‘œì‹œ
                    showRecentActivity(studentsData.students.slice(0, 5));
                } catch (error) {
                    console.error('ëŒ€ì‹œë³´ë“œ ë¡œë”© ì‹¤íŒ¨:', error);
                }
            }

            function showRecentActivity(students) {
                const container = document.getElementById('recentActivity');
                if (students.length === 0) {
                    container.innerHTML = '<div class="text-center text-gray-500 py-8">ìµœê·¼ í™œë™ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                    return;
                }

                container.innerHTML = students.map(student => \`
                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100">
                        <div class="flex items-center space-x-4">
                            <div class="bg-purple-100 text-purple-600 rounded-full w-10 h-10 flex items-center justify-center font-bold">
                                \${student.name.charAt(0)}
                            </div>
                            <div>
                                <p class="font-semibold text-gray-900">\${student.name}</p>
                                <p class="text-sm text-gray-500">\${student.class_name || 'ë°˜ ë¯¸ë°°ì •'} Â· \${student.grade}</p>
                            </div>
                        </div>
                        <a href="/students/detail/\${student.id}" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
                            ìƒì„¸ë³´ê¸°
                        </a>
                    </div>
                \`).join('');
            }

            // ì„ ìƒë‹˜ ê´€ë¦¬ ì„¹ì…˜ í† ê¸€
            function toggleTeacherSection() {
                const section = document.getElementById('teacherSection');
                const icon = document.getElementById('teacherSectionIcon');
                
                if (section.classList.contains('hidden')) {
                    section.classList.remove('hidden');
                    icon.classList.remove('fa-chevron-down');
                    icon.classList.add('fa-chevron-up');
                    loadTeacherData();
                } else {
                    section.classList.add('hidden');
                    icon.classList.remove('fa-chevron-up');
                    icon.classList.add('fa-chevron-down');
                }
            }

            function loadTeacherData() {
                if (!currentUser) return;
                loadVerificationCode();
                loadTeachersList();
                loadPendingApplications();
            }

            async function loadVerificationCode() {
                try {
                    console.log('[Frontend] Loading verification code for user:', currentUser);
                    
                    const res = await fetch('/api/teachers/verification-code?directorId=' + currentUser.id);
                    const data = await res.json();
                    console.log('[Frontend] Verification code response:', data);
                    
                    if (data.success) {
                        // code ìš°ì„ , ê·¸ ë‹¤ìŒ codeData.code, ë§ˆì§€ë§‰ìœ¼ë¡œ codeData.verification_code
                        const code = data.code || (data.codeData && (data.codeData.code || data.codeData.verification_code)) || '------';
                        console.log('[Frontend] Setting code to:', code);
                        
                        const codeElement = document.getElementById('verificationCode');
                        if (codeElement) {
                            codeElement.textContent = code;
                            // ì½”ë“œê°€ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ í‘œì‹œ
                            if (code === '------' || code === 'ì˜¤ë¥˜' || code === 'ERROR') {
                                codeElement.classList.add('text-red-600');
                                codeElement.classList.remove('text-purple-600');
                            } else {
                                codeElement.classList.add('text-purple-600');
                                codeElement.classList.remove('text-red-600');
                            }
                        }
                    } else {
                        console.error('[Frontend] ì¸ì¦ ì½”ë“œ ë¡œë”© ì‹¤íŒ¨:', data.error, data.details);
                        const codeElement = document.getElementById('verificationCode');
                        if (codeElement) {
                            codeElement.textContent = 'ì˜¤ë¥˜';
                            codeElement.classList.add('text-red-600');
                            codeElement.classList.remove('text-purple-600');
                        }
                        alert('ì¸ì¦ ì½”ë“œ ë¡œë”© ì‹¤íŒ¨: ' + data.error);
                    }
                } catch (error) {
                    console.error('[Frontend] ì¸ì¦ ì½”ë“œ ë¡œë”© ì‹¤íŒ¨:', error);
                    const codeElement = document.getElementById('verificationCode');
                    if (codeElement) {
                        codeElement.textContent = 'ì˜¤ë¥˜';
                        codeElement.classList.add('text-red-600');
                        codeElement.classList.remove('text-purple-600');
                    }
                }
            }

            async function regenerateVerificationCode() {
                if (!confirm('ì¸ì¦ ì½”ë“œë¥¼ ì¬ìƒì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\\n\\nâš ï¸ ì´ì „ ì½”ë“œëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.')) return;
                try {
                    console.log('[Frontend] Regenerating code for user:', currentUser);
                    
                    const res = await fetch('/api/teachers/verification-code/regenerate', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ directorId: currentUser.id })
                    });
                    const data = await res.json();
                    console.log('[Frontend] Regenerate response:', data);
                    
                    if (data.success) {
                        // code ìš°ì„ , ê·¸ ë‹¤ìŒ codeData.code, ë§ˆì§€ë§‰ìœ¼ë¡œ codeData.verification_code
                        const newCode = data.code || (data.codeData && (data.codeData.code || data.codeData.verification_code));
                        console.log('[Frontend] New code:', newCode);
                        
                        const codeElement = document.getElementById('verificationCode');
                        if (codeElement) {
                            codeElement.textContent = newCode;
                            codeElement.classList.add('text-purple-600');
                            codeElement.classList.remove('text-red-600');
                        }
                        alert('âœ… ì¸ì¦ ì½”ë“œê°€ ì¬ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!\\n\\nìƒˆ ì½”ë“œ: ' + newCode);
                    } else {
                        console.error('[Frontend] ì¬ìƒì„± ì‹¤íŒ¨:', data);
                        alert('âŒ ì½”ë“œ ì¬ìƒì„± ì‹¤íŒ¨: ' + (data.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'));
                        console.error('ì¬ìƒì„± ì‹¤íŒ¨ ìƒì„¸:', data);
                    }
                } catch (error) {
                    console.error('ì½”ë“œ ì¬ìƒì„± ì‹¤íŒ¨:', error);
                    alert('ì½”ë“œ ì¬ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            }

            function copyVerificationCode() {
                const code = document.getElementById('verificationCode').textContent;
                navigator.clipboard.writeText(code).then(() => {
                    alert('ì¸ì¦ ì½”ë“œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤: ' + code);
                });
            }

            function copyRegisterLink() {
                const link = 'https://superplace-academy.pages.dev/signup?teacher=true';
                navigator.clipboard.writeText(link).then(() => {
                    alert('ë“±ë¡ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                });
            }

            async function loadTeachersList() {
                try {
                    const res = await fetch('/api/teachers/list?directorId=' + currentUser.id);
                    const data = await res.json();
                    const container = document.getElementById('teachersList');
                    
                    if (!data.success || data.teachers.length === 0) {
                        container.innerHTML = '<div class="text-center text-gray-500 py-8">ë“±ë¡ëœ ì„ ìƒë‹˜ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                        return;
                    }

                    container.innerHTML = data.teachers.map(teacher => \`
                        <div class="bg-white border rounded-xl p-6 hover:shadow-lg transition">
                            <div class="flex items-start justify-between">
                                <div class="flex items-center gap-4">
                                    <div class="w-14 h-14 bg-purple-100 rounded-full flex items-center justify-center">
                                        <i class="fas fa-user-tie text-purple-600 text-2xl"></i>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-bold text-gray-900">\${teacher.name}</h3>
                                        <p class="text-sm text-gray-600">\${teacher.email}</p>
                                        <p class="text-sm text-gray-500">\${teacher.phone || '-'}</p>
                                        <span class="inline-block mt-2 px-3 py-1 bg-purple-100 text-purple-600 rounded-full text-xs font-medium">
                                            ë‹´ë‹¹ ë°˜: \${teacher.class_count || 0}ê°œ
                                        </span>
                                    </div>
                                </div>
                                <button onclick="showTeacherPermissions(\${teacher.id}, '\${teacher.name}')" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                                    <i class="fas fa-cog mr-2"></i>ê¶Œí•œ ì„¤ì •
                                </button>
                            </div>
                        </div>
                    \`).join('');
                } catch (error) {
                    console.error('ì„ ìƒë‹˜ ëª©ë¡ ë¡œë”© ì‹¤íŒ¨:', error);
                }
            }

            async function loadPendingApplications() {
                try {
                    const res = await fetch('/api/teachers/applications?directorId=' + currentUser.id + '&status=pending');
                    const data = await res.json();
                    const container = document.getElementById('pendingList');
                    const countBadge = document.getElementById('pendingCount');
                    
                    if (!data.success || data.applications.length === 0) {
                        container.innerHTML = '<div class="text-center text-gray-500 py-8">ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ ì‹ ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                        countBadge.textContent = '0';
                        return;
                    }

                    countBadge.textContent = data.applications.length;
                    container.innerHTML = data.applications.map(app => \`
                        <div class="bg-yellow-50 border-2 border-yellow-200 rounded-xl p-6">
                            <div class="flex items-start justify-between mb-4">
                                <div>
                                    <h3 class="text-lg font-bold text-gray-900">\${app.name}</h3>
                                    <p class="text-sm text-gray-600">\${app.email}</p>
                                    <p class="text-sm text-gray-500">\${app.phone || '-'}</p>
                                    <p class="text-xs text-gray-400 mt-2">ì‹ ì²­ì¼: \${new Date(app.applied_at).toLocaleString('ko-KR')}</p>
                                </div>
                                <span class="px-3 py-1 bg-yellow-500 text-white rounded-full text-xs font-medium">
                                    ëŒ€ê¸°ì¤‘
                                </span>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="approveApplication(\${app.id}, '\${app.name}')" class="flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                                    <i class="fas fa-check mr-2"></i>ìŠ¹ì¸
                                </button>
                                <button onclick="rejectApplication(\${app.id}, '\${app.name}')" class="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                                    <i class="fas fa-times mr-2"></i>ê±°ì ˆ
                                </button>
                            </div>
                        </div>
                    \`).join('');
                } catch (error) {
                    console.error('ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡ ë¡œë”© ì‹¤íŒ¨:', error);
                }
            }

            async function approveApplication(id, name) {
                if (!confirm(\`\${name} ì„ ìƒë‹˜ì˜ ì‹ ì²­ì„ ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\`)) return;
                try {
                    const res = await fetch(\`/api/teachers/applications/\${id}/approve\`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ directorId: currentUser.id })
                    });
                    const data = await res.json();
                    if (data.success) {
                        alert(\`\${name} ì„ ìƒë‹˜ì´ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤!\`);
                        loadPendingApplications();
                        loadTeachersList();
                        loadDashboard();
                    } else {
                        alert('ìŠ¹ì¸ ì‹¤íŒ¨: ' + data.error);
                    }
                } catch (error) {
                    console.error('ìŠ¹ì¸ ì‹¤íŒ¨:', error);
                    alert('ìŠ¹ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            async function rejectApplication(id, name) {
                if (!confirm(\`\${name} ì„ ìƒë‹˜ì˜ ì‹ ì²­ì„ ê±°ì ˆí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\`)) return;
                const reason = prompt('ê±°ì ˆ ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì„ íƒì‚¬í•­):');
                try {
                    const res = await fetch(\`/api/teachers/applications/\${id}/reject\`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ 
                            directorId: currentUser.id,
                            reason: reason || 'ìŠ¹ì¸ ê±°ë¶€'
                        })
                    });
                    const data = await res.json();
                    if (data.success) {
                        alert(\`\${name} ì„ ìƒë‹˜ì˜ ì‹ ì²­ì´ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤.\`);
                        loadPendingApplications();
                    } else {
                        alert('ê±°ì ˆ ì‹¤íŒ¨: ' + data.error);
                    }
                } catch (error) {
                    console.error('ê±°ì ˆ ì‹¤íŒ¨:', error);
                    alert('ê±°ì ˆ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            }

            function showTeacherPermissions(teacherId, teacherName) {
                alert(\`\${teacherName} ì„ ìƒë‹˜ì˜ ê¶Œí•œ ì„¤ì • ê¸°ëŠ¥ì€ ì¶”í›„ ì¶”ê°€ë©ë‹ˆë‹¤.\`);
            }

            loadDashboard();
        <\/script>
    </body>
    </html>
  `));d.get("/students/classes",e=>e.html(je.classesPage));d.get("/students/list",e=>e.html(je.studentsListPage));d.get("/students/daily-record",e=>e.html(je.dailyRecordPage));d.get("/students/courses",e=>e.html(je.coursesPage));d.get("/students/detail/:studentId",e=>e.html(je.studentDetailPage));d.get("/api/init-student-tables",async e=>{try{const{DB:t}=e.env;await t.prepare(`
      CREATE TABLE IF NOT EXISTS students (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        academy_id INTEGER DEFAULT 1,
        name TEXT NOT NULL,
        phone TEXT,
        parent_name TEXT NOT NULL,
        parent_phone TEXT NOT NULL,
        parent_email TEXT,
        grade TEXT NOT NULL,
        subjects TEXT NOT NULL,
        enrollment_date DATE NOT NULL,
        status TEXT DEFAULT 'active',
        notes TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
        updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `).run(),await t.prepare(`
      CREATE TABLE IF NOT EXISTS classes (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        academy_id INTEGER DEFAULT 1,
        class_name TEXT NOT NULL,
        grade TEXT,
        description TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `).run(),await t.prepare(`
      CREATE TABLE IF NOT EXISTS courses (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        academy_id INTEGER DEFAULT 1,
        course_name TEXT NOT NULL,
        description TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `).run();try{await t.prepare("ALTER TABLE students ADD COLUMN class_id INTEGER").run()}catch{console.log("class_id column already exists")}return await t.prepare(`
      CREATE TABLE IF NOT EXISTS daily_records (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        student_id INTEGER NOT NULL,
        course_id INTEGER,
        record_date DATE NOT NULL,
        attendance TEXT CHECK(attendance IN ('ì¶œì„', 'ì§€ê°', 'ê²°ì„', 'ì¡°í‡´')),
        homework_status TEXT CHECK(homework_status IN ('ì™„ë£Œ', 'ë¯¸ì™„ë£Œ', 'ë¶€ë¶„ì™„ë£Œ')),
        understanding_level INTEGER CHECK(understanding_level >= 1 AND understanding_level <= 5),
        participation_level INTEGER CHECK(participation_level >= 1 AND participation_level <= 5),
        achievement TEXT,
        memo TEXT,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      )
    `).run(),await t.prepare("CREATE INDEX IF NOT EXISTS idx_students_academy_id ON students(academy_id)").run(),await t.prepare("CREATE INDEX IF NOT EXISTS idx_classes_academy_id ON classes(academy_id)").run(),await t.prepare("CREATE INDEX IF NOT EXISTS idx_courses_academy_id ON courses(academy_id)").run(),await t.prepare("CREATE INDEX IF NOT EXISTS idx_students_class_id ON students(class_id)").run(),await t.prepare("CREATE INDEX IF NOT EXISTS idx_daily_records_student_id ON daily_records(student_id)").run(),await t.prepare("CREATE INDEX IF NOT EXISTS idx_daily_records_date ON daily_records(record_date)").run(),e.json({success:!0,message:"í•™ìƒ ê´€ë¦¬ í…Œì´ë¸”ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤! (students, classes, courses, daily_records)"})}catch(t){return e.json({success:!1,error:t.message},500)}});const Ke=new ze,Rs=Object.assign({"/src/index.tsx":d});let yt=!1;for(const[,e]of Object.entries(Rs))e&&(Ke.all("*",t=>{let s;try{s=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,s)}),Ke.notFound(t=>{let s;try{s=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,s)}),yt=!0);if(!yt)throw new Error("Can't import modules from ['/src/index.ts','/src/index.tsx','/app/server.ts']");export{Ke as default};
